{
  "id": 21169,
  "activeVersion": 30,
  "score": 26,
  "votableId": 24118403,
  "codingamerId": 1420817,
  "views": 429,
  "commentableId": 24001921,
  "title": "Level of nested parentheses",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "TheMagicShop",
  "publicHandle": "21169e3e05ecbd9aaf0ea54d95b01c8d9afe6",
  "codingamerHandle": "0e73cb33a67f1433b85ed9b2f7db1e5c7180241",
  "lastVersion": {
    "version": 30,
    "autocloseTime": 1661459163542,
    "data": {
      "title": "Level of nested parentheses",
      "topics": [
        {
          "labelMap": {
            "2": "parenthesis"
          }
        },
        {
          "id": 128,
          "handle": "ascii-art",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Ascii Art",
            "2": "Ascii Art"
          },
          "puzzleCount": 25,
          "parentTopicId": 93
        }
      ],
      "solution": "const f = readline();\nvar level = 0;\nvar levelMax = 0\nL = new Array(f.length).fill(\" \");\nfor(i in f)\n{\n    if(f[i] == \"(\")\n    {\n        level++;\n        if(level > levelMax) levelMax = level;\n        L[i] = level;\n    }\n    if(f[i] == \")\")\n    {\n        L[i] = level;\n        level--;\n    }\n}\nM = new Array(f.length).fill(\" \");\nfor(i in f)\n{\n    \n    if(f[i] == \"(\")\n    {\n        M[i] = -1;\n        var add= -1;\n        for(j = i-1; j >= 0; j--)\n        {\n            if(M[j]!=\" \")\n            {\n                if(f[j] == \"(\") add --;\n                if(f[j] == \")\") add ++;\n                if(M[j]<0)\n                {\n                    M[j]=add;\n                }\n            }\n        }\n    }\n    if(f[i] == \")\")\n    {\n       for(j = i - 1; j >= 0 && (M[j] > 0 || M[j] == \" \"); j--);\n       M[j] = -M[j];\n       M[i] =  M[j];\n    }\n}\n\nconsole.error(f, \"= f\");\nconsole.error(L.join(\"\"), \"= L\");\nconsole.error(M.join(\"\"), \"= M\");\nconsole.error();\n\nconsole.log(f);//first line\n\nif(levelMax)\n{\n    var txt=\"\"; for(i in f) if(L[i]!=\" \") txt+=\"^\"; else txt+=\" \"; console.log(txt);//line 2\n    var txt=\"\"; for(i in f) if(L[i]!=\" \") txt+=\"|\"; else txt+=\" \"; console.log(txt);//line 3\n\n    for(level=1;level<=levelMax;level++)//next levelMax lines\n    {\n        var txt=\"\";\n        var inside=false;\n        for(i in f)\n        {\n            if(M[i] && level<=M[i])\n            {\n                if(level<M[i]) txt+=\"|\";\n                if(level==M[i])\n                {\n                    txt+=L[i];\n                    inside=(f[i]==\"(\")    \n                }\n            }\n            else\n            if(inside) txt+=\"-\"; else txt+=\" \";\n        }\n        console.log(txt);\n    }\n}",
      "statement": "Output for each pair of matching parentheses their level of nesting in an ASCII art graphic style.\n\nThe input is a string [[f]] of size [[n]], with nested parentheses. Outermost parentheses have level-1, and each time a new pair of parentheses is nested into a previous one, its level is incremented by one, up to level-[[L]].\n\nThe output is the same line, followed by an ASCII graphic: for each pair of parentheses, under each parenthesis there must be an arrow pointing up ({{^}} and then {{|}} on the following line).\nThese arrows should be longer if they contain nested parentheses: in this case, additional {{|}} are added to the next line to make them longer. \nUnder these two arrows, there must be written the level of nesting (from {{1}} to {{9}}) and those two numbers are linked by a horizontal line made of repeated {{-}}.\n\nSimple example:\n`(simple)\n^      ^\n|      |\n1------1`\nNote that if a level-1 pair of parentheses does not contain any other parenthesis it will be displayed on the 4th line, as in this example. But, if in the same formula, in addition to this simple case, there is another pair of parentheses of level-1 containing a nested pair of parentheses of level-2 then this new level-1 will be shown on the 5th line (whereas the nested level-2 will occupy the 4th line). See test case 3 (\"Two levels, unbalanced\") for an example of level-1 statements being on two different lines.",
      "testCases": [
        {
          "title": "Only one level",
          "isTest": true,
          "testIn": "(a+b)*(c+d)=ac+ad+bc+bd",
          "testOut": "(a+b)*(c+d)=ac+ad+bc+bd\n^   ^ ^   ^            \n|   | |   |            \n1---1 1---1            ",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "(ax+b)*(cx+d)=acx^2+(ad+bc)x+bd",
          "testOut": "(ax+b)*(cx+d)=acx^2+(ad+bc)x+bd\n^    ^ ^    ^       ^     ^    \n|    | |    |       |     |    \n1----1 1----1       1-----1    ",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Two levels",
          "isTest": true,
          "testIn": "if((a&&!b) || (b&&!a))",
          "testOut": "if((a&&!b) || (b&&!a))\n  ^^     ^    ^     ^^\n  ||     |    |     ||\n  |2-----2    2-----2|\n  1------------------1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "while((a<b) && !(found>0))",
          "testOut": "while((a<b) && !(found>0))\n     ^^   ^     ^       ^^\n     ||   |     |       ||\n     |2---2     2-------2|\n     1-------------------1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Two levels, unbalanced",
          "isTest": true,
          "testIn": "(a(x+1)+b)^2=a^2(x+1)^2+2ab(x+1)+b^2",
          "testOut": "(a(x+1)+b)^2=a^2(x+1)^2+2ab(x+1)+b^2\n^ ^   ^  ^      ^   ^      ^   ^    \n| |   |  |      |   |      |   |    \n| 2---2  |      1---1      1---1    \n1--------1                          ",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "(a(x-1)+b)^3=a^3(x-1)^3+3a^2*b(x-1)^2+3*ab^2(x-1)+b^3",
          "testOut": "(a(x-1)+b)^3=a^3(x-1)^3+3a^2*b(x-1)^2+3*ab^2(x-1)+b^3\n^ ^   ^  ^      ^   ^         ^   ^         ^   ^    \n| |   |  |      |   |         |   |         |   |    \n| 2---2  |      1---1         1---1         1---1    \n1--------1                                           ",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Lisp",
          "isTest": true,
          "testIn": "(defun fact (n) \"factorial\" (if (<= n 1) 1 (* n (fact (- n 1))))) ",
          "testOut": "(defun fact (n) \"factorial\" (if (<= n 1) 1 (* n (fact (- n 1))))) \n^           ^ ^             ^   ^      ^   ^    ^     ^     ^^^^^ \n|           | |             |   |      |   |    |     |     ||||| \n|           2-2             |   3------3   |    |     5-----5|||| \n|                           |              |    4------------4||| \n|                           |              3------------------3|| \n|                           2----------------------------------2| \n1---------------------------------------------------------------1 ",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": " (defun rever (l &optional (acc '())) \"reverse (if (null l) acc (rever (cdr l) (cons (car l) acc))))",
          "testOut": " (defun rever (l &optional (acc '())) \"reverse (if (null l) acc (rever (cdr l) (cons (car l) acc))))\n ^            ^            ^     ^^^^          ^   ^      ^     ^      ^     ^ ^     ^     ^    ^^^^\n |            |            |     ||||          |   |      |     |      |     | |     |     |    ||||\n |            |            |     44||          |   3------3     |      4-----4 |     5-----5    ||||\n |            |            3-------3|          |                |              4----------------4|||\n |            2---------------------2          |                3--------------------------------3||\n |                                             2--------------------------------------------------2|\n 1-------------------------------------------------------------------------------------------------1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "No parenthesis",
          "isTest": true,
          "testIn": "if code=\"python\": #indent",
          "testOut": "if code=\"python\": #indent",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "list = [2, 3, 5, 7, 11];",
          "testOut": "list = [2, 3, 5, 7, 11];",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "The opening and closing parentheses in the input formula [[f]] are consistent\n0 ≤ [[L]] ≤ 9\n1 ≤ [[n]] ≤ 100",
      "coverBinaryId": 85563008122997,
      "stubGenerator": "read f:string(100)\nwrite solution",
      "inputDescription": "[[f]] a string containing a formula with parentheses",
      "solutionLanguage": "Javascript",
      "outputDescription": "<<line 1 :>> [[f]] the unchanged input formula\n<<[[L]]+2 next lines>>: a formatted ASCII string showing the level of nesting of each pair of parentheses ([[L]] being the maximum level of nested parentheses). All output lines must have the same size [[n]] ([[n]] being the size of the input string [[f]]): complete with spaces when necessary."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Output for each pair of matching parentheses their level of nesting in an ASCII art graphic style.<br><br>The input is a string <var>f</var> of size <var>n</var>, with nested parentheses. Outermost parentheses have level-1, and each time a new pair of parentheses is nested into a previous one, its level is incremented by one, up to level-<var>L</var>.<br><br>The output is the same line, followed by an ASCII graphic: for each pair of parentheses, under each parenthesis there must be an arrow pointing up (<const>^</const> and then <const>|</const> on the following line).<br>These arrows should be longer if they contain nested parentheses: in this case, additional <const>|</const> are added to the next line to make them longer. <br>Under these two arrows, there must be written the level of nesting (from <const>1</const> to <const>9</const>) and those two numbers are linked by a horizontal line made of repeated <const>-</const>.<br><br>Simple example:<br><pre style=\"font-family: monospace\">(simple)<br>^      ^<br>|      |<br>1------1</pre><br>Note that if a level-1 pair of parentheses does not contain any other parenthesis it will be displayed on the 4th line, as in this example. But, if in the same formula, in addition to this simple case, there is another pair of parentheses of level-1 containing a nested pair of parentheses of level-2 then this new level-1 will be shown on the 5th line (whereas the nested level-2 will occupy the 4th line). See test case 3 (&quot;Two levels, unbalanced&quot;) for an example of level-1 statements being on two different lines.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><var>f</var> a string containing a formula with parentheses</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>line 1 :</strong> <var>f</var> the unchanged input formula<br><strong><var>L</var>+2 next lines</strong>: a formatted ASCII string showing the level of nesting of each pair of parentheses (<var>L</var> being the maximum level of nested parentheses). All output lines must have the same size <var>n</var> (<var>n</var> being the size of the input string <var>f</var>): complete with spaces when necessary.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">The opening and closing parentheses in the input formula <var>f</var> are consistent<br>0 &le; <var>L</var> &le; 9<br>1 &le; <var>n</var> &le; 100</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">(a+b)*(c+d)=ac+ad+bc+bd</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">(a+b)*(c+d)=ac+ad+bc+bd\n^   ^ ^   ^            \n|   | |   |            \n1---1 1---1            </pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 111821587154,
  "avatar": 4468522326390,
  "commentCount": 28,
  "upVotes": 29,
  "downVotes": 3,
  "validateAction": {
    "actionId": 684938,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1658181937001,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1658864758840,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1658908211464,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}