{
  "id": 909,
  "activeVersion": 8,
  "score": 10,
  "votableId": 6335372,
  "codingamerId": 1418821,
  "views": 148,
  "commentableId": 6275752,
  "title": "Apple tree",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "input.txt",
  "publicHandle": "909e63cf244e7958c70a74518ed3aed210f",
  "codingamerHandle": "c96ef356539198f0d2256efec98bad501288141",
  "lastVersion": {
    "version": 8,
    "data": {
      "title": "Apple tree",
      "topics": [
        {
          "id": 154,
          "handle": "physics",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Physics",
            "2": "Physics"
          },
          "puzzleCount": 9,
          "parentTopicId": 93
        },
        {
          "id": 95,
          "handle": "geometry",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Geometry",
            "2": "Geometry"
          },
          "puzzleCount": 13,
          "parentTopicId": 93
        }
      ],
      "solution": "#include <algorithm>\n#include <iostream>\n#include <vector>\n\nstruct Apple {\n    int x, y, z, r;\n    \n    bool hits( Apple& a )\n    {\n        int px = x - a.x, py = y - a.y, pz = z - a.z;\n        int r2 = ( r + a.r ) * ( r + a.r );\n        if( px * px + py * py > r2 ) {\n            return false;\n        }\n        return pz > 0;\n    }\n};\n\nint main()\n{\n    int N, index;\n    std::cin >> N >> index;\n    \n    std::vector<char> falling( N, 0 );\n    falling[index] = 1;\n    \n    std::vector<Apple> apples( N );\n    for( auto& a : apples ) {\n        std::cin >> a.x >> a.y >> a.z >> a.r;\n    }\n    \n    std::vector<int> hit;\n    hit.push_back( index );\n\n    while( !hit.empty() ) {\n        int i = hit.back();\n        hit.pop_back();\n        for( int j = 0; j < N; ++j ) {\n            if( !falling[j] && apples[i].hits( apples[j] ) ) {\n                falling[j] = true;\n                hit.push_back( j );\n            }\n        }\n    }\n    \n    std::cout << std::count( falling.begin(), falling.end(), 0 ) << std::endl;\n}",
      "statement": "There are [[N]] apples on the tree. Every apple is a sphere with position ([[x]], [[y]], [[z]]) and radius [[r]].\nThen the [[i]]-th apple begins to fall straight down and can collide with others. When static apple gets hit by the falling one it begins to fall too, and the falling apple continues to fall straight down.\nYour task is to determine how many apples will remain on the tree.\n\n<<NOTE>>\n\"Down\" direction is vector ({{0}}, {{0}}, {{-1}}), i.e. position ({{0}}, {{0}}, {{10}}) is higher than ({{0}}, {{0}}, {{5}}).",
      "testCases": [
        {
          "title": "No collisions",
          "isTest": true,
          "testIn": "2 0\n0 0 100 10\n0 0 200 15",
          "testOut": "1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "No collisions",
          "isTest": false,
          "testIn": "2 0\n100 0 100 10\n0 0 100 10",
          "testOut": "1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Single collision",
          "isTest": true,
          "testIn": "6 5\n0 0 0 25\n200 200 0 25\n200 -200 0 25\n-200 200 0 25\n-200 -200 0 25\n5 10 500 10",
          "testOut": "4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Single collision",
          "isTest": false,
          "testIn": "4 0\n999 0 5000 30\n0 0 0 50\n500 0 0 50\n1000 0 0 50",
          "testOut": "2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Multiple collisions",
          "isTest": true,
          "testIn": "5 0\n0 0 10000 100\n-100 0 0 10\n100 0 0 10\n0 100 0 10\n0 -100 0 10",
          "testOut": "0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Multiple collisions",
          "isTest": false,
          "testIn": "4 1\n0 10 0 10\n0 0 500 3\n50 0 100 50\n0 50 200 10",
          "testOut": "1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Cascade",
          "isTest": true,
          "testIn": "8 5\n0 500 100 3\n0 0 0 500\n500 0 1000 100\n600 0 2000 50\n650 0 3000 50\n700 0 5000 1\n800 0 4000 5\n800 0 3000 10",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Cascade",
          "isTest": false,
          "testIn": "5 4\n0 0 0 10\n10 0 100 10\n20 0 150 10\n20 10 200 10\n20 20 300 10",
          "testOut": "0",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Multiple cascades",
          "isTest": true,
          "testIn": "10 1\n0 0 1000000 13\n0 0 100000 100\n150 0 99000 100\n-150 0 90000 100\n300 0 80000 100\n-300 0 89000 100\n400 0 5000 50\n500 0 0 10\n-450 0 50000 100\n500 500 99999 42",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Multiple cascades",
          "isTest": false,
          "testIn": "11 5\n66 -122 100000 42\n255 -38 111111 42\n80 123 600000 42\n36 184 598234 42\n66 -122 600000 42\n0 0 666000 42\n0 -80 123456 42\n66 45 660000 42\n-60 -128 122222 42\n-43 187 583485 42\n-142 11 543210 42",
          "testOut": "3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Tower",
          "isTest": true,
          "testIn": "100 52\n10 4 139 10\n5 -8 278 10\n4 2 417 10\n3 10 556 10\n-9 9 695 10\n8 3 834 10\n8 2 973 10\n-7 8 1112 10\n2 -5 1251 10\n-7 3 1390 10\n7 4 1529 10\n8 -1 1668 10\n10 3 1807 10\n4 -9 1946 10\n7 5 2085 10\n10 7 2224 10\n-4 -8 2363 10\n-6 -4 2502 10\n9 7 2641 10\n-5 -6 2780 10\n8 -1 2919 10\n-6 9 3058 10\n5 -2 3197 10\n-3 1 3336 10\n3 9 3475 10\n5 5 3614 10\n-2 1 3753 10\n10 3 3892 10\n-4 -1 4031 10\n3 4 4170 10\n0 4 4309 10\n-5 -8 4448 10\n-9 -8 4587 10\n-1 -7 4726 10\n3 7 4865 10\n-5 7 5004 10\n3 9 5143 10\n-8 -5 5282 10\n0 4 5421 10\n4 -8 5560 10\n-3 0 5699 10\n10 -8 5838 10\n-1 -9 5977 10\n0 -4 6116 10\n6 7 6255 10\n5 1 6394 10\n-9 -7 6533 10\n10 -2 6672 10\n3 5 6811 10\n8 7 6950 10\n9 0 7089 10\n0 5 7228 10\n5 -2 7367 10\n5 -5 7506 10\n-3 -10 7645 10\n7 5 7784 10\n-1 -6 7923 10\n-9 -5 8062 10\n3 6 8201 10\n-4 -5 8340 10\n0 5 8479 10\n1 -3 8618 10\n4 10 8757 10\n-2 -5 8896 10\n8 2 9035 10\n2 -3 9174 10\n6 7 9313 10\n7 -2 9452 10\n-9 3 9591 10\n10 4 9730 10\n0 -7 9869 10\n1 -5 10008 10\n8 -4 10147 10\n10 7 10286 10\n-2 -4 10425 10\n-2 3 10564 10\n9 8 10703 10\n-5 6 10842 10\n1 9 10981 10\n9 3 11120 10\n-9 -5 11259 10\n-4 6 11398 10\n-5 -4 11537 10\n-3 9 11676 10\n7 -5 11815 10\n-4 -6 11954 10\n10 -5 12093 10\n9 7 12232 10\n-8 2 12371 10\n-6 -3 12510 10\n-6 6 12649 10\n8 -4 12788 10\n-9 5 12927 10\n5 1 13066 10\n1 -3 13205 10\n-8 -9 13344 10\n6 -10 13483 10\n-4 -4 13622 10\n-7 1 13761 10\n-4 5 13900 10",
          "testOut": "47",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Tower",
          "isTest": false,
          "testIn": "100 73\n31 32 4515 100\n52 0 9030 100\n2 -65 13545 100\n-16 -6 18060 100\n97 78 22575 100\n-96 -86 27090 100\n-82 -22 31605 100\n-37 87 36120 100\n67 15 40635 100\n-1 -21 45150 100\n84 4 49665 100\n-78 73 54180 100\n-17 51 58695 100\n100 -55 63210 100\n-94 -7 67725 100\n-77 -29 72240 100\n-32 89 76755 100\n-96 89 81270 100\n57 56 85785 100\n56 50 90300 100\n23 -92 94815 100\n-90 11 99330 100\n40 -73 103845 100\n-43 47 108360 100\n-34 -31 112875 100\n2 83 117390 100\n89 85 121905 100\n73 14 126420 100\n88 39 130935 100\n-39 99 135450 100\n-15 88 139965 100\n21 -2 144480 100\n-67 45 148995 100\n-91 -35 153510 100\n1 -56 158025 100\n-97 -69 162540 100\n7 -40 167055 100\n70 9 171570 100\n-30 -100 176085 100\n-77 -43 180600 100\n10 -100 185115 100\n53 -85 189630 100\n84 62 194145 100\n-59 -23 198660 100\n-10 55 203175 100\n75 83 207690 100\n8 29 212205 100\n-50 23 216720 100\n29 43 221235 100\n91 14 225750 100\n-71 -31 230265 100\n72 56 234780 100\n48 89 239295 100\n62 -79 243810 100\n-77 -95 248325 100\n89 -12 252840 100\n-60 28 257355 100\n-61 -34 261870 100\n52 30 266385 100\n91 -70 270900 100\n27 -65 275415 100\n-16 -85 279930 100\n-21 51 284445 100\n54 67 288960 100\n39 -19 293475 100\n0 28 297990 100\n-84 -43 302505 100\n-64 -54 307020 100\n24 -94 311535 100\n96 -33 316050 100\n97 6 320565 100\n-89 14 325080 100\n-17 -72 329595 100\n-21 -70 334110 100\n-40 -57 338625 100\n-90 -47 343140 100\n19 72 347655 100\n-33 17 352170 100\n85 47 356685 100\n-95 58 361200 100\n27 -84 365715 100\n-80 5 370230 100\n20 -13 374745 100\n-96 34 379260 100\n96 -16 383775 100\n-85 -32 388290 100\n64 -79 392805 100\n81 17 397320 100\n42 -63 401835 100\n23 -92 406350 100\n-45 12 410865 100\n23 27 415380 100\n68 10 419895 100\n29 14 424410 100\n92 -35 428925 100\n-90 32 433440 100\n-59 59 437955 100\n69 -52 442470 100\n77 -2 446985 100\n13 53 451500 100",
          "testOut": "26",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "hard",
      "constraints": "1 ≤ [[N]] < 100\n0 ≤ [[i]] < [[N]]\n-1,000,000 ≤ [[x]], [[y]], [[z]] ≤ 1,000,000\n1 ≤ [[r]] < 1,000,000",
      "stubGenerator": "read N:int index:int\nloop N read x:int y:int z:int r:int\nwrite 0",
      "inputDescription": "<<Line 1>> Two space-separated integers [[N]] and [[i]] – the number of apples and index of the falling apple\n<<Next [[N]] lines>> Four space-separated integers [[x]], [[y]], [[z]] and [[r]] – position and radius of the apple",
      "solutionLanguage": "C++",
      "outputDescription": "A single integer – number of remaining apples"
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">There are <var>N</var> apples on the tree. Every apple is a sphere with position (<var>x</var>, <var>y</var>, <var>z</var>) and radius <var>r</var>.<br>Then the <var>i</var>-th apple begins to fall straight down and can collide with others. When static apple gets hit by the falling one it begins to fall too, and the falling apple continues to fall straight down.<br>Your task is to determine how many apples will remain on the tree.<br><br><strong>NOTE</strong><br>&quot;Down&quot; direction is vector (<const>0</const>, <const>0</const>, <const>-1</const>), i.e. position (<const>0</const>, <const>0</const>, <const>10</const>) is higher than (<const>0</const>, <const>0</const>, <const>5</const>).</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1</strong> Two space-separated integers <var>N</var> and <var>i</var> &ndash; the number of apples and index of the falling apple<br><strong>Next <var>N</var> lines</strong> Four space-separated integers <var>x</var>, <var>y</var>, <var>z</var> and <var>r</var> &ndash; position and radius of the apple</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">A single integer &ndash; number of remaining apples</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">1 &le; <var>N</var> &lt; 100<br>0 &le; <var>i</var> &lt; <var>N</var><br>-1,000,000 &le; <var>x</var>, <var>y</var>, <var>z</var> &le; 1,000,000<br>1 &le; <var>r</var> &lt; 1,000,000</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">2 0\n0 0 100 10\n0 0 200 15</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">1</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 262498542485,
  "avatar": 13393616028136,
  "commentCount": 6,
  "upVotes": 10,
  "downVotes": 0,
  "validateAction": {
    "actionId": 158304,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}