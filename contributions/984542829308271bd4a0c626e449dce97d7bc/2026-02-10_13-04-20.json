{
  "id": 98454,
  "activeVersion": 19,
  "score": 38,
  "votableId": 34150096,
  "codingamerId": 1200044,
  "views": 398,
  "commentableId": 33999621,
  "title": "Word Chain Game",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "Nekomancer60",
  "publicHandle": "984542829308271bd4a0c626e449dce97d7bc",
  "codingamerHandle": "56c73748b40311049b79acdd66b426984400021",
  "lastVersion": {
    "version": 19,
    "autocloseTime": 1728135593366,
    "freezeTime": 1720788955471,
    "data": {
      "title": "Word Chain Game",
      "topics": [
        {
          "id": 60,
          "handle": "dynamic-programming",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Programmation dynamique",
            "2": "Dynamic programming"
          },
          "pageTitle": "Dynamic programming: exercises and theory",
          "puzzleCount": 32,
          "parentTopicId": 41,
          "contentDetailsId": 85
        }
      ],
      "solution": "from functools import cache\n\nn = int(input())\nwords = [input() for _ in range(n)]\n\ndef hash(words_left):\n    res = 0\n    for i in range(n):\n        if words[i] in words_left:\n            res += 2**i\n    return res\n\ndef unhash(num):\n    res = set()\n    for i in range(n):\n        if (1<<i) & num:\n            res.add(words[i])\n    return res\n\n@cache\ndef who_wins(num, last_letter):\n    words_left = unhash(num)\n    if not words_left:\n        return -1\n\n    results = set()\n    if last_letter is None:\n        # first turn - you can choose anything\n        for w in words_left:\n            words_left_temp = words_left.copy()\n            words_left_temp.remove(w)\n            results.add(-who_wins(hash(words_left_temp), w[-1]))\n\n    else:\n        for w in words_left:\n            if w[0] == last_letter:\n                words_left_temp = words_left.copy()\n                words_left_temp.remove(w)\n                results.add(-who_wins(hash(words_left_temp), w[-1]))\n\n    if 1 in results:\n        return 1\n    else:\n        return -1\n\nans = who_wins((1<<n)-1, None)\nif ans == 1:\n    print('Alice')\nelse:\n    print('Bob')",
      "statement": "Alice and Bob are going to play a word chain game. The two players take alternating turns, with Alice going first. \n\nIn this game, the players are given a shared word list consisting of [[N]] words. All words in the word list are distinct.\n\nOn each player's turn, the player can choose any word from the word list that satisfies the following two conditions:\n- The word has not been chosen before by either player.\n- Other than the first turn of the game, the first character of the chosen word must be the same as the last character of the previous word.\n\nIf a player is unable to choose a word satisfying the above conditions, that player loses and the other player wins.\n\nDetermine who wins, if both players play optimally.",
      "testCases": [
        {
          "title": "Animals",
          "isTest": true,
          "testIn": "4\ndog\ngoat\ncat\ntoad",
          "testOut": "Alice",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Small (validator)",
          "isTest": false,
          "testIn": "5\ntea\narc\ncow\nwin\nnot",
          "testOut": "Alice",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "One Word",
          "isTest": true,
          "testIn": "1\ncodingame",
          "testOut": "Alice",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "One Word (validator)",
          "isTest": false,
          "testIn": "1\nanepayzprb",
          "testOut": "Alice",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Same Letters",
          "isTest": true,
          "testIn": "6\nantenna\nalpaca\namnesia\nagenda\naorta\narmada",
          "testOut": "Bob",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Same Letters (Validator)",
          "isTest": false,
          "testIn": "8\nracer\nracecar\nregenerator\nremover\nreservoir\nrhymer\nroar\nrustier",
          "testOut": "Bob",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Countries",
          "isTest": true,
          "testIn": "8\nargentina\naustralia\nchad\ndenmark\ndomrepublic\niran\nkiribati\nnewzealand",
          "testOut": "Bob",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "8 words (validator)",
          "isTest": false,
          "testIn": "8\nadministered\nestablish\nghetto\nhoax\nloving\nnuclei\noutgrow\nsleepiest",
          "testOut": "Alice",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "League of Legends",
          "isTest": true,
          "testIn": "12\nleague\nlegends\nahri\naphelios\nevelynn\nezreal\nirelia\nivern\nnami\nnidalee\nsamira\nsol",
          "testOut": "Bob",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "12 words (validator)",
          "isTest": false,
          "testIn": "12\napple\nbanana\neggplant\nelderberry\nlemon\nlychee\nmango\nnectarine\norange\npineapple\ntangerine\nyam",
          "testOut": "Alice",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "More Animals",
          "isTest": true,
          "testIn": "16\nalbatross\nalligator\neagle\nelephant\nlion\nllama\nnightingale\nnarwhal\nrooster\nraccoon\nrat\nsnake\nsquirrel\ntiger\ntoucan\nturtle",
          "testOut": "Alice",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "16 words (validator)",
          "isTest": false,
          "testIn": "16\nkayak\nxylograph\nhoax\noz\nkilowattrel\nzero\nsuccess\nsulfuric\nshrubs\nkinetic\ncheckbook\nzax\nknockback\nxyz\ncrashes\nleak",
          "testOut": "Bob",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "More Same Letters",
          "isTest": true,
          "testIn": "16\ntit\ntat\ntext\ntoot\ntreat\ntheft\nteapot\ntoilet\ntakeout\ntonight\nteleport\ntreatment\ntournament\ntransparent\ntroubleshoot\ntrolled",
          "testOut": "Alice",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "16 words - same letters (validator)",
          "isTest": false,
          "testIn": "16\nee\neke\neme\nene\nere\neve\newe\nexe\neye\nease\nedge\nelse\neagle\neasle\nelite\nevoke",
          "testOut": "Bob",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "1 ≤ [[N]] ≤ 16\nThe words in the word list are at most 12 letters long.\nThe words in the word list are all distinct.",
      "coverBinaryId": 125712402786695,
      "stubGenerator": "read N:int\nloop N read word:string(12)\n\nwrite winner",
      "inputDescription": "<<Line 1:>> An integer [[N]]: the number of words in the word list.\n<<Next [[N]] lines:>> A single string - a word in the word list.",
      "solutionLanguage": "Python3",
      "outputDescription": "Print {{Alice}} or {{Bob}}, the winner of the game."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Alice and Bob are going to play a word chain game. The two players take alternating turns, with Alice going first. <br><br>In this game, the players are given a shared word list consisting of <var>N</var> words. All words in the word list are distinct.<br><br>On each player's turn, the player can choose any word from the word list that satisfies the following two conditions:<br>- The word has not been chosen before by either player.<br>- Other than the first turn of the game, the first character of the chosen word must be the same as the last character of the previous word.<br><br>If a player is unable to choose a word satisfying the above conditions, that player loses and the other player wins.<br><br>Determine who wins, if both players play optimally.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> An integer <var>N</var>: the number of words in the word list.<br><strong>Next <var>N</var> lines:</strong> A single string - a word in the word list.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">Print <const>Alice</const> or <const>Bob</const>, the winner of the game.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">1 &le; <var>N</var> &le; 16<br>The words in the word list are at most 12 letters long.<br>The words in the word list are all distinct.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">4\ndog\ngoat\ncat\ntoad</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">Alice</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 43036152330,
  "avatar": 36523383873142,
  "commentCount": 26,
  "upVotes": 38,
  "downVotes": 0,
  "validateAction": {
    "actionId": 1009003,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1722776737001,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1722945514415,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "REFUSED",
      "date": 1725537937002,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1725543593366,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1727692506984,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}