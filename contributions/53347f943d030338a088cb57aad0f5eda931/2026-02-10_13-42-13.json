{
  "id": 5334,
  "activeVersion": 15,
  "score": 17,
  "votableId": 14710591,
  "codingamerId": 3913376,
  "views": 418,
  "commentableId": 14629978,
  "title": "Particle Detection with Cloud Chamber",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "LaurentValade",
  "publicHandle": "53347f943d030338a088cb57aad0f5eda931",
  "codingamerHandle": "72bd7ba983594c9de54dec4ebe51949e6733193",
  "lastVersion": {
    "version": 15,
    "autocloseTime": 1602778012279,
    "data": {
      "title": "Particle Detection with Cloud Chamber",
      "topics": [
        {
          "id": 128,
          "handle": "ascii-art",
          "labelMap": {
            "1": "Ascii Art",
            "2": "Ascii Art"
          },
          "puzzleCount": 3,
          "parentTopicId": 93
        },
        {
          "id": 154,
          "handle": "physics",
          "labelMap": {
            "1": "Physics",
            "2": "Physics"
          },
          "puzzleCount": 3,
          "parentTopicId": 93
        },
        {
          "id": 73,
          "handle": "strings",
          "labelMap": {
            "1": "Chaînes de caractères",
            "2": "Strings"
          },
          "pageTitle": "Strings: exercises and theory",
          "puzzleCount": 17,
          "parentTopicId": 41,
          "contentDetailsId": 73
        },
        {
          "labelMap": {
            "2": "Least-squares"
          }
        },
        {
          "labelMap": {
            "2": "Gradient descent"
          }
        }
      ],
      "solution": "from math import inf, pi\nfrom sys import stderr\n\n# Constantes\nc = 299792458.  # m/s\ne = 1.602176634e-19  # C\n\n# Entrées\nw = int(input())\nh = int(input())\nB = float(input())\nV = float(input())\nlines = []\nfor _ in range(h):\n    lines.append(input())\n\ndef gamma(beta):\n    \"\"\"Facteur de Lorentz\"\"\"\n    return (1. - beta**2)**-.5\n\n# Affichage\nstderr = {'file': stderr, 'flush': True}\nprint(f\"w = {w}\", **stderr)\nprint(f\"h = {h}\", **stderr)\nprint(f\"V = {V}\", **stderr)\nprint(f\"{''.join(lines)}\", **stderr)\n\n# =============================================================================\n# Récupération de la trajectoire de la particule\nx_n, y_n = [], []\nfor index_y, row in enumerate(lines):\n    index_x = row.find(' ')\n    while index_x != -1:\n        x_n.append(index_x)\n        y_n.append(index_y)\n        index_x = row.find(' ', index_x + 1)\n\n# =============================================================================\n# Ajustement d’un arc de cercle\n# (x - x_c)**2 + (y - y_c)**2 = R**2\ndef distance(x_a, y_a, x_b, y_b):\n    \"\"\"Calcule la distance euclidienne entre deux points\n    à partir de leur coordonnées cartésiennes.\n    \"\"\"\n    return ((x_a - x_b)**2 + (y_a - y_b)**2)**.5\n\n\ndef compute_S(x, y):\n    \"\"\"Calcul S : la somme des carrés des diffénces deux-à-deux des \n    distances entre des points de donnés censés être sur un cercle et\n    un point M (qu’on voudrait faire converger vers le centre du cercle.\n    \"\"\"\n    S = 0.\n    d_ii = [distance(x, y, x_i, y_i)\n            for x_i, y_i in zip(x_n, y_n)]\n    #\n    for i, d_i in enumerate(d_ii):\n        for d_j in d_ii[i + 1:]:\n            S += (d_i - d_j)**2\n    #\n    return S\n\n\ndef compute_gradS(x, y):\n    \"\"\"Calcul le gradient de S.\n    Si on a besoin des deux dérivées de S (par rapport à x et y),\n    alors c’est plus rapide d’appeler cette fonction plutot que\n    les deux fonctions dédiées.\n    \"\"\"\n    #\n    d_ii = [distance(x, y, x_i, y_i)\n            for x_i, y_i in zip(x_n, y_n)]\n    #\n    dS_dx, dS_dy = 0., 0.\n    for i, (x_i, y_i, d_i) in enumerate(zip(x_n, y_n, d_ii)):\n        for x_j, y_j, d_j in zip(x_n[i + 1:], y_n[i + 1:], d_ii[i + 1:]):\n            dS_dx += 2 * (d_i - d_j) * ((x - x_i) / d_i - (x - x_j) / d_j)\n            dS_dy += 2 * (d_i - d_j) * ((y - y_i) / d_i - (y - y_j) / d_j)\n    return dS_dx, dS_dy\n\n# -----------------------------------------------------------------------------\n# Descente de gradient\n# Point de départ : barycentre des points\nx = sum(x_n) / len(x_n)\ny = sum(y_n) / len(y_n)\n#\nS = inf\nabs_dS_over_S = inf\nhistory_x, history_y = [], []\nit_count = 0\nwhile S > 1e-6 and abs_dS_over_S > 1e-3 and it_count < 100:\n    # Calcul du gradient de S\n    gradS = compute_gradS(x, y)\n    norme_gradS = (gradS[0]**2 + gradS[1]**2)**.5\n    dS_dx, dS_dy = gradS\n    # Direction de descente, cf\n    # https://en.wikipedia.org/wiki/Gradient_descent\n    # Normaliser la direction de descente permet d’éviter que α prenne\n    # des valeurs trop extrême à cause de valeurs extrême (mais inverses)\n    # du gradient de S\n    d_x = -dS_dx / norme_gradS\n    d_y = -dS_dy / norme_gradS\n    # Recherche linéaire de γ, cf\n    # https://fr.wikipedia.org/wiki/Recherche_lin%C3%A9aire_(optimisation)\n    alpha = 0\n    d_alpha = 1e-9  # pas pour la dérivée\n    D_alpha = .1  # pas pour la dichotomie\n    jt_count = 0\n    while abs(D_alpha) > 1e-6 and jt_count < 20:\n        # Différentielle de S\n        S_alpha_moins = compute_S(x + (alpha - d_alpha) * d_x,\n                                  y + (alpha - d_alpha) * d_y)\n        S_alpha_plus  = compute_S(x + (alpha + d_alpha) * d_x,\n                                  y + (alpha + d_alpha) * d_y)\n        d_S_alpha = S_alpha_plus - S_alpha_moins\n        #\n        if jt_count > 0:\n            if d_S_alpha * old_d_S_alpha < 0:\n                # Alors on a (re-)dépassé le minimum\n                D_alpha *= -.5\n        # Sauvegarde de l’ancienne différentielle\n        old_d_S_alpha = d_S_alpha\n        # MàJ\n        alpha += D_alpha\n        jt_count += 1\n    # Prochaine position\n    x = x + alpha * d_x\n    y = y + alpha * d_y\n    # Calcul de S sur la nouvelle position\n    if it_count > 0:\n        old_S = S  # sauvegarde\n    S = compute_S(x, y)\n    if it_count > 0:\n        abs_dS_over_S = abs(S - old_S) / old_S if old_S != 0 else abs(S - old_S)\n        # ^ On poursuit les itérations seulement si S évolu\n        #   suffisamment entre deux itération.\n        #   Cette condition supplémentaire permet d’éviter un bouclage\n        #   infini quand, à cause du bruit, le S vers lequel on doit converger\n        #   est trop éloigné de zéro.\n    # MàJ\n    it_count += 1\n\nprint(f\"\\n{it_count} itérations\", **stderr)\n\n# Centre calculé depuis les données\ncenter_x_recompute, center_y_recompute = x, y\n\n# Calcul du rayon comme moyenne des distances entre le centre recalculé\n# et les points P_i\nR_recompute = 0\nfor x_i, y_i in zip(x_n, y_n):\n    R_recompute += distance(center_x_recompute, center_y_recompute, x_i, y_i)\nR_recompute /= len(x_n)\n\n# =============================================================================\n# Identification de la particule\n\n# -----------------------------------------------------------------------------\n# Somme des distances à la droite\ndef distance_point_to_line(x_1, y_1, x_2, y_2, x_point, y_point):\n    \"\"\"Calcul la distance entre un point de coordonnées\n    (x_point, y_point)\n    et le point le plus proche de la droite passant par les deux points\n    (x_1, y_1)\n    (x_2, y_2)\n    cf\n    https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n    \"\"\"\n    return abs((y_2 - y_1) * x_point - (x_2 - x_1) * y_point\n               + x_2 * y_1 - x_1 * y_2) \\\n            / ((x_2 - x_1)**2 + (y_2 - y_1)**2)**.5\n\n\nsum_distances_to_line = 0.\nfor x_i, y_i in zip(x_n, y_n):\n    sum_distances_to_line += distance_point_to_line(x_n[0], y_n[0], x_n[-1], y_n[-1], x_i, y_i)\nprint(f\"sum_distances_to_line = {sum_distances_to_line}\", **stderr)\n\n# -----------------------------------------------------------------------------\n# Somme des distances au cercle\ndef distance_point_to_circle(x_center, y_center, R, x_point, y_point):\n    \"\"\"Calcule la distance entre un point de coordonnées\n    (x_point, y_point)\n    et le point le plus proche sur le cercle de centre\n    (x_center, y_center)\n    et de rayon\n    R. Cf\n    https://www.varsitytutors.com/hotmath/hotmath_help/topics/shortest-distance-between-a-point-and-a-circle\n    \"\"\"\n    return abs(((x_point - x_center)**2 + (y_point - y_center)**2)**.5 - R)\n\nsum_distances_to_circle = 0.\nfor x_i, y_i in zip(x_n, y_n):\n    sum_distances_to_circle += \\\n            distance_point_to_circle(center_x_recompute, center_y_recompute,\n                                     R_recompute,\n                                     x_i, y_i)\nprint(f\"sum_distances_to_circle = {sum_distances_to_circle}\", **stderr)\n\n# -----------------------------------------------------------------------------\n# Identification\nparticles = {\n    'e-':    {'q': -1, 'm':     .511},\n    'p+':    {'q':  1, 'm':  938.},\n    'n0':    {'q':  0, 'm':  940.},\n    'alpha': {'q':  2, 'm': 3727.},\n    'pi+':   {'q':  1, 'm':  140.},\n}\nif sum_distances_to_line <= sum_distances_to_circle:\n    # C’est une particule neutre\n    print(f\"n0 inf\")\nelse:\n    # C’est une particule chargée : calcul de son ration masse/charge\n    measured_abscharge_to_mass_ratio = gamma(V) * V * 1e6 / (B * R_recompute * c)\n    print(f\"    Mesure : |q|/m = {measured_abscharge_to_mass_ratio:12.6g}\", **stderr)\n    min_gap = inf\n    unknown_particle = True\n    gap_threshold = .5  # seuil au dessus duquel on n’identifie pas la particule\n    for name, properties in particles.items():\n        abscharge_to_mass_ratio = abs(properties['q']) / properties['m']\n        if properties['q'] != 0:\n            gap = abs(abscharge_to_mass_ratio - measured_abscharge_to_mass_ratio) / abscharge_to_mass_ratio\n            print(f\"    {name:5s}  : |q|/m = {abscharge_to_mass_ratio:12.6g} ; gap = {gap:12.6g}\", **stderr)\n            if gap < min_gap and gap < gap_threshold:\n                min_gap = gap\n                closest_particle = name\n                unknown_particle = False\n    #\n    round_R_recompute = int(round(R_recompute / 10.) * 10)\n    if unknown_particle:\n        print(\"I just won the Nobel prize in physics !\")\n    else:\n        print(f\"{closest_particle} {round_R_recompute}\")\n\n",
      "statement": "A cloud chamber allows scientists to visualize the passage of ionizing radiation such as electrons, protons, alphas, etc.\n\nEvery particles should go straight without forces, but a magnetic field bends trajectories of electric charged particles. Then, trajectories of charged particles are (part of) circle.\n\nOur cloud chamber is such that particles can only arrive from top side (other sides are behind thick lead wall), and one at a time.\n\nThe aim is to detect which particle has just passed through the cloud chamber.\nThe available measurement are\n— [[V]], the speed of the particle (in speed-of-light unit),\n— [[B]], the intensity of the magnetic field (in tesla),\n— ASCII-art picture of the trajectory of the particle through the cloud chamber (<<characters are one meter wide and one meter high>>).\n\nThe radius of circle (in meters) of a charged particle is given by `R = 1e6 * gamma(V) * m * V / (abs(q) * B * c)` where\n— <<m>> is the mass of the particle (in MeV/c²),\n— <<q>> is the charge of the particle (in unit-charge unit),\n— <<c = 299792458.>> is the speed of light (in meters per second),\n— [[V]] is the speed of the particle (in speed-of-light unit),\n— [[B]] is the magnetic field strength (in tesla),\n— <<gamma(V)>> is the Lorentz factor (dimensionless), given by `gamma(V) = 1 / sqrt(1 - V*V)`\n\nThe radius should be computed from the input ASCII-art picture, then, formula above gives the ratio <<g = abs(q) / m>> : `g = abs(q) / m = 1e6 * gamma(V) * V / (B * R * c)`\nThus, the cloud chamber allows only to measure the ratio <<g = abs(q) / m>>.\nMass and charges are given in the table below for every known particles (within this puzzle of course).\n\n`Particle    Charge    Mass  Symbol\n                 q        m       \n----------------------------------\nElectron        -1    0.511     e- \nProton          +1  938.0       p+\nNeutron          0  940.0       n0\nAlpha           +2 3727.0    alpha\nPion π⁺         +1  140.0      pi+`\n\n<<About uncertainty>>\n\nThe code should <<return the symbol of the particle and the computed radius>> (if the particle is not neutral). In experimental physics, we can never get exact numeric values (especially if input data is ASCII-art picture!), therefore, the radius should be given <<rounded to the nearest multiple of 10>>.\nLikewise, the ratio <<g = abs(q)/m>> could not be computed exactly. Let’s note <<g_p>> the theoritical value of particle <<p>> (given in the table above) and <<G>> the computed value from ASCII-art picture with the formula above.\nThe particle <<p>> which just passed through the cloud chamber is the one with the minimal value of `abs(g_p - G) / g_p` only if this value is stricly below <<.5>>, i.e. : `abs(g_p - G) / g_p < .5`\nIf <<G>> is such that `abs(g_p - G) / g_p >= .5` for every known particles (those in the table above), one can conclude that the particle which just passed through the cloud chamber is unknown (as its value of <<abs(q)/m>> is too far from every known particle).",
      "testCases": [
        {
          "title": "Test 1",
          "isTest": true,
          "testIn": "32\n16\n0.2997064475852639\n0.9\n#### ###########################\n##### ##########################\n###### #########################\n####### ########################\n######## #######################\n######### ######################\n########## #####################\n########### ####################\n############ ###################\n############# ##################\n############## #################\n############### ################\n################ ###############\n################# ##############\n################## #############\n################### ############",
          "testOut": "n0 inf",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "32\n16\n0.13545092535981484\n0.9\n################ ###############\n################# ##############\n################## #############\n################### ############\n#################### ###########\n##################### ##########\n###################### #########\n####################### ########\n######################## #######\n######################### ######\n########################## #####\n########################### ####\n############################ ###\n############################# ##\n############################## #\n############################### ",
          "testOut": "n0 inf",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 2",
          "isTest": true,
          "testIn": "64\n32\n0.00017596889646748781\n0.9\n################ ####################################### #######\n################ ####################################### #######\n################ ####################################### #######\n################ ####################################### #######\n################  #####################################  #######\n################# ##################################### ########\n################# ##################################### ########\n################# ##################################### ########\n#################  ###################################  ########\n################## ################################### #########\n##################  #################################  #########\n###################  ###############################  ##########\n#################### ############################### ###########\n####################  #############################  ###########\n#####################  ###########################  ############\n######################  #########################  #############\n#######################   #####################   ##############\n#########################  ###################  ################\n##########################   ###############   #################\n############################     #######     ###################\n################################         #######################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################",
          "testOut": "e- 20",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "64\n32\n0.21534093266340976\n0.9\n#### ###########################################################\n#### ###########################################################\n#### ###########################################################\n#### ###########################################################\n#### ###########################################################\n####  ##########################################################\n##### ######################################################### \n##### ######################################################### \n##### ######################################################### \n#####  #######################################################  \n###### ####################################################### #\n###### ####################################################### #\n######  #####################################################  #\n####### ##################################################### ##\n#######  ###################################################  ##\n######## ################################################### ###\n########  #################################################  ###\n#########  ###############################################  ####\n########## ############################################### #####\n##########  #############################################  #####\n###########  ###########################################  ######\n############  #########################################  #######\n#############  #######################################  ########\n##############  #####################################  #########\n###############   #################################   ##########\n#################  ###############################  ############\n##################   ###########################   #############\n####################   #######################   ###############\n######################    #################    #################\n#########################     ##########    ####################\n#############################           ########################\n################################################################",
          "testOut": "p+ 30",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 3",
          "isTest": true,
          "testIn": "32\n32\n0.031445936865868086\n0.1\n#############         ##########\n###########   #######   ########\n##########  ###########  #######\n#########  #############  ######\n########  ###############  #####\n######## ################# #####\n######## #################  ####\n#######  ################## ####\n####### ################### ####\n####### ################### ####\n####### ################### ####\n####### ################### ####\n#######  ################## ####\n######## #################  ####\n######## ################# #####\n########  ###############  #####\n#########  #############  ######\n##########  ###########  #######\n###########   ########  ########\n#############         ##########\n#################  #############\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################",
          "testOut": "p+ 10",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "32\n32\n1.7130995456778884e-05\n0.1\n#########         ##############\n#######   #######   ############\n######  ###########  ###########\n#####  #############  ##########\n####  ###############  #########\n#### ################# #########\n###  ################# #########\n### ##################  ########\n### ################### ########\n### ################### ########\n### ################### ########\n### ################### ########\n### ##################  ########\n###  ################# #########\n#### ################# #########\n####  ###############  #########\n#####  #############  ##########\n######  ###########  ###########\n#######  ########   ############\n#########         ##############\n############  ##################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################",
          "testOut": "e- 10",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 4",
          "isTest": true,
          "testIn": "32\n64\n0.00518645955979207\n0.05\n ###############################\n ###############################\n ###############################\n ###############################\n ###############################\n ###############################\n ###############################\n ###############################\n  ##############################\n# ##############################\n# ##############################\n# ##############################\n# ##############################\n#  #############################\n## #############################\n## #############################\n## #############################\n##  ############################\n### ############################\n### ############################\n###  ###########################\n#### ###########################\n#### ###########################\n####  ##########################\n##### ##########################\n#####  #########################\n###### #########################\n######  ########################\n####### ########################\n#######  #######################\n######## #######################\n########  ######################\n#########  #####################\n########## #####################\n##########  ####################\n###########  ###################\n############ ###################\n############  ##################\n#############  #################\n##############  ################\n###############  ###############\n################  ##############\n#################  #############\n##################  ############\n###################  ###########\n####################  ##########\n#####################  #########\n######################  ########\n#######################   ######\n#########################  #####\n##########################   ###\n############################  ##\n#############################   \n############################### \n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################",
          "testOut": "alpha 60",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "32\n64\n0.0004675745672364195\n0.05\n#### ###########################\n#### ###########################\n#### ###########################\n#### ###########################\n#### ###########################\n#### ###########################\n#### ###########################\n####  ##########################\n##### ##########################\n##### ##########################\n##### ##########################\n##### ##########################\n#####  #########################\n###### #########################\n###### #########################\n###### #########################\n######  ########################\n####### ########################\n#######  #######################\n######## #######################\n######## #######################\n########  ######################\n######### ######################\n#########  #####################\n########## #####################\n##########  ####################\n###########  ###################\n############ ###################\n############  ##################\n#############  #################\n############## #################\n##############  ################\n###############  ###############\n################  ##############\n#################  #############\n##################  ############\n###################  ###########\n####################  ##########\n#####################  #########\n######################  ########\n#######################   ######\n#########################  #####\n##########################   ###\n############################  ##\n#############################   \n############################### \n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################",
          "testOut": "pi+ 50",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 5",
          "isTest": true,
          "testIn": "32\n32\n0.00953238801373396\n0.2\n#######         ################\n#####   #######   ##############\n####  ###########  #############\n###  #############  ############\n##  ###############  ###########\n## ################# ###########\n## #################  ##########\n#  ################## ##########\n# ################### ##########\n# ################### ##########\n# ################### ##########\n# ################### ##########\n#  ################## ##########\n## #################  ##########\n## ################# ###########\n##  ###############  ###########\n###  #############  ############\n####  ###########  #############\n#####   ########  ##############\n#######         ################\n###########  ###################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################",
          "testOut": "pi+ 10",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "32\n32\n0.12688289331138025\n0.2\n###############         ########\n#############   #######   ######\n############  ###########  #####\n###########  #############  ####\n##########  ###############  ###\n########## ################# ###\n########## #################  ##\n#########  ################## ##\n######### ################### ##\n######### ################### ##\n######### ################### ##\n######### ################### ##\n#########  ################## ##\n########## #################  ##\n########## ################# ###\n##########  ###############  ###\n###########  #############  ####\n############  ###########  #####\n#############   ########  ######\n###############         ########\n###################  ###########\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################\n################################",
          "testOut": "alpha 10",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 6",
          "isTest": true,
          "testIn": "64\n32\n5.865629882249593e-05\n0.9\n########  ######################################################\n#########    ###################################################\n############   #################################################\n##############   ###############################################\n#################  #############################################\n##################   ###########################################\n####################   #########################################\n######################  ########################################\n#######################   ######################################\n#########################  #####################################\n##########################  ####################################\n###########################  ###################################\n############################   #################################\n##############################  ################################\n###############################  ###############################\n################################  ##############################\n#################################  #############################\n##################################  ############################\n################################### ############################\n###################################  ###########################\n####################################  ##########################\n#####################################  #########################\n###################################### #########################\n####################################### ########################\n#######################################  #######################\n######################################## #######################\n########################################  ######################\n#########################################  #####################\n########################################## #####################\n##########################################  ####################\n########################################### ####################\n###########################################  ###################",
          "testOut": "e- 60",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 6",
          "isTest": false,
          "testIn": "64\n32\n0.12920455959804583\n0.9\n#######################################################  #######\n####################################################    ########\n##################################################   ###########\n################################################   #############\n##############################################   ###############\n############################################   #################\n###########################################  ###################\n##########################################  ####################\n########################################   #####################\n#######################################  #######################\n######################################  ########################\n#####################################  #########################\n####################################  ##########################\n###################################  ###########################\n##################################  ############################\n#################################  #############################\n################################  ##############################\n################################ ###############################\n############################### ################################\n##############################  ################################\n#############################  #################################\n############################# ##################################\n############################  ##################################\n############################ ###################################\n###########################  ###################################\n########################### ####################################\n##########################  ####################################\n########################## #####################################\n#########################  #####################################\n######################### ######################################\n########################  ######################################\n######################## #######################################",
          "testOut": "p+ 50",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 7",
          "isTest": true,
          "testIn": "64\n32\n8.200839716585387e-06\n0.5\n## ######################################################## ####\n##  ####################################################### ####\n### ###################################################### #####\n### ###################################################### #####\n###  ####################################################  #####\n#### #################################################### ######\n####  ##################################################  ######\n#####  ################################################  #######\n###### ################################################ ########\n######  ##############################################  ########\n#######  ############################################  #########\n########  ##########################################  ##########\n#########  ########################################  ###########\n##########  ######################################  ############\n###########  ####################################  #############\n############   ################################   ##############\n##############  ##############################  ################\n###############   ##########################   #################\n#################   ######################   ###################\n###################    ################    #####################\n######################      ######      ########################\n###########################        #############################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################",
          "testOut": "I just won the Nobel prize in physics !",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "64\n32\n3.280335886634155e-05\n0.5\n######################################################## #######\n#######################################################  #######\n ###################################################### ########\n ###################################################### ########\n  ####################################################  ########\n# #################################################### #########\n#  ##################################################  #########\n##  ################################################  ##########\n### ################################################ ###########\n###  ##############################################  ###########\n####  ############################################  ############\n#####  ##########################################  #############\n######  ########################################  ##############\n#######  ######################################  ###############\n########  ####################################  ################\n#########   ################################   #################\n###########  ##############################  ###################\n############   ##########################   ####################\n##############   ######################   ######################\n################    ################    ########################\n###################      ######      ###########################\n########################        ################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################",
          "testOut": "e- 30",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 8",
          "isTest": true,
          "testIn": "64\n32\n0.0002990534811933685\n0.99\n############################################################## #\n#############################################################  #\n############################################################# ##\n############################################################# ##\n############################################################  ##\n############################################################ ###\n###########################################################  ###\n########################################################### ####\n##########################################################  ####\n#########################################################  #####\n######################################################### ######\n########################################################  ######\n#######################################################  #######\n####################################################### ########\n###################################################### #########\n#####################################################  #########\n####################################################  ##########\n###################################################  ###########\n#################################################   ############\n ###############################################  ##############\n  #############################################  ###############\n#   #########################################   ################\n###  #######################################  ##################\n####   ###################################  ####################\n######   ###############################   #####################\n########    #########################   ########################\n###########    ##################     ##########################\n##############        #####       ##############################\n#####################       ####################################\n################################################################\n################################################################\n################################################################",
          "testOut": "e- 40",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 8",
          "isTest": false,
          "testIn": "64\n32\n9.968449373112282e-05\n0.99\n## ######################################################## ####\n##  ####################################################### ####\n### ###################################################### #####\n### ###################################################### #####\n###  ####################################################  #####\n#### #################################################### ######\n####  ##################################################  ######\n#####  ################################################  #######\n###### ################################################ ########\n######  ##############################################  ########\n#######  ############################################  #########\n########  ##########################################  ##########\n#########  ########################################  ###########\n##########  ######################################  ############\n###########  ####################################  #############\n############   ################################   ##############\n##############  ##############################  ################\n###############   ##########################   #################\n#################   ######################   ###################\n###################    ################    #####################\n######################      ######      ########################\n###########################        #############################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################\n################################################################",
          "testOut": "I just won the Nobel prize in physics !",
          "isValidator": true,
          "needValidation": false
        }
      ],
      "difficulty": "medium",
      "constraints": "16 ≤ [[w]], [[h]] ≤ 128",
      "coverBinaryId": 48153541079345,
      "stubGenerator": "read w:int\nread h:int\nread B:string(30)\nread V:float\n\nloop h read line:string(128)\n\nwrite symbol radius\n\nSTATEMENT\nDetect which particle just passed through the cloud chamber,\nif unknown, you may win the Nobel prize of physics!\n\nINPUT\nw: width of ASCII-art picture (one meter per column)\nh: height of ASCII-art picture (one meter per line)\nB: strengh of magnetic field (tesla)\nV: speed of the particle (speed-of-light unit)\nline: lines of ASCII-art picture\n\nOUTPUT\n\"<symbol> <radius>\" if charged particle\n\"<symbol> inf\" if neutral particle\n\"I just won the Nobel prize in physics !\" if unknown particle",
      "inputDescription": "<<Line 1:>> An integer [[w]] width of the picture.\n<<Line 2:>> An integer [[h]] height of the picture.\n<<Line 3:>> A float [[B]] magnetic field (tesla), which may be in scientific notation\n<<Line 4:>> A float [[V]] speed of the particle (speed-of-light unit).\n<<Next [[h]] lines:>> [[picture]] : ASCII-art photography of cloud chamber, with space on particle path and <<#>> everywhere else.",
      "solutionLanguage": "Python3",
      "outputDescription": "Output depends of the nature of the detected particle :\n— <<symbol inf>> if neutral particle,\n— <<symbol radius>> if charged particle,\n— <<I just won the Nobel prize in physics !>> if unknown particle."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">A cloud chamber allows scientists to visualize the passage of ionizing radiation such as electrons, protons, alphas, etc.<br><br>Every particles should go straight without forces, but a magnetic field bends trajectories of electric charged particles. Then, trajectories of charged particles are (part of) circle.<br><br>Our cloud chamber is such that particles can only arrive from top side (other sides are behind thick lead wall), and one at a time.<br><br>The aim is to detect which particle has just passed through the cloud chamber.<br>The available measurement are<br>&mdash; <var>V</var>, the speed of the particle (in speed-of-light unit),<br>&mdash; <var>B</var>, the intensity of the magnetic field (in tesla),<br>&mdash; ASCII-art picture of the trajectory of the particle through the cloud chamber (<strong>characters are one meter wide and one meter high</strong>).<br><br>The radius of circle (in meters) of a charged particle is given by <pre style=\"font-family: monospace\">R = 1e6 * gamma(V) * m * V / (abs(q) * B * c)</pre> where<br>&mdash; <strong>m</strong> is the mass of the particle (in MeV/c&sup2;),<br>&mdash; <strong>q</strong> is the charge of the particle (in unit-charge unit),<br>&mdash; <strong>c = 299792458.</strong> is the speed of light (in meters per second),<br>&mdash; <var>V</var> is the speed of the particle (in speed-of-light unit),<br>&mdash; <var>B</var> is the magnetic field strength (in tesla),<br>&mdash; <strong>gamma(V)</strong> is the Lorentz factor (dimensionless), given by <pre style=\"font-family: monospace\">gamma(V) = 1 / sqrt(1 - V*V)</pre><br><br>The radius should be computed from the input ASCII-art picture, then, formula above gives the ratio <strong>g = abs(q) / m</strong> : <pre style=\"font-family: monospace\">g = abs(q) / m = 1e6 * gamma(V) * V / (B * R * c)</pre><br>Thus, the cloud chamber allows only to measure the ratio <strong>g = abs(q) / m</strong>.<br>Mass and charges are given in the table below for every known particles (within this puzzle of course).<br><br><pre style=\"font-family: monospace\">Particle    Charge    Mass  Symbol<br>                 q        m       <br>----------------------------------<br>Electron        -1    0.511     e- <br>Proton          +1  938.0       p+<br>Neutron          0  940.0       n0<br>Alpha           +2 3727.0    alpha<br>Pion &pi;⁺         +1  140.0      pi+</pre><br><br><strong>About uncertainty</strong><br><br>The code should <strong>return the symbol of the particle and the computed radius</strong> (if the particle is not neutral). In experimental physics, we can never get exact numeric values (especially if input data is ASCII-art picture!), therefore, the radius should be given <strong>rounded to the nearest multiple of 10</strong>.<br>Likewise, the ratio <strong>g = abs(q)/m</strong> could not be computed exactly. Let&rsquo;s note <strong>g_p</strong> the theoritical value of particle <strong>p</strong> (given in the table above) and <strong>G</strong> the computed value from ASCII-art picture with the formula above.<br>The particle <strong>p</strong> which just passed through the cloud chamber is the one with the minimal value of <pre style=\"font-family: monospace\">abs(g_p - G) / g_p</pre> only if this value is stricly below <strong>.5</strong>, i.e. : <pre style=\"font-family: monospace\">abs(g_p - G) / g_p &lt; .5</pre><br>If <strong>G</strong> is such that <pre style=\"font-family: monospace\">abs(g_p - G) / g_p &gt;= .5</pre> for every known particles (those in the table above), one can conclude that the particle which just passed through the cloud chamber is unknown (as its value of <strong>abs(q)/m</strong> is too far from every known particle).</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> An integer <var>w</var> width of the picture.<br><strong>Line 2:</strong> An integer <var>h</var> height of the picture.<br><strong>Line 3:</strong> A float <var>B</var> magnetic field (tesla), which may be in scientific notation<br><strong>Line 4:</strong> A float <var>V</var> speed of the particle (speed-of-light unit).<br><strong>Next <var>h</var> lines:</strong> <var>picture</var> : ASCII-art photography of cloud chamber, with space on particle path and <strong>#</strong> everywhere else.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">Output depends of the nature of the detected particle :<br>&mdash; <strong>symbol inf</strong> if neutral particle,<br>&mdash; <strong>symbol radius</strong> if charged particle,<br>&mdash; <strong>I just won the Nobel prize in physics !</strong> if unknown particle.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">16 &le; <var>w</var>, <var>h</var> &le; 128</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">32\n16\n0.2997064475852639\n0.9\n#### ###########################\n##### ##########################\n###### #########################\n####### ########################\n######## #######################\n######### ######################\n########## #####################\n########### ####################\n############ ###################\n############# ##################\n############## #################\n############### ################\n################ ###############\n################# ##############\n################## #############\n################### ############</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">n0 inf</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 170368192003,
  "avatar": 47390627049317,
  "commentCount": 39,
  "upVotes": 17,
  "downVotes": 0,
  "validateAction": {
    "actionId": 492036,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1600185937000,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1600185997533,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1600362740502,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}