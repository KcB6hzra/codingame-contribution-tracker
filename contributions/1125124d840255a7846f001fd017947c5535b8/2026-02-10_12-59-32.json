{
  "id": 112512,
  "activeVersion": 96,
  "score": 28,
  "votableId": 35643003,
  "codingamerId": 5192217,
  "views": 644,
  "commentableId": 35487679,
  "title": "Pandora's Bridges",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "Harry.B.",
  "publicHandle": "1125124d840255a7846f001fd017947c5535b8",
  "codingamerHandle": "d926a93cb394ded661b204822965c5fa7122915",
  "lastVersion": {
    "version": 96,
    "autocloseTime": 1753011601243,
    "freezeTime": 1751024401243,
    "data": {
      "title": "Pandora's Bridges",
      "topics": [
        {
          "id": 48,
          "handle": "graphs",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Graphes",
            "2": "Graphs"
          },
          "pageTitle": "Graphs: exercises and theory",
          "puzzleCount": 39,
          "parentTopicId": 40,
          "contentDetailsId": 75
        },
        {
          "id": 81,
          "handle": "trigonometry",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Trigonométrie",
            "2": "Trigonometry"
          },
          "pageTitle": "Trigonometry: exercises and theory",
          "puzzleCount": 16,
          "parentTopicId": 43,
          "contentDetailsId": 74
        },
        {
          "id": 191,
          "handle": "3d",
          "category": "ADVANCED",
          "labelMap": {
            "1": "3D",
            "2": "3D"
          },
          "puzzleCount": 6,
          "parentTopicId": 93
        },
        {
          "id": 75,
          "handle": "distance",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Distances",
            "2": "Distances"
          },
          "pageTitle": "Distances: exercises and theory",
          "puzzleCount": 28,
          "parentTopicId": 43,
          "contentDetailsId": 70
        }
      ],
      "solution": "# Import for angle calculations and floor divison truncating.\nfrom math import atan\nfrom math import pi\nfrom math import floor\n\n# Class for storing an island.\nclass Island():\n    def __init__(self, x, y, z):\n        self.x = x\n        self.y = y\n        self.z = z\n    def distance_to(self, island): return ((self.x - island.x)**2 + (self.y - island.y)**2 + (self.z - island.z)**2) ** 0.5\n    def get_coords(self): return [self.x , self.y, self.z]\n    def angle_and_distance(self, neighbour):\n        #Toa - Opposite is ∆Z and adjacent is ∆xy\n        x2, y2, z2 = neighbour.get_coords()\n        distance = self.distance_to(neighbour)\n        horizontal_distance = ((x2 - self.x)**2 + (y2 - self.y)**2) ** 0.5\n        if horizontal_distance == 0:\n            angle = 90\n        else:\n            angle = atan(abs(z2 - self.z)/horizontal_distance)*(180/pi)\n        return distance, angle\n\n# Array for storing islands.\nislands = [Island(1,1,1)]\n\n# Populate islands array with n islands.\nn = int(input())\nfor i in range(n):\n    x, y, z = map(float, input().split())\n    assert -3000 <= x <= 3000, f\"{x} X not in range\"\n    assert -3000 <= y <= 3000, f\"{y} Y not in range\"\n    assert 1 <= z <= 5000, f\"{z} Z not in range\"\n    islands.append(Island(x,y,z))\n\n# Form graph.\nDISTANCE_THRESHOLD = 1000\nANGLE_THRESHOLD = 45\nedges = []\nfor i, island in enumerate(islands):\n    for j in range(i+1,len(islands)):\n        distance, angle = island.angle_and_distance(islands[j])\n        if angle < ANGLE_THRESHOLD and distance <= DISTANCE_THRESHOLD:\n            edges.append([distance, i, j])\n\n# Kruskal's Algorithm for MST.\nedges.sort(key=lambda x: x[0])\nparent = list(range(len(islands)))\nrank = [0] * len(islands)  \ntotal_distance = 0\nleftover_wood = []\n\n# Function to find representative for a tree.\ndef find_rep(node):\n    if parent[node] != node:\n        parent[node] = find_rep(parent[node])\n    return parent[node]\n\n# Function to combine two trees into one.\ndef union(u, v):\n    u_rep = find_rep(u)\n    v_rep = find_rep(v)\n    if u_rep != v_rep:\n        if rank[u_rep] > rank[v_rep]:\n            parent[v_rep] = u_rep\n        elif rank[u_rep] < rank[v_rep]:\n            parent[u_rep] = v_rep\n        else:\n            parent[v_rep] = u_rep\n            rank[u_rep] += 1\n\n# Find the total minimum distance for connecting the islands and store weights.\nweights = []\nfor weight, u, v in edges:\n    if find_rep(u) != find_rep(v):\n        union(u, v)\n        total_distance += weight\n        weights.append(weight)\n\n# Find minimum leftover wood by building bridges from largest to smallest.\nweights = weights[::-1]\nleftover_wood = []\nfor weight in weights:\n    reused_tree_idx = next((i for i, tree in enumerate(leftover_wood) if tree >= weight), None)\n    if reused_tree_idx is not None:\n        leftover_wood[reused_tree_idx] -= weight\n    else:\n        leftover_wood.append(DISTANCE_THRESHOLD - weight)\n\n# Output the total distance and the number of logs used.\nprint(\"%.2f\"%(floor(total_distance*100)/100))\nprint(len(leftover_wood))\n\n# TESTING: Ensure that all islands are in the same tree.\nfinal_representatives = set(find_rep(i) for i in range(len(islands)))\nassert len(final_representatives) == 1, f\"Disconnected representatives: {final_representatives}\"",
      "statement": "<<Pandora is in crisis!>>\nThe Ikrans have been eradicated by the Sky People in an attempt to gain the upper hand in their invasion. Pandora is a world full of floating islands and the Ikrans were the Na'vi's only way of navigating between them. It's imperative that the Na'vi can travel between all the islands. The Na'vi have only one option and must fell trees and use the wood for bridges between the islands. However, there is a problem... Trees are sacred to the Na'vi and cutting them down is the last thing they want to do.\n\nThe goal is to find the <<MINIMUM>> length of wood required to connect <<ALL>> the islands together <<AND>> the number of trees needed to do so.\n\n<<Coordinates:>>\nCoordinates are provided in units of Pandorian meters, where a difference of <<1>> in any axis ([[x]], [[y]], or [[z]]) corresponds to a distance of <<1>> Pandorian meter. These coordinates represent the location of the Tree of Voices on each island. Any bridges made to an island <<MUST>> connect to this location.\n\nCoordinates are given in a 3D Cartesian coordinate system, where the [[x]] and [[y]] axes form the horizontal plane, and the [[z]] axis is vertical.\n\n<<Connecting Islands:>>\nNa'vi are primitive and they have not yet been able to master carpentry or civil engineering. Therefore, islands can only be connected to one another if the distance between them is <<LESS THAN OR EQUAL>> to the tree length. All trees on Pandora are of a uniform length of {{1000}} Pandorian meters. Although wood cannot be combined, it can be cut into two pieces of variable lengths with perfect precision.\n\nNa'vi are fantastic climbers but unfortunately the children are still learning. Therefore, each bridge must be walkable. A bridge is considered walkable if the angle between the bridge and the horizontal plane is <<LESS THAN>> {{45}} degrees.\n\nTwo islands are considered to be connected if there exists <<ANY>> path between. This includes either a direct bridge between them or through an indirect connection using the bridges of other islands.\n\n<<Building Bridges and Leftover Wood:>>\nAfter a tree is felled, it can be cut to the exact required length for a bridge. The unused portion becomes leftover wood. Bridges are always built from the <<LONGEST>> to the <<SHORTEST>>. The Na'vi attempt to reuse leftover wood before felling another tree. For each bridge, always cut from the <<EARLIEST>> leftover - based on the order it was felled - that is <<GREATER THAN OR EQUAL TO>> the required bridge length. If no existing leftover is sufficient, they fell a new tree.\n\n<<Connecting to the Ground:>>\nThe Na'vi need to be able to access the islands from the ground. Ensure the islands connect <<AT LEAST ONCE>> to the Hometree at position: [[x]] = 1, [[y]] = 1, [[z]] = 1.",
      "testCases": [
        {
          "title": "Small Islands",
          "isTest": true,
          "testIn": "10\n-421.93 -79.09 203.71\n-232.56 139.11 56.32\n112.61 96.19 106.98\n-171.87 459.38 387.22\n-2.51 487.02 90.6\n-192.61 212.0 246.17\n356.21 -173.75 324.16\n-184.27 -51.73 200.88\n-157.9 -240.06 496.54\n-358.51 -332.42 84.25",
          "testOut": "2999.93\n4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Small Islands",
          "isTest": false,
          "testIn": "10\n-634.57 -546.74 256.35\n293.18 -302.11 210.19\n-502.32 227.81 456.03\n-476.84 537.57 928.42\n-617.74 697.81 898.26\n928.0 334.0 661.05\n120.68 715.6 130.62\n491.3 -524.61 896.25\n185.85 -661.9 367.37\n320.23 -433.16 582.47",
          "testOut": "6325.43\n7",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Distance Checker",
          "isTest": true,
          "testIn": "4\n709.12 707.09 1.0\n1414.24 1416.17 1.0\n2123.33 2121.28 1.0\n2830.45 2828.37 1.0",
          "testOut": "3999.98\n4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Distance Checker",
          "isTest": false,
          "testIn": "4\n709.12 1.0 707.09\n1416.23 708.09 707.09\n2123.33 1415.20 707.09\n2830.45 2122.28 707.09",
          "testOut": "3999.97\n4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Angle Checker",
          "isTest": true,
          "testIn": "5\n50.00 100.00 111.41\n99.94 50.00 111.42\n111.41 45.34 120.00\n100.00 200.00 223.21\n250.09 100.00 403.51",
          "testOut": "655.04\n1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Angle Checker",
          "isTest": false,
          "testIn": "4\n500.21 500.00 706.80\n550.00 550.00 804.80\n750.00 500.00 598.61\n800.00 700.00 804.80",
          "testOut": "1935.40\n2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Vertical and Horizontal",
          "isTest": true,
          "testIn": "5\n1.00 1.00 100.00\n100.00 100.00 1.00\n1.00 1.00 500.00\n250.00 250.00 250.00\n250.00 1250.00 250.00",
          "testOut": "2126.09\n3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Vertical and Horizontal",
          "isTest": false,
          "testIn": "6\n708.00 708.00 2.00\n708.00 708.00 1.00\n1415.00 1415.00 1.00\n1415.00 1415.00 2.00\n1605.00 1605.00 50.00\n2309.00 2315.19 50.01",
          "testOut": "4545.62\n5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Medium Islands",
          "isTest": true,
          "testIn": "27\n41.78 292.85 937.28\n675.05 435.96 94.05\n263.17 670.99 101.81\n49.45 152.06 447.03\n324.36 454.15 41.59\n273.94 598.2 705.52\n846.91 161.91 917.01\n872.69 303.18 551.89\n118.13 586.99 5.69\n302.75 596.49 85.79\n670.29 262.2 169.23\n971.33 130.16 701.51\n731.12 828.52 891.0\n461.49 779.79 310.73\n557.12 690.15 257.84\n995.78 82.33 941.02\n118.38 830.46 398.56\n144.85 58.91 38.01\n563.77 853.26 875.06\n214.76 136.99 275.65\n255.63 625.21 203.85\n909.77 0.68 828.64\n477.74 927.78 318.71\n693.73 133.8 511.05\n213.54 718.02 322.1\n367.98 504.73 288.94\n201.2 622.17 911.43",
          "testOut": "7340.66\n8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Medium Islands",
          "isTest": false,
          "testIn": "27\n401.0 815.44 200.98\n689.24 480.4 203.97\n66.74 170.67 787.28\n348.41 744.58 656.3\n815.25 584.2 1.10\n243.99 21.21 743.65\n273.09 521.66 68.75\n915.52 127.61 669.59\n249.21 195.17 617.31\n203.27 465.69 289.07\n628.19 158.57 512.45\n976.32 404.55 171.88\n708.16 114.89 37.57\n552.0 929.73 261.56\n268.33 540.9 505.41\n555.49 58.24 182.56\n153.94 132.29 676.18\n665.97 287.35 769.72\n167.15 868.46 972.95\n288.76 486.2 748.96\n741.79 660.45 180.46\n849.45 797.6 661.18\n384.25 19.96 858.13\n652.78 744.64 563.68\n481.5 780.08 199.72\n826.44 462.63 142.44\n275.28 768.42 87.76",
          "testOut": "7370.81\n8",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Lots of Islands",
          "isTest": true,
          "testIn": "100\n-593.18 -23.61 2823.99\n-1949.51 496.86 1193.19\n-325.72 -1277.83 3631.3\n-157.54 265.58 1875.01\n-760.54 -1649.81 452.83\n-1375.45 -404.72 2091.82\n-1616.19 -318.16 4833.28\n-612.83 115.6 3322.28\n-44.29 -425.76 1162.58\n-348.49 -656.52 3356.65\n-1636.39 1866.81 3757.42\n-1935.23 -1758.19 50.77\n-1369.56 -1520.92 164.46\n-42.99 -1232.37 2291.63\n-896.73 751.54 3869.17\n-1658.96 -939.08 23.6\n-1583.02 -1935.61 804.2\n-192.78 680.38 568.23\n-916.57 -645.84 2150.98\n-293.04 -399.09 2774.94\n-1714.28 1190.26 1515.42\n-16.23 798.99 254.28\n15.07 1585.06 4088.18\n-632.00 1899.18 2364.53\n-1730.59 -1964.14 363.03\n-754.4 1178.02 948.16\n-572.59 990.47 2036.97\n-18.49 -1401.83 4328.05\n-825.84 502.49 2171.35\n-233.34 -539.47 4266.30\n-381.07 -1650.26 3625.1\n-134.00 -309.86 3130.68\n-367.6 -366.75 1194.12\n-1126.36 -293.25 1776.70\n-1164.11 1713.3 4124.82\n-1909.94 1882.95 3029.59\n-1224.9 522.1 170.21\n197.92 886.25 1521.87\n-548.5 -280.17 2153.13\n-238.22 -1415.19 2913.76\n-1030.7 -1262.93 2218.26\n-515.25 644.09 2283.91\n-1023.58 -1123.99 252.11\n-302.82 -1565.98 3902.86\n-776.93 1283.02 4570.66\n-569.25 -44.65 2248.27\n-22.09 285.41 4464.4\n-1078.99 1604.2 3238.11\n-1119.11 -1748.45 4289.50\n-835.13 648.87 1767.13\n-207.16 -183.22 621.0\n-1239.94 855.06 4495.25\n-565.08 -1741.9 3424.39\n-1980.72 -1484.79 337.04\n-1352.02 -1483.29 1864.8\n-248.56 1605.2 4063.5\n-1631.52 26.73 1900.57\n-558.43 724.94 2757.23\n-389.04 -1181.28 4858.95\n143.41 -1889.58 4311.05\n-1460.28 -482.46 190.37\n-1154.9 1428.67 1326.48\n-1516.53 837.81 1242.05\n-1570.93 1945.17 1093.08\n-724.99 1618.95 2169.29\n178.16 1320.89 232.95\n-1427.24 -768.02 2414.23\n-1521.3 -1637.27 2764.87\n-714.17 -1627.86 1708.00\n-1856.74 -265.56 4617.07\n-1193.48 -1286.98 3122.59\n-1414.42 1878.16 4202.96\n-1628.83 -986.1 2296.0\n-1779.56 1074.26 2595.39\n-353.89 254.59 4349.06\n-0.83 74.2 1152.95\n-1479.35 469.48 1764.29\n-1848.94 353.96 2228.81\n-1766.56 1742.95 2641.31\n-452.12 -224.85 4504.05\n-1634.18 156.31 4356.35\n-196.55 -885.19 159.07\n-1171.59 330.15 3664.9\n-1737.11 458.82 2476.66\n193.52 -1972.61 3667.01\n-474.57 -408.91 1779.73\n-1476.75 1095.34 1291.73\n196.53 -1347.36 1825.79\n-652.98 -1068.21 2736.9\n-743.09 -1389.83 306.91\n-419.75 -233.55 1532.42\n-1470.72 -1080.0 1837.64\n-452.6 -167.28 4738.49\n-517.68 -654.97 1366.85\n-769.61 186.02 4014.21\n-65.95 799.06 467.2\n-997.27 96.28 2253.21\n-1735.1 1613.96 1037.00\n-63.99 -209.56 2399.04\n-1552.35 465.06 214.45",
          "testOut": "57829.20\n69",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Lots of Islands",
          "isTest": false,
          "testIn": "101\n1000 -1000 1600.01\n-54.03 -1857.46 233.1\n1284.99 -584.62 1651.58\n1763.06 426.95 1479.33\n-984.47 -28.68 783.34\n1769.12 -1788.55 138.95\n654.49 -1615.81 883.98\n-1226.89 219.26 1015.24\n-637.46 -1112.6 747.92\n1623.5 -1328.9 1118.33\n-1329.82 1769.5 1096.74\n-1004.07 889.06 187.49\n1277.51 1801.26 1133.84\n1648.06 1996.15 43.47\n-740.37 -1898.32 1515.28\n495.64 -500.04 706.91\n1295.73 1158.94 1622.87\n316.42 1459.72 736.98\n-619.95 951.65 1323.33\n-1796.36 1594.35 389.22\n958.81 1561.02 647.28\n1589.98 -1321.89 687.04\n1421.41 -945.27 1009.3\n-1048.11 1541.08 1406.8\n-1687.2 -130.89 474.58\n688.41 -955.5 1168.04\n1667.08 592.2 542.47\n83.95 1357.96 1778.56\n491.85 1443.91 739.5\n-1251.25 18.3 1684.04\n-1881.69 -1311.07 1310.01\n-1233.42 1590.01 903.73\n-493.7 636.47 863.96\n1938.55 -1439.65 387.55\n-944.01 -560.45 1184.34\n-453.39 459.8 1792.89\n-1039.02 -174.39 172.6\n-1251.44 -724.29 1308.56\n-1467.65 -945.79 1441.19\n417.81 -613.89 1611.33\n-387.75 404.28 1449.76\n1023.51 -1583.73 192.96\n-1974.43 1058.5 1268.03\n928.21 62.15 977.44\n1089.01 1533.85 250.53\n-641.03 1164.62 1708.3\n98.48 992.8 325.52\n576.49 1330.24 702.59\n311.54 -1388.53 1042.94\n1732.59 -1791.17 342.59\n-1474.07 -623.83 1435.99\n1796.89 790.57 1839.85\n171.05 1388.79 1700.27\n-1182.43 1056.34 1217.52\n-251.62 1499.94 1299.94\n-179.36 -360.86 1242.97\n877.7 -461.69 1050.51\n-627.73 951.19 1015.91\n-1015.89 262.28 11.73\n-1471.78 1592.5 434.77\n1090.49 295.96 1179.37\n848.25 1276.59 565.89\n1838.24 1159.14 954.15\n-506.54 -1306.68 1611.0\n-196.13 113.62 643.18\n1069.61 -1076.85 912.72\n316.74 240.03 910.4\n-424.84 182.33 1783.13\n123.5 935.84 316.39\n783.53 524.77 1141.13\n-755.98 1794.23 1343.91\n1694.46 -507.18 485.14\n992.08 1118.98 23.32\n-1472.45 582.3 184.74\n-1602.04 -996.15 394.96\n-447.99 -16.01 1768.86\n1023.86 -1928.36 1760.54\n1104.11 138.34 1838.59\n717.87 118.89 355.67\n-1275.33 1232.73 1405.56\n-258.31 -102.15 1480.7\n442.5 60.78 60.41\n603.59 623.79 1348.15\n-352.0 647.62 109.01\n1945.15 1184.85 1656.07\n-500.87 303.54 1288.99\n616.53 -1483.49 581.04\n1279.57 -181.22 1618.76\n1092.57 1412.03 1877.96\n208.45 334.08 1013.61\n-895.24 346.96 403.28\n-39.03 1412.07 1292.91\n-1271.15 -280.75 378.93\n-1643.41 -850.68 131.95\n1339.68 -538.9 1560.5\n-1067.11 -1987.14 1506.1\n-631.24 -29.71 1206.0\n-762.02 1821.95 1257.73\n1323.22 -304.57 1821.78\n20.95 818.39 726.16\n-854.59 548.75 890.41",
          "testOut": "51659.65\n55",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Lots Lots of Islands",
          "isTest": true,
          "testIn": "203\n652.33 125.3 1805.91\n-564.96 352.98 1905.69\n1057.46 -1561.74 2477.32\n824.08 -1725.28 1060.38\n-2479.09 179.54 2834.89\n-1502.81 -926.15 2273.52\n-1833.27 2011.72 1054.66\n-1636.38 1545.92 1676.06\n1384.78 1425.57 309.61\n-1263.24 1834.6 2992.19\n1287.47 2027.67 60.68\n-434.34 509.84 3298.16\n-1889.8 310.27 1540.45\n94.02 -67.46 220.12\n513.74 91.77 1395.6\n1265.63 -267.63 720.22\n615.82 377.34 2423.74\n687.34 173.55 2385.8\n-131.19 2078.1 3000.5\n-600.46 88.97 292.65\n384.25 -1543.86 3442.14\n-983.73 2318.64 80.89\n1281.57 -2457.23 54.68\n-2305.92 1505.9 3099.3\n244.15 -1790.06 730.79\n791.27 -738.98 296.04\n379.19 1981.15 2523.75\n-791.5 -475.76 1085.5\n-236.88 1153.12 1058.43\n-1794.35 254.61 1313.08\n1259.93 -774.47 568.96\n1514.15 -1619.69 2954.5\n1220.8 720.37 529.38\n-750.00 200.0 300.00\n-1500.00 400 600.00\n-1500.00 -1500 2500.00\n2409.23 1255.33 525.28\n-1148.88 -243.27 420.97\n-629.99 570.7 1423.56\n69.08 1966.52 329.16\n-1982.71 -870.46 3073.26\n-652.36 -674.94 2482.1\n-42.02 309.44 3140.51\n867.09 1846.2 99.05\n-1535.86 -2155.54 59.39\n-849.58 -1132.14 720.58\n-1146.84 687.87 2232.98\n1208.54 940.46 450.43\n981.49 -1706.36 3479.71\n-1039.35 -851.48 2279.04\n-396.44 2036.01 1750.94\n-1358.95 -1241.92 1197.88\n-1079.91 2299.84 3248.86\n838.9 -1.11 2861.35\n1172.23 2191.24 2137.7\n1636.59 1669.91 3395.69\n-1080.64 1758.27 1911.59\n640.93 2224.55 821.27\n1415.92 871.42 3194.5\n-1508.99 5.46 305.18\n-1197.45 -357.94 421.74\n1753.71 -1277.14 71.54\n614.1 -72.69 1373.32\n2169.78 1495.07 3011.8\n2482.59 1948.99 1040.53\n-2456.16 1226.92 3064.11\n-1026.44 1944.29 947.47\n-1975.06 -928.85 916.73\n1204.45 -1307.9 713.16\n2076.35 750.32 976.22\n1249.99 919.01 2692.47\n-1378.04 -1940.54 2904.78\n1488.82 -1968.28 840.1\n1507.07 -71.76 3363.17\n-2071.56 305.39 727.53\n-188.04 -1776.4 3129.64\n170.7 -114.13 121.24\n-1788.18 1727.2 341.08\n580.26 1206.42 1853.32\n-1272.21 106.25 1658.67\n1665.27 -617.58 640.4\n262.32 -210.1 3257.08\n1638.24 2333.69 2791.6\n1471.09 -1436.3 602.6\n302.84 -1772.2 1713.44\n2070.83 -2312.62 823.7\n1166.48 1244.73 248.66\n-759.72 2427.89 2100.11\n-2128.62 -855.95 1074.96\n-244.52 506.45 2992.02\n-1712.26 -1082.63 494.18\n819.53 1454.14 1404.37\n-1215.91 2022.64 162.25\n-1081.61 1725.53 45.67\n1997.79 -870.56 1654.38\n1343.29 -1068.01 183.14\n-2381.22 -542.96 1677.56\n1330.93 -2477.0 2385.53\n-1846.49 270.56 189.2\n-2001.03 -1651.07 1186.08\n255.17 941.68 3140.49\n412.02 -331.66 1782.62\n1689.81 -1752.27 2443.97\n1733.54 1224.45 1696.73\n1436.82 609.48 2136.94\n69.21 1956.1 899.47\n-1947.57 -399.47 837.68\n-397.26 787.76 2829.81\n2415.81 -322.33 67.19\n-827.7 -2479.1 258.02\n-891.59 781.63 3153.62\n1488.24 -664.34 2649.39\n516.68 -1817.12 3033.95\n-1127.4 -1773.21 1402.37\n-699.06 -1088.29 504.34\n-1162.32 -1417.18 1125.15\n2455.2 -1740.09 2928.67\n1114.6 1296.15 1273.22\n-2327.63 2296.92 2074.22\n1628.89 -1592.13 1768.14\n-867.07 1100.2 935.66\n1654.15 -215.68 2073.48\n-1798.67 72.48 614.6\n-1708.01 339.59 2162.48\n895.24 703.53 3061.29\n312.1 -425.46 2601.97\n-2043.34 1637.26 1018.3\n1443.65 -1670.53 595.13\n-21.36 18.16 1948.9\n-1902.06 -1786.19 3428.71\n316.97 128.58 2991.27\n590.66 2269.29 54.72\n-2370.24 -1586.29 2001.51\n886.69 -1568.53 247.75\n-134.64 1941.68 483.09\n-506.85 1643.67 1733.68\n-310.19 880.62 1884.77\n961.77 -1868.31 3008.12\n1761.27 169.05 3159.27\n429.38 -527.86 1002.86\n2295.53 -37.98 880.37\n-966.03 -2108.11 622.27\n206.07 -782.57 971.24\n-328.35 53.19 46.3\n41.18 -1664.83 2890.42\n1481.41 1650.28 1785.98\n-2065.67 1243.23 3142.99\n760.9 335.01 422.55\n2444.17 -476.95 3127.27\n-1733.9 -2345.11 1815.0\n1400.84 -1587.76 3186.55\n653.91 -357.98 1367.77\n-1943.08 1175.75 1891.19\n-873.68 1387.73 2372.03\n-75.03 -73.06 1460.9\n-146.75 609.44 2870.4\n-87.45 -781.31 100.6\n-258.53 128.82 251.7\n403.56 -1736.32 183.09\n-1782.4 1297.39 2933.84\n-1333.9 2289.97 2486.85\n193.97 -1093.98 2001.78\n620.61 1831.66 59.62\n1905.06 1349.9 2836.77\n1446.39 -666.78 3216.32\n190.04 -114.11 775.78\n-2184.32 -2440.66 2732.36\n723.51 -2341.1 1239.61\n-419.7 1195.54 1150.69\n1482.71 -1306.86 1463.08\n984.17 2029.5 253.11\n-1976.7 -275.53 894.57\n2140.91 1128.49 3106.91\n-528.42 407.57 574.92\n781.33 -128.55 1784.14\n923.25 -785.51 1386.32\n2486.69 -1768.9 2843.91\n-762.07 -220.2 952.27\n-2396.24 1365.01 2103.65\n-2213.23 -2299.63 2351.68\n2129.72 859.39 2821.3\n912.43 -529.07 81.46\n640.57 -2003.49 1376.17\n-2310.64 428.74 406.16\n91.53 -1275.1 3248.37\n-1897.08 603.23 3232.5\n-1631.21 -995.96 1349.7\n-1092.57 337.01 2753.35\n-868.04 680.12 497.57\n-211.9 -1013.85 1026.35\n-96.27 -1451.74 3266.77\n1466.33 2438.42 1955.99\n-2115.81 -1331.3 1916.46\n2086.19 -171.21 1226.0\n263.57 2134.14 2992.11\n2349.97 1101.13 200.83\n1786.48 -1291.16 1392.00\n-1607.59 1565.11 1232.15\n2073.16 588.92 537.81\n-1324.04 1459.58 92.21\n752.62 -1799.73 1885.10\n2145.48 1775.38 2339.13\n1830.41 821.98 2876.85",
          "testOut": "116551.15\n125",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Lots Lots of Islands",
          "isTest": false,
          "testIn": "200\n-711.51 297.44 481.27\n1133.69 -1463.07 2574.86\n-1737.17 345.04 858.87\n-1053.26 -415.47 2309.32\n-1443.45 1631.15 2658.93\n997.6 1390.5 508.55\n-727.82 1464.37 1951.46\n638.28 -1167.54 1162.63\n-1227.25 1463.11 1601.96\n1214.12 -429.91 2074.01\n-930.88 -63.01 112.39\n-305.81 1567.34 2413.63\n483.94 1017.22 1308.96\n-812.33 -905.32 2737.73\n1134.11 31.13 2248.03\n-1714.88 -1228.28 1769.11\n1347.16 1690.83 468.83\n-508.89 -1508.32 2234.84\n890.07 -1166.0 732.03\n-1432.57 1084.84 1402.56\n-673.86 250.84 2259.13\n-521.83 670.07 1466.56\n-1094.19 476.3 1152.92\n193.69 -759.66 676.14\n1331.15 120.94 477.84\n578.32 533.93 2320.76\n409.5 -876.32 2173.14\n-1602.29 -197.89 2726.73\n1962.77 207.91 892.3\n703.04 795.26 1431.21\n1410.51 -441.77 266.7\n1359.41 -46.91 461.29\n-478.1 -808.52 1454.54\n157.02 -1526.93 417.1\n893.2 -1310.54 2994.54\n-100.01 -130.33 867.15\n1573.2 -905.26 683.9\n-161.2 -1238.02 715.69\n-1618.35 -1975.07 78.96\n-1525.58 1731.63 25.97\n-1804.22 689.45 2191.07\n-1189.21 -374.23 321.67\n524.63 323.68 1206.45\n-151.88 -1801.63 582.23\n-158.46 1668.73 1435.55\n1243.95 -1568.16 1884.24\n-190.16 317.64 2662.47\n762.13 -1266.93 2835.74\n-1586.98 -175.5 2793.78\n1467.49 473.22 314.71\n-1137.74 409.38 2799.62\n-1508.42 1092.37 1370.87\n-346.95 1345.06 1995.7\n267.11 -1166.22 137.06\n171.74 -992.92 402.38\n-1276.8 1398.46 402.31\n1430.66 1880.15 1122.08\n838.96 1638.2 531.5\n-1411.76 -486.01 2483.91\n-47.7 -1122.43 1697.84\n-1875.51 -191.32 856.98\n1707.74 263.52 2257.46\n-130.62 -1645.26 2788.68\n-275.55 -740.72 196.9\n1387.59 -1431.87 464.78\n-852.8 -1857.67 136.59\n1060.99 -4.0 1930.2\n-473.27 1014.2 933.95\n-314.91 -24.79 836.28\n1294.41 1307.87 1725.36\n531.03 1227.83 1351.76\n-1328.68 1761.89 2260.39\n1897.96 -635.08 2447.63\n260.16 -1784.1 1322.17\n-28.15 1088.1 2914.34\n-882.69 -646.77 2114.44\n-1000.42 1636.39 1237.02\n382.03 11.27 1937.71\n1200.01 -1342.24 1393.42\n626.91 -1432.19 534.68\n-1087.44 -896.1 1926.88\n468.85 -760.21 139.08\n935.61 1820.9 2336.64\n-989.25 634.82 2563.59\n85.58 1726.85 2701.74\n1368.93 -1878.99 1343.61\n230.2 1286.1 1331.54\n-266.78 -1827.58 2766.05\n1661.95 1801.91 2591.28\n1540.37 -913.62 740.81\n483.13 1061.66 1516.65\n-935.37 1428.8 287.51\n-1882.41 -1384.27 1896.55\n-177.97 -1034.83 45.22\n-32.89 -121.75 2912.08\n1963.42 1490.1 721.36\n376.75 1131.32 1319.9\n-370.56 -327.32 41.86\n549.23 -635.63 526.66\n1474.18 -1481.67 149.32\n-1717.01 1202.59 1703.97\n329.64 -1355.44 1082.32\n148.37 -250.32 437.94\n-1010.92 555.95 19.84\n-880.04 -736.87 5.76\n460.44 658.58 2074.49\n1402.56 204.89 2529.37\n-1241.21 -653.86 1480.18\n-390.7 1090.2 398.62\n-1479.19 442.06 214.61\n1849.79 1900.86 1123.36\n-422.66 1424.9 1212.92\n-617.46 1889.18 689.42\n680.46 -1265.33 251.43\n669.58 1243.27 1920.13\n1981.42 -1035.54 609.1\n672.24 -209.91 2636.7\n1845.05 1872.97 2766.86\n1419.48 159.66 2341.51\n-1926.17 -1399.46 2692.12\n1736.42 -212.4 74.32\n-971.51 -1774.1 1413.12\n-1663.6 301.83 1947.83\n-89.14 -363.28 1920.56\n-1129.38 1658.2 1378.52\n222.42 -1834.07 1533.55\n776.36 -1722.75 337.3\n-800.43 -1469.59 563.31\n47.09 -919.72 2515.17\n-1203.81 577.21 1868.34\n-155.49 -853.87 2030.66\n-184.66 585.63 1007.57\n-1188.26 1191.88 210.54\n-924.56 -293.38 1590.83\n-3.06 -904.46 2373.73\n-1386.87 -319.77 2970.94\n-1211.69 -1959.78 1588.12\n423.93 -1044.52 2040.07\n-964.11 -1397.28 2278.7\n1575.32 422.21 1415.49\n-1348.61 -1956.62 233.78\n-1719.39 -472.39 1097.69\n-1589.37 602.61 1243.41\n901.88 87.8 1921.81\n-1626.7 -45.61 1870.93\n-1042.94 1345.29 1946.25\n1770.02 -20.8 706.87\n938.43 1736.21 2146.99\n-1940.29 -1907.45 2036.94\n1204.65 1261.44 1716.64\n-997.04 1430.18 2673.94\n-1353.49 924.37 2291.21\n-1045.87 -1443.58 1411.41\n198.15 100.98 83.47\n-872.79 -1492.91 785.1\n-579.48 236.66 1404.7\n-652.71 -1905.37 1095.26\n304.67 -476.35 1197.53\n-381.91 -1214.99 999.42\n317.89 1608.52 310.44\n-907.92 1813.02 2754.37\n1696.38 647.11 2487.99\n1221.12 -514.8 353.36\n849.21 860.79 251.02\n-731.79 27.02 2498.04\n-1730.24 -132.35 1309.2\n1640.02 -1852.83 2792.81\n1848.48 1116.63 309.47\n-1762.16 1654.22 2202.02\n-1799.76 -1527.62 303.48\n1406.77 -515.81 469.61\n1309.74 1208.23 234.11\n606.75 1146.3 513.85\n-1120.51 -160.68 1390.77\n1809.4 1028.72 2895.91\n1254.23 1699.16 296.06\n646.31 -1134.71 878.93\n923.29 316.37 2461.03\n-1466.57 -1054.13 2318.02\n1747.28 255.66 2705.07\n-900.45 -851.78 1449.88\n-1696.17 377.32 2476.37\n-181.56 209.06 1776.59\n1242.47 -433.85 2342.21\n792.87 -213.31 1495.69\n-1308.26 1495.23 2155.64\n1954.45 -1725.29 1790.82\n230.4 -174.81 1812.1\n767.57 -942.47 617.18\n-1620.19 1091.55 2681.67\n-1010.04 -1217.72 2804.85\n-673.08 -477.92 1301.04\n871.34 -54.52 1074.18\n303.98 -1791.55 881.14\n1143.78 105.97 1002.18\n326.42 -498.38 2814.84\n-1879.29 -209.9 1551.73\n941.25 -1653.2 1071.7\n1460.64 -629.4 1867.67\n851.4 -1838.09 1363.09",
          "testOut": "97870.64\n100",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "hard",
      "constraints": "1 ≤ [[n]] ≤ 250\n-3000 ≤ [[x]], [[y]] ≤ 3000\n1 ≤ [[z]] ≤ 5000",
      "coverBinaryId": 134353425126745,
      "stubGenerator": "read n:int\nloop n read x:float y:float z:float\nwrite answer",
      "inputDescription": "<<Line 1:>> Integer [[n]] representing the number of islands.\n<<Next [[n]] lines:>> Space separated string representing 3D coordinates of an island's Tree of Voices, in the form: [[x]] [[y]] [[z]] (all floats)",
      "solutionLanguage": "Python3",
      "outputDescription": "<<Line 1:>> Float of total length of wood required to connect all islands (truncated to 2 decimal places and retain trailing zeros).\n<<Line 2:>> Integer of the number of trees used."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\"><strong>Pandora is in crisis!</strong><br>The Ikrans have been eradicated by the Sky People in an attempt to gain the upper hand in their invasion. Pandora is a world full of floating islands and the Ikrans were the Na'vi's only way of navigating between them. It's imperative that the Na'vi can travel between all the islands. The Na'vi have only one option and must fell trees and use the wood for bridges between the islands. However, there is a problem... Trees are sacred to the Na'vi and cutting them down is the last thing they want to do.<br><br>The goal is to find the <strong>MINIMUM</strong> length of wood required to connect <strong>ALL</strong> the islands together <strong>AND</strong> the number of trees needed to do so.<br><br><strong>Coordinates:</strong><br>Coordinates are provided in units of Pandorian meters, where a difference of <strong>1</strong> in any axis (<var>x</var>, <var>y</var>, or <var>z</var>) corresponds to a distance of <strong>1</strong> Pandorian meter. These coordinates represent the location of the Tree of Voices on each island. Any bridges made to an island <strong>MUST</strong> connect to this location.<br><br>Coordinates are given in a 3D Cartesian coordinate system, where the <var>x</var> and <var>y</var> axes form the horizontal plane, and the <var>z</var> axis is vertical.<br><br><strong>Connecting Islands:</strong><br>Na'vi are primitive and they have not yet been able to master carpentry or civil engineering. Therefore, islands can only be connected to one another if the distance between them is <strong>LESS THAN OR EQUAL</strong> to the tree length. All trees on Pandora are of a uniform length of <const>1000</const> Pandorian meters. Although wood cannot be combined, it can be cut into two pieces of variable lengths with perfect precision.<br><br>Na'vi are fantastic climbers but unfortunately the children are still learning. Therefore, each bridge must be walkable. A bridge is considered walkable if the angle between the bridge and the horizontal plane is <strong>LESS THAN</strong> <const>45</const> degrees.<br><br>Two islands are considered to be connected if there exists <strong>ANY</strong> path between. This includes either a direct bridge between them or through an indirect connection using the bridges of other islands.<br><br><strong>Building Bridges and Leftover Wood:</strong><br>After a tree is felled, it can be cut to the exact required length for a bridge. The unused portion becomes leftover wood. Bridges are always built from the <strong>LONGEST</strong> to the <strong>SHORTEST</strong>. The Na'vi attempt to reuse leftover wood before felling another tree. For each bridge, always cut from the <strong>EARLIEST</strong> leftover - based on the order it was felled - that is <strong>GREATER THAN OR EQUAL TO</strong> the required bridge length. If no existing leftover is sufficient, they fell a new tree.<br><br><strong>Connecting to the Ground:</strong><br>The Na'vi need to be able to access the islands from the ground. Ensure the islands connect <strong>AT LEAST ONCE</strong> to the Hometree at position: <var>x</var> = 1, <var>y</var> = 1, <var>z</var> = 1.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> Integer <var>n</var> representing the number of islands.<br><strong>Next <var>n</var> lines:</strong> Space separated string representing 3D coordinates of an island's Tree of Voices, in the form: <var>x</var> <var>y</var> <var>z</var> (all floats)</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> Float of total length of wood required to connect all islands (truncated to 2 decimal places and retain trailing zeros).<br><strong>Line 2:</strong> Integer of the number of trees used.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">1 &le; <var>n</var> &le; 250<br>-3000 &le; <var>x</var>, <var>y</var> &le; 3000<br>1 &le; <var>z</var> &le; 5000</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">10\n-421.93 -79.09 203.71\n-232.56 139.11 56.32\n112.61 96.19 106.98\n-171.87 459.38 387.22\n-2.51 487.02 90.6\n-192.61 212.0 246.17\n356.21 -173.75 324.16\n-184.27 -51.73 200.88\n-157.9 -240.06 496.54\n-358.51 -332.42 84.25</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">2999.93\n4</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 17879305800,
  "avatar": 130769403588418,
  "commentCount": 40,
  "upVotes": 29,
  "downVotes": 1,
  "validateAction": {
    "actionId": 1145436,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1735513537002,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1735516741575,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "REFUSED",
      "date": 1738109137002,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1738361554109,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "REFUSED",
      "date": 1740956737001,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1741098481140,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "REFUSED",
      "date": 1743692737003,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1745594131176,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1752849065611,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}