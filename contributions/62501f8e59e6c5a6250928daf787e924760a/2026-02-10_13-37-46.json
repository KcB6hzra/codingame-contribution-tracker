{
  "id": 6250,
  "activeVersion": 32,
  "score": 17,
  "votableId": 17052649,
  "codingamerId": 2923506,
  "views": 558,
  "commentableId": 16961745,
  "title": "Clobber",
  "status": "ACCEPTED",
  "type": "PUZZLE_MULTI",
  "nickname": "darkhorse64",
  "publicHandle": "62501f8e59e6c5a6250928daf787e924760a",
  "codingamerHandle": "c9ebe76a83b33730956eda0534d6cad86053292",
  "lastVersion": {
    "version": 32,
    "autocloseTime": 1617740407013,
    "data": {
      "title": "Clobber",
      "topics": [
        {
          "id": 83,
          "handle": "minimax",
          "labelMap": {
            "1": "Minimax",
            "2": "Minimax"
          },
          "pageTitle": "Minimax: exercises and theory",
          "puzzleCount": 19,
          "parentTopicId": 42,
          "contentDetailsId": 93
        },
        {
          "id": 92,
          "handle": "MCTS",
          "labelMap": {
            "1": "Monte Carlo tree search",
            "2": "Monte Carlo tree search"
          },
          "puzzleCount": 11,
          "parentTopicId": 41
        },
        {
          "id": 213,
          "handle": "bitboarding",
          "labelMap": {
            "1": "Bitboarding",
            "2": "Bitboarding"
          },
          "puzzleCount": 2,
          "parentTopicId": 93
        }
      ],
      "refereeMd5": "2923506/267c8e3db72fb67242833d9a34a3ba83",
      "testHandle": "872371a9fcc7b916a7f11aed05608b6d7c5b84",
      "viewerCode": "var Drawer=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";n.r(e),n.d(e,\"Drawer\",(function(){return Nn}));var r={baseUrl:\"https://cdn-games.codingame.com/community/2923506-1613249324752/\",images:{\"b.png\":\"799d637b3cae6007ab00d515a1fee0b1ed4955028b70535d83a710c1e3528ec6.png\",\"w.png\":\"6e503bf39d0627d30b744108a92c068bfa7a75a2798e24b36552ff435594c458.png\"},sprites:[],fonts:[]};function o(t,e,n){return t<=e?t+(e-t)*n:e+(t-e)*(1-n)}function i(t,e,n){return Math.min(1,Math.max(0,(n-t)/(e-t)))}function a(t,e,n,r,o){return o=o||0,Math.min(n/(t+o),r/(e+o))}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=[],s=[],l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}var e,n;return e=t,n=[{key:\"listen\",value:function(t){if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");s.push(t)}},{key:\"push\",value:function(t){c.push(t),s.forEach((function(e){return e(t)}))}}],null&&u(e.prototype,null),n&&u(e,n),t}();function f(t){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function h(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return p(t,arguments,b(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,t)}(t)}function p(t,e,n){return(p=y()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&d(r,n.prototype),r}).apply(null,arguments)}function y(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,h(Error));var t=function(t){var e=y();return function(){var n,r=b(t);return function(t,e){if(e&&(\"object\"===f(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=b(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(e);function e(n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(o=t.call(this,\"Invalid color token: there is no player at index \".concat(n,\". Make sure to use getColorToken() if you want the color of a specific player.\"))).playerIdx=n,o.cause=r,o.name=\"InvalidPlayerColorTokenError\",o}return e}();function g(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){var r,o;r=t,e=n[o=e],o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return n<1?t:e}var O={type:Number,lerpMethod:function(t,e,n){return null===e?null:o((t={r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t}).r,(e={r:(16711680&e)>>16,g:(65280&e)>>8,b:255&e}).r,n)<<16|o(t.g,e.g,n)<<8|o(t.b,e.b,n)},convert:function(t,e){var n=-(t+1);try{return t<0?e.players[n].color:t}catch(t){return l.push(new v(n)),16777215}}},x={type:String,lerpMethod:w,convert:j},S={type:Number,lerpMethod:function(t,e,n,r){for(;e>t+Math.PI;)e-=2*Math.PI;for(;e<t-Math.PI;)e+=2*Math.PI;return(n=void 0!==r&&Math.abs(e-t)>r?e:t+(e-t)*n)%(2*Math.PI)},convert:function(t){return t*Math.PI/180}},R={type:Number,lerpMethod:w},P=(n={type:function(t){return\"1\"===t},lerpMethod:w},e={type:Number,lerpMethod:function(t,e,n){return e<t?e:o(t,e,n)}},{default:{type:Number,lerpMethod:o},visible:n,rotation:S,skewX:S,skewY:S,fillColor:O,lineColor:O,strokeColor:O,tint:O,animationProgressTime:e,maxWidth:R,mask:R,baseWidth:R,baseHeight:R,image:x,images:x,scaleMode:x,restarted:{type:String,convert:function(t,e,n,r){return t?{date:n.date+r*n.frameDuration}:null},lerpMethod:w},playing:n,duration:R,blendMode:R,loop:n,text:m(m({},x),{},{convert:function(t,e){t=j(t);for(var n=/\\$(\\d)/g,r=n.exec(t),o=\"\",i=0;r;)r[1]<e.players.length&&(o+=t.substring(i,r.index),o+=e.players[+r[1]].name),i=r.index+r[0].length,r=n.exec(t);return o+t.substring(i)}}),textAlign:m(m({},x),{},{convert:function(t){return{0:\"left\",1:\"center\",2:\"right\"}[t]}}),fontFamily:x,fontWeight:x,children:m(m({},x),{},{convert:function(t){return t?t.split(\",\").map((function(t){return+t})):[]}}),points:m(m({},x),{},{convert:function(t){return t?t.split(\",\").map((function(t){return parseInt(t)})):[]},lerpMethod:function(t,e,n){return t.length===e.length?t.map((function(t,r){return o(t,e[r],n)})):w(t,e,n)}})});function j(t){return(t=t.split(\"\\\\'\").join(\"'\")).includes(\" \")||t.includes(\";\")||t.includes(\"\\n\")?t.slice(1,t.length-1):t}function T(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){var r,o;r=t,e=n[o=e],o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t){return(_=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.defaultState={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0,zIndex:0,alpha:1,visible:!1,rotation:0,mask:-1},this.states={}}var e,n,r;return e=t,r=[{key:\"createState\",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return E(E({t:t},e),{},{curve:n})}}],(n=[{key:\"init\",value:function(){this.properties=Object.keys(this.defaultState),this.initDisplay(),this.currentState=Object.assign({},this.defaultState),\"object\"===_(this.graphics)&&this.container.addChild(this.graphics)}},{key:\"setHidden\",value:function(t){this.hide=t,this.container.visible=this.currentState.visible&&!this.hide}},{key:\"addState\",value:function(e,n,r){this.states[r]||(this.states[r]=[]);var o=t.createState(e,n.values,n.curve);(n=this.states[r].find((function(t){return t.t===e})))&&0===Object.keys(o.curve).length&&(o.curve=n.curve),n?(z(o)||z(n)||l.push(new Error(\"Different updates for same t \"+e)),Object.assign(n,o)):this.states[r].push(o)}},{key:\"set\",value:function(t,e,n){this.addState(t,e,n)}},{key:\"render\",value:function(t,e,n){var r=this.states[e.number];this.container.visible=!1;var o,a=null,u=1;if(r&&r.length){for(var c=0;c<r.length-1&&r[c].t<t;)c++;if(a=r[c-1],o=r[c],a)u=i(a.t,o.t,t);else{var s=Object.keys(this.states),l=s.indexOf(e.number.toString())-1;for(-1===l&&(l=s.length-1);0<=l&&s[l]>=e.number;)l--;var f=this.states[s[l]]||[];u=!(a=f[f.length-1])&&t>=o.t?(a=o,1):i(0,o.t,t)}}else{for(var h=Object.keys(this.states),p=h.length-1;0<=p&&h[p]>e.number;)p--;null!=(f=this.states[h[p]])?o=a=f[f.length-1]:Object.assign(this.currentState,this.defaultState)}if(a){var y,d={},b=Object.assign({},this.currentState),v=function(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if(\"string\"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,i=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(this.properties);try{for(v.s();!(y=v.n()).done;){var g=y.value,m=(P[g]||P.default).lerpMethod,w=o.curve[g]||function(t){return t},O=m(a[g],o[g],w(u));O!==this.currentState[g]&&(d[g]=!0,b[g]=O)}}catch(t){v.e(t)}finally{v.f()}this.updateDisplay(b,d,n,e,t),Object.assign(this.currentState,b),this.container.visible=this.container._visible,d.children&&(n.mustResetTree=!0,\"function\"==typeof this.postUpdate&&n.updatedBuffers.push(this)),d.zIndex&&(n.mustResort=!0),d.mask&&(n.maskUpdates[this.id]=b.mask),0!==Object.keys(d).length&&this.parent&&this.parent.notifyChange()}}},{key:\"notifyChange\",value:function(){this.parent&&this.parent.notifyChange()}},{key:\"initDisplay\",value:function(){this.container=new PIXI.Container,this.container.zIndex=this.defaultState.zIndex,this.container.id=this.id,this.container._visible=this.defaultState.visible}},{key:\"updateDisplay\",value:function(t,e,n){this.container.zIndex=t.zIndex,this.container.alpha=t.alpha,(e.x||e.y)&&this.container.position.set(t.x*n.toWorldUnits,t.y*n.toWorldUnits),(e.scaleX||e.scaleY)&&this.container.scale.set(t.scaleX||1e-8,t.scaleY||1e-8),this.container.rotation=t.rotation,this.container._visible=t.visible&&!this.hide,this.container.skew.set(t.skewX,t.skewY)}}])&&I(e.prototype,n),r&&I(e,r),t}();function z(t){return Object.keys(t).length===Object.keys(D.createState()).length}function F(t){return(F=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,n){return(M=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(o,D);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=U(t);return function(t,e){if(e&&(\"object\"===F(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=U(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,o),t=r.call(this),Object.assign(t.defaultState,{fillColor:o.defaultFillColor(),lineWidth:o.defaultLineWidth(),lineColor:o.defaultLineColor(),fillAlpha:o.defaultFillAlpha(),lineAlpha:o.defaultLineAlpha(),blendMode:PIXI.BLEND_MODES.NORMAL}),t}return t=o,n=[{key:\"defaultLineWidth\",value:function(){return 0}},{key:\"defaultFillColor\",value:function(){return 16777215}},{key:\"defaultLineColor\",value:function(){return 0}},{key:\"defaultLineAlpha\",value:function(){return 1}},{key:\"defaultFillAlpha\",value:function(){return 1}}],(e=[{key:\"initDisplay\",value:function(){M(U(o.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Graphics,this.graphics.lineStyle(this.defaultState.lineWidth,this.defaultState.lineColor,this.defaultState.lineAlpha),null!==this.defaultState.fillColor&&this.graphics.beginFill(this.defaultState.fillColor,this.defaultState.fillAlpha)}},{key:\"updateDisplay\",value:function(t,e,n){M(U(o.prototype),\"updateDisplay\",this).call(this,t,e,n),this.graphics.blendMode=t.blendMode}}])&&C(t.prototype,e),n&&C(t,n),o}();function W(t){return(W=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e,n){return(Y=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(o,X);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=L(t);return function(t,e){if(e&&(\"object\"===W(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=L(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,o),(t=r.call(this)).defaultState.radius=o.defaultRadius(),t}return t=o,n=[{key:\"defaultRadius\",value:function(){return 100}}],(e=[{key:\"initDisplay\",value:function(){Y(L(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawCircle(0,0,this.defaultState.radius),null!==this.defaultState.fillColor&&this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,n){Y(L(o.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.radius||e.lineColor||e.lineWidth||e.fillColor||e.fillAlpha||e.lineAlpha)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor),this.graphics.drawCircle(0,0,t.radius*n.toWorldUnits),null!==t.fillColor&&this.graphics.endFill())}}])&&B(t.prototype,e),n&&B(t,n),o}();function G(t){return(G=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e,n){return(N=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Q=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(o,X);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=J(t);return function(t,e){if(e&&(\"object\"===G(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=J(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,o),(t=r.call(this)).defaultState.x2=o.defaultPosition(),t.defaultState.y2=o.defaultPosition(),t}return t=o,n=[{key:\"defaultPosition\",value:function(){return 100}}],(e=[{key:\"initDisplay\",value:function(){N(J(o.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(t,e,n){N(J(o.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.lineWidth||e.lineColor||e.lineAlpha||e.x2||e.y2||e.x||e.y)&&(this.graphics.clear(),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.moveTo(0,0),this.graphics.lineTo(-this.container.x+t.x2*n.toWorldUnits,-this.container.y+t.y2*n.toWorldUnits))}}])&&V(t.prototype,e),n&&V(t,n),o}();function Z(t){return(Z=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e,n){return(et=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(o,X);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);return function(t,e){if(e&&(\"object\"===Z(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=rt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,o),t=r.call(this),Object.assign(t.defaultState,{width:o.defaultSideLength(),height:o.defaultSideLength()}),t}return t=o,n=[{key:\"defaultSideLength\",value:function(){return 100}}],(e=[{key:\"initDisplay\",value:function(){et(rt(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawRect(0,0,this.defaultState.width,this.defaultState.height),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,n){et(rt(o.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.lineWidth||e.lineColor||e.width||e.height||e.lineAlpha||e.fillColor)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawRect(0,0,t.width*n.toWorldUnits,t.height*n.toWorldUnits),null!==t.fillColor&&this.graphics.endFill())}}])&&tt(t.prototype,e),n&&tt(t,n),o}();function it(t){return(it=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e,n){return(ut=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=st(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(o,D);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=st(t);return function(t,e){if(e&&(\"object\"===it(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=st(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,o),t=r.call(this),Object.assign(t.defaultState,{anchorX:o.defaultAnchor(),anchorY:o.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215}),t}return t=o,n=[{key:\"defaultAnchor\",value:function(){return 0}}],(e=[{key:\"initDisplay\",value:function(){ut(st(o.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(t,e,n){ut(st(o.prototype),\"updateDisplay\",this).call(this,t,e,n),this.graphics.anchor.set(t.anchorX,t.anchorY),this.graphics.blendMode=t.blendMode,this.graphics.tint=t.tint}}])&&at(t.prototype,e),n&&at(t,n),o}();function ft(t){return(ft=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function ht(t,e,n){return(ht=pt()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&yt(r,n.prototype),r}).apply(null,arguments)}function pt(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(e,function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return ht(t,arguments,dt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),yt(n,t)}(t)}(Error));var t=function(t){var e=pt();return function(){var n,r=dt(t);return function(t,e){if(e&&(\"object\"===ft(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=dt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(e);function e(n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(o=t.call(this,'Could not find image: \"'+n+'\". Make sure it is in your assets folder and is spelled correctly.')).image=n,o.cause=r,o.name=\"MissingImageError\",o}return e}();function vt(t){return(vt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e,n){return(mt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ot(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(r,lt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ot(t);return function(t,e){if(e&&(\"object\"===vt(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Ot(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),t=n.call(this),Object.assign(t.defaultState,{image:null,baseWidth:null,baseHeight:null,scaleMode:\"LINEAR\"}),t.missingTextures={},t}return t=r,(e=[{key:\"updateDisplay\",value:function(t,e,n){if(mt(Ot(r.prototype),\"updateDisplay\",this).call(this,t,e,n),e.image)try{null!==t.image?this.graphics.texture=PIXI.Texture.fromFrame(t.image):this.graphics.texture=PIXI.Texture.EMPTY,this.graphics.texture.baseTexture.scaleMode=PIXI.SCALE_MODES[t.scaleMode]}catch(e){this.missingTextures[t.image]||(this.missingTextures[t.image]=!0,l.push(new bt(t.image,e)))}e.baseWidth&&(this.graphics.width=t.baseWidth),e.baseHeight&&(this.graphics.height=t.baseHeight)}}])&&gt(t.prototype,e),r}();function St(t){return(St=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e,n){return(Pt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Et=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(r,xt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tt(t);return function(t,e){if(e&&(\"object\"===St(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Tt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),n.apply(this,arguments)}return t=r,(e=[{key:\"initDisplay\",value:function(){Pt(Tt(r.prototype),\"initDisplay\",this).call(this),null===this.defaultState.image?this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY):this.graphics=PIXI.Sprite.fromFrame(this.defaultState.image)}}])&&Rt(t.prototype,e),r}();function kt(t,e){if(t.width>e)for(;3<t.text.length&&t.width>e;)t.text=t.text.slice(0,-4)+\"...\"}function _t(t){return(_t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t,e,n){return(Dt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ft(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ct=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(r,lt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ft(t);return function(t,e){if(e&&(\"object\"===_t(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Ft(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),t=n.call(this),Object.assign(t.defaultState,{text:\"\",textAlign:\"left\",strokeColor:0,strokeThickness:0,fillColor:0,fontSize:26,fontFamily:\"Lato\",fontWeight:\"normal\",maxWidth:0}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){Dt(Ft(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Text(this.defaultState.text,{align:this.defaultState.textAlign,fontSize:this.defaultState.fontSize+\"px\",fontFamily:this.defaultState.fontFamily,fill:this.defaultState.fillColor})}},{key:\"updateDisplay\",value:function(t,e,n){Dt(Ft(r.prototype),\"updateDisplay\",this).call(this,t,e,n),this.graphics.style.align=t.textAlign,this.graphics.style.stroke=t.strokeColor,this.graphics.style.strokeThickness=t.strokeThickness,this.graphics.style.fill=t.fillColor,this.graphics.style.fontSize=t.fontSize||1,this.graphics.style.fontFamily=t.fontFamily,this.graphics.style.fontWeight=t.fontWeight,(e.text||e.strokeThickness||e.fontSize||e.fontFamily||e.fontWeight||e.maxWidth||e.maxWidth)&&(this.graphics.text=t.text,t.maxWidth&&kt(this.graphics,t.maxWidth))}}])&&It(t.prototype,e),r}();function Mt(t){return(Mt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function At(t,e,n){return(At=Ut()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&Xt(r,n.prototype),r}).apply(null,arguments)}function Ut(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return At(t,arguments,Wt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Xt(n,t)}(t)}(Error));var t=function(t){var e=Ut();return function(){var n,r=Wt(t);return function(t,e){if(e&&(\"object\"===Mt(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Wt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(e);function e(n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(o=t.call(this,'Could not find font: \"'+n+'\". Make sure it is in your assets folder and is spelled correctly.')).font=n,o.cause=r,o.name=\"MissingBitmapFontError\",o}return e}();function Yt(t){return(Yt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e,n){return(Lt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Ht(t,e){return(Ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)}(r,D);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gt(t);return function(t,e){if(e&&(\"object\"===Yt(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Gt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),t=n.call(this),Object.assign(t.defaultState,{text:\"\",textAlign:\"left\",fontSize:26,fontFamily:null,anchorX:lt.defaultAnchor(),anchorY:lt.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215,maxWidth:0}),t.missingFonts={},t}return t=r,(e=[{key:\"initDisplay\",value:function(){Lt(Gt(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(t,e,n){Lt(Gt(r.prototype),\"updateDisplay\",this).call(this,t,e,n),null!==t.fontFamily?PIXI.extras.BitmapText.fonts[t.fontFamily]?(0===this.graphics.children.length?(this.displayed=new PIXI.extras.BitmapText(\"\",{font:{size:t.fontSize||1,name:t.fontFamily}}),this.graphics.addChild(this.displayed)):this.displayed.font={size:t.fontSize||1,name:t.fontFamily},this.displayed.anchor.set(t.anchorX,t.anchorY),this.displayed.blendMode=t.blendMode,this.displayed.tint=t.tint,this.displayed.align=t.textAlign,(e.text||e.maxWidth||e.fontSize||e.fontFamily)&&(this.displayed.text=t.text,t.maxWidth&&kt(this.displayed,t.maxWidth))):(this.missingFonts[t.fontFamily]||(this.missingFonts[t.fontFamily]=!0,l.push(new Bt(t.fontFamily))),this.graphics.removeChildren()):this.graphics.removeChildren()}}])&&Kt(t.prototype,e),r}();function Nt(t){return(Nt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qt(t,e,n){return(qt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(r,D);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qt(t);return function(t,e){if(e&&(\"object\"===Nt(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Qt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),t=n.call(this),Object.assign(t.defaultState,{children:[]}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){qt(Qt(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(t,e,n){qt(Qt(r.prototype),\"updateDisplay\",this).call(this,t,e,n)}},{key:\"childrenContainer\",get:function(){return this.graphics}}])&&$t(t.prototype,e),r}();function te(t){return(te=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var re=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}(e,Zt);var t=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ne(t);return function(t,e){if(e&&(\"object\"===te(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=ne(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(e);function e(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),t.apply(this,arguments)}return e}(),oe=null,ie=[];function ae(t){return(ae=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ce(t,e,n){return(ce=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=le(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fe=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(r,Zt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);return function(t,e){if(e&&(\"object\"===ae(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=le(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),n.apply(this,arguments)}return t=r,(e=[{key:\"initDisplay\",value:function(){ce(le(r.prototype),\"initDisplay\",this).call(this),this.buffer=new PIXI.Container,this.gameTexture=null,this.graphics=new PIXI.Sprite,this.needsRender=!0}},{key:\"postUpdate\",value:function(){var t,e;this.needsRender&&(t=this.buffer.getBounds().width,e=this.buffer.getBounds().height,(null==this.gameTexture||this.gameTexture.width<t||this.gameTexture.height<e)&&(t=Math.min(Math.max(t,512),4096),e=Math.min(Math.max(e,512),4096),this.gameTexture=PIXI.RenderTexture.create(t,e),e=this.gameTexture,ie.push(e),this.graphics.texture=this.gameTexture),oe.render(this.buffer,this.gameTexture),this.needsRender=!1)}},{key:\"childrenContainer\",get:function(){return this.buffer}},{key:\"notifyChange\",value:function(){this.needsRender=!0,this.parent&&this.parent.notifyChange()}}])&&ue(t.prototype,e),r}();function he(t){return(he=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function pe(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(n),!0).forEach((function(e){var r,o;r=t,e=n[o=e],o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function be(t,e,n){return(be=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ge(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var me=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(r,lt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ge(t);return function(t,e){if(e&&(\"object\"===he(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=ge(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),t=n.call(this),Object.assign(t.defaultState,{images:\"\",loop:!1,duration:1e3,playing:!0,restarted:null,animationProgress:0,date:0}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){be(ge(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY)}},{key:\"addState\",value:function(t,e,n,o){be(ge(r.prototype),\"addState\",this).call(this,t,e,n),n=this.states[n].find((function(e){return e.t===t})),o=o.date+o.frameDuration*t,n.date=o}},{key:\"updateDisplay\",value:function(t,e,n,o,i){if(be(ge(r.prototype),\"updateDisplay\",this).call(this,t,e,n),t.images){if(n=t.images.split(\",\"),0<=t.animationProgress){i=o.date+o.frameDuration*i,i=ye(ye({},t),{},{date:i}),this.computeAnimationProgressTime(t,i),i=Math.floor(n.length*i.animationProgress),n=t.loop?n[i%n.length]:n[i]||n[n.length-1];try{this.graphics.texture=PIXI.Texture.fromFrame(n)}catch(t){l.push(new bt(n,t))}}}else this.graphics.texture=PIXI.Texture.EMPTY}},{key:\"computeAnimationProgressTime\",value:function(t,e){e.restarted&&e.restarted.date===e.date?e.animationProgress=0:(e.animationProgress=t.animationProgress,t.playing&&(e.animationProgress+=(e.date-t.date)/t.duration))}}])&&de(t.prototype,e),r}();function we(t){return(we=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t,e,n){return(xe=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Re(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pe=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(o,X);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Re(t);return function(t,e){if(e&&(\"object\"===we(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Re(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,o),t=r.call(this),Object.assign(t.defaultState,{width:o.defaultSideLength(),height:o.defaultSideLength(),radius:o.defaultRadius()}),t}return t=o,n=[{key:\"defaultSideLength\",value:function(){return 100}},{key:\"defaultRadius\",value:function(){return 20}}],(e=[{key:\"initDisplay\",value:function(){xe(Re(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawRoundedRect(0,0,this.defaultState.width,this.defaultState.height,this.defaultState.radius),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,n){xe(Re(o.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.lineWidth||e.lineColor||e.lineAlpha||e.fillColor||e.radius||e.height||e.width)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawRoundedRect(0,0,t.width*n.toWorldUnits,t.height*n.toWorldUnits,t.radius*n.toWorldUnits),null!==t.fillColor&&this.graphics.endFill())}}])&&Oe(t.prototype,e),n&&Oe(t,n),o}();function je(t){return(je=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ee(t,e,n){return(Ee=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_e(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ie=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(r,X);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_e(t);return function(t,e){if(e&&(\"object\"===je(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=_e(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),t=n.call(this),Object.assign(t.defaultState,{points:[]}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){Ee(_e(r.prototype),\"initDisplay\",this).call(this),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,n){Ee(_e(r.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.lineWidth||e.lineColor||e.lineAlpha||e.fillColor||e.points)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawPolygon(t.points.map((function(t){return t*n.toWorldUnits}))),null!==t.fillColor&&this.graphics.endFill())}}])&&Te(t.prototype,e),r}();function De(t){return(De=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fe(t,e,n){return(Fe=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Me(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ae=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(r,xt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Me(t);return function(t,e){if(e&&(\"object\"===De(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Me(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),t=n.call(this),Object.assign(t.defaultState,{tileX:0,tileY:0,tileScaleX:1,tileScaleY:1}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){Fe(Me(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.extras.TilingSprite(PIXI.Texture.EMPTY)}},{key:\"updateDisplay\",value:function(t,e,n){Fe(Me(r.prototype),\"updateDisplay\",this).call(this,t,e,n),this.graphics.tilePosition.x=t.tileX,this.graphics.tilePosition.y=t.tileY,this.graphics.tileScale.x=t.tileScaleX,this.graphics.tileScale.y=t.tileScaleY}}])&&ze(t.prototype,e),r}();function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}var e,n;return e=t,n=[{key:\"create\",value:function(t){var e={C:H,R:ot,L:Q,S:Et,T:Ct,X:Vt,G:re,B:fe,A:me,K:Pe,P:Ie,D:Ae}[t];if(!e)throw new Error(\"Exception: entity type not found: \"+t);return new e}}],null&&Ue(e.prototype,null),n&&Ue(e,n),t}();function We(t){var e=1.70158,n=0,r=1;return 0===t?0:1==(t/=1)?1:(n=n||.3,e=r<Math.abs(1)?(r=1,n/4):n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*t)*Math.sin((+t-e)*(2*Math.PI)/n)+1)}function Be(t){return t<.5?2*t*t:(4-2*t)*t-1}function Ye(t){return Math.pow(t,3)}function Ke(t){return 1+Math.pow(t-1,3)}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function He(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ve(t,e,n){return e&&Ge(t.prototype,e),n&&Ge(t,n),t}var Ne={r:\"rotation\",R:\"radius\",X:\"x2\",Y:\"y2\",w:\"width\",h:\"height\",t:\"tint\",f:\"fillColor\",F:\"fillAlpha\",c:\"lineColor\",W:\"lineWidth\",A:\"lineAlpha\",a:\"alpha\",i:\"image\",S:\"strokeThickness\",sc:\"strokeColor\",ff:\"fontFamily\",s:\"fontSize\",fw:\"fontWeight\",T:\"text\",ta:\"textAlign\",ch:\"children\",sx:\"scaleX\",sy:\"scaleY\",ax:\"anchorX\",ay:\"anchorY\",kx:\"skewX\",ky:\"skewY\",v:\"visible\",z:\"zIndex\",b:\"blendMode\",I:\"images\",rs:\"restarted\",p:\"playing\",l:\"loop\",d:\"duration\",bw:\"baseWidth\",bh:\"baseHeight\",ps:\"points\",tx:\"tileX\",ty:\"tileY\",tsx:\"tileScaleX\",tsy:\"tileScaleY\",sm:\"scaleMode\"};n=function(){function t(e,n){He(this,t),this.id=++n.instanceCount,this.type=e[0]}return Ve(t,[{key:\"apply\",value:function(t){var e=Xe.create(this.type);e.id=this.id,t.set(this.id,e)}}]),t}(),x=function(){function t(e,n){var o=(l=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if(\"string\"==typeof t)return Le(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(t,e):void 0}}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}(e,8))[0],i=(e=l[1],l[2]),a=l[3],u=l[4],c=l[5],s=l[6],l=l[7];He(this,t),this.loader=new PIXI.loaders.Loader,\"0\"===i&&(i=PIXI.utils.TextureCache[e].width),\"0\"===a&&(a=PIXI.utils.TextureCache[e].height);for(var f=0<l?l:s,h={frames:{},meta:{image:(r.baseUrl||\"\")+r.images[e]}},p=0;p<s;p++)h.frames[1<s?o+p:o]={frame:{x:i*c+p%f*i,y:a*u+Math.floor(p/f)*a,w:i,h:a},sourceSize:{w:i,h:a},rotated:!1,trimmed:!1};e=\"data:text/json;charset=UTF-8,\"+JSON.stringify(h),PIXI.utils.TextureCache[e+\"_image\"]||this.loader.add(e,{crossOrigin:!0})}return Ve(t,[{key:\"apply\",value:function(){var t=this;if(0<Object.keys(this.loader.resources).length)return new Promise((function(e){t.loader.load(),t.loader.on(\"complete\",e)}))}}]),t}();function $e(t){return function(t){if(Array.isArray(t))return qe(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(t)||function(t,e){if(t){if(\"string\"==typeof t)return qe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qe(t,e):void 0}}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qe={C:n,U:function(){function t(e,n,r){He(this,t),this.id=+e[0],this.t=+e[1],this.params={},this.curve={};for(var o=2;o<e.length;){var i=Ne[e[o]]||e[o],a=P[i]||P.default,u=a.type(e[o+1]);\"function\"==typeof a.convert&&(u=a.convert(u,n,r,this.t)),a=t.curves[e[o+2]],this.params[i]=u,o+=2,a&&(this.curve[i]=a,o+=1)}}return Ve(t,[{key:\"apply\",value:function(t,e){(t=t.get(this.id)).addState(this.t,{values:this.params,curve:this.curve},e.number,e),t.stateAdded=!0}}],[{key:\"curves\",get:function(){return{_:function(t){return t<1?0:1},\"\":Be,\"\":Ye,\"\":Ke,\"~\":We,\"\":function(t){return 1}}}}]),t}(),L:x};function Ze(t,e){for(var n=[],r=\"\",o=0,i=\"\",a=!1;o<t.length;){var u=t[o++];u===e?a?r+=u:(n.push(r),r=\"\"):\"'\"===u&&\"\\\\\"!==i?(a=!a,r+=u):\"\\\\\"===i?r+=\"'\"===u?\"\\\\'\":\"\\\\\"+u:\"\\\\\"!==u&&(r+=u),i=u}return n.push(r),n}var tn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}var e,n;return e=t,n=[{key:\"parse\",value:function(t,e,n){var r,o=[],i=Ze(t,\"\\n\");for(r in i){var a=Qe[i[r][0]];if(!a)throw new Error(\"Unrecognised command : \"+i[r][0]);o=[].concat($e(o),$e(function(t,e,n,r){e=Ze(e,\";\");var o=[];return e.forEach((function(e){return o.push(new t(Ze(e,\" \"),n,r))})),o}(a,i[r].slice(1),e,n)))}return o}}],null&&Je(e.prototype,null),n&&Je(e,n),t}(),en=1920;function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function on(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rn(Object(n),!0).forEach((function(e){var r,o;r=t,e=n[o=e],o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var un={};x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.entities=new Map,this.frames=[],this.loadingAssets=0,this.extrapolationMap={},this.globalData={toWorldUnits:1,mustResetTree:!0,mustResort:!0,maskUpdates:{},updatedBuffers:[],players:[],instanceCount:0},un.entities=this.entities}var e,n,r;return e=t,r=[{key:\"name\",get:function(){return\"entitymodule\"}}],(n=[{key:\"handleFrameData\",value:function(t,e){var n=this;!e||(r=tn.parse(e,this.globalData,t))&&r.forEach((function(e){(e=e.apply(n.entities,t))&&(n.loadingAssets++,e.then((function(){n.loadingAssets--})))}));var r=on({},t);return r.previous=this.frames[this.frames.length-1]||r,this.extrapolate(r),r!==r.previous&&(r.previous.next=r),this.frames.push(r),r}},{key:\"lastElementOf\",value:function(t){return t[t.length-1]}},{key:\"extrapolate\",value:function(t){var e=this,n=t.number,r=t.previous.number;this.entities.forEach((function(o){var i,a;o.stateAdded&&(o.stateAdded=!1,o.states[n]||(o.states[n]=[]),e.extrapolationMap[o.id]||(e.extrapolationMap[o.id]=on({},o.defaultState)),(i=o.states[n]).sort((function(t,e){return t.t-e.t})),i.length&&1===e.lastElementOf(i).t||o.addState(1,{},n,t),a=e.extrapolationMap[o.id],o.states[r]&&r!==n&&(a=o.states[r][o.states[r].length-1]),o.states[n]=i.map((function(t){return t=e.extrapolationMap[o.id]=on(on({},e.extrapolationMap[o.id]),t),\"function\"==typeof o.computeAnimationProgressTime&&o.computeAnimationProgressTime(a,t),a=t})))}))}},{key:\"reinitScene\",value:function(t,e){this.globalData.toPixel=en/e.width*e.oversampling,this.globalData.mustResetTree=!0,un.container=this.container=t,this.entities.forEach((function(t){t.init()}))}},{key:\"sortChildren\",value:function(t){t.children.sort((function(t,e){return t.zIndex===e.zIndex?t.id-e.id:t.zIndex-e.zIndex}))}},{key:\"stillLoading\",value:function(){return 0<this.loadingAssets}},{key:\"updateScene\",value:function(t,e,n){var r=this;if(!this.stillLoading()){for(var o in this.entities.forEach((function(t){return t.render(n,e,r.globalData)})),this.globalData.mustResetTree&&(this.reconstructTree(),this.globalData.mustResetTree=!1,this.globalData.mustResort=!0),this.globalData.mustResort&&(this.resortTree(),this.globalData.mustResort=!1),this.globalData.maskUpdates){var i=this.entities.get(+o);o=this.globalData.maskUpdates[o];i.container.mask=-1===o?null:this.entities.get(o).graphics}var a,u=function(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if(\"string\"==typeof t)return nn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(t,e):void 0}}(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,i=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(this.globalData.updatedBuffers);try{for(u.s();!(a=u.n()).done;)a.value.postUpdate()}catch(t){u.e(t)}finally{u.f()}this.globalData.maskUpdates={}}}},{key:\"resortTree\",value:function(){var t=this;this.entities.forEach((function(e){e instanceof Zt&&t.sortChildren(e.childrenContainer)})),this.sortChildren(this.container)}},{key:\"reconstructTree\",value:function(){var t=this;this.container.removeChildren(),this.entities.forEach((function(e){e instanceof Zt&&(e.childrenContainer.removeChildren(),e.currentState.children.forEach((function(n){n=t.entities.get(n),e.childrenContainer.addChild(n.container),n.parent=e})))})),this.entities.forEach((function(e){e.container.parent||t.container.addChild(e.container)}))}},{key:\"handleGlobalData\",value:function(t,e){this.globalData.players=t,t=e.width,e=e.height,this.globalData.toWorldUnits=a(t,e,en,1080),un.toWorldUnits=this.globalData.toWorldUnits,un.hasOwnProperty(\"coeff\")||Object.defineProperty(un,\"coeff\",{get:function(){var t='The \"coeff\" property of GraphicEntityModule\\'s API is deprecated, please use \"toWorldUnits\" instead',e=(new Error).stack;return console.groupCollapsed?(console.groupCollapsed(\"%cDeprecation Warning: %c%s\",\"color:#614108;background:#fffbe6\",\"font-weight:normal;color:#614108;background:#fffbe6\",t),console.warn(e),console.groupEnd()):console.warn(\"Deprecation Warning: \",t),un.toWorldUnits}})}}])&&an(e.prototype,n),r&&an(e,r),t}();function cn(t){return(cn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function sn(t,e,n){return(sn=ln()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&fn(r,n.prototype),r}).apply(null,arguments)}function ln(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function fn(t,e){return(fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pn=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(e,function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return sn(t,arguments,hn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),fn(n,t)}(t)}(Error));var t=function(t){var e=ln();return function(){var n,r=hn(t);return function(t,e){if(e&&(\"object\"===cn(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=hn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(e);function e(n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(o=t.call(this,'Could not find toggle: \"'+n+'\". Make sure it is set up correctly in your config.js.')).toggle=n,o.cause=r,o.name=\"MissingToggleError\",o}return e}();function yn(t){return(yn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function dn(t,e,n){return(dn=bn()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&vn(r,n.prototype),r}).apply(null,arguments)}function bn(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function vn(t,e){return(vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mn=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vn(t,e)}(e,function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return dn(t,arguments,gn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),vn(n,t)}(t)}(Error));var t=function(t){var e=bn();return function(){var n,r=gn(t);return function(t,e){if(e&&(\"object\"===yn(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=gn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(e);function e(n,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(r=t.call(this,\"(\"+r.keys.toString()+\") have the same value '\"+r.value+\"' in toggle \\\"\"+n+'\". Avoid those duplicates in your config.js.')).toggle=n,r.cause=o,r.name=\"DuplicateToggleValueError\",r}return e}();function wn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function On(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wn(Object(n),!0).forEach((function(e){var r,o;r=t,e=n[o=e],o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xn(t,e){if(t){if(\"string\"==typeof t)return Sn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(t,e):void 0}}function Sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Pn=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.previousFrame={},this.missingToggles={},t.refreshContent=function(){if(n.currentFrame)for(var e in n.currentFrame.registered){var r=un.entities.get(parseInt(e)),o=n.currentFrame.registered[e];null!=(e=t.toggles[o.name])||n.missingToggles[o.name]||(l.push(new pn(o.name)),n.missingToggles[o.name]=!0),r.setHidden(e!==o.state)}},function(){for(var t in Pn.optionValues){var e,n=function(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=xn(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,i=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(Pn.optionValues[t]);try{for(n.s();!(e=n.n()).done;){var r=e.value;1<r.keys.length&&l.push(new mn(t,r))}}catch(t){n.e(t)}finally{n.f()}}}()}var e,n,r;return e=t,r=[{key:\"refreshContent\",value:function(){}},{key:\"defineToggle\",value:function(e){return function(t){for(var e in Pn.optionValues[t.toggle]=[],t.values)!function(e){var n=t.values[e],r=Pn.optionValues[t.toggle].find((function(t){return t.value===n}));r||Pn.optionValues[t.toggle].push(r={keys:[],value:n}),r.keys.push(e)}(e)}(e),t.toggles[e.toggle]=e.default,e.get=function(){return t.toggles[e.toggle]},e.set=function(n){t.toggles[e.toggle]=n,t.refreshContent()},e}},{key:\"name\",get:function(){return\"toggles\"}}],(n=[{key:\"updateScene\",value:function(e,n,r){this.currentFrame=n,this.currentProgress=r,t.refreshContent()}},{key:\"handleFrameData\",value:function(t,e){var n={};return e&&Object.entries(e).forEach((function(t){var e=(t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||xn(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}(t,2))[0];t[1].match(/\\d+./g).forEach((function(t){var r=t.slice(0,-1);t=\"+\"===t.slice(-1);n[r]={name:e,state:t}}))})),t={registered:On(On({},this.previousFrame.registered),n),number:t.number},this.previousFrame=t}},{key:\"reinitScene\",value:function(e,n){t.refreshContent()}}])&&Rn(e.prototype,n),r&&Rn(e,r),t}();function jn(t){return(jn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Tn(t,e,n){return(Tn=En()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&kn(r,n.prototype),r}).apply(null,arguments)}function En(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function kn(t,e){return(kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _n(t){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Pn.toggles={},Pn.optionValues={};var In=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kn(t,e)}(e,function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Tn(t,arguments,_n(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),kn(n,t)}(t)}(Error));var t=function(t){var e=En();return function(){var n,r=_n(t);return function(t,e){if(e&&(\"object\"===jn(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=_n(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(e);function e(n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(o=t.call(this,'Could not find image: \"'+n+'\". Make sure it is in your assets folder and is spelled correctly.')).image=n,o.cause=r,o.name=\"MissingImageError\",o}return e}();function Dn(t){return function(t){if(Array.isArray(t))return zn(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(t)||function(t,e){if(t){if(\"string\"==typeof t)return zn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(t,e):void 0}}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cn=[x,Pn,function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.states=[],this.scores=[],this.globalData={},this.atEnd=!1}var e,n,r;return e=t,r=[{key:\"name\",get:function(){return\"endScreen\"}}],(n=[{key:\"updateScene\",value:function(t,e,n){e.scores&&1===n?this.atEnd=!0:this.atEnd=!1}},{key:\"handleFrameData\",value:function(t,e){var n=null,r=null,o=null;return e&&(n=e[0],r=e[1],o=e[2]),t={number:t.number,scores:n,spriteName:r,displayedText:o},n&&(this.scores=n),r&&(this.spriteName=r),o&&(this.displayedText=o),this.states.push(t),t}},{key:\"reinitScene\",value:function(t,e){this.container=t,this.endLayer=this.createEndScene(this),this.atEnd&&this.initEndScene(),this.container.addChild(this.endLayer)}},{key:\"animateScene\",value:function(t){t=Math.min(32,t),this.atEnd?this.animationEnded||this.renderEndScene(t):(0<this.endTime&&this.destroyEndScene(),this.endTime=0)}},{key:\"destroyEndScene\",value:function(){this.animationEnded=!1,this.endLayer.visible=!1}},{key:\"initEndScene\",value:function(){this.animationEnded=!1,this.endLayer.visible=!0}},{key:\"renderEndScene\",value:function(t){0===this.endTime&&this.initEndScene();var e=i(0,400,this.endTime);this.endLayer.backgroundRanking.alpha=.9*e,e=i(400,1e3,this.endTime),this.endLayer.titleRanking.scale.x=this.endLayer.titleRanking.scale.y=.001+o(10,.8,e),this.endLayer.titleRanking.visible=!!e;for(var n=0;n<this.finishers.length;++n){var r=i(1e3+300*n,1e3+300*n+300,this.endTime);this.finishers[n].alpha=r}this.endTime+=t,1e4<=this.endTime&&(this.animationEnded=!0)}},{key:\"handleGlobalData\",value:function(t,e){this.globalData={players:t,playerCount:t.length}}},{key:\"fitTextInWidth\",value:function(t,e){for(var n=t.text;t.width>e;)n=n.slice(0,-1),t.text=n+\"...\"}},{key:\"generateText\",value:function(t,e,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return(r=new PIXI.Text(t,{fontSize:Math.round(e/1.2)+\"px\",fontFamily:\"Lato\",fontWeight:\"bold\",fill:r})).lineHeight=Math.round(e/1.2),\"right\"===n?r.anchor.x=1:\"center\"===n&&(r.anchor.x=.5),null!==o&&this.fitTextInWidth(r,o),r}},{key:\"createFinisher\",value:function(t){var e=new PIXI.Container,n=new PIXI.Container;n.y=0,n.x=0;var r=new PIXI.Graphics;r.beginFill(16777215),r.alpha=.1,r.drawRect(0,0,240,120),n.addChild(r);var o=new PIXI.Graphics;o.lineStyle(1,16777215),o.alpha=.5,o.drawRect(0,0,120,120),n.addChild(o);var i=new PIXI.Sprite(t.player.avatar);return i.width=i.height=120,(r=this.generateText(t.rank.toString(),76,\"center\",t.player.color)).anchor.y=.5,r.position.x=160,r.position.y=56,n.addChild(r),o=\"TH\",t.rank<4&&(o=[\"ST\",\"ND\",\"RD\"][t.rank-1]),(r=this.generateText(o.toString(),34,\"left\",t.player.color)).position.x=184,r.position.y=32,n.addChild(r),(o=new PIXI.Container).addChild(i),n.addChild(o),r=this.globalData.playerCount<=4?1500:500,i=this.generateText(t.player.name.toUpperCase(),50,\"left\",t.player.color,r),o=t.text||(0<=t.score?t.score.toString()+\" points\":\"-\"),r=this.generateText(o,64,\"left\",t.player.color,r),i.x=330,i.y=-4,r.x=330,r.y=50,e.addChild(n),e.addChild(i),e.addChild(r),e}},{key:\"createEndScene\",value:function(){var t=new PIXI.Container,e=new PIXI.Graphics;e.beginFill(0,.85),e.drawRect(0,0,en,1080),e.endFill(),t.backgroundRanking=e;var n=this.spriteName;(n=PIXI.utils.TextureCache[n]?PIXI.Sprite.fromFrame(n):(l.push(new In(n)),new PIXI.Sprite(PIXI.Texture.EMPTY))).anchor.x=n.anchor.y=.5,(t.titleRanking=n).position.x=960,n.position.y=230;for(var r=[],o=0;o<this.globalData.playerCount;++o)r.push({score:this.scores[o],text:this.displayedText?this.displayedText[o]:null,player:this.globalData.players[o],rank:0});r.sort((function(t,e){return e.score-t.score})),this.finishers=[];var i,a=new PIXI.Container;for(o=0;o<r.length;++o)r[o].rank=r.filter((function(t){return t.score>r[o].score})).length+1,i=this.createFinisher(r[o]),a.addChild(i),this.finishers.push(i);if(this.finishers.length<=4){var u=Math.max.apply(Math,Dn(this.finishers.map((function(t){return t.width}))));for(o=0;o<this.finishers.length;++o)this.finishers[o].position.x=(en-u)/2,this.finishers[o].position.y=150*o}else{var c=Math.ceil(this.finishers.length/2),s=Math.max.apply(Math,Dn(this.finishers.slice(0,c).map((function(t){return t.width}))));for(o=0;o<this.finishers.length;++o)this.finishers[o].position.x=o<c?960-(s+50):1010,this.finishers[o].position.y=o%c*150}return a.y=400,t.addChild(e),t.addChild(n),t.addChild(a),t.visible=!1,t}}])&&Fn(e.prototype,n),r&&Fn(e,r),t}()],Mn=[Pn.defineToggle({toggle:\"debugToggle\",title:\"DEBUG\",values:{ON:!0,OFF:!1},default:!0})],An={views:['KEY_FRAME 0\\n{\"global\":{\"entitymodule\":{\"width\":1920,\"height\":1080}},\"frame\":{\"duration\":1800,\"entitymodule\":\"CR;R;T;T;R;T;R;T;R;T;R;T;R;T;R;T;R;T;R;T;R;R;R;R;R;R;R;R;T;R;R;R;R;R;R;R;R;T;R;R;R;R;R;R;R;R;T;R;R;R;R;R;R;R;R;T;R;R;R;R;R;R;R;R;T;R;R;R;R;R;R;R;R;T;R;R;R;R;R;R;R;R;R;R;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;K;T;S;S;T;T;K;T;S;S;T;T\\\\nU15 0.4 f 13732679 v 1 w 120 x 1200 y 880 h 120 z 1;127 0.4 bw 100 i w.png v 1 x 730 y 290 bh 100;99 0.4 bw 100 i w.png v 1 x 1210 y 770 bh 100;109 0.4 bw 100 i w.png v 1 x 490 y 530 bh 100;25 0.4 f 13732679 v 1 w 120 x 1080 y 760 h 120 z 1;128 0.4 bw 100 i b.png v 1 x 850 y 290 bh 100;79 0.4 f 13732679 v 1 w 120 x 1080 y 40 h 120 z 1;50 0.4 f 16764574 v 1 w 120 x 840 y 400 h 120 z 1;22 0.4 f 16764574 v 1 w 120 x 720 y 760 h 120 z 1;26 0.4 f 16764574 v 1 w 120 x 1200 y 760 h 120 z 1;148 0.4 bw 100 i b.png v 1 x 1330 y 50 bh 100;71 0.4 f 13732679 v 1 w 120 x 1200 y 160 h 120 z 1;104 0.4 bw 100 i w.png v 1 x 850 y 650 bh 100;122 0.4 bw 100 i w.png v 1 x 1090 y 410 bh 100;67 0.4 f 13732679 v 1 w 120 x 720 y 160 h 120 z 1;81 0.4 f 13732679 v 1 w 120 x 1320 y 40 h 120 z 1;73 0.4 f 16764574 v 1 w 120 x 480 y 40 h 120 z 1;97 0.4 bw 100 i w.png v 1 x 970 y 770 bh 100;103 0.4 bw 100 i b.png v 1 x 730 y 650 bh 100;63 0.4 f 13732679 v 1 w 120 x 1320 y 280 h 120 z 1;142 0.4 bw 100 i b.png v 1 x 610 y 50 bh 100;93 0.4 bw 100 i w.png v 1 x 490 y 770 bh 100;23 0.4 f 13732679 v 1 w 120 x 840 y 760 h 120 z 1;30 0.4 f 16764574 v 1 w 120 x 600 y 640 h 120 z 1;135 0.4 bw 100 i b.png v 1 x 730 y 170 bh 100;68 0.4 f 16764574 v 1 w 120 x 840 y 160 h 120 z 1;24 0.4 f 16764574 v 1 w 120 x 960 y 760 h 120 z 1;105 0.4 bw 100 i b.png v 1 x 970 y 650 bh 100;123 0.4 bw 100 i b.png v 1 x 1210 y 410 bh 100;137 0.4 bw 100 i b.png v 1 x 970 y 170 bh 100;69 0.4 f 13732679 v 1 w 120 x 960 y 160 h 120 z 1;133 0.4 bw 100 i b.png v 1 x 490 y 170 bh 100;37 0.4 f 16764574 v 1 w 120 x 480 y 520 h 120 z 1;27 0.4 f 13732679 v 1 w 120 x 1320 y 760 h 120 z 1;143 0.4 bw 100 i w.png v 1 x 730 y 50 bh 100;139 0.4 bw 100 i b.png v 1 x 1210 y 170 bh 100;21 0.4 f 13732679 v 1 w 120 x 600 y 760 h 120 z 1;88 0.4 bw 100 i w.png v 1 x 850 y 890 bh 100;61 0.4 f 13732679 v 1 w 120 x 1080 y 280 h 120 z 1;40 0.4 f 16764574 v 1 w 120 x 720 y 520 h 120 z 1;54 0.4 f 16764574 v 1 w 120 x 1320 y 400 h 120 z 1;115 0.4 bw 100 i w.png v 1 x 1210 y 530 bh 100;2 0.4 f 13732679 v 1 w 120 x 480 y 880 h 120 z 1;59 0.4 f 13732679 v 1 w 120 x 840 y 280 h 120 z 1;13 0.4 f 16764574 v 1 w 120 x 1080 y 880 h 120 z 1;60 0.4 f 16764574 v 1 w 120 x 960 y 280 h 120 z 1;75 0.4 f 13732679 v 1 w 120 x 600 y 40 h 120 z 1;36 0.4 f 16764574 v 1 w 120 x 1320 y 640 h 120 z 1;52 0.4 f 16764574 v 1 w 120 x 1080 y 400 h 120 z 1;70 0.4 f 16764574 v 1 w 120 x 1080 y 160 h 120 z 1;76 0.4 f 16764574 v 1 w 120 x 720 y 40 h 120 z 1;125 0.4 bw 100 i w.png v 1 x 490 y 290 bh 100;138 0.4 bw 100 i w.png v 1 x 1090 y 170 bh 100;119 0.4 bw 100 i b.png v 1 x 730 y 410 bh 100;41 0.4 f 13732679 v 1 w 120 x 840 y 520 h 120 z 1;117 0.4 bw 100 i b.png v 1 x 490 y 410 bh 100;78 0.4 f 16764574 v 1 w 120 x 960 y 40 h 120 z 1;39 0.4 f 13732679 v 1 w 120 x 600 y 520 h 120 z 1;48 0.4 f 16764574 v 1 w 120 x 600 y 400 h 120 z 1;118 0.4 bw 100 i w.png v 1 x 610 y 410 bh 100;7 0.4 f 13732679 v 1 w 120 x 720 y 880 h 120 z 1;53 0.4 f 13732679 v 1 w 120 x 1200 y 400 h 120 z 1;116 0.4 bw 100 i b.png v 1 x 1330 y 530 bh 100;89 0.4 bw 100 i b.png v 1 x 970 y 890 bh 100;126 0.4 bw 100 i b.png v 1 x 610 y 290 bh 100;145 0.4 bw 100 i w.png v 1 x 970 y 50 bh 100;11 0.4 f 13732679 v 1 w 120 x 960 y 880 h 120 z 1;55 0.4 f 16764574 v 1 w 120 x 480 y 280 h 120 z 1;66 0.4 f 16764574 v 1 w 120 x 600 y 160 h 120 z 1;72 0.4 f 16764574 v 1 w 120 x 1320 y 160 h 120 z 1;132 0.4 bw 100 i b.png v 1 x 1330 y 290 bh 100;130 0.4 bw 100 i b.png v 1 x 1090 y 290 bh 100;114 0.4 bw 100 i b.png v 1 x 1090 y 530 bh 100;95 0.4 bw 100 i w.png v 1 x 730 y 770 bh 100;9 0.4 f 16764574 v 1 w 120 x 840 y 880 h 120 z 1;57 0.4 f 13732679 v 1 w 120 x 600 y 280 h 120 z 1;19 0.4 f 16764574 v 1 w 120 x 480 y 760 h 120 z 1;134 0.4 bw 100 i w.png v 1 x 610 y 170 bh 100;147 0.4 bw 100 i w.png v 1 x 1210 y 50 bh 100;141 0.4 bw 100 i w.png v 1 x 490 y 50 bh 100;85 0.4 bw 100 i b.png v 1 x 490 y 890 bh 100;31 0.4 f 13732679 v 1 w 120 x 720 y 640 h 120 z 1;146 0.4 bw 100 i b.png v 1 x 1090 y 50 bh 100;64 0.4 f 13732679 v 1 w 120 x 480 y 160 h 120 z 1;62 0.4 f 16764574 v 1 w 120 x 1200 y 280 h 120 z 1;94 0.4 bw 100 i b.png v 1 x 610 y 770 bh 100;42 0.4 f 16764574 v 1 w 120 x 960 y 520 h 120 z 1;35 0.4 f 13732679 v 1 w 120 x 1200 y 640 h 120 z 1;87 0.4 bw 100 i b.png v 1 x 730 y 890 bh 100;32 0.4 f 16764574 v 1 w 120 x 840 y 640 h 120 z 1;51 0.4 f 13732679 v 1 w 120 x 960 y 400 h 120 z 1;96 0.4 bw 100 i b.png v 1 x 850 y 770 bh 100;98 0.4 bw 100 i b.png v 1 x 1090 y 770 bh 100;46 0.4 f 13732679 v 1 w 120 x 480 y 400 h 120 z 1;92 0.4 bw 100 i w.png v 1 x 1330 y 890 bh 100;106 0.4 bw 100 i w.png v 1 x 1090 y 650 bh 100;144 0.4 bw 100 i b.png v 1 x 850 y 50 bh 100;100 0.4 bw 100 i b.png v 1 x 1330 y 770 bh 100;140 0.4 bw 100 i w.png v 1 x 1330 y 170 bh 100;129 0.4 bw 100 i w.png v 1 x 970 y 290 bh 100;17 0.4 f 16764574 v 1 w 120 x 1320 y 880 h 120 z 1;28 0.4 f 13732679 v 1 w 120 x 480 y 640 h 120 z 1;91 0.4 bw 100 i b.png v 1 x 1210 y 890 bh 100;58 0.4 f 16764574 v 1 w 120 x 720 y 280 h 120 z 1;113 0.4 bw 100 i w.png v 1 x 970 y 530 bh 100;77 0.4 f 13732679 v 1 w 120 x 840 y 40 h 120 z 1;90 0.4 bw 100 i w.png v 1 x 1090 y 890 bh 100;44 0.4 f 16764574 v 1 w 120 x 1200 y 520 h 120 z 1;33 0.4 f 13732679 v 1 w 120 x 960 y 640 h 120 z 1;45 0.4 f 13732679 v 1 w 120 x 1320 y 520 h 120 z 1;136 0.4 bw 100 i w.png v 1 x 850 y 170 bh 100;80 0.4 f 16764574 v 1 w 120 x 1200 y 40 h 120 z 1;110 0.4 bw 100 i b.png v 1 x 610 y 530 bh 100;49 0.4 f 13732679 v 1 w 120 x 720 y 400 h 120 z 1;120 0.4 bw 100 i w.png v 1 x 850 y 410 bh 100;112 0.4 bw 100 i b.png v 1 x 850 y 530 bh 100;43 0.4 f 13732679 v 1 w 120 x 1080 y 520 h 120 z 1;121 0.4 bw 100 i b.png v 1 x 970 y 410 bh 100;131 0.4 bw 100 i w.png v 1 x 1210 y 290 bh 100;111 0.4 bw 100 i w.png v 1 x 730 y 530 bh 100;34 0.4 f 16764574 v 1 w 120 x 1080 y 640 h 120 z 1;108 0.4 bw 100 i w.png v 1 x 1330 y 650 bh 100;86 0.4 bw 100 i w.png v 1 x 610 y 890 bh 100;101 0.4 bw 100 i b.png v 1 x 490 y 650 bh 100;102 0.4 bw 100 i w.png v 1 x 610 y 650 bh 100;124 0.4 bw 100 i w.png v 1 x 1330 y 410 bh 100;5 0.4 f 16764574 v 1 w 120 x 600 y 880 h 120 z 1;107 0.4 bw 100 i b.png v 1 x 1210 y 650 bh 100;127 0.8 z 4;132 0.8 z 4;99 0.8 z 4;109 0.8 z 4;128 0.8 z 4;130 0.8 z 4;114 0.8 z 4;95 0.8 z 4;148 0.8 z 4;134 0.8 z 4;147 0.8 z 4;104 0.8 z 4;122 0.8 z 4;141 0.8 z 4;97 0.8 z 4;85 0.8 z 4;103 0.8 z 4;142 0.8 z 4;146 0.8 z 4;93 0.8 z 4;135 0.8 z 4;94 0.8 z 4;105 0.8 z 4;87 0.8 z 4;123 0.8 z 4;137 0.8 z 4;96 0.8 z 4;98 0.8 z 4;133 0.8 z 4;92 0.8 z 4;106 0.8 z 4;144 0.8 z 4;100 0.8 z 4;143 0.8 z 4;140 0.8 z 4;139 0.8 z 4;129 0.8 z 4;88 0.8 z 4;91 0.8 z 4;113 0.8 z 4;115 0.8 z 4;90 0.8 z 4;136 0.8 z 4;110 0.8 z 4;125 0.8 z 4;138 0.8 z 4;119 0.8 z 4;120 0.8 z 4;112 0.8 z 4;117 0.8 z 4;121 0.8 z 4;131 0.8 z 4;111 0.8 z 4;108 0.8 z 4;118 0.8 z 4;86 0.8 z 4;116 0.8 z 4;101 0.8 z 4;102 0.8 z 4;124 0.8 z 4;89 0.8 z 4;126 0.8 z 4;145 0.8 z 4;107 0.8 z 4;3 1 f 16711422 v 1 ff Verdana x 420 y 920 s 40 T 1;4 1 f 16711422 v 1 ff Verdana x 530 y 1010 s 40 T a;20 1 f 16711422 v 1 ff Verdana x 420 y 800 s 40 T 2;149 1 f 16777215 v 1 a 0.15 w 300 x 50 y 200 W 4 h 600;159 1 f 16777215 v 1 ax 0.5 x 1720 y 590 s 40 T ;56 1 f 16711422 v 1 ff Verdana x 420 y 320 s 40 T 6;83 1 f 8298178 v 1 w 120 x -120  y -120 F 0.75 h 120 z 2;18 1 f 16711422 v 1 ff Verdana x 1370 y 1010 s 40 T h;74 1 f 16711422 v 1 ff Verdana x 420 y 80 s 40 T 8;38 1 f 16711422 v 1 ff Verdana x 420 y 560 s 40 T 4;155 1 f 16777215 v 1 a 0.15 w 300 x 1570 y 200 W 4 h 600;160 1 f 16777215 v 1 ax 0.5 x 1720 y 660 s 36 T ;10 1 f 16711422 v 1 ff Verdana x 890 y 1010 s 40 T d;156 1 f 16777215 v 1 ax 0.5 x 1720 y 210 s 42 T $1;84 1 f 16711680 v 1 w 120 x -120  y -120 F 0.45 h 120 z 2;16 1 f 16711422 v 1 ff Verdana x 1250 y 1010 s 40 T g;82 1 f 8298178 v 1 w 120 x -120  y -120 F 0.75 h 120 z 2;158 1 bw 100 i b.png v 1 x 1670 y 470 bh 100;152 1 bw 100 i w.png v 1 x 150 y 470 bh 100;154 1 f 16777215 v 1 ax 0.5 x 200 y 660 s 36 T ;153 1 f 16777215 v 1 ax 0.5 x 200 y 590 s 40 T ;157 1 bw 100 i $1 v 1 ax 0.5 x 1720 y 320 bh 100;150 1 f 16777215 v 1 ax 0.5 x 200 y 210 s 42 T $0;47 1 f 16711422 v 1 ff Verdana x 420 y 440 s 40 T 5;65 1 f 16711422 v 1 ff Verdana x 420 y 200 s 40 T 7;14 1 f 16711422 v 1 ff Verdana x 1130 y 1010 s 40 T f;1 1 f 8355711 w 1920 v 1 h 1080;6 1 f 16711422 v 1 ff Verdana x 650 y 1010 s 40 T b;8 1 f 16711422 v 1 ff Verdana x 770 y 1010 s 40 T c;12 1 f 16711422 v 1 ff Verdana x 1010 y 1010 s 40 T e;29 1 f 16711422 v 1 ff Verdana x 420 y 680 s 40 T 3;151 1 bw 100 i $0 v 1 ax 0.5 x 200 y 320 bh 100\",\"toggles\":{\"debugToggle\":\"82+83+84+\"}}}\\n','KEY_FRAME 1\\n{\"duration\":700,\"entitymodule\":\"U154 0;153 0 T b1c1;87 0 z 3;87 1 v 0;86 1 x 730;82 1 x 600  y 880 ;83 1 x 720  y 880 \"}\\n','KEY_FRAME 2\\n{\"entitymodule\":\"U127 0 z 3;160 0;159 0 T b6c6;127 1 v 0;82 1 y 280 ;126 1 x 730;83 1 y 280 \"}\\n','KEY_FRAME 3\\n{\"entitymodule\":\"U114 0 z 3;154 0;153 0 T f3f4;114 1 v 0;82 1 x 1080  y 640 ;83 1 x 1080  y 520 ;106 1 y 530\"}\\n','KEY_FRAME 4\\n{\"entitymodule\":\"U160 0;159 0 T c3c4;111 0 z 3;103 1 y 530;82 1 x 720 ;83 1 x 720 ;111 1 v 0\"}\\n','KEY_FRAME 5\\n{\"entitymodule\":\"U154 0;94 0 z 3;153 0 T b3b2;94 1 v 0;82 1 x 600 ;102 1 y 770;83 1 x 600  y 760 \"}\\n','KEY_FRAME 6\\n{\"entitymodule\":\"U134 0 z 3;160 0;159 0 T b8b7;134 1 v 0;142 1 y 170;82 1 y 40 ;83 1 y 160 \"}\\n','KEY_FRAME 7\\n{\"entitymodule\":\"U154 0;153 0 T d3d4;112 0 z 3;104 1 y 530;82 1 x 840  y 640 ;112 1 v 0;83 1 x 840  y 520 \"}\\n','KEY_FRAME 8\\n{\"entitymodule\":\"U160 0;159 0 T e7e8;145 0 z 3;137 1 y 50;82 1 x 960  y 160 ;145 1 v 0;83 1 x 960  y 40 \"}\\n','KEY_FRAME 9\\n{\"entitymodule\":\"U154 0;153 0 T h7h8;148 0 z 3;148 1 v 0;140 1 y 50;82 1 x 1320 ;83 1 x 1320 \"}\\n','KEY_FRAME 10\\n{\"entitymodule\":\"U160 0;159 0 T g5g6;131 0 z 3;123 1 y 290;82 1 x 1200  y 400 ;131 1 v 0;83 1 x 1200  y 280 \"}\\n','KEY_FRAME 11\\n{\"entitymodule\":\"U154 0;153 0 T a4a5;117 0 z 3;82 1 x 480  y 520 ;109 1 y 410;117 1 v 0;83 1 x 480  y 400 \"}\\n','KEY_FRAME 12\\n{\"entitymodule\":\"U160 0;159 0 T c5d5;120 0 z 3;119 1 x 850;82 1 x 720  y 400 ;120 1 v 0;83 1 x 840 \"}\\n','KEY_FRAME 13\\n{\"entitymodule\":\"U154 0;153 0 T f1g1;91 0 z 3;90 1 x 1210;82 1 x 1080  y 880 ;91 1 v 0;83 1 x 1200  y 880 \"}\\n','KEY_FRAME 14\\n{\"entitymodule\":\"U160 0;159 0 T a7a8;141 0 z 3;141 1 v 0;82 1 x 480  y 160 ;83 1 x 480  y 40 ;133 1 y 50\"}\\n','KEY_FRAME 15\\n{\"entitymodule\":\"U154 0;153 0 T g4h4;116 0 z 3;115 1 x 1330;116 1 v 0;82 1 x 1200  y 520 ;83 1 x 1320  y 520 \"}\\n','KEY_FRAME 16\\n{\"entitymodule\":\"U160 0;159 0 T d8d7;136 0 z 3;82 1 x 840  y 40 ;136 1 v 0;83 1 x 840  y 160 ;144 1 y 170\"}\\n','KEY_FRAME 17\\n{\"entitymodule\":\"U154 0;153 0 T f5f6;130 0 z 3;122 1 y 290;82 1 x 1080  y 400 ;83 1 x 1080  y 280 ;130 1 v 0\"}\\n','KEY_FRAME 18\\n{\"entitymodule\":\"U160 0;138 0 z 3;159 0 T g7f7;139 1 x 1090;138 1 v 0;82 1 x 1200  y 160 ;83 1 y 160 \"}\\n','KEY_FRAME 19\\n{\"entitymodule\":\"U100 0 z 3;154 0;153 0 T g2h2;100 1 v 0;82 1 y 760 ;99 1 x 1330;83 1 x 1320  y 760 \"}\\n','KEY_FRAME 20\\n{\"entitymodule\":\"U108 0 z 3;160 0;159 0 T g3h3;108 1 v 0;82 1 y 640 ;83 1 y 640 ;107 1 x 1330\"}\\n','KEY_FRAME 21\\n{\"entitymodule\":\"U154 0;153 0 T d4d5;119 0 z 3;104 1 y 410;119 1 v 0;82 1 x 840  y 520 ;83 1 x 840  y 400 \"}\\n','KEY_FRAME 22\\n{\"entitymodule\":\"U95 0 z 3;160 0;159 0 T d2c2;95 1 v 0;82 1 y 760 ;96 1 x 730;83 1 x 720  y 760 \"}\\n','KEY_FRAME 23\\n{\"entitymodule\":\"U154 0;153 0 T d1e1;89 0 z 3;82 1 y 880 ;88 1 x 970;89 1 v 0;83 1 x 960  y 880 \"}\\n','KEY_FRAME 24\\n{\"entitymodule\":\"U97 0 z 3;160 0;159 0 T e3e2;97 1 v 0;105 1 y 770;82 1 x 960  y 640 ;83 1 y 760 \"}\\n','KEY_FRAME 25\\n{\"entitymodule\":\"U154 0;153 0 T d5d6;128 0 z 3;104 1 y 290;82 1 x 840  y 400 ;128 1 v 0;83 1 x 840  y 280 \"}\\n','KEY_FRAME 26\\n{\"entitymodule\":\"U160 0;159 0 T a3a2;93 0 z 3;82 1 x 480  y 640 ;101 1 y 770;93 1 v 0;83 1 x 480  y 760 \"}\\n','KEY_FRAME 27\\n{\"entitymodule\":\"U154 0;153 0 T c1c2;96 0 z 3;86 1 y 770;82 1 x 720  y 880 ;96 1 v 0;83 1 x 720 \"}\\n','KEY_FRAME 28\\n{\"entitymodule\":\"U115 0 z 3;160 0;159 0 T h3h4;115 1 v 0;82 1 x 1320  y 640 ;83 1 x 1320  y 520 ;107 1 y 530\"}\\n','KEY_FRAME 29\\n{\"entitymodule\":\"U154 0;153 0 T h5h4;107 0 z 3;82 1 y 400 ;124 1 y 530;107 1 v 0\"}\\n','KEY_FRAME 30\\n{\"entitymodule\":\"U122 0 z 3;160 0;159 0 T g6f6;122 1 v 0;123 1 x 1090;82 1 x 1200  y 280 ;83 1 x 1080  y 280 \"}\\n','KEY_FRAME 31\\n{\"entitymodule\":\"U154 0;153 0 T e6f6;123 0 z 3;123 1 v 0;129 1 x 1090;82 1 x 960 \"}\\n','KEY_FRAME 32\\n{\"entitymodule\":\"U104 0 z 3;160 0;159 0 T c6d6;104 1 v 0;82 1 x 720 ;126 1 x 850;83 1 x 840 \"}\\n','KEY_FRAME 33\\n{\"entitymodule\":\"U154 0;153 0 T e1e2;105 0 z 3;105 1 v 0;82 1 x 960  y 880 ;88 1 y 770;83 1 x 960  y 760 \"}\\n','KEY_FRAME 34\\n{\"entitymodule\":\"U143 0 z 3;160 0;159 0 T c7c8;143 1 v 0;82 1 x 720  y 160 ;135 1 y 50;83 1 x 720  y 40 \"}\\n','KEY_FRAME 35\\n{\"entitymodule\":\"U154 0;153 0 T e2f2;98 0 z 3;82 1 x 960  y 760 ;88 1 x 1090;98 1 v 0;83 1 x 1080  y 760 \"}\\n','KEY_FRAME 36\\n{\"entitymodule\":\"U160 0;159 0 T a2b2;102 0 z 3;82 1 x 480 ;101 1 x 610;102 1 v 0;83 1 x 600 \"}\\n','KEY_FRAME 37\\n{\"entitymodule\":\"U154 0;153 0 T f6f7;139 0 z 3;139 1 v 0;129 1 y 170;82 1 x 1080  y 280 ;83 1 x 1080  y 160 \"}\\n','KEY_FRAME 38\\n{\"entitymodule\":\"U160 0;159 0 T f8f7;129 0 z 3;146 1 y 170;129 1 v 0;82 1 y 40 \"}\\n','KEY_FRAME 39\\n{\"entitymodule\":\"U154 0;153 0 T b5b4;110 0 z 3;118 1 y 530;110 1 v 0;82 1 x 600  y 400 ;83 1 x 600  y 520 \"}\\n','KEY_FRAME 40\\n{\"entitymodule\":\"U113 0 z 3;160 0;159 0 T e5e4;113 1 v 0;82 1 x 960 ;121 1 y 530;83 1 x 960 \"}\\n','KEY_FRAME 41\\n{\"entitymodule\":\"U154 0;153 0 T c2b2;101 0 z 3;86 1 x 610;82 1 x 720  y 760 ;101 1 v 0;83 1 x 600  y 760 \"}\\n','KEY_FRAME 42\\n{\"entitymodule\":\"U160 0;159 0 T e4f4;106 0 z 3;82 1 x 960  y 520 ;121 1 x 1090;83 1 x 1080  y 520 ;106 1 v 0\"}\\n','KEY_FRAME 43\\n{\"entitymodule\":\"U154 0;153 0 T b4c4;103 0 z 3;118 1 x 730;103 1 v 0;82 1 x 600 ;83 1 x 720 \",\"endScreen\":[[1,0],\"logo.png\",[\"Won\",\"Lost\"]]}\\n'],agents:[{index:0,name:\"Player 0\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085734516701&format=viewer_avatar\",agentId:0},{index:1,name:\"Player 1\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085846089817&format=viewer_avatar\",agentId:1}]};function Un(t){return(Un=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Xn(t,e,n){return(Xn=Wn()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&Bn(r,n.prototype),r}).apply(null,arguments)}function Wn(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Bn(t,e){return(Bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kn=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bn(t,e)}(e,function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Xn(t,arguments,Yn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Bn(n,t)}(t)}(Error));var t=function(t){var e=Wn();return function(){var n,r=Yn(t);return function(t,e){if(e&&(\"object\"===Un(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t)}(this,e?(n=Yn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(e);function e(n,r){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(n=t.call(this,'<Error in module \"'+n+'\">')).cause=r,n.name=\"ModuleError\",n}return e}();function Ln(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Hn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ln(Object(n),!0).forEach((function(e){var r,o;r=t,e=n[o=e],o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Nn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.toDestroy=[],this.stepByStepAnimateSpeed=null;var n=e||An;n?(e=n.views,n=n.agents,this.demo={playerCount:n.length,logo:\"logo.png\",overlayAlpha:.2,agents:n,frames:e},this.demo.agents.forEach((function(e){e.color=t.playerColors[e.index]}))):this.demo=void 0}var e,n,o;return e=t,o=[{key:\"requirements\",get:function(){return{PIXI:\"PIXI4\"}}},{key:\"VERSION\",get:function(){return 2}},{key:\"WIDTH\",get:function(){return en}},{key:\"HEIGHT\",get:function(){return 1080}},{key:\"getGameRatio\",value:function(){return t.WIDTH/t.HEIGHT}},{key:\"playerColors\",get:function(){return[\"#ff1d5c\",\"#22a1e4\",\"#ff8f16\",\"#6ac371\",\"#9975e2\",\"#3ac5ca\",\"#de6ddf\",\"#ff0000\"]}},{key:\"SDK_GAME\",get:function(){return!0}},{key:\"RenderTimeout\",get:function(){return\"localhost\"===window.location.hostname?1/0:2e4}}],(n=[{key:\"getDefaultOverSampling\",value:function(){return 2}},{key:\"handleModuleError\",value:function(t,e){l.push(new Kn(t,e)),console.error(e),l.push({message:'<Module \"'.concat(t,'\" disabled>\\n')}),delete this.modules[t]}},{key:\"instantiateModules\",value:function(){this.modules={};var t,e=function(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if(\"string\"==typeof t)return Gn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(t,e):void 0}}(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,i=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(Cn);try{for(e.s();!(t=e.n()).done;){var n=t.value;try{this.modules[n.name]=new n(r)}catch(t){this.handleModuleError(n.name,t)}}}catch(t){e.e(t)}finally{e.f()}}},{key:\"destroy\",value:function(){this.alreadyLoaded&&(this.renderer.destroy(),this.endCallback=null),this.destroyed=!0}},{key:\"destroyScene\",value:function(t){!function(){for(var t=0,e=ie.length;t<e;++t)ie[t].destroy(!0);ie=[]}()}},{key:\"getGameName\",value:function(){}},{key:\"canSwapPlayers\",value:function(){return!1}},{key:\"addErrorListener\",value:function(t){l.listen(t)}},{key:\"getResources\",value:function(){return Object.assign({baseUrl:\"\",images:{},spines:{},sprites:[],fonts:[],others:[]},r)}},{key:\"getOptions\",value:function(){return Mn?Mn.map((function(t){return Hn({},t)})):[]}},{key:\"setDebug\",value:function(e){this.asyncRenderingTime=t.RenderTimeout}},{key:\"initPreload\",value:function(t,e,n,r,o){t.canvasWidth=r,t.canvasHeight=o,t.loaderProgress=new PIXI.Text(\"100\",{fontSize:.117*o||30,fontFamily:\"Lato\",fontWeight:\"900\",fill:\"white\",align:\"center\"}),t.loaderProgress.anchor.y=1,t.loaderProgress.anchor.x=1.3,t.progress=t.realProgress=n,t.loaderProgress.position.y=o,t.progressBar=new PIXI.Graphics,e.addChild(t.progressBar),e.addChild(t.loaderProgress)}},{key:\"preload\",value:function(t,e,n,r,o,i){t.progress=n}},{key:\"renderPreloadScene\",value:function(t,e){return e=Math.pow(.998,e),t.realProgress=e*t.realProgress+(1-e)*t.progress,t.loaderProgress.text=(100*t.realProgress).toFixed(0),t.loaderProgress.position.x=t.realProgress*t.canvasWidth,t.progressBar.clear(),t.progressBar.beginFill(0,1),t.progressBar.drawRect(0,0,t.canvasWidth*t.realProgress+1,t.canvasHeight),t.progressBar.endFill(),t.progressBar.beginFill(4146246,1),t.progressBar.drawRect(t.canvasWidth*t.realProgress,0,t.canvasWidth,t.canvasHeight),t.progressBar.endFill(),!0}},{key:\"initDefaultScene\",value:function(e,n,r,o){var i=new PIXI.Container;if(e.drawer=this,e.time=0,this.demo){if(this.demo.logo)try{var u=PIXI.Sprite.fromFrame(this.demo.logo);u.position.set(t.WIDTH/2,t.HEIGHT/2),u.anchor.set(.5),u.baseScale=a(u.texture.width,u.texture.height,2*t.WIDTH/3,t.HEIGHT/2,0),i.addChild(u),e.logo=u}catch(n){l.push({cause:n,message:'Missing \"logo.png\" to complete replay.'}),e.logo=new PIXI.Container,e.logo.baseScale=1,i.addChild(e.logo),e.missingLogo=!0}var c=new PIXI.Graphics;e.missingLogo||(c.beginFill(0,this.demo.overlayAlpha||0),c.drawRect(0,0,t.WIDTH+20,t.HEIGHT+20),c.endFill(),c.x-=10,c.y-=10),u=new PIXI.Container;try{this.initDefaultFrames(this.demo.playerCount,this.demo.frames,this.demo.agents),this.preconstructScene(this.scope,n,this.initWidth,this.initHeight),this.initScene(this.scope,u,this.frames,!0),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)}catch(n){l.push({cause:n,message:\"Cannot load demo, you might want to reset the demo\"})}e.demo=u,e.demotime=0,this.currentFrame=-1,n.addChild(u),n.addChild(c),n.addChild(i)}e.updateTime=0,e.frameTime=0}},{key:\"initDefaultFrames\",value:function(e,n,r){var o=this;this.instantiateModules(),this.playerInfo=r.map((function(t,e){return{name:t.name||\"Anonymous\",color:t.color?o.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:t.avatarTexture}})),this.instantiateModules(),this._frames=n.map((function(t){var e,n=t.split(\"\\n\");t=n[0].split(\" \");try{e=JSON.parse(n.slice(1).join(\"\\n\"))}catch(t){e={}}return Hn(Hn({},e),{},{key:\"KEY_FRAME\"===t[0]})})).filter((function(t){return t.key})),this.parseGlobalData(this._frames[0].global),this.playerCount=e,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,(e=this._frames[0].frame).key=this._frames[0].key,this.frames.push(this.parseFrame(e,this.frames));for(var i=1;i<this._frames.length;++i)this.frames.push(this.parseFrame(this._frames[i],this.frames));this.asyncRenderingTime=t.RenderTimeout}},{key:\"renderDefaultScene\",value:function(t,e){if(e=Math.min(80,e),void 0===this.demo)return!1;this.currentFrame=this.currentFrameTemp||0,t.frameTime+=e,t.updateTime+=e,t.demotime+=e/1e3;var n=Math.max(0,Math.min(1,(t.demotime-1)/.5));t.logo&&(t.logo.alpha=n,t.logo.scale.x=t.logo.scale.y=(3-2*n)*t.logo.baseScale),!t.missingLogo&&1.5<t.demotime&&t.demotime<=2.2?(r=15*Math.max(0,1-(t.demotime-1.5)/.7),t.demo.x=(2*Math.random()-1)*r,t.demo.y=(2*Math.random()-1)*r):t.demo.x=t.demo.y=0;var r=this.getFrameDuration(this.currentFrame);return 30<=t.updateTime&&(t.updateTime-=30,0===this.currentFrame?this.progress=1:this.progress=i(0,r,t.frameTime),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)),t.frameTime>=r&&(t.frameTime-=r,this.currentFrame=(this.currentFrame+1)%this.frames.length),this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],e,!0),this.currentFrameTemp=this.currentFrame,this.currentFrame=-1,!0}},{key:\"endDefaultScene\",value:function(t,e){return!0}},{key:\"parseGlobalData\",value:function(t){for(var e in this.modules){var n=this.modules[e];\"function\"==typeof n.handleGlobalData&&n.handleGlobalData(this.playerInfo,t[e])}}},{key:\"parseFrame\",value:function(t,e){var n,r={data:{},frameInfo:{number:e.length}};if(r.previous=e[e.length-1]||r,r!==r.previous&&(r.previous.next=r),!t.key)return r.previous;for(n in t.duration&&(this.currentFrameDuration=t.duration),r.frameInfo.frameDuration=this.currentFrameDuration,r===r.previous?(r.frameInfo.date=0,r.frameInfo.frameDuration=0):r.frameInfo.date=r.previous.frameInfo.date+r.previous.frameInfo.frameDuration,this.modules){var o=this.modules[n];\"function\"==typeof o.handleFrameData&&(r.data[n]=o.handleFrameData(r.frameInfo,t[n]))}return r}},{key:\"preconstructScene\",value:function(e,n,r,o){e.canvasHeight=o,e.canvasWidth=r,e.time=0,e.endTime=0,e.playerInfo=this.playerInfo,n.scale.x=r/t.WIDTH,n.scale.y=o/t.HEIGHT}},{key:\"initScene\",value:function(t,e,n){for(var r in this.modules){var o=this.modules[r],i=new PIXI.Container;try{o.reinitScene(i,{width:t.canvasWidth,height:t.canvasHeight,oversampling:this.oversampling})}catch(t){this.handleModuleError(r,t)}e.addChild(i)}}},{key:\"updateScene\",value:function(t,e,n,r,o,i,a,u,c){var s,l=n[r];if(!c&&this.stepByStepAnimateSpeed){if(this.checkSteppedToNextFrame(t,l,o))return void this.startAsynchronousAnimation(t,l);if(this.checkSteppedToPreviousFrame(t,l,o))return void this.startAsynchronousAnimation(t,t.currentFrame,!0);t.targetProgress=null}for(s in t.currentFrame=l,t.currentProgress=o,t.reason=a,this.modules){var f=this.modules[s];if(l.data.hasOwnProperty(s))try{f.updateScene(l.previous.data[s],l.data[s],o,i)}catch(t){this.handleModuleError(s,t)}}}},{key:\"startAsynchronousAnimation\",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t.targetProgress=n?0:1,n||1!==t.currentProgress||(t.currentProgress=0),t.currentFrame=e,t.reverseAsynchronousAnimation=n}},{key:\"checkStepped\",value:function(t,e,n){return t.currentFrame&&0===this.speed&&1===n}},{key:\"checkSteppedToNextFrame\",value:function(t,e,n){return this.checkStepped(t,e,n)&&(t.currentFrame===e.previous&&t.currentFrame!==e||t.currentFrame===e&&t.currentProgress!==n)}},{key:\"checkSteppedToPreviousFrame\",value:function(t,e,n){return this.checkStepped(t,e,n)&&t.currentFrame.previous===e&&t.currentFrame!==e}},{key:\"initEndScene\",value:function(t,e){t.endSceneViewed=!1}},{key:\"destroyEndScene\",value:function(t){}},{key:\"renderEndScene\",value:function(t,e,n){0===t.endTime&&this.initEndScene(t,n),t.endTime+=e,void 0<=t.endTime&&!t.endSceneViewed&&(this.endCallback&&this.endCallback(),t.endSceneViewed=!0)}},{key:\"renderScene\",value:function(t,e,n,r,o,i,a,u){var c,s;for(s in u=Math.min(80,u),this.debugMode||r!==n.length-1||1!==o?(0<t.endTime&&this.destroyEndScene(t),t.endTime=0):this.renderEndScene(t,u,\"Win\"!==a),this.stepByStepAnimateSpeed&&this.isAsynchronousAnimationOngoing(t)&&(o=this.currentFrame,t.reverseAsynchronousAnimation&&o++,a=u/200*this.getFrameSpeed(o)*this.stepByStepAnimateSpeed,t.reverseAsynchronousAnimation?(c=t.currentProgress-a)<=0&&(o=this.currentFrame,t.targetProgress=c=1):(c=t.currentProgress+a,c=Math.min(t.targetProgress,c)),this.updateScene(this.scope,this.question,this.frames,o,c,this.speed,this.reasons[o],!1,!0)),this.modules){var l=this.modules[s];if(\"function\"==typeof l.animateScene)try{l.animateScene(u)}catch(t){this.handleModuleError(s,t)}}return!0}},{key:\"isAsynchronousAnimationOngoing\",value:function(t){return null!=t.targetProgress&&t.currentProgress!==t.targetProgress}},{key:\"getFrameSpeed\",value:function(t){return 500/this.getFrameDuration(t)}},{key:\"getFrameDuration\",value:function(t){return this.frames&&this.frames[t]&&this.frames[t].frameInfo.frameDuration||1e3}},{key:\"enableAsyncRendering\",value:function(e){this.asyncRendering=e,this.asyncRenderingTime=t.RenderTimeout}},{key:\"purge\",value:function(){this.scope={},this.changed=!0,this.container.interactiveChildren=!1,this.container.destroy({texture:!1,children:!0}),delete this.container,this.container=new PIXI.Container}},{key:\"reinitScene\",value:function(){1<=this.loaded&&(this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.preconstructScene(this.scope,this.container,this.initWidth,this.initHeight),this.initScene(this.scope,this.container,this.frames),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame]),this.changed=!0)}},{key:\"reinitDefaultScene\",value:function(){1<=this.loaded&&(this.intro=!0,this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initDefaultScene(this.scope,this.container,this.initWidth,this.initHeight),this.changed=!0)}},{key:\"reinitLoadingScene\",value:function(){this.loaded<1&&(this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initPreload(this.scope,this.container,this.loaded,this.initWidth,this.initHeight))}},{key:\"reinit\",value:function(t){1<=this.loaded&&!this.loading?0<=this.currentFrame&&!this.intro?this.reinitScene():this.intro&&!t||this.reinitDefaultScene():this.reinitLoadingScene()}},{key:\"animate\",value:function(t){var e;this.destroyed||(this.lastRenderTime||(this.lastRenderTime=t),e=t-this.lastRenderTime,this.asynchronousStep&&(e=this.asynchronousStep),this.onBeforeRender&&this.onBeforeRender(),this.loading||(this.loaded<1?this.changed|=this.renderPreloadScene(this.scope,e):(this.changed||this.asyncRendering&&0<this.asyncRenderingTime||this.isAsynchronousAnimationOngoing(this.scope))&&(this.currentFrame<0?this.changed|=this.renderDefaultScene(this.scope,e):this.intro?(this.changed=!0,this.endDefaultScene(this.scope,e)&&(this.intro=!1,this.reinit(!0))):this.changed|=this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame],e)),this.changed&&(this.renderer.render(this.container),this.changed=!1)),this.onAfterRender&&this.onAfterRender(),this.lastRenderTime=t,this.destroyed||requestAnimationFrame(this.animate.bind(this)),this.asyncRenderingTime-=e)}},{key:\"_initFrames\",value:function(t,e){this.instantiateModules(),this._frames=e.map((function(t){var e,n=t[0].split(\" \");try{e=JSON.parse(t.slice(1).join(\"\\n\"))}catch(t){e={}}return Hn(Hn({},e),{},{key:\"KEY_FRAME\"===n[0]})})),this.parseGlobalData(this._frames[0].global),this.playerCount=t,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,(t=this._frames[0].frame).key=this._frames[0].key,this.frames.push(this.parseFrame(t,this.frames));for(var n=1;n<this._frames.length;++n)this.frames.push(this.parseFrame(this._frames[n],this.frames))}},{key:\"isTurnBasedGame\",value:function(){return!1}},{key:\"initFrames\",value:function(t,e){this.playerInfo&&this.playerInfo.forEach((function(t){t.avatar&&t.avatar.destroy(!0)}));var n=this,r=new PIXI.loaders.Loader(window.location.origin);function o(){n._initFrames(e.length,t),n.loading=!1,n.reinit(!1),i=!0}this.playerInfo=e.map((function(t,e){var o={name:t.name||\"Anonymous\",color:t.color?n.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:null};return null!=t.avatar&&r.add(\"avatar\"+e,t.avatar,{loadType:2,crossOrigin:!0},(function(t){o.avatar=t.texture,PIXI.Texture.addToCache(t.texture,\"$\"+o.index)})),o}));var i=!(this.loading=!0);r.on(\"complete\",o),r.on(\"error\",(function(t){console.warn(t),i||o()})),r.load()}},{key:\"update\",value:function(e,n,r){0<=this.currentFrame&&(this.asyncRenderingTime=t.RenderTimeout,this.changed=!0,this.speed=r,this.currentFrame=e,this.progress=n,1<=this.loaded&&!this.intro&&this.updateScene(this.scope,this.question,this.frames,e,n,this.speed,this.reasons[this.currentFrame]))}},{key:\"parseColor\",value:function(t){if(Array.isArray(t)){for(var e=[],n=0;n<t.length;++n)e.push(this.parseColor(t[n]));return e}return parseInt(t.substring(1),16)}},{key:\"init\",value:function(e,n,r,o,i,a,u){var c,s=this;window.PIXI=t.PIXI||window.PIXI,this.oversampling=i||1,i=function(){0<=s.currentFrame&&(s.changed=!0)},this.canvas=$(e),this.canvas.off(\"mousemove\"),this.canvas.off(\"wheel\"),this.canvas.bind(\"wheel\",i),this.canvas.mousemove(i),o&&(this.colors=this.parseColor(o)),\"ide\"===u&&(this.debugModeSetByUser||(this.debugMode=!0),l.listen((function(t){return console.error(t.cause||t)}))),this.asyncRendering=!0,this.asyncRenderingTime=0,this.destroyed=!1,this.asynchronousStep=null;var f=this;if(this.initWidth=0|n,this.initHeight=0|r,this.endCallback=a||this.endCallback,this.alreadyLoaded)this.changed=!0,this.renderer.resize(this.initWidth,this.initHeight),this.reinit(!0);else{this.alreadyLoaded=!0,this.question=null,this.scope=null,this.currentFrame=-1,this.loaded=0,this.container=new PIXI.Container;var h=this.getResources();this.renderer=this.createRenderer(this.initWidth,this.initHeight,e),a=this.renderer,oe=a;var p,y=new PIXI.loaders.Loader(h.baseUrl);for(c in h.images)y.add(c,h.images[c],{crossOrigin:!0});for(p=0;p<h.sprites.length;++p)y.add(h.sprites[p],{crossOrigin:!0});for(p=0;p<h.fonts.length;++p)y.add(h.fonts[p],{crossOrigin:!0});for(c in h.spines)y.add(c,h.spines[c],{crossOrigin:!0});for(p=0;p<h.others.length;++p)y.add(h.others[p],{crossOrigin:!0});this.demo&&this.demo.agents.forEach((function(t){y.add(\"avatar\"+t.index,t.avatar,{loadType:2,crossOrigin:!0},(function(e){t.avatarTexture=e.texture,PIXI.Texture.addToCache(e.texture,\"$\"+t.index)}))})),f.scope={},e=function(t,e){requestAnimationFrame(f.animate.bind(f)),f.initPreload(f.scope,f.container,f.loaded=0,f.initWidth,f.initHeight)},y.on(\"start\",e),y.on(\"progress\",(function(t,e){t.progress<100&&f.preload(f.scope,f.container,f.loaded=t.progress/100,f.initWidth,f.initHeight,e)})),a=function(){for(var t in h.images)h.images.hasOwnProperty(t)&&y.resources[t].texture&&PIXI.Texture.addToCache(y.resources[t].texture,t);for(t in h.spines)h.spines.hasOwnProperty(t)&&(PIXI.AnimCache[t]=PIXI.AnimCache[h.baseUrl+h.spines[t]]);f.loaded=1,f.reinit(!0),f.changed=!0},y.on(\"complete\",a),y.on(\"error\",(function(t){console.warn(t)})),Object.keys(y.resources).length?y.load():(e(),a())}}},{key:\"createRenderer\",value:function(t,e,n){return PIXI.autoDetectRenderer(t,e,{view:n,clearBeforeRender:!0,preserveDrawingBuffer:!1})}},{key:\"isReady\",value:function(){return 1<=this.loaded}}])&&Vn(e.prototype,n),o&&Vn(e,o),t}()}]).Drawer;",
      "levelParams": {
        "0": {
          "aiCode": "//\r\n// Clobber boss\r\n//\r\n\r\n#pragma GCC optimize(\"O3,inline,omit-frame-pointer,unroll-loops\",\"unsafe-math-optimizations\",\"no-trapping-math\")\r\n#pragma GCC option(\"arch=native\",\"tune=native\",\"no-zero-upper\") //Enable AVX\r\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,mmx,avx,avx2,popcnt,rdrnd,abm,bmi2,fma\")  //Enable AVX\r\n\r\n#include <x86intrin.h> //AVX/SSE \r\n\r\n#include <iostream>\r\n#include <string>\r\n#include <vector>\r\n#include <algorithm>\r\n#include <chrono>\r\n#include <cstring>\r\n\r\nusing namespace std;\r\n\r\n// Timer\r\n\r\nclass Timer\r\n{\r\npublic:\r\n\tvoid start ()\r\n\t{\r\n\t\tstartTime = chrono::high_resolution_clock::now ();\r\n\t}\r\n\tbool isElapsed (int milliseconds) const\r\n\t{\r\n\t\tchrono::milliseconds time_span = chrono::duration_cast<chrono::milliseconds>(chrono::high_resolution_clock::now () - startTime);\r\n\t\treturn time_span.count () >= milliseconds;\r\n\t}\r\n\tfriend ostream& operator<< (ostream& stream, Timer& timer)\r\n\t{\r\n\t\tchrono::milliseconds time_span = chrono::duration_cast<chrono::milliseconds>(chrono::high_resolution_clock::now () - timer.startTime);\r\n\t\tstream << time_span.count ();\r\n\t\treturn stream;\r\n\t}\r\nprivate:\r\n\tchrono::high_resolution_clock::time_point startTime;\r\n};\r\n\r\nconst int boardSize = 8;\r\nconst int maxScore = 1000;\r\n\r\nstruct Move\r\n{\r\n\tMove () {}\r\n\tMove (int start, int end) : start (start), end (end) {}\r\n\tbool operator==(const Move& move) const\r\n\t{\r\n\t\treturn start == move.start && end == move.end;\r\n\t}\r\n\tfriend std::ostream& operator<< (std::ostream& stream, const Move& b)\r\n\t{\r\n\t\tstream << (char)('a' + b.start % 8) << (char)('1' + b.start / 8) << (char)('a' + b.end % 8) << (char)('1' + b.end / 8);\r\n\t\treturn stream;\r\n\t}\r\n\tunsigned short start;\r\n\tunsigned short end;\r\n};\r\n\r\nclass Game\r\n{\r\npublic:\r\n\tuint64_t players[2];\r\n\r\n\tvoid playMove (unsigned int player, const Move& move)\r\n\t{\r\n\t\tplayers[player] ^= ((1ull << move.start) | (1ull << move.end));\r\n\t\tplayers[player ^ 1] ^= (1ull << move.end);\r\n\t}\r\n\r\n\tunsigned int getMoves (unsigned int player, Move moves[]) const;\r\n\tint connections (unsigned int player) const;\r\n\tint evaluate (unsigned int player) const;\r\n};\r\n\r\nunsigned int Game::getMoves (unsigned int player, Move moves[]) const\r\n{\r\n\tint moveCount = 0;\r\n\tuint64_t me = players[player];\r\n\tuint64_t opp = players[player ^ 1];\r\n\r\n\t// Left moves\r\n\tuint64_t leftMoves = me & 0xfefefefefefefefe; // Remove 'a' column\r\n\tleftMoves >>= 1; // Move left\r\n\tleftMoves &= opp; // Move on opponent pawns only\r\n\r\n\twhile (leftMoves)\r\n\t{\r\n\t\tint move = __builtin_ctzl (leftMoves);\r\n\t\tmoves[moveCount++] = Move (move + 1, move);\r\n\t\tleftMoves ^= 1ULL << move;\r\n\t}\r\n\t// Right moves\r\n\tuint64_t rightMoves = me & 0x7f7f7f7f7f7f7f7f; // Remove 'h' column\r\n\trightMoves <<= 1; // Move right\r\n\trightMoves &= opp; // Move on opponent pawns only\r\n\r\n\twhile (rightMoves)\r\n\t{\r\n\t\tint move = __builtin_ctzl (rightMoves);\r\n\t\tmoves[moveCount++] = Move (move - 1, move);\r\n\t\trightMoves ^= 1ULL << move;\r\n\t}\r\n\t// Up moves\r\n\tuint64_t upMoves = me;\r\n\tupMoves <<= 8; // Move up\r\n\tupMoves &= opp; // Move on opponent pawns only\r\n\r\n\twhile (upMoves)\r\n\t{\r\n\t\tint move = __builtin_ctzl (upMoves);\r\n\t\tmoves[moveCount++] = Move (move - 8, move);\r\n\t\tupMoves ^= 1ULL << move;\r\n\t}\r\n\t// Down moves\r\n\tuint64_t downMoves = me;\r\n\tdownMoves >>= 8; // Move down\r\n\tdownMoves &= opp; // Move on opponent pawns only\r\n\r\n\twhile (downMoves)\r\n\t{\r\n\t\tint move = __builtin_ctzl (downMoves);\r\n\t\tmoves[moveCount++] = Move (move + 8, move);\r\n\t\tdownMoves ^= 1ULL << move;\r\n\t}\r\n\treturn moveCount;\r\n}\r\n\r\nint Game::connections (unsigned int player) const\r\n{\r\n\tuint64_t me = players[player];\r\n\tuint64_t board = players[0] | players[1];\r\n\r\n\t// Left connections\r\n\tuint64_t leftMoves = me & 0xfefefefefefefefe; // Remove 'a' column\r\n\tleftMoves >>= 1; // Move left\r\n\tleftMoves &= board;\r\n\r\n\t// Right connections\r\n\tuint64_t rightMoves = me & 0x7f7f7f7f7f7f7f7f; // Remove 'h' column\r\n\trightMoves <<= 1; // Move right\r\n\trightMoves &= board; \r\n\r\n\t// Up connections\r\n\tuint64_t upMoves = me;\r\n\tupMoves <<= 8; // Move up\r\n\tupMoves &= board;\r\n\r\n\t// Down connections\r\n\tuint64_t downMoves = me;\r\n\tdownMoves >>= 8; // Move down\r\n\tdownMoves &= board; \r\n\r\n\treturn __builtin_popcountl (leftMoves) + __builtin_popcountl (rightMoves) + __builtin_popcountl (upMoves) + __builtin_popcountl (downMoves);\r\n}\r\n\r\nint Game::evaluate (unsigned int player) const\r\n{\r\n\treturn connections(player) - connections(player^1);\r\n}\r\n\r\nclass MiniMax\r\n{\r\npublic:\r\n\r\n\tvoid search (Game& game, unsigned int player);\r\n\tint search (Game& game, int alpha, int beta, int depth, unsigned int player);\r\n\tMove bestMove;\r\n};\r\n\r\nvoid MiniMax::search (Game& game, unsigned int player)\r\n{\r\n\tMove moves[112];\r\n\tunsigned int moveCount = game.getMoves (player, moves);\r\n\r\n\t// Poor's man iterative deepening\r\n\tint depth = 4;\r\n\tif (moveCount < 40) depth += 2;\r\n\tif (moveCount < 18) depth += 2;\r\n\tif (moveCount < 12) depth += 2;\r\n\r\n    cerr << moveCount << \" \" << depth << endl;\r\n\r\n\tint alpha = -maxScore;\r\n\tint beta = maxScore;\r\n\r\n\tint bestScore = -numeric_limits<int>::max ();\r\n\tfor (int i = 0; i < moveCount; i++)\r\n\t{\r\n\t\tGame child = game;\r\n\t\tchild.playMove (player, moves[i]);\r\n\t\tint result = -search (child, -beta, -alpha, depth - 1, player^1);\r\n\t\tif (result > bestScore)\r\n\t\t{\r\n\t\t\tbestScore = result;\r\n\t\t\tbestMove = moves[i];\r\n\t\t}\r\n\t\talpha = std::max (bestScore, alpha);\r\n\t\tif (alpha >= beta) break;\r\n\t}\r\n}\r\n\r\nint MiniMax::search (Game& game, int alpha, int beta, int depth, unsigned int player)\r\n{\r\n\tMove moves[112];\r\n\tunsigned int moveCount = game.getMoves (player, moves);\r\n\tif (moveCount == 0) return -maxScore;\r\n\tif (depth == 0) return game.evaluate (player);\r\n\r\n\tint bestScore = -numeric_limits<int>::max ();\r\n\tfor (int i = 0; i < moveCount; i++)\r\n\t{\r\n\t\tGame child = game;\r\n\t\tchild.playMove (player, moves[i]);\r\n\t\tint result = -search (child, -beta, -alpha, depth - 1, player^1);\r\n\t\tbestScore = std::max (bestScore, result);\r\n\t\talpha = std::max (bestScore, alpha);\r\n\t\tif (alpha >= beta) break;\r\n\t}\r\n\treturn bestScore;\r\n}\r\n\r\nclass Agent\r\n{\r\npublic:\r\n\tvoid start ();\r\n\tvoid read ();\r\n\tvoid think ();\r\n\tvoid write ();\r\n\r\n\tGame game;\r\n\tTimer timer;\r\n\tMiniMax mm;\r\n\tunsigned int player;\r\n};\r\n\r\nvoid Agent::start ()\r\n{\r\n\tint boardSize; // height and width of the board\r\n\tcin >> boardSize; cin.ignore ();\r\n\tstring color; // current color of your pieces (\"w\" or \"b\")\r\n\tcin >> color; cin.ignore ();\r\n\tplayer = color[0] == 'w' ? 0 : 1;\r\n}\r\n\r\nvoid Agent::read ()\r\n{\r\n\tgame.players[0] = game.players[1] = 0;\r\n\tfor (int i = 0; i < boardSize; i++)\r\n\t{\r\n\t\tstring line; // horizontal row\r\n\t\tcin >> line; cin.ignore ();\r\n\t\tfor (int j = 0; j < boardSize; j++)\r\n\t\t{\r\n\t\t\tuint64_t bit = 1ULL << ((boardSize - i - 1) * boardSize + j);\r\n\t\t\tif (line[j] == 'w')\r\n\t\t\t\tgame.players[0] |= bit;\r\n\t\t\telse if (line[j] == 'b')\r\n\t\t\t\tgame.players[1] |= bit;\r\n\t\t}\r\n\t}\r\n\tstring lastAction; // last action made by the opponent (\"null\" if it's the first turn)\r\n\tcin >> lastAction; cin.ignore ();\r\n\tint actionsCount; // number of legal actions\r\n\tcin >> actionsCount; cin.ignore ();\r\n}\r\n\r\nvoid Agent::think ()\r\n{\r\n\ttimer.start ();\r\n\tmm.search (game, player);\r\n}\r\n\r\nvoid Agent::write ()\r\n{\r\n\tcerr << timer << endl;\r\n\tcout << mm.bestMove << endl;\r\n}\r\n\r\nint main ()\r\n{\r\n\tAgent agent;\r\n\r\n\tagent.start ();\r\n\t// game loop\r\n\twhile (1)\r\n\t{\r\n\t\tagent.read ();\r\n\t\tagent.think ();\r\n\t\tagent.write ();\r\n\t}\r\n}",
          "testCases": [],
          "maxPlayers": 2,
          "minPlayers": 2,
          "statements": {
            "1": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n  <div class=\"statement-body\">\n    <!-- GOAL -->\n    <div class=\"statement-section statement-goal\">\n      <h1>\n        <span class=\"icon icon-goal\">&nbsp;</span>\n        <span>Prsentation du jeu</span>\n      </h1>\n      <div class=\"statement-goal-content\">\n        <p>Ce jeu est une implmentation du jeu de plateau <a href=\"https://en.wikipedia.org/wiki/Clobber\">Clobber</a>.</p>\n        <p>Le code source est accessible <a href=\"https://github.com/darkhorse64/CG_Clobber\">ici</a>.</p>\n        <p>Je tiens  remercier <a href=\"https://www.codingame.com/profile/dfb886f869fc14dc31fc9191a1b87a608740451\">struct</a> qui m'a donn l'autorisation de rutiliser son code pour ce projet.</p>\n      </div>\n    </div>\n    <!-- RULES -->\n    <div class=\"statement-section statement-rules\">\n      <h1>\n          <span class=\"icon icon-rules\">&nbsp;</span>\n          <span>Rgles</span>\n      </h1>\n      <div class=\"statement-rules-content\">\n          <p>Le jeu se droule sur un chiquier de 8x8 cases. Dans la position initiale, toutes les cases sont occupes par un pion, les pions blancs sur les cases blanches, les pions noirs sur les cases noires.</p>\n          <strong>Comment jouer: </strong>\n          <ul>\n            <li>Lors de son tour de jeu, un joueur slectionne un de ses pions et \"dmolit\" un pion de son adversaire situ sur une case adjacente (horizontalement ou verticalement). Le pion qui a t \"dmoli\" est retir du plateau et est remplac par le pion slectionn.</li>\n          </ul>\n          <p>La partie se termine quand un joueur, lors de son tour de jeu, n'a plus de coups disponibles (aucun de ses pions n'est voisin d'un pion adverse). Le joueur a alors perdu la partie.</p> \n          <strong>Fin d'un tour de jeu: </strong>\n          <ul>\n            <li>Le robot doit communiquer les coordonnes du pion qu'il a choisi suivi des coordonnes de sa destination. Les coordonnes sont exprimes en notation chiquenne, par exemple e2e3.</li>\n          </ul>\n          <strong>En cas de coup erron d'un joueur: </strong><br>\n          <ul>\n              <li>Si les positions de dpart ou d'arrive sont en dehors du plateau,</li>\n              <li>Si la case de dpart est occupe par un pion adverse,</li>\n              <li>Si la case d'arrive est vide ou occupe par un des pions sur,</li>\n          </ul>\n          <p>la partie se termine et le joueur perd.</p>\n    </div>\n  </div>\n\n  <!-- EXPERT RULES -->\n  <div class=\"statement-section statement-expertrules\">\n    <h1>\n      <span class=\"icon icon-expertrules\">&nbsp;</span>\n      <span>Rgles pour les experts</span>\n    </h1>\n    <div class=\"statement-expert-rules-content\">\n      Les parties nulles sont impossibles.\n    </div>\n  </div>\n  \n  <!-- Victory conditions -->\n  <div class=\"statement-victory-conditions\">\n      <div class=\"icon victory\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Conditions de victoire</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Etre le dernier joueur  pouvoir dplacer un pion.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- Lose conditions -->\n  <div class=\"statement-lose-conditions\">\n      <div class=\"icon lose\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Conditions de dfaite</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Ne plus avoir de coups  sa disposition.</li>\n                  <li>Ne pas rpondre dans le temps imparti ou envoyer une sortie errone.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- PROTOCOL -->\n  <div class=\"statement-section statement-protocol\">\n      <h1>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Entres/sorties du jeu</span>\n  </h1>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Entres initiales</div>\n      <div class=\"text\">\n          <span class=\"statement-lineno\">Premire ligne</span>: <var>boardSize</var>: le nombre de lignes et de colonnes du plateau.\n          <br>\n          <span class=\"statement-lineno\">Ligne suivante: <var>color</var></span>: la couleur de vos pions (<const>w</const>: blancs, <const>b</const>:noirs).\n      </div>\n    </div>\n\n    <div class=\"blk\">\n      <div class=\"title\">Entres pour chaque tour de jeu</div>\n      <div class=\"text\">\n        <span class=\"statement-lineno\"><var>boardSize</var> lignes</span>: <var>line</var>: une chane de caractres reprsentant une ligne du plateau, de haut en bas. (<const>.</const>: vide, <const>w</const>: pion blanc, <const>b</const>: pion noir).\n        <br>\n        <span class=\"statement-lineno\">Ligne suivante</span>: <var>lastAction</var>: le dernier coup jou par l'adversaire (\"null\" si c'est le premier tour).\n        <br>\n         <span class=\"statement-lineno\">Ligne suivante</span>: <var>actionsCount</var>: le nombre de coups lgaux pour ce tour.\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Sorties</div>\n      <div class=\"text\">\n         <span class=\"statement-lineno\">Une seule ligne</span> contenant les coordonnes de dpart et d'arrive du pion jou, par exemple \"e2e3\".<br>\n          <ul>\n              <li>Vous pouvez afficher un (court) message dans le cartouche de votre joueur en ajoutant un espace aprs le coup suivi du texte de votre message, par exemple \"e2e3 message\".</li>\n              <li>Vous pouvez jouer un coup alatoirement en crivant <const>random</const>  la place de votre coup. Ca n'a vraiment d'utilit que pour crer facilement un robot fonctionnel  l'aide du gnrateur de code.</li>\n          </ul>\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Contraintes</div>\n        Le temps de rponse au premier tour est \n        <const>1000</const> ms.\n        <br>Le temps de rponse pour les tours suivants est \n        <const>150</const> ms.\n      </div>\n  </div>\n</div>",
            "2": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n  <div class=\"statement-body\">\n    <!-- GOAL -->\n    <div class=\"statement-section statement-goal\">\n      <h1>\n        <span class=\"icon icon-goal\">&nbsp;</span>\n        <span>The Game</span>\n      </h1>\n      <div class=\"statement-goal-content\">\n        <p>This is a port of the board game <a href=\"https://en.wikipedia.org/wiki/Clobber\">Clobber</a>.</p>\n        <p>Click <a href=\"https://github.com/darkhorse64/CG_Clobber\">here</a> for the referee.</p>\n        <p>Special thanks to <a href=\"https://www.codingame.com/profile/dfb886f869fc14dc31fc9191a1b87a608740451\">struct</a> for providing me with his referee code as a basis for this work.</p>\n      </div>\n    </div>\n    <!-- RULES -->\n    <div class=\"statement-section statement-rules\">\n      <h1>\n          <span class=\"icon icon-rules\">&nbsp;</span>\n          <span>Rules</span>\n      </h1>\n      <div class=\"statement-rules-content\">\n          <p>The game is played on a 8x8 board. In the initial position, all squares are occupied by a stone, with white stones on the white squares and black stones on the black squares.</p>\n          <strong>How to play: </strong>\n          <ul>\n            <li>A player moves by picking up one of their stones and \"clobbering\" an opponent's stone on an adjacent square (horizontally or vertically). The \"clobbered\" stone is removed from the board and replaced by the stone that was moved.</li>\n          </ul>\n          <p>The game ends when one player, on their turn, is unable to move, and then that player loses.</p> \n          <strong>Ending a turn: </strong>\n          <ul>\n            <li>A bot must output the coordinates of the piece he wants to move followed by its destination coordinates. Coordinates are expressed in chess notation e.g. \"e2e3\"</li>\n          </ul>\n          <strong>Wrong output: </strong><br>\n          <ul>\n              <li>If the starting or destination coordinates are outside of the board,</li>\n              <li>If the starting square is occupied by an opponent stone,</li>\n              <li>If the destination square is empty or occupied by an own piece,</li>\n          </ul>\n          <p>the game will end and the other player will win.</p>\n    </div>\n  </div>\n\n  <!-- EXPERT RULES -->\n  <div class=\"statement-section statement-expertrules\">\n    <h1>\n      <span class=\"icon icon-expertrules\">&nbsp;</span>\n      <span>Expert Rules</span>\n    </h1>\n    <div class=\"statement-expert-rules-content\">\n      Draws are impossible.\n    </div>\n  </div>\n  \n  <!-- Victory conditions -->\n  <div class=\"statement-victory-conditions\">\n      <div class=\"icon victory\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Victory Conditions</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Be the last player to move.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- Lose conditions -->\n  <div class=\"statement-lose-conditions\">\n      <div class=\"icon lose\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Loss Conditions</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Have no legal moves.</li>\n                  <li>You do not respond in time or output an unrecognized command.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- PROTOCOL -->\n  <div class=\"statement-section statement-protocol\">\n      <h1>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Game Input/Output</span>\n  </h1>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Initial input</div>\n      <div class=\"text\">\n          <span class=\"statement-lineno\">First line</span>: <var>boardSize</var>: the number of rows and columns on the board.\n          <br>\n          <span class=\"statement-lineno\">Next line:<var>color</var></span>: the color of your pieces (<const>w</const>: white, <const>b</const>: black).\n      </div>\n    </div>\n\n    <div class=\"blk\">\n      <div class=\"title\">Input for one game turn</div>\n      <div class=\"text\">\n        <span class=\"statement-lineno\">Next <var>boardSize</var> lines</span>: <var>line</var>: a string of characters representing one horizontal row of the grid, top to bottom. (<const>.</const>: empty, <const>w</const>: white, <const>b</const>: black).\n        <br>\n        <span class=\"statement-lineno\">Next line: <var>lastAction</var></span>: the last action made by the opponent (\"null\" if it's the first turn).\n        <br>\n         <span class=\"statement-lineno\">Next line: <var>actionsCount</var></span>: the number of legal actions for this turn.\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"text\">\n         <span class=\"statement-lineno\">A single line</span> containing the coordinates where you want to move from, to, e.g. \"e2e3\".<br>\n          <ul>\n              <li>You can display a (short) comment in the viewer by adding a space after the move and writing its content, e.g. \"e2e3 message\".</li>\n              <li>You can play a random move by outputting <const>random</const> instead of a move. This is admittedly only useful for stub code generation.</li>\n          </ul>\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n        Response time first turn is \n        <const>1000</const> ms.\n        <br>Response time per turn is \n        <const>150</const> ms.\n      </div>\n  </div>\n</div>"
          },
          "questionType": "multi",
          "stubGenerator": "read boardSize:int\nread color:word(1)\n\ngameloop\nloop boardSize read line:word(8)\nread lastAction:word(4)\nread actionsCount:int\nwrite random\n\nINPUT\nboardSize: height and width of the board\ncolor: current color of your pieces (\"w\" or \"b\")\nline: horizontal row\nlastAction: last action made by the opponent (\"null\" if it's the first turn)\nactionsCount: number of legal actions\n\nOUTPUT\ne.g. e2e3 (move piece at e2 to e3)",
          "welcomePopups": {},
          "aiCodeExtension": "cpp",
          "criteriaLanguageMap": {}
        },
        "1": {
          "aiCode": "//\r\n// Clobber boss\r\n//\r\n\r\n#pragma GCC optimize(\"O3,inline,omit-frame-pointer,unroll-loops\",\"unsafe-math-optimizations\",\"no-trapping-math\")\r\n#pragma GCC option(\"arch=native\",\"tune=native\",\"no-zero-upper\") //Enable AVX\r\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,mmx,avx,avx2,popcnt,rdrnd,abm,bmi2,fma\")  //Enable AVX\r\n\r\n#include <x86intrin.h> //AVX/SSE \r\n\r\n#include <iostream>\r\n#include <string>\r\n#include <vector>\r\n#include <algorithm>\r\n#include <chrono>\r\n#include <cstring>\r\n\r\nusing namespace std;\r\n\r\n// Timer\r\n\r\nclass Timer\r\n{\r\npublic:\r\n\tvoid start ()\r\n\t{\r\n\t\tstartTime = chrono::high_resolution_clock::now ();\r\n\t}\r\n\tbool isElapsed (int milliseconds) const\r\n\t{\r\n\t\tchrono::milliseconds time_span = chrono::duration_cast<chrono::milliseconds>(chrono::high_resolution_clock::now () - startTime);\r\n\t\treturn time_span.count () >= milliseconds;\r\n\t}\r\n\tfriend ostream& operator<< (ostream& stream, Timer& timer)\r\n\t{\r\n\t\tchrono::milliseconds time_span = chrono::duration_cast<chrono::milliseconds>(chrono::high_resolution_clock::now () - timer.startTime);\r\n\t\tstream << time_span.count ();\r\n\t\treturn stream;\r\n\t}\r\nprivate:\r\n\tchrono::high_resolution_clock::time_point startTime;\r\n};\r\n\r\nconst int boardSize = 8;\r\nconst int maxScore = 1000;\r\n\r\nstruct Move\r\n{\r\n\tMove () {}\r\n\tMove (int start, int end) : start (start), end (end) {}\r\n\tbool operator==(const Move& move) const\r\n\t{\r\n\t\treturn start == move.start && end == move.end;\r\n\t}\r\n\tfriend std::ostream& operator<< (std::ostream& stream, const Move& b)\r\n\t{\r\n\t\tstream << (char)('a' + b.start % 8) << (char)('1' + b.start / 8) << (char)('a' + b.end % 8) << (char)('1' + b.end / 8);\r\n\t\treturn stream;\r\n\t}\r\n\tunsigned short start;\r\n\tunsigned short end;\r\n};\r\n\r\nclass Game\r\n{\r\npublic:\r\n\tuint64_t players[2];\r\n\r\n\tvoid playMove (unsigned int player, const Move& move)\r\n\t{\r\n\t\tplayers[player] ^= ((1ull << move.start) | (1ull << move.end));\r\n\t\tplayers[player ^ 1] ^= (1ull << move.end);\r\n\t}\r\n\r\n\tunsigned int getMoves (unsigned int player, Move moves[]) const;\r\n\tint connections (unsigned int player) const;\r\n\tint evaluate (unsigned int player) const;\r\n};\r\n\r\nunsigned int Game::getMoves (unsigned int player, Move moves[]) const\r\n{\r\n\tint moveCount = 0;\r\n\tuint64_t me = players[player];\r\n\tuint64_t opp = players[player ^ 1];\r\n\r\n\t// Left moves\r\n\tuint64_t leftMoves = me & 0xfefefefefefefefe; // Remove 'a' column\r\n\tleftMoves >>= 1; // Move left\r\n\tleftMoves &= opp; // Move on opponent pawns only\r\n\r\n\twhile (leftMoves)\r\n\t{\r\n\t\tint move = __builtin_ctzl (leftMoves);\r\n\t\tmoves[moveCount++] = Move (move + 1, move);\r\n\t\tleftMoves ^= 1ULL << move;\r\n\t}\r\n\t// Right moves\r\n\tuint64_t rightMoves = me & 0x7f7f7f7f7f7f7f7f; // Remove 'h' column\r\n\trightMoves <<= 1; // Move right\r\n\trightMoves &= opp; // Move on opponent pawns only\r\n\r\n\twhile (rightMoves)\r\n\t{\r\n\t\tint move = __builtin_ctzl (rightMoves);\r\n\t\tmoves[moveCount++] = Move (move - 1, move);\r\n\t\trightMoves ^= 1ULL << move;\r\n\t}\r\n\t// Up moves\r\n\tuint64_t upMoves = me;\r\n\tupMoves <<= 8; // Move up\r\n\tupMoves &= opp; // Move on opponent pawns only\r\n\r\n\twhile (upMoves)\r\n\t{\r\n\t\tint move = __builtin_ctzl (upMoves);\r\n\t\tmoves[moveCount++] = Move (move - 8, move);\r\n\t\tupMoves ^= 1ULL << move;\r\n\t}\r\n\t// Down moves\r\n\tuint64_t downMoves = me;\r\n\tdownMoves >>= 8; // Move down\r\n\tdownMoves &= opp; // Move on opponent pawns only\r\n\r\n\twhile (downMoves)\r\n\t{\r\n\t\tint move = __builtin_ctzl (downMoves);\r\n\t\tmoves[moveCount++] = Move (move + 8, move);\r\n\t\tdownMoves ^= 1ULL << move;\r\n\t}\r\n\treturn moveCount;\r\n}\r\n\r\nint Game::connections (unsigned int player) const\r\n{\r\n\tuint64_t me = players[player];\r\n\tuint64_t board = players[0] | players[1];\r\n\r\n\t// Left connections\r\n\tuint64_t leftMoves = me & 0xfefefefefefefefe; // Remove 'a' column\r\n\tleftMoves >>= 1; // Move left\r\n\tleftMoves &= board;\r\n\r\n\t// Right connections\r\n\tuint64_t rightMoves = me & 0x7f7f7f7f7f7f7f7f; // Remove 'h' column\r\n\trightMoves <<= 1; // Move right\r\n\trightMoves &= board; \r\n\r\n\t// Up connections\r\n\tuint64_t upMoves = me;\r\n\tupMoves <<= 8; // Move up\r\n\tupMoves &= board;\r\n\r\n\t// Down connections\r\n\tuint64_t downMoves = me;\r\n\tdownMoves >>= 8; // Move down\r\n\tdownMoves &= board; \r\n\r\n\treturn __builtin_popcountl (leftMoves) + __builtin_popcountl (rightMoves) + __builtin_popcountl (upMoves) + __builtin_popcountl (downMoves);\r\n}\r\n\r\nint Game::evaluate (unsigned int player) const\r\n{\r\n\treturn connections(player) - connections(player^1);\r\n}\r\n\r\nclass MiniMax\r\n{\r\npublic:\r\n\r\n\tvoid search (Game& game, unsigned int player);\r\n\tint search (Game& game, int alpha, int beta, int depth, unsigned int player);\r\n\tMove bestMove;\r\n};\r\n\r\nvoid MiniMax::search (Game& game, unsigned int player)\r\n{\r\n\tMove moves[112];\r\n\tunsigned int moveCount = game.getMoves (player, moves);\r\n\r\n\t// Poor's man iterative deepening\r\n\tint depth = 4;\r\n\tif (moveCount < 40) depth += 2;\r\n\tif (moveCount < 18) depth += 2;\r\n\tif (moveCount < 12) depth += 2;\r\n\r\n    cerr << moveCount << \" \" << depth << endl;\r\n\r\n\tint alpha = -maxScore;\r\n\tint beta = maxScore;\r\n\r\n\tint bestScore = -numeric_limits<int>::max ();\r\n\tfor (int i = 0; i < moveCount; i++)\r\n\t{\r\n\t\tGame child = game;\r\n\t\tchild.playMove (player, moves[i]);\r\n\t\tint result = -search (child, -beta, -alpha, depth - 1, player^1);\r\n\t\tif (result > bestScore)\r\n\t\t{\r\n\t\t\tbestScore = result;\r\n\t\t\tbestMove = moves[i];\r\n\t\t}\r\n\t\talpha = std::max (bestScore, alpha);\r\n\t\tif (alpha >= beta) break;\r\n\t}\r\n}\r\n\r\nint MiniMax::search (Game& game, int alpha, int beta, int depth, unsigned int player)\r\n{\r\n\tMove moves[112];\r\n\tunsigned int moveCount = game.getMoves (player, moves);\r\n\tif (moveCount == 0) return -maxScore;\r\n\tif (depth == 0) return game.evaluate (player);\r\n\r\n\tint bestScore = -numeric_limits<int>::max ();\r\n\tfor (int i = 0; i < moveCount; i++)\r\n\t{\r\n\t\tGame child = game;\r\n\t\tchild.playMove (player, moves[i]);\r\n\t\tint result = -search (child, -beta, -alpha, depth - 1, player^1);\r\n\t\tbestScore = std::max (bestScore, result);\r\n\t\talpha = std::max (bestScore, alpha);\r\n\t\tif (alpha >= beta) break;\r\n\t}\r\n\treturn bestScore;\r\n}\r\n\r\nclass Agent\r\n{\r\npublic:\r\n\tvoid start ();\r\n\tvoid read ();\r\n\tvoid think ();\r\n\tvoid write ();\r\n\r\n\tGame game;\r\n\tTimer timer;\r\n\tMiniMax mm;\r\n\tunsigned int player;\r\n};\r\n\r\nvoid Agent::start ()\r\n{\r\n\tint boardSize; // height and width of the board\r\n\tcin >> boardSize; cin.ignore ();\r\n\tstring color; // current color of your pieces (\"w\" or \"b\")\r\n\tcin >> color; cin.ignore ();\r\n\tplayer = color[0] == 'w' ? 0 : 1;\r\n}\r\n\r\nvoid Agent::read ()\r\n{\r\n\tgame.players[0] = game.players[1] = 0;\r\n\tfor (int i = 0; i < boardSize; i++)\r\n\t{\r\n\t\tstring line; // horizontal row\r\n\t\tcin >> line; cin.ignore ();\r\n\t\tfor (int j = 0; j < boardSize; j++)\r\n\t\t{\r\n\t\t\tuint64_t bit = 1ULL << ((boardSize - i - 1) * boardSize + j);\r\n\t\t\tif (line[j] == 'w')\r\n\t\t\t\tgame.players[0] |= bit;\r\n\t\t\telse if (line[j] == 'b')\r\n\t\t\t\tgame.players[1] |= bit;\r\n\t\t}\r\n\t}\r\n\tstring lastAction; // last action made by the opponent (\"null\" if it's the first turn)\r\n\tcin >> lastAction; cin.ignore ();\r\n\tint actionsCount; // number of legal actions\r\n\tcin >> actionsCount; cin.ignore ();\r\n}\r\n\r\nvoid Agent::think ()\r\n{\r\n\ttimer.start ();\r\n\tmm.search (game, player);\r\n}\r\n\r\nvoid Agent::write ()\r\n{\r\n\tcerr << timer << endl;\r\n\tcout << mm.bestMove << endl;\r\n}\r\n\r\nint main ()\r\n{\r\n\tAgent agent;\r\n\r\n\tagent.start ();\r\n\t// game loop\r\n\twhile (1)\r\n\t{\r\n\t\tagent.read ();\r\n\t\tagent.think ();\r\n\t\tagent.write ();\r\n\t}\r\n}",
          "testCases": [],
          "maxPlayers": 2,
          "minPlayers": 2,
          "statements": {
            "1": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n  <div class=\"statement-body\">\n    <!-- GOAL -->\n    <div class=\"statement-section statement-goal\">\n      <h1>\n        <span class=\"icon icon-goal\">&nbsp;</span>\n        <span>Prsentation du jeu</span>\n      </h1>\n      <div class=\"statement-goal-content\">\n        <p>Ce jeu est une implmentation du jeu de plateau <a href=\"https://en.wikipedia.org/wiki/Clobber\">Clobber</a>.</p>\n        <p>Le code source est accessible <a href=\"https://github.com/darkhorse64/CG_Clobber\">ici</a>.</p>\n        <p>Je tiens  remercier <a href=\"https://www.codingame.com/profile/dfb886f869fc14dc31fc9191a1b87a608740451\">struct</a> qui m'a donn l'autorisation de rutiliser son code pour ce projet.</p>\n      </div>\n    </div>\n    <!-- RULES -->\n    <div class=\"statement-section statement-rules\">\n      <h1>\n          <span class=\"icon icon-rules\">&nbsp;</span>\n          <span>Rgles</span>\n      </h1>\n      <div class=\"statement-rules-content\">\n          <p>Le jeu se droule sur un chiquier de 8x8 cases. Dans la position initiale, toutes les cases sont occupes par un pion, les pions blancs sur les cases blanches, les pions noirs sur les cases noires.</p>\n          <strong>Comment jouer: </strong>\n          <ul>\n            <li>Lors de son tour de jeu, un joueur slectionne un de ses pions et \"dmolit\" un pion de son adversaire situ sur une case adjacente (horizontalement ou verticalement). Le pion qui a t \"dmoli\" est retir du plateau et est remplac par le pion slectionn.</li>\n          </ul>\n          <p>La partie se termine quand un joueur, lors de son tour de jeu, n'a plus de coups disponibles (aucun de ses pions n'est voisin d'un pion adverse). Le joueur a alors perdu la partie.</p> \n          <strong>Fin d'un tour de jeu: </strong>\n          <ul>\n            <li>Le robot doit communiquer les coordonnes du pion qu'il a choisi suivi des coordonnes de sa destination. Les coordonnes sont exprimes en notation chiquenne, par exemple e2e3.</li>\n          </ul>\n          <strong>En cas de coup erron d'un joueur: </strong><br>\n          <ul>\n              <li>Si les positions de dpart ou d'arrive sont en dehors du plateau,</li>\n              <li>Si la case de dpart est occupe par un pion adverse,</li>\n              <li>Si la case d'arrive est vide ou occupe par un des pions sur,</li>\n          </ul>\n          <p>la partie se termine et le joueur perd.</p>\n    </div>\n  </div>\n\n  <!-- EXPERT RULES -->\n  <div class=\"statement-section statement-expertrules\">\n    <h1>\n      <span class=\"icon icon-expertrules\">&nbsp;</span>\n      <span>Rgles pour les experts</span>\n    </h1>\n    <div class=\"statement-expert-rules-content\">\n      Les parties nulles sont impossibles.\n    </div>\n  </div>\n  \n  <!-- Victory conditions -->\n  <div class=\"statement-victory-conditions\">\n      <div class=\"icon victory\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Conditions de victoire</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Etre le dernier joueur  pouvoir dplacer un pion.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- Lose conditions -->\n  <div class=\"statement-lose-conditions\">\n      <div class=\"icon lose\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Conditions de dfaite</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Ne plus avoir de coups  sa disposition.</li>\n                  <li>Ne pas rpondre dans le temps imparti ou envoyer une sortie errone.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- PROTOCOL -->\n  <div class=\"statement-section statement-protocol\">\n      <h1>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Entres/sorties du jeu</span>\n  </h1>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Entres initiales</div>\n      <div class=\"text\">\n          <span class=\"statement-lineno\">Premire ligne</span>: <var>boardSize</var>: le nombre de lignes et de colonnes du plateau.\n          <br>\n          <span class=\"statement-lineno\">Ligne suivante: <var>color</var></span>: la couleur de vos pions (<const>w</const>: blancs, <const>b</const>:noirs).\n      </div>\n    </div>\n\n    <div class=\"blk\">\n      <div class=\"title\">Entres pour chaque tour de jeu</div>\n      <div class=\"text\">\n        <span class=\"statement-lineno\"><var>boardSize</var> lignes</span>: <var>line</var>: une chane de caractres reprsentant une ligne du plateau, de haut en bas. (<const>.</const>: vide, <const>w</const>: pion blanc, <const>b</const>: pion noir).\n        <br>\n        <span class=\"statement-lineno\">Ligne suivante</span>: <var>lastAction</var>: le dernier coup jou par l'adversaire (\"null\" si c'est le premier tour).\n        <br>\n         <span class=\"statement-lineno\">Ligne suivante</span>: <var>actionsCount</var>: le nombre de coups lgaux pour ce tour.\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Sorties</div>\n      <div class=\"text\">\n         <span class=\"statement-lineno\">Une seule ligne</span> contenant les coordonnes de dpart et d'arrive du pion jou, par exemple \"e2e3\".<br>\n          <ul>\n              <li>Vous pouvez afficher un (court) message dans le cartouche de votre joueur en ajoutant un espace aprs le coup suivi du texte de votre message, par exemple \"e2e3 message\".</li>\n              <li>Vous pouvez jouer un coup alatoirement en crivant <const>random</const>  la place de votre coup. Ca n'a vraiment d'utilit que pour crer facilement un robot fonctionnel  l'aide du gnrateur de code.</li>\n          </ul>\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Contraintes</div>\n        Le temps de rponse au premier tour est \n        <const>1000</const> ms.\n        <br>Le temps de rponse pour les tours suivants est \n        <const>150</const> ms.\n      </div>\n  </div>\n</div>",
            "2": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n  <div class=\"statement-body\">\n    <!-- GOAL -->\n    <div class=\"statement-section statement-goal\">\n      <h1>\n        <span class=\"icon icon-goal\">&nbsp;</span>\n        <span>The Game</span>\n      </h1>\n      <div class=\"statement-goal-content\">\n        <p>This is a port of the board game <a href=\"https://en.wikipedia.org/wiki/Clobber\">Clobber</a>.</p>\n        <p>Click <a href=\"https://github.com/darkhorse64/CG_Clobber\">here</a> for the referee.</p>\n        <p>Special thanks to <a href=\"https://www.codingame.com/profile/dfb886f869fc14dc31fc9191a1b87a608740451\">struct</a> for providing me with his referee code as a basis for this work.</p>\n      </div>\n    </div>\n    <!-- RULES -->\n    <div class=\"statement-section statement-rules\">\n      <h1>\n          <span class=\"icon icon-rules\">&nbsp;</span>\n          <span>Rules</span>\n      </h1>\n      <div class=\"statement-rules-content\">\n          <p>The game is played on a 8x8 board. In the initial position, all squares are occupied by a stone, with white stones on the white squares and black stones on the black squares.</p>\n          <strong>How to play: </strong>\n          <ul>\n            <li>A player moves by picking up one of their stones and \"clobbering\" an opponent's stone on an adjacent square (horizontally or vertically). The \"clobbered\" stone is removed from the board and replaced by the stone that was moved.</li>\n          </ul>\n          <p>The game ends when one player, on their turn, is unable to move, and then that player loses.</p> \n          <strong>Ending a turn: </strong>\n          <ul>\n            <li>A bot must output the coordinates of the piece he wants to move followed by its destination coordinates. Coordinates are expressed in chess notation e.g. \"e2e3\"</li>\n          </ul>\n          <strong>Wrong output: </strong><br>\n          <ul>\n              <li>If the starting or destination coordinates are outside of the board,</li>\n              <li>If the starting square is occupied by an opponent stone,</li>\n              <li>If the destination square is empty or occupied by an own piece,</li>\n          </ul>\n          <p>the game will end and the other player will win.</p>\n    </div>\n  </div>\n\n  <!-- EXPERT RULES -->\n  <div class=\"statement-section statement-expertrules\">\n    <h1>\n      <span class=\"icon icon-expertrules\">&nbsp;</span>\n      <span>Expert Rules</span>\n    </h1>\n    <div class=\"statement-expert-rules-content\">\n      Draws are impossible.\n    </div>\n  </div>\n  \n  <!-- Victory conditions -->\n  <div class=\"statement-victory-conditions\">\n      <div class=\"icon victory\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Victory Conditions</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Be the last player to move.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- Lose conditions -->\n  <div class=\"statement-lose-conditions\">\n      <div class=\"icon lose\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Loss Conditions</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Have no legal moves.</li>\n                  <li>You do not respond in time or output an unrecognized command.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- PROTOCOL -->\n  <div class=\"statement-section statement-protocol\">\n      <h1>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Game Input/Output</span>\n  </h1>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Initial input</div>\n      <div class=\"text\">\n          <span class=\"statement-lineno\">First line</span>: <var>boardSize</var>: the number of rows and columns on the board.\n          <br>\n          <span class=\"statement-lineno\">Next line:<var>color</var></span>: the color of your pieces (<const>w</const>: white, <const>b</const>: black).\n      </div>\n    </div>\n\n    <div class=\"blk\">\n      <div class=\"title\">Input for one game turn</div>\n      <div class=\"text\">\n        <span class=\"statement-lineno\">Next <var>boardSize</var> lines</span>: <var>line</var>: a string of characters representing one horizontal row of the grid, top to bottom. (<const>.</const>: empty, <const>w</const>: white, <const>b</const>: black).\n        <br>\n        <span class=\"statement-lineno\">Next line: <var>lastAction</var></span>: the last action made by the opponent (\"null\" if it's the first turn).\n        <br>\n         <span class=\"statement-lineno\">Next line: <var>actionsCount</var></span>: the number of legal actions for this turn.\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"text\">\n         <span class=\"statement-lineno\">A single line</span> containing the coordinates where you want to move from, to, e.g. \"e2e3\".<br>\n          <ul>\n              <li>You can display a (short) comment in the viewer by adding a space after the move and writing its content, e.g. \"e2e3 message\".</li>\n              <li>You can play a random move by outputting <const>random</const> instead of a move. This is admittedly only useful for stub code generation.</li>\n          </ul>\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n        Response time first turn is \n        <const>1000</const> ms.\n        <br>Response time per turn is \n        <const>150</const> ms.\n      </div>\n  </div>\n</div>"
          },
          "questionType": "multi",
          "stubGenerator": "read boardSize:int\nread color:word(1)\n\ngameloop\nloop boardSize read line:word(8)\nread lastAction:word(4)\nread actionsCount:int\nwrite random\n\nINPUT\nboardSize: height and width of the board\ncolor: current color of your pieces (\"w\" or \"b\")\nline: horizontal row\nlastAction: last action made by the opponent (\"null\" if it's the first turn)\nactionsCount: number of legal actions\n\nOUTPUT\ne.g. e2e3 (move piece at e2 to e3)",
          "welcomePopups": {
            "1": "<div style=\"text-align:center\">\r\n  <h2>Vous venez d&#39;atteindre la ligue suprieure.</h2>\r\n  Les rgles n&#39;ont pas chang mais vos adversaires sont plus coriaces\r\n</div>",
            "2": "<div style=\"text-align:center\">\r\n  <h2>You&#39;ve made it to the next league.</h2>\r\n  There are no rule changes but opponents are tougher\r\n</div>"
          },
          "aiCodeExtension": "cpp",
          "criteriaLanguageMap": {}
        }
      },
      "directoryPrefix": "community/2923506-1613249324752",
      "allowSourceDownload": false
    },
    "draft": false,
    "readyForModeration": true
  },
  "validatedFor": 155577626565,
  "avatar": 23496414257567,
  "commentCount": 28,
  "upVotes": 17,
  "downVotes": 0,
  "validateAction": {
    "actionId": 537317,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1615153038153,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}