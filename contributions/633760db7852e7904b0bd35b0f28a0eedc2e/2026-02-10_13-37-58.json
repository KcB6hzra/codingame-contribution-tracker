{
  "id": 6337,
  "activeVersion": 33,
  "score": 5,
  "votableId": 17190915,
  "codingamerId": 3730005,
  "views": 264,
  "commentableId": 17099290,
  "title": "IPv6 Shortener",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "Toby75",
  "publicHandle": "633760db7852e7904b0bd35b0f28a0eedc2e",
  "codingamerHandle": "37de7815427e253a059b647cad5230975000373",
  "lastVersion": {
    "version": 33,
    "autocloseTime": 1616855545121,
    "data": {
      "title": "IPv6 Shortener",
      "topics": [
        {
          "id": 98,
          "handle": "regular-expressions",
          "labelMap": {
            "1": "Regular expressions",
            "2": "Regular expressions"
          },
          "puzzleCount": 2,
          "parentTopicId": 93
        },
        {
          "id": 73,
          "handle": "strings",
          "labelMap": {
            "1": "Chaînes de caractères",
            "2": "Strings"
          },
          "pageTitle": "Strings: exercises and theory",
          "puzzleCount": 20,
          "parentTopicId": 41,
          "contentDetailsId": 73
        },
        {
          "id": 46,
          "handle": "loops",
          "labelMap": {
            "1": "Boucles",
            "2": "Loops"
          },
          "pageTitle": "Loops: exercises and theory",
          "puzzleCount": 35,
          "parentTopicId": 39,
          "contentDetailsId": 71
        },
        {
          "id": 67,
          "handle": "parsing",
          "labelMap": {
            "1": "Parsing",
            "2": "Parsing"
          },
          "pageTitle": "Parsing: exercises and theory",
          "puzzleCount": 9,
          "parentTopicId": 41,
          "contentDetailsId": 102
        },
        {
          "id": 99,
          "handle": "compression",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Compression",
            "2": "Compression"
          },
          "puzzleCount": 5,
          "parentTopicId": 93
        }
      ],
      "solution": "let ip = readline();\nlet blocks = ip.split(\":\");\nlet longest = 0;\nlet longest_left = -1;\nlet longest_right = -1;\nlet current = 0;\nlet current_right = -1;\nfor(let i = 0; i < blocks.length; i++) {\n    if (blocks[i] == \"0000\") {\n        current += 1;\n        current_right = i;\n        if (current > longest) {\n            longest = current;\n            longest_right = current_right;\n        }\n    } else {\n        current = 0;\n        current_right = -1;\n    }\n}\nif (longest >= 2) {\n    longest_left = longest_right - longest + 1;\n} else {\n    longest = 0;\n    longest_right = -1;\n}\nlet answer = [];\nfor(let i = 0; i < blocks.length; i++) {\n    if (i == longest_left) {\n        answer.push((i == 0 || longest_right == 7) ? \":\" : \"\");\n    } else if (i < longest_left || i > longest_right) {\n        answer.push(removeLeadingZeros(blocks[i]));\n    }\n}\nip = answer.join(\":\");\nconsole.log(ip);\n\nfunction removeLeadingZeros(str) {\n    for(let i = 3; i > 0; i--) {\n        if(str.startsWith(\"0\".repeat(i))) {\n            return str.replace(\"0\".repeat(i), \"\");\n        }\n    }\n    return str;\n}",
      "statement": "An IPv6-Address is the next-generation network address for electronic devices.\nCompared to an IPv4 address, it is made up of 8 blocks that are 4 hexadecimal digits long, split by colons.\nAn example of an IPv6 address is {{2001:0000:3c4d:0015:0000:0000:0db8:1a2b}}\n\nTo avoid needing to write so many digits, you can short an IPv6 address very easily by removing unneeded zeros.\nThe goal of this puzzle is to compress the IPv6 address, that it gets shortened.\nThe shortened version would look like this: {{2001:0:3c4d:15::db8:1a2b}}\n\nYou can see that the leading zeros of all the blocks were removed, and a double colon replaced the longest chains of blocks that contained zeros only.\n\nTo find out where the double colon needs to be placed, you simply take a look where the longest streak of zero-only blocks is:\n`\n2001:0000:3c4d:0015:0000:0000:0db8:1a2b\n    |----|`\nThis is a zero-only block, but not the longest - it can be shortened to simply a {{0}}\n\n`\n2001:0:3c4d:0015:0000:0000:0db8:1a2b\n                |---------|`\nWhen you find the longest streak, as in the example above, simply replace it with a {{::}}\nIf there are two or more streaks, separate from each other, with the same length, replace the first one starting from the left. The number of zero-only blocks does not matter how many colons you need to use - it is always two colons.\n\nThe last step is to remove the leading zeros of every block.\n\nIf everything was successful, then you have your shortened IPv6, in this case: {{2001:0:3c4d:15::db8:1a2b}}\n\n<<Notes:>> The double colon may only be used once in the whole address at the longest streak of zero blocks, and only if there are two or more zero blocks next to each other. The rest of the single blocks that contain zeros only must be represented as only one zero in the whole block, no matter if they are next to each other.",
      "testCases": [
        {
          "title": "Simple Address",
          "isTest": true,
          "testIn": "2001:0000:3c4d:0015:0000:0000:0db8:1a2b",
          "testOut": "2001:0:3c4d:15::db8:1a2b",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Simple Address",
          "isTest": false,
          "testIn": "2001:0000:0000:0015:27ab:1203:1a2f:1a2b",
          "testOut": "2001::15:27ab:1203:1a2f:1a2b",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Loopback Address",
          "isTest": true,
          "testIn": "0000:0000:0000:0000:0000:0000:0000:0001",
          "testOut": "::1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Similar to Loopback Address",
          "isTest": false,
          "testIn": "0000:0000:0000:0000:0000:0000:0001:0001",
          "testOut": "::1:1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Multiple Zero Blocks",
          "isTest": true,
          "testIn": "2001:0000:0000:0000:0001:0000:1a2f:1a2b",
          "testOut": "2001::1:0:1a2f:1a2b",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Multiple Zero Blocks",
          "isTest": false,
          "testIn": "2001:0000:0000:0000:3ac3:0000:0000:1a2b",
          "testOut": "2001::3ac3:0:0:1a2b",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "No Zero Blocks",
          "isTest": true,
          "testIn": "2001:2021:ab23:82ae:0021:0001:1a2f:1a2b",
          "testOut": "2001:2021:ab23:82ae:21:1:1a2f:1a2b",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "No Zero Blocks",
          "isTest": false,
          "testIn": "2001:2071:ab23:82ae:0021:0073:1a3f:1a2b",
          "testOut": "2001:2071:ab23:82ae:21:73:1a3f:1a2b",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "One Zero Block",
          "isTest": true,
          "testIn": "fe80:5c77:3430:7667:0000:ce27:43d0:ab34",
          "testOut": "fe80:5c77:3430:7667:0:ce27:43d0:ab34",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "One Zero Block",
          "isTest": false,
          "testIn": "1a4b:cafe:0029:1317:abe2:0000:2acf:90ab",
          "testOut": "1a4b:cafe:29:1317:abe2:0:2acf:90ab",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "No Full Zero Block",
          "isTest": true,
          "testIn": "fe80:0023:2027:00dd:918f:0001:0023:0e68",
          "testOut": "fe80:23:2027:dd:918f:1:23:e68",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "No Full Zero Block",
          "isTest": false,
          "testIn": "fe80:0273:2027:00dd:91ef:0001:023b:0e68",
          "testOut": "fe80:273:2027:dd:91ef:1:23b:e68",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Zero Blocks of Same Length",
          "isTest": true,
          "testIn": "0000:0000:0100:0000:0000:0004:aaaa:0000",
          "testOut": "::100:0:0:4:aaaa:0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Zero Blocks of Same Length",
          "isTest": false,
          "testIn": "0000:0000:0000:0100:0000:0000:0000:0006",
          "testOut": "::100:0:0:0:6",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Zero Block at the End",
          "isTest": true,
          "testIn": "0000:aaaa:a000:0000:000a:0030:0000:0000",
          "testOut": "0:aaaa:a000:0:a:30::",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Zero Block at the End",
          "isTest": false,
          "testIn": "0000:0000:097d:0000:0064:0000:0000:0000",
          "testOut": "0:0:97d:0:64::",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "easy",
      "constraints": "[[ip]] consists of 8 blocks of 4 hexadecimal symbols separated by colons.",
      "stubGenerator": "read ip:string(40)\nwrite output",
      "inputDescription": "A string [[ip]] that is the uncompressed IPv6 address.",
      "solutionLanguage": "Javascript",
      "outputDescription": "A string [[output]] that is the compressed IPv6 address."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">An IPv6-Address is the next-generation network address for electronic devices.<br>Compared to an IPv4 address, it is made up of 8 blocks that are 4 hexadecimal digits long, split by colons.<br>An example of an IPv6 address is <const>2001:0000:3c4d:0015:0000:0000:0db8:1a2b</const><br><br>To avoid needing to write so many digits, you can short an IPv6 address very easily by removing unneeded zeros.<br>The goal of this puzzle is to compress the IPv6 address, that it gets shortened.<br>The shortened version would look like this: <const>2001:0:3c4d:15::db8:1a2b</const><br><br>You can see that the leading zeros of all the blocks were removed, and a double colon replaced the longest chains of blocks that contained zeros only.<br><br>To find out where the double colon needs to be placed, you simply take a look where the longest streak of zero-only blocks is:<br><pre style=\"font-family: monospace\"><br>2001:0000:3c4d:0015:0000:0000:0db8:1a2b<br>    |----|</pre><br>This is a zero-only block, but not the longest - it can be shortened to simply a <const>0</const><br><br><pre style=\"font-family: monospace\"><br>2001:0:3c4d:0015:0000:0000:0db8:1a2b<br>                |---------|</pre><br>When you find the longest streak, as in the example above, simply replace it with a <const>::</const><br>If there are two or more streaks, separate from each other, with the same length, replace the first one starting from the left. The number of zero-only blocks does not matter how many colons you need to use - it is always two colons.<br><br>The last step is to remove the leading zeros of every block.<br><br>If everything was successful, then you have your shortened IPv6, in this case: <const>2001:0:3c4d:15::db8:1a2b</const><br><br><strong>Notes:</strong> The double colon may only be used once in the whole address at the longest streak of zero blocks, and only if there are two or more zero blocks next to each other. The rest of the single blocks that contain zeros only must be represented as only one zero in the whole block, no matter if they are next to each other.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\">A string <var>ip</var> that is the uncompressed IPv6 address.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">A string <var>output</var> that is the compressed IPv6 address.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\"><var>ip</var> consists of 8 blocks of 4 hexadecimal symbols separated by colons.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">2001:0000:3c4d:0015:0000:0000:0db8:1a2b</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">2001:0:3c4d:15::db8:1a2b</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 156463347479,
  "avatar": 56731724877017,
  "commentCount": 22,
  "upVotes": 6,
  "downVotes": 1,
  "validateAction": {
    "actionId": 535002,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1614267329784,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}