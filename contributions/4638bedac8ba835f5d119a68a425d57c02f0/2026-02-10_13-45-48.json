{
  "id": 4638,
  "activeVersion": 17,
  "score": 14,
  "votableId": 11748257,
  "codingamerId": 2923506,
  "views": 555,
  "commentableId": 11674649,
  "title": "Breakthrough",
  "status": "ACCEPTED",
  "type": "PUZZLE_MULTI",
  "nickname": "darkhorse64",
  "publicHandle": "4638bedac8ba835f5d119a68a425d57c02f0",
  "codingamerHandle": "c9ebe76a83b33730956eda0534d6cad86053292",
  "lastVersion": {
    "version": 17,
    "autocloseTime": 1574115278185,
    "data": {
      "title": "Breakthrough",
      "topics": [
        {
          "id": 83,
          "handle": "minimax",
          "labelMap": {
            "1": "Minimax",
            "2": "Minimax"
          },
          "pageTitle": "Minimax: exercises and theory",
          "puzzleCount": 9,
          "parentTopicId": 42,
          "contentDetailsId": 93
        },
        {
          "id": 92,
          "handle": "MCTS",
          "labelMap": {
            "1": "Monte Carlo tree search",
            "2": "Monte Carlo tree search"
          },
          "puzzleCount": 4,
          "parentTopicId": 41
        },
        {
          "labelMap": {
            "2": "Bitboarding"
          }
        }
      ],
      "refereeMd5": "2923506/1c269273ac6f42be4a8a3ea2bd784de9",
      "testHandle": "82948793131be248083298306e44774225f5c0",
      "viewerCode": "var Drawer=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";n.r(e);var r={baseUrl:\"https://cdn-games.codingame.com/community/2923506-1571515727346/\",images:{\"black_pawn.png\":\"8074083fa74d96df5616db08ea5252f35c4b75bd76d977f5387ebbda6845f627.png\",\"white_pawn.png\":\"f17b6a17804171d136e6e4ecd78f1e6a63b8e6ca24c4740b2fef3f13eab2e509.png\",\"chessboard.png\":\"f277811b237a87fc6beb647f58259b0a5c6ab20dec876a1fb6d2af5786f599c8.png\"},sprites:[],fonts:[]};function i(t,e,n){return t<=e?t+(e-t)*n:e+(t-e)*(1-n)}function o(t,e,n){return Math.min(1,Math.max(0,function(t,e,n){return(n-t)/(e-t)}(t,e,n)))}function a(t,e,n,r,i){return i=i||0,Math.min(n/(t+i),r/(e+i))}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=[],c=[],l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return function(t,e,n){n&&u(t,n)}(t,0,[{key:\"listen\",value:function(t){if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");c.push(t)}},{key:\"push\",value:function(t){s.push(t),c.forEach((function(e){return e(t)}))}}]),t}();function f(t){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function p(t){var e=\"function\"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf(\"[native code]\")}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){return(function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}(t,arguments,y(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(){function t(e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(r=function(t,e){return!e||\"object\"!==f(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,y(t).call(this,\"Invalid color token: there is no player at index \".concat(e,\". Make sure to use getColorToken() if you want the color of a specific player.\")))).playerIdx=e,r.cause=n,r.name=\"InvalidPlayerColorTokenError\",r}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(t,p(Error)),t}();function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(n,!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e,n){return n<1?t:e}var w={type:Number,lerpMethod:function(t,e,n){if(null===e)return null;var r={r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t},o={r:(16711680&e)>>16,g:(65280&e)>>8,b:255&e};return i(r.r,o.r,n)<<16|i(r.g,o.g,n)<<8|i(r.b,o.b,n)},convert:function(t,e){var n=-(t+1);try{return t<0?e.players[n].color:t}catch(t){return l.push(new d(n)),16777215}}},O={type:String,lerpMethod:v,convert:function(t){return k(t)}},S={type:Number,lerpMethod:function(t,e,n,r){for(;e>t+Math.PI;)e-=2*Math.PI;for(;e<t-Math.PI;)e+=2*Math.PI;return(void 0!==r&&Math.abs(e-t)>r?e:t+(e-t)*n)%(2*Math.PI)},convert:function(t){return t*Math.PI/180}},P={type:Number,lerpMethod:v},x={type:function(t){return\"1\"===t},lerpMethod:v},_={type:Number,lerpMethod:function(t,e,n){return e<t?e:i(t,e,n)}},j={default:{type:Number,lerpMethod:i},visible:x,rotation:S,skewX:S,skewY:S,fillColor:w,lineColor:w,strokeColor:w,tint:w,animationProgressTime:_,mask:P,baseWidth:P,baseHeight:P,image:O,images:O,scaleMode:O,restarted:{type:String,convert:function(t,e,n,r){return t?{date:n.date+r*n.frameDuration}:null},lerpMethod:v},playing:x,duration:P,blendMode:P,loop:x,text:g({},O,{convert:function(t,e){t=k(t);for(var n=/\\$(\\d)/g,r=n.exec(t),i=\"\",o=0;r;)i+=t.substring(o,r.index),i+=e.players[+r[1]].name,o=r.index+r[0].length,r=n.exec(t);return i+t.substring(o)}}),fontFamily:O,fontWeight:O,children:g({},O,{convert:function(t){return t?t.split(\",\").map((function(t){return+t})):[]}}),points:g({},O,{convert:function(t){return t?t.split(\",\").map((function(t){return parseInt(t)})):[]},lerpMethod:function(t,e,n){return t.length===e.length?t.map((function(t,r){return i(t,e[r],n)})):v(t,e,n)}})};function k(t){var e=t.split(\"\\\\'\").join(\"'\");return e.includes(\" \")||e.includes(\";\")?e.slice(1,e.length-1):e}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T(t){return(T=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.defaultState={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0,zIndex:0,alpha:1,visible:!1,rotation:0,mask:-1},this.states={}}return function(t,e,n){e&&D(t.prototype,e),n&&D(t,n)}(t,[{key:\"init\",value:function(){this.properties=Object.keys(this.defaultState),this.initDisplay(),this.currentState=Object.assign({},this.defaultState),\"object\"===T(this.graphics)&&this.container.addChild(this.graphics)}},{key:\"setHidden\",value:function(t){this.hide=t,this.container.visible=this.currentState.visible&&!this.hide}},{key:\"addState\",value:function(e,n,r){this.states[r]||(this.states[r]=[]);var i=t.createState(e,n.values,n.curve),o=this.states[r].find((function(t){return t.t===e}));o&&0===Object.keys(i.curve).length&&(i.curve=o.curve),o?(C(i)||C(o)||l.push(new Error(\"Different updates for same t \"+e)),Object.assign(o,i)):this.states[r].push(i)}},{key:\"set\",value:function(t,e,n){this.addState(t,e,n)}},{key:\"render\",value:function(t,e,n){var r=this.states[e.number];this.container.visible=!1;var i,a=null,u=1;if(r&&r.length){for(var s=0;s<r.length-1&&r[s].t<t;)s++;if(a=r[s-1],i=r[s],a)u=o(a.t,i.t,t);else{var c=Object.keys(this.states),l=c.indexOf(e.number.toString())-1;for(-1===l&&(l=c.length-1);0<=l&&c[l]>=e.number;)l--;var f=this.states[c[l]]||[];u=!(a=f[f.length-1])&&t>=i.t?(a=i,1):o(0,i.t,t)}}else{for(var p=Object.keys(this.states),h=p.length-1;0<=h&&p[h]>e.number;)h--;var y=this.states[p[h]];null!=y?i=a=y[y.length-1]:Object.assign(this.currentState,this.defaultState)}if(a){var d={},b=Object.assign({},this.currentState),g=!0,m=!1,v=void 0;try{for(var w,O=this.properties[Symbol.iterator]();!(g=(w=O.next()).done);g=!0){var S=w.value,P=(j[S]||j.default).lerpMethod,x=i.curve[S]||function(t){return t},_=P(a[S],i[S],x(u));_!==this.currentState[S]&&(d[S]=!0,b[S]=_)}}catch(t){m=!0,v=t}finally{try{g||null==O.return||O.return()}finally{if(m)throw v}}this.updateDisplay(b,d,n,e,t),Object.assign(this.currentState,b),this.container.visible=this.container._visible,d.children&&(n.mustResetTree=!0,\"function\"==typeof this.postUpdate&&n.updatedBuffers.push(this)),d.zIndex&&(n.mustResort=!0),d.mask&&(n.maskUpdates[this.id]=b.mask),0!==Object.keys(d).length&&this.parent&&this.parent.notifyChange()}}},{key:\"notifyChange\",value:function(){this.parent&&this.parent.notifyChange()}},{key:\"initDisplay\",value:function(){this.container=new PIXI.Container,this.container.zIndex=this.defaultState.zIndex,this.container.id=this.id,this.container._visible=this.defaultState.visible}},{key:\"updateDisplay\",value:function(t,e,n){this.container.zIndex=t.zIndex,this.container.alpha=t.alpha,(e.x||e.y)&&this.container.position.set(t.x*n.toWorldUnits,t.y*n.toWorldUnits),(e.scaleX||e.scaleY)&&this.container.scale.set(t.scaleX||1e-8,t.scaleY||1e-8),this.container.rotation=t.rotation,this.container._visible=t.visible&&!this.hide,this.container.skew.set(t.skewX,t.skewY)}}],[{key:\"createState\",value:function(t,e,n){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(n,!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({t:0<arguments.length&&void 0!==t?t:1},1<arguments.length&&void 0!==e?e:{},{curve:2<arguments.length&&void 0!==n?n:{}})}}]),t}();function C(t){return Object.keys(t).length===Object.keys(I.createState()).length}function F(t){return(F=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function M(t,e,n){return(M=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e,n){return e&&X(t.prototype,e),n&&X(t,n),t}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==F(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,A(t).call(this)),Object.assign(e.defaultState,{fillColor:t.defaultFillColor(),lineWidth:t.defaultLineWidth(),lineColor:t.defaultLineColor(),fillAlpha:t.defaultFillAlpha(),lineAlpha:t.defaultLineAlpha(),blendMode:PIXI.BLEND_MODES.NORMAL}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(t,I),W(t,null,[{key:\"defaultLineWidth\",value:function(){return 0}},{key:\"defaultFillColor\",value:function(){return 16777215}},{key:\"defaultLineColor\",value:function(){return 0}},{key:\"defaultLineAlpha\",value:function(){return 1}},{key:\"defaultFillAlpha\",value:function(){return 1}}]),W(t,[{key:\"initDisplay\",value:function(){M(A(t.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Graphics,this.graphics.lineStyle(this.defaultState.lineWidth,this.defaultState.lineColor,this.defaultState.lineAlpha),null!==this.defaultState.fillColor&&this.graphics.beginFill(this.defaultState.fillColor,this.defaultState.fillAlpha)}},{key:\"updateDisplay\",value:function(e,n,r){M(A(t.prototype),\"updateDisplay\",this).call(this,e,n,r),this.graphics.blendMode=e.blendMode}}]),t}();function L(t){return(L=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function H(t,e,n){return(H=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(e=function(t,e){return!e||\"object\"!==L(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,K(t).call(this))).defaultState.radius=t.defaultRadius(),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(t,Y),z(t,null,[{key:\"defaultRadius\",value:function(){return 100}}]),z(t,[{key:\"initDisplay\",value:function(){H(K(t.prototype),\"initDisplay\",this).call(this),this.graphics.drawCircle(0,0,this.defaultState.radius),null!==this.defaultState.fillColor&&this.graphics.endFill()}},{key:\"updateDisplay\",value:function(e,n,r){H(K(t.prototype),\"updateDisplay\",this).call(this,e,n,r),(n.radius||n.lineColor||n.lineWidth||n.fillColor||n.fillAlpha||n.lineAlpha)&&(this.graphics.clear(),null!==e.fillColor&&this.graphics.beginFill(e.fillColor,e.fillAlpha),this.graphics.lineStyle(r.atLeastOnePixel(e.lineWidth),e.lineColor),this.graphics.drawCircle(0,0,e.radius*r.toWorldUnits),null!==e.fillColor&&this.graphics.endFill())}}]),t}();function q(t){return(q=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function V(t,e,n){return(V=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var et=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(e=function(t,e){return!e||\"object\"!==q(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,J(t).call(this))).defaultState.x2=t.defaultPosition(),e.defaultState.y2=t.defaultPosition(),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(t,Y),Z(t,null,[{key:\"defaultPosition\",value:function(){return 100}}]),Z(t,[{key:\"initDisplay\",value:function(){V(J(t.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(e,n,r){V(J(t.prototype),\"updateDisplay\",this).call(this,e,n,r),(n.lineWidth||n.lineColor||n.lineAlpha||n.x2||n.y2)&&(this.graphics.clear(),this.graphics.lineStyle(r.atLeastOnePixel(e.lineWidth),e.lineColor,e.lineAlpha),this.graphics.moveTo(0,0),this.graphics.lineTo(-this.container.x+e.x2*r.toWorldUnits,-this.container.y+e.y2*r.toWorldUnits))}}]),t}();function nt(t){return(nt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function rt(t,e,n){return(rt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=it(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e,n){return e&&ot(t.prototype,e),n&&ot(t,n),t}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var st=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==nt(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,it(t).call(this)),Object.assign(e.defaultState,{width:t.defaultSideLength(),height:t.defaultSideLength()}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(t,Y),at(t,null,[{key:\"defaultSideLength\",value:function(){return 100}}]),at(t,[{key:\"initDisplay\",value:function(){rt(it(t.prototype),\"initDisplay\",this).call(this),this.graphics.drawRect(0,0,this.defaultState.width,this.defaultState.height),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(e,n,r){rt(it(t.prototype),\"updateDisplay\",this).call(this,e,n,r),(n.lineWidth||n.lineColor||n.width||n.height||n.lineAlpha||n.fillColor)&&(this.graphics.clear(),null!==e.fillColor&&this.graphics.beginFill(e.fillColor,e.fillAlpha),this.graphics.lineStyle(r.atLeastOnePixel(e.lineWidth),e.lineColor,e.lineAlpha),this.graphics.drawRect(0,0,e.width*r.toWorldUnits,e.height*r.toWorldUnits),null!==e.fillColor&&this.graphics.endFill())}}]),t}();function ct(t){return(ct=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function lt(t,e,n){return(lt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ft(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e,n){return e&&pt(t.prototype,e),n&&pt(t,n),t}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dt=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==ct(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,ft(t).call(this)),Object.assign(e.defaultState,{anchorX:t.defaultAnchor(),anchorY:t.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(t,I),ht(t,null,[{key:\"defaultAnchor\",value:function(){return 0}}]),ht(t,[{key:\"initDisplay\",value:function(){lt(ft(t.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(e,n,r){lt(ft(t.prototype),\"updateDisplay\",this).call(this,e,n,r),this.graphics.anchor.set(e.anchorX,e.anchorY),this.graphics.blendMode=e.blendMode,this.graphics.tint=e.tint}}]),t}();function bt(t){return(bt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function gt(t){var e=\"function\"==typeof Map?new Map:void 0;return(gt=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf(\"[native code]\")}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){return(function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&mt(i,n.prototype),i}).apply(null,arguments)}(t,arguments,vt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),mt(n,t)})(t)}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wt=function(){function t(e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(r=function(t,e){return!e||\"object\"!==bt(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,vt(t).call(this,'Could not find image: \"'+e+'\". Make sure it is in your assets folder and is spelled correctly.'))).image=e,r.cause=n,r.name=\"MissingImageError\",r}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(t,gt(Error)),t}();function Ot(t){return(Ot=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e,n){return(Pt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jt=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==Ot(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,xt(t).call(this)),Object.assign(e.defaultState,{image:null,baseWidth:null,baseHeight:null,scaleMode:\"LINEAR\"}),e.missingTextures={},e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(t,dt),function(t,e,n){e&&St(t.prototype,e)}(t,[{key:\"updateDisplay\",value:function(e,n,r){if(Pt(xt(t.prototype),\"updateDisplay\",this).call(this,e,n,r),n.image)try{null!==e.image?this.graphics.texture=PIXI.Texture.fromFrame(e.image):this.graphics.texture=PIXI.Texture.EMPTY,this.graphics.texture.baseTexture.scaleMode=PIXI.SCALE_MODES[e.scaleMode]}catch(n){this.missingTextures[e.image]||(this.missingTextures[e.image]=!0,l.push(new wt(e.image,n)))}n.baseWidth&&(this.graphics.width=e.baseWidth),n.baseHeight&&(this.graphics.height=e.baseHeight)}}]),t}();function kt(t){return(kt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t,e,n){return(Rt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var It=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(t,e){return!e||\"object\"!==kt(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,Tt(t).apply(this,arguments))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(t,jt),function(t,e,n){e&&Et(t.prototype,e)}(t,[{key:\"initDisplay\",value:function(){Rt(Tt(t.prototype),\"initDisplay\",this).call(this),null===this.defaultState.image?this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY):this.graphics=PIXI.Sprite.fromFrame(this.defaultState.image)}}]),t}();function Ct(t){return(Ct=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mt(t,e,n){return(Mt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=At(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wt=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==Ct(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,At(t).call(this)),Object.assign(e.defaultState,{text:\"\",strokeColor:0,strokeThickness:0,fillColor:0,fontSize:26,fontFamily:\"Lato\",fontWeight:\"normal\"}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(t,dt),function(t,e,n){e&&Ft(t.prototype,e)}(t,[{key:\"initDisplay\",value:function(){Mt(At(t.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Text(this.defaultState.text,{fontSize:this.defaultState.fontSize+\"px\",fontFamily:this.defaultState.fontFamily,fill:this.defaultState.fillColor})}},{key:\"updateDisplay\",value:function(e,n,r){Mt(At(t.prototype),\"updateDisplay\",this).call(this,e,n,r),this.graphics.text=e.text,this.graphics.style.stroke=e.strokeColor,this.graphics.style.strokeThickness=r.atLeastOnePixel(e.strokeThickness),this.graphics.style.fill=e.fillColor,this.graphics.style.fontSize=e.fontSize||1,this.graphics.style.fontFamily=e.fontFamily,this.graphics.style.fontWeight=e.fontWeight}}]),t}();function Ut(t){return(Ut=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Yt(t){var e=\"function\"==typeof Map?new Map:void 0;return(Yt=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf(\"[native code]\")}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){return(function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Lt(i,n.prototype),i}).apply(null,arguments)}(t,arguments,Ht(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Lt(n,t)})(t)}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kt=function(){function t(e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(r=function(t,e){return!e||\"object\"!==Ut(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,Ht(t).call(this,'Could not find font: \"'+e+'\". Make sure it is in your assets folder and is spelled correctly.'))).font=e,r.cause=n,r.name=\"MissingBitmapFontError\",r}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(t,Yt(Error)),t}();function Bt(t){return(Bt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gt(t,e,n){return(Gt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e){return(qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $t=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==Bt(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,Nt(t).call(this)),Object.assign(e.defaultState,{text:\"\",fontSize:26,fontFamily:null,anchorX:dt.defaultAnchor(),anchorY:dt.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215}),e.missingFonts={},e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(t,I),function(t,e,n){e&&zt(t.prototype,e)}(t,[{key:\"initDisplay\",value:function(){Gt(Nt(t.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(e,n,r){Gt(Nt(t.prototype),\"updateDisplay\",this).call(this,e,n,r),null!==e.fontFamily?PIXI.extras.BitmapText.fonts[e.fontFamily]?(0===this.graphics.children.length?(this.displayed=new PIXI.BitmapText(e.text,{font:{size:e.fontSize||1,name:e.fontFamily}}),this.graphics.addChild(this.displayed)):(this.displayed.text=e.text,this.displayed.font={size:e.fontSize||1,name:e.fontFamily}),this.displayed.anchor.set(e.anchorX,e.anchorY),this.displayed.blendMode=e.blendMode,this.displayed.tint=e.tint):(this.missingFonts[e.fontFamily]||(this.missingFonts[e.fontFamily]=!0,l.push(new Kt(e.fontFamily))),this.graphics.removeChildren()):this.graphics.removeChildren()}}]),t}();function Vt(t){return(Vt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qt(t,e,n){return(Qt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Zt(t){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ee=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==Vt(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,Zt(t).call(this)),Object.assign(e.defaultState,{children:[]}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(t,I),function(t,e,n){e&&Jt(t.prototype,e)}(t,[{key:\"initDisplay\",value:function(){Qt(Zt(t.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(e,n,r){Qt(Zt(t.prototype),\"updateDisplay\",this).call(this,e,n,r)}},{key:\"childrenContainer\",get:function(){return this.graphics}}]),t}();function ne(t){return(ne=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(t,e){return!e||\"object\"!==ne(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,re(t).apply(this,arguments))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(t,ee),t}(),ae=null,ue=[];function se(t){return(se=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function le(t,e,n){return(le=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fe(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var he=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(t,e){return!e||\"object\"!==se(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,fe(t).apply(this,arguments))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(t,ee),function(t,e,n){e&&ce(t.prototype,e)}(t,[{key:\"initDisplay\",value:function(){le(fe(t.prototype),\"initDisplay\",this).call(this),this.gameTexture=PIXI.RenderTexture.create(1920,1080),function(t){ue.push(t)}(this.gameTexture),this.graphics=new PIXI.Sprite(this.gameTexture),this.buffer=new PIXI.Container,this.needsRender=!0}},{key:\"postUpdate\",value:function(){this.needsRender&&(ae.render(this.buffer,this.gameTexture),this.needsRender=!1)}},{key:\"notifyChange\",value:function(){this.needsRender=!0,this.parent&&this.parent.notifyChange()}},{key:\"childrenContainer\",get:function(){return this.buffer}}]),t}();function ye(t){return(ye=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function be(t,e,n){return(be=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ge(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ve=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==ye(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,ge(t).call(this)),Object.assign(e.defaultState,{images:\"\",loop:!1,duration:1e3,playing:!0,restarted:null,animationProgress:0,date:0}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(t,dt),function(t,e,n){e&&de(t.prototype,e)}(t,[{key:\"initDisplay\",value:function(){be(ge(t.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY)}},{key:\"addState\",value:function(e,n,r,i){be(ge(t.prototype),\"addState\",this).call(this,e,n,r);var o=this.states[r].find((function(t){return t.t===e})),a=i.date+i.frameDuration*e;o.date=a}},{key:\"updateDisplay\",value:function(e,n,r){if(be(ge(t.prototype),\"updateDisplay\",this).call(this,e,n,r),e.images){var i=e.images.split(\",\");if(0<=e.animationProgress){var o=Math.floor(i.length*e.animationProgress),a=e.loop?i[o%i.length]:i[o]||i[i.length-1];try{this.graphics.texture=PIXI.Texture.fromFrame(a)}catch(e){l.push(new wt(a,e))}}}else this.graphics.texture=PIXI.Texture.EMPTY}},{key:\"computeAnimationProgressTime\",value:function(t,e){e.restarted&&e.restarted.date===e.date?e.animationProgress=0:(e.animationProgress=t.animationProgress,t.playing&&(e.animationProgress+=(e.date-t.date)/t.duration))}}]),t}();function we(t){return(we=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Oe(t,e,n){return(Oe=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Se(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Se(t){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t,e,n){return e&&Pe(t.prototype,e),n&&Pe(t,n),t}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var je=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==we(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,Se(t).call(this)),Object.assign(e.defaultState,{width:t.defaultSideLength(),height:t.defaultSideLength(),radius:t.defaultRadius()}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(t,Y),xe(t,null,[{key:\"defaultSideLength\",value:function(){return 100}},{key:\"defaultRadius\",value:function(){return 20}}]),xe(t,[{key:\"initDisplay\",value:function(){Oe(Se(t.prototype),\"initDisplay\",this).call(this),this.graphics.drawRoundedRect(0,0,this.defaultState.width,this.defaultState.height,this.defaultState.radius),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(e,n,r){Oe(Se(t.prototype),\"updateDisplay\",this).call(this,e,n,r),(n.lineWidth||n.lineColor||n.lineAlpha||n.fillColor||n.radius||n.height||n.width)&&(this.graphics.clear(),null!==e.fillColor&&this.graphics.beginFill(e.fillColor,e.fillAlpha),this.graphics.lineStyle(r.atLeastOnePixel(e.lineWidth),e.lineColor,e.lineAlpha),this.graphics.drawRoundedRect(0,0,e.width*r.toWorldUnits,e.height*r.toWorldUnits,e.radius*r.toWorldUnits),null!==e.fillColor&&this.graphics.endFill())}}]),t}();function ke(t){return(ke=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e,n){return(Re=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Te(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ie=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==ke(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,Te(t).call(this)),Object.assign(e.defaultState,{points:[]}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(t,Y),function(t,e,n){e&&Ee(t.prototype,e)}(t,[{key:\"initDisplay\",value:function(){Re(Te(t.prototype),\"initDisplay\",this).call(this),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(e,n,r){Re(Te(t.prototype),\"updateDisplay\",this).call(this,e,n,r),(n.lineWidth||n.lineColor||n.lineAlpha||n.fillColor||n.points)&&(this.graphics.clear(),null!==e.fillColor&&this.graphics.beginFill(e.fillColor,e.fillAlpha),this.graphics.lineStyle(r.atLeastOnePixel(e.lineWidth),e.lineColor,e.lineAlpha),this.graphics.drawPolygon(e.points.map((function(t){return t*r.toWorldUnits}))),null!==e.fillColor&&this.graphics.endFill())}}]),t}();function Ce(t){return(Ce=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Me(t,e,n){return(Me=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ae(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xe(t,e){return(Xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var We=function(){function t(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),e=function(t,e){return!e||\"object\"!==Ce(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,Ae(t).call(this)),Object.assign(e.defaultState,{tileX:0,tileY:0,tileScaleX:1,tileScaleY:1}),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xe(t,e)}(t,jt),function(t,e,n){e&&Fe(t.prototype,e)}(t,[{key:\"initDisplay\",value:function(){Me(Ae(t.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.extras.TilingSprite(PIXI.Texture.EMPTY)}},{key:\"updateDisplay\",value:function(e,n,r){Me(Ae(t.prototype),\"updateDisplay\",this).call(this,e,n,r),this.graphics.tilePosition.x=e.tileX,this.graphics.tilePosition.y=e.tileY,this.graphics.tileScale.x=e.tileScaleX,this.graphics.tileScale.y=e.tileScaleY}}]),t}();function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ye=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return function(t,e,n){n&&Ue(t,n)}(t,0,[{key:\"create\",value:function(t){var e={C:N,R:st,L:et,S:It,T:Wt,X:$t,G:oe,B:he,A:ve,K:je,P:Ie,D:We}[t];if(!e)throw new Error(\"Exception: entity type not found: \"+t);return new e}}]),t}();function Le(t){var e=1.70158,n=0,r=1;return 0===t?0:1==(t/=1)?1:(n=n||.3,e=r<Math.abs(1)?(r=1,n/4):n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1+0)}function He(t){return t<.5?2*t*t:(4-2*t)*t-1}function Ke(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ze(t,e,n){return e&&Be(t.prototype,e),n&&Be(t,n),t}var Ge={r:\"rotation\",R:\"radius\",X:\"x2\",Y:\"y2\",w:\"width\",h:\"height\",t:\"tint\",f:\"fillColor\",F:\"fillAlpha\",c:\"lineColor\",W:\"lineWidth\",A:\"lineAlpha\",a:\"alpha\",i:\"image\",S:\"strokeThickness\",sc:\"strokeColor\",ff:\"fontFamily\",s:\"fontSize\",fw:\"fontWeight\",T:\"text\",ch:\"children\",sx:\"scaleX\",sy:\"scaleY\",ax:\"anchorX\",ay:\"anchorY\",kx:\"skewX\",ky:\"skewY\",v:\"visible\",z:\"zIndex\",b:\"blendMode\",I:\"images\",rs:\"restarted\",p:\"playing\",l:\"loop\",d:\"duration\",bw:\"baseWidth\",bh:\"baseHeight\",ps:\"points\",tx:\"tileX\",ty:\"tileY\",tsx:\"tileScaleX\",tsy:\"tileScaleY\",sm:\"scaleMode\"},Ne=function(){function t(e,n){Ke(this,t),this.id=++n.instanceCount,this.type=e[0]}return ze(t,[{key:\"apply\",value:function(t){var e=Ye.create(this.type);e.id=this.id,t.set(this.id,e)}}]),t}(),qe=function(){function t(e,n){var i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}(e,8),o=i[0],a=i[1],u=i[2],s=i[3],c=i[4],l=i[5],f=i[6],p=i[7];Ke(this,t),this.loader=new PIXI.loaders.Loader;for(var h=0<p?p:f,y={frames:{},meta:{image:(r.baseUrl?r.baseUrl:\"\")+r.images[a]}},d=0;d<f;d++){var b=1<f?o+d:o;y.frames[b]={frame:{x:u*l+d%h*u,y:s*c+Math.floor(d/h)*s,w:u,h:s},sourceSize:{w:u,h:s},rotated:!1,trimmed:!1}}var g=\"data:text/json;charset=UTF-8,\"+JSON.stringify(y);PIXI.utils.TextureCache[g+\"_image\"]||this.loader.add(g,{crossOrigin:!0})}return ze(t,[{key:\"apply\",value:function(){var t=this;if(0<Object.keys(this.loader.resources).length)return new Promise((function(e){t.loader.load(),t.loader.on(\"complete\",e)}))}}]),t}();function $e(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Je={C:Ne,U:function(){function t(e,n,r){Ke(this,t);var i=0;for(this.id=+e[i++],this.t=+e[i++],this.params={},this.curve={};i<e.length;){var o=Ge[e[i]]||e[i],a=j[o]||j.default,u=a.type(e[i+1]);\"function\"==typeof a.convert&&(u=a.convert(u,n,r,this.t));var s=t.curves[e[i+2]];this.params[o]=u,i+=2,s&&(this.curve[o]=s,i+=1)}}return ze(t,null,[{key:\"curves\",get:function(){return{_:function(t){return t<1?0:1},\"\":He,\"~\":Le,\"\":function(){return 1}}}}]),ze(t,[{key:\"apply\",value:function(t,e){var n=t.get(this.id);n.addState(this.t,{values:this.params,curve:this.curve},e.number,e),n.stateAdded=!0}}]),t}(),L:qe};function Qe(t,e){for(var n=[],r=\"\",i=0,o=\"\",a=!1;i<t.length;){var u=t[i++];u===e?a?r+=u:(n.push(r),r=\"\"):\"'\"===u&&\"\\\\\"!==o?(a=!a,r+=u):\"\\\\\"===o?r+=\"'\"===u?\"\\\\'\":\"\\\\\"+u:\"\\\\\"!==u&&(r+=u),o=u}return n.push(r),n}function Ze(t,e,n,r){var i=Qe(e,\";\"),o=[];return i.forEach((function(e){return o.push(new t(Qe(e,\" \"),n,r))})),o}var tn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return function(t,e,n){n&&Ve(t,n)}(t,0,[{key:\"parse\",value:function(t,e,n){var r=[],i=Qe(t,\"\\n\");for(var o in i){var a=Je[i[o][0]];if(!a)throw new Error(\"Unrecognised command : \"+i[o][0]);r=[].concat($e(r),$e(Ze(a,i[o].slice(1),e,n)))}return r}}]),t}();function en(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?en(n,!0).forEach((function(e){rn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):en(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function on(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var an={},un=[function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.entities=new Map,this.frames=[],this.loadingAssets=0,this.extrapolationMap={},this.globalData={toWorldUnits:1,mustResetTree:!0,mustResort:!0,maskUpdates:{},updatedBuffers:[],players:[],instanceCount:0,atLeastOnePixel:function(t){return 0<t&&t<this.toPixel?this.toPixel:t}},an.entities=this.entities}return function(t,e,n){e&&on(t.prototype,e),n&&on(t,n)}(t,[{key:\"handleFrameData\",value:function(t,e){var n=this;if(e){var r=tn.parse(e,this.globalData,t);r&&r.forEach((function(e){var r=e.apply(n.entities,t);r&&(n.loadingAssets++,r.then((function(){n.loadingAssets--})))}))}var i=nn({},t);return i.previous=this.frames[this.frames.length-1]||i,this.extrapolate(i),i!==i.previous&&(i.previous.next=i),this.frames.push(i),i}},{key:\"lastElementOf\",value:function(t){return t[t.length-1]}},{key:\"extrapolate\",value:function(t){var e=this,n=t.number,r=t.previous.number;this.entities.forEach((function(i){if(i.stateAdded){i.stateAdded=!1,i.states[n]||(i.states[n]=[]),e.extrapolationMap[i.id]||(e.extrapolationMap[i.id]=nn({},i.defaultState));var o=i.states[n];o.sort((function(t,e){return t.t-e.t})),o.length&&1===e.lastElementOf(o).t||i.addState(1,{},n,t);var a=e.extrapolationMap[i.id];i.states[r]&&r!==n&&(a=i.states[r][i.states[r].length-1]),i.states[n]=o.map((function(t){var n=e.extrapolationMap[i.id]=nn({},e.extrapolationMap[i.id],{},t);return\"function\"==typeof i.computeAnimationProgressTime&&i.computeAnimationProgressTime(a,n),a=n}))}}))}},{key:\"reinitScene\",value:function(t,e){this.globalData.toPixel=1920/e.width*e.oversampling,this.globalData.mustResetTree=!0,an.container=this.container=t,this.entities.forEach((function(t){t.init()}))}},{key:\"sortChildren\",value:function(t){t.children.sort((function(t,e){return t.zIndex===e.zIndex?t.id-e.id:t.zIndex-e.zIndex}))}},{key:\"stillLoading\",value:function(){return 0<this.loadingAssets}},{key:\"updateScene\",value:function(t,e,n){var r=this;if(!this.stillLoading()){for(var i in this.entities.forEach((function(t){return t.render(n,e,r.globalData)})),this.globalData.mustResetTree&&(this.reconstructTree(),this.globalData.mustResetTree=!1,this.globalData.mustResort=!0),this.globalData.mustResort&&(this.resortTree(),this.globalData.mustResort=!1),this.globalData.maskUpdates){var o=this.entities.get(+i),a=this.globalData.maskUpdates[i];o.container.mask=-1===a?null:this.entities.get(a).graphics}var u=!0,s=!1,c=void 0;try{for(var l,f=this.globalData.updatedBuffers[Symbol.iterator]();!(u=(l=f.next()).done);u=!0)l.value.postUpdate()}catch(t){s=!0,c=t}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}this.globalData.maskUpdates={}}}},{key:\"resortTree\",value:function(){var t=this;this.entities.forEach((function(e){e instanceof ee&&t.sortChildren(e.childrenContainer)})),this.sortChildren(this.container)}},{key:\"reconstructTree\",value:function(){var t=this;this.container.removeChildren(),this.entities.forEach((function(e){e instanceof ee&&(e.childrenContainer.removeChildren(),e.currentState.children.forEach((function(n){var r=t.entities.get(n);e.childrenContainer.addChild(r.container),r.parent=e})))})),this.entities.forEach((function(e){e.container.parent||t.container.addChild(e.container)}))}},{key:\"handleGlobalData\",value:function(t,e){this.globalData.players=t;var n=e.width,r=e.height;this.globalData.toWorldUnits=a(n,r,1920,1080),an.toWorldUnits=this.globalData.toWorldUnits,an.hasOwnProperty(\"coeff\")||Object.defineProperty(an,\"coeff\",{get:function(){var t='The \"coeff\" property of GraphicEntityModule\\'s API is deprecated, please use \"toWorldUnits\" instead',e=(new Error).stack;return console.groupCollapsed?(console.groupCollapsed(\"%cDeprecation Warning: %c%s\",\"color:#614108;background:#fffbe6\",\"font-weight:normal;color:#614108;background:#fffbe6\",t),console.warn(e),console.groupEnd()):console.warn(\"Deprecation Warning: \",t),an.toWorldUnits}})}}],[{key:\"name\",get:function(){return\"entitymodule\"}}]),t}()],sn=[\"#3ac5ca\",\"#ff3333\"],cn={views:['KEY_FRAME 0\\n{\"global\":{\"entitymodule\":{\"width\":1920,\"height\":1080}},\"frame\":{\"entitymodule\":\"CR;S;S;T;S;T;T;S;T;S;T;T;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S\\\\nU4 1 ay 0.5 v 1 ax 0.5 S 2 x 220 y 350 s 50 T $0;28 1 x 1302 i black_pawn.png y 228 v 1;30 1 x 666 i white_pawn.png y 768 v 1;9 1 ay 0.5 v 1 ax 0.5 S 2 x 1670 y 350 s 50 T $1;10 1 i black_pawn.png ay 0.5 v 1 ax 0.5 x 1670 y 430;12 1 ay 0.5 v 1 ax 0.5 x 1670 y 620 s 30 T ;20 1 x 1302 i black_pawn.png y 120 v 1;22 1 x 666 i black_pawn.png y 228 v 1;44 1 x 1302 i white_pawn.png y 876 v 1;2 1 bw 950 i chessboard.png ay 0 v 1 ax 0 x 485 y 40 bh 1000;25 1 x 984 i black_pawn.png y 228 v 1;21 1 x 560 i black_pawn.png y 228 v 1;14 1 x 666 i black_pawn.png y 120 v 1;6 1 ay 0.5 v 1 ax 0.5 x 220 y 550 s 30 T \\'Captured pawns: 0\\';26 1 x 1090 i black_pawn.png y 228 v 1;27 1 x 1196 i black_pawn.png y 228 v 1;13 1 x 560 i black_pawn.png y 120 v 1;36 1 x 1302 i white_pawn.png y 768 v 1;24 1 x 878 i black_pawn.png y 228 v 1;23 1 x 772 i black_pawn.png y 228 v 1;17 1 x 984 i black_pawn.png y 120 v 1;7 1 ay 0.5 v 1 ax 0.5 x 220 y 620 s 30 T ;33 1 x 984 i white_pawn.png y 768 v 1;19 1 x 1196 i black_pawn.png y 120 v 1;39 1 x 772 i white_pawn.png y 876 v 1;3 1 bw 200 i $0 ay 0 v 1 ax 0 x 120 y 110 bh 200;37 1 x 560 i white_pawn.png y 876 v 1;35 1 x 1196 i white_pawn.png y 768 v 1;29 1 x 560 i white_pawn.png y 768 v 1;42 1 x 1090 i white_pawn.png y 876 v 1;16 1 x 878 i black_pawn.png y 120 v 1;43 1 x 1196 i white_pawn.png y 876 v 1;15 1 x 772 i black_pawn.png y 120 v 1;38 1 x 666 i white_pawn.png y 876 v 1;8 1 bw 200 i $1 ay 0 v 1 ax 0 x 1570 y 110 bh 200;34 1 x 1090 i white_pawn.png y 768 v 1;40 1 x 878 i white_pawn.png y 876 v 1;18 1 x 1090 i black_pawn.png y 120 v 1;1 1 f 8355711 w 1920 v 1 h 1080;32 1 x 878 i white_pawn.png y 768 v 1;5 1 i white_pawn.png ay 0.5 v 1 ax 0.5 x 220 y 430;11 1 ay 0.5 v 1 ax 0.5 x 1670 y 550 s 30 T \\'Captured pawns: 0\\';31 1 x 772 i white_pawn.png y 768 v 1;41 1 x 984 i white_pawn.png y 876 v 1\"}}\\n','KEY_FRAME 1\\n{\"entitymodule\":\"U29 1 x 666 y 660\"}\\n','KEY_FRAME 2\\n{\"entitymodule\":\"U21 1 x 666 y 336\"}\\n','KEY_FRAME 3\\n{\"entitymodule\":\"U29 1 x 772 y 552\"}\\n','KEY_FRAME 4\\n{\"entitymodule\":\"U13 1 y 228\"}\\n','KEY_FRAME 5\\n{\"entitymodule\":\"U29 1 x 878 y 444\"}\\n','KEY_FRAME 6\\n{\"entitymodule\":\"U13 1 y 336\"}\\n','KEY_FRAME 7\\n{\"entitymodule\":\"U29 1 x 984 y 336\"}\\n','KEY_FRAME 8\\n{\"entitymodule\":\"U14 1 x 560 y 228\"}\\n','KEY_FRAME 9\\n{\"entitymodule\":\"U6 1 T \\'Captured pawns: 1\\';26 1 v 0 x 0 y 0;29 1 x 1090 y 228\"}\\n','KEY_FRAME 10\\n{\"entitymodule\":\"U17 1 x 1090 y 228;29 1 v 0 x 0 y 0;11 1 T \\'Captured pawns: 1\\'\"}\\n','KEY_FRAME 11\\n{\"entitymodule\":\"U30 1 x 772 y 660\"}\\n','KEY_FRAME 12\\n{\"entitymodule\":\"U22 1 x 772 y 336\"}\\n','KEY_FRAME 13\\n{\"entitymodule\":\"U30 1 x 878 y 552\"}\\n','KEY_FRAME 14\\n{\"entitymodule\":\"U15 1 x 666 y 228\"}\\n','KEY_FRAME 15\\n{\"entitymodule\":\"U30 1 x 984 y 444\"}\\n','KEY_FRAME 16\\n{\"entitymodule\":\"U23 1 x 878 y 336\"}\\n','KEY_FRAME 17\\n{\"entitymodule\":\"U30 1 x 1090 y 336\"}\\n','KEY_FRAME 18\\n{\"entitymodule\":\"U16 1 x 772 y 228\"}\\n','KEY_FRAME 19\\n{\"entitymodule\":\"U30 1 x 1196 y 228;6 1 T \\'Captured pawns: 2\\';27 1 v 0 x 0 y 0\"}\\n','KEY_FRAME 20\\n{\"entitymodule\":\"U30 1 v 0 x 0 y 0;18 1 x 1196 y 228;11 1 T \\'Captured pawns: 2\\'\"}\\n','KEY_FRAME 21\\n{\"entitymodule\":\"U31 1 x 878 y 660\"}\\n','KEY_FRAME 22\\n{\"entitymodule\":\"U24 1 x 984 y 336\"}\\n','KEY_FRAME 23\\n{\"entitymodule\":\"U31 1 x 984 y 552\"}\\n','KEY_FRAME 24\\n{\"entitymodule\":\"U25 1 x 1090 y 336\"}\\n','KEY_FRAME 25\\n{\"entitymodule\":\"U31 1 x 1090 y 444\"}\\n','KEY_FRAME 26\\n{\"entitymodule\":\"U17 1 x 1196 y 336\"}\\n','KEY_FRAME 27\\n{\"entitymodule\":\"U6 1 T \\'Captured pawns: 3\\';17 1 v 0 x 0 y 0;31 1 x 1196 y 336\"}\\n','KEY_FRAME 28\\n{\"entitymodule\":\"U19 1 x 1090 y 228\"}\\n','KEY_FRAME 29\\n{\"entitymodule\":\"U28 1 v 0 x 0 y 0;6 1 T \\'Captured pawns: 4\\';31 1 x 1302 y 228\"}\\n','KEY_FRAME 30\\n{\"entitymodule\":\"U19 1 x 1196 y 336\"}\\n','KEY_FRAME 31\\n{\"entitymodule\":\"U31 1 x 1196 y 120\"}\\n'],agents:[{index:0,name:\"Player 0\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085713250612&format=viewer_avatar\",agentId:0},{index:1,name:\"Player 1\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085756802960&format=viewer_avatar\",agentId:1}]};function ln(t){return(ln=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function fn(t){var e=\"function\"==typeof Map?new Map:void 0;return(fn=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf(\"[native code]\")}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){return(function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&pn(i,n.prototype),i}).apply(null,arguments)}(t,arguments,hn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),pn(n,t)})(t)}function pn(t,e){return(pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yn=function(){function t(e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(r=function(t,e){return!e||\"object\"!==ln(e)&&\"function\"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(t):e}(this,hn(t).call(this,'<Error in module \"'+e+'\">'))).cause=n,r.name=\"ModuleError\",r}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pn(t,e)}(t,fn(Error)),t}();function dn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dn(n,!0).forEach((function(e){gn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dn(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,\"Drawer\",(function(){return vn}));var vn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.toDestroy=[],this.stepByStepAnimateSpeed=null;var n=e||cn;if(n){var r=n.views,i=n.agents;this.demo={playerCount:i.length,logo:\"logo.png\",overlayAlpha:.2,agents:i,frames:r},this.demo.agents.forEach((function(e){e.color=t.playerColors[e.index]}))}else this.demo=void 0}return function(t,e,n){e&&mn(t.prototype,e),n&&mn(t,n)}(t,[{key:\"getDefaultOverSampling\",value:function(){return 2}},{key:\"handleModuleError\",value:function(t,e){l.push(new yn(t,e)),console.error(e),l.push({message:'<Module \"'.concat(t,'\" disabled>\\n')}),delete this.modules[t]}},{key:\"instantiateModules\",value:function(){var t=!0,e=!(this.modules={}),n=void 0;try{for(var i,o=un[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;try{this.modules[a.name]=new a(r)}catch(t){this.handleModuleError(a.name,t)}}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}}},{key:\"destroy\",value:function(){this.alreadyLoaded&&(this.renderer.destroy(),this.endCallback=null),this.destroyed=!0}},{key:\"destroyScene\",value:function(){!function(){for(var t=0,e=ue.length;t<e;++t)ue[t].destroy(!0);ue=[]}()}},{key:\"getGameName\",value:function(){}},{key:\"canSwapPlayers\",value:function(){return!1}},{key:\"addErrorListener\",value:function(t){l.listen(t)}},{key:\"getResources\",value:function(){return Object.assign({baseUrl:\"\",images:{},spines:{},sprites:[],fonts:[],others:[]},r)}},{key:\"getOptions\",value:function(){return[]}},{key:\"setDebug\",value:function(){this.asyncRenderingTime=t.RenderTimeout}},{key:\"initPreload\",value:function(t,e,n,r,i){t.canvasWidth=r,t.canvasHeight=i,t.loaderProgress=new PIXI.Text(\"100\",{fontSize:.117*i||30,fontFamily:\"Lato\",fontWeight:\"900\",fill:\"white\",align:\"center\"}),t.loaderProgress.anchor.y=1,t.loaderProgress.anchor.x=1.3,t.progress=t.realProgress=n,t.loaderProgress.position.y=i,t.progressBar=new PIXI.Graphics,e.addChild(t.progressBar),e.addChild(t.loaderProgress)}},{key:\"preload\",value:function(t,e,n){t.progress=n}},{key:\"renderPreloadScene\",value:function(t,e){var n=Math.pow(.998,e);return t.realProgress=n*t.realProgress+(1-n)*t.progress,t.loaderProgress.text=(100*t.realProgress).toFixed(0),t.loaderProgress.position.x=t.realProgress*t.canvasWidth,t.progressBar.clear(),t.progressBar.beginFill(0,1),t.progressBar.drawRect(0,0,t.canvasWidth*t.realProgress+1,t.canvasHeight),t.progressBar.endFill(),t.progressBar.beginFill(4146246,1),t.progressBar.drawRect(t.canvasWidth*t.realProgress,0,t.canvasWidth,t.canvasHeight),t.progressBar.endFill(),!0}},{key:\"initDefaultScene\",value:function(e,n){var r=new PIXI.Container;if(e.drawer=this,e.time=0,this.demo){if(this.demo.logo)try{var i=PIXI.Sprite.fromFrame(this.demo.logo);i.position.set(t.WIDTH/2,t.HEIGHT/2),i.anchor.set(.5),i.baseScale=a(i.texture.width,i.texture.height,2*t.WIDTH/3,t.HEIGHT/2,0),r.addChild(i),e.logo=i}catch(n){l.push({cause:n,message:'Missing \"logo.png\" to complete replay.'}),e.logo=new PIXI.Container,e.logo.baseScale=1,r.addChild(e.logo),e.missingLogo=!0}var o=new PIXI.Graphics;e.missingLogo||(o.beginFill(0,this.demo.overlayAlpha||0),o.drawRect(0,0,t.WIDTH+20,t.HEIGHT+20),o.endFill(),o.x-=10,o.y-=10);var u=new PIXI.Container;try{this.initDefaultFrames(this.demo.playerCount,this.demo.frames,this.demo.agents),this.preconstructScene(this.scope,n,this.initWidth,this.initHeight),this.initScene(this.scope,u,this.frames,!0),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)}catch(n){l.push({cause:n,message:\"Cannot load demo, you might want to reset the demo\"})}e.demo=u,e.demotime=0,this.currentFrame=-1,n.addChild(u),n.addChild(o),n.addChild(r)}e.updateTime=0,e.frameTime=0}},{key:\"initDefaultFrames\",value:function(e,n,r){var i=this;this.instantiateModules(),this.playerInfo=r.map((function(t,e){return{name:t.name||\"Anonymous\",color:t.color?i.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:t.avatarTexture}})),this.instantiateModules(),this._frames=n.map((function(t){var e,n=t.split(\"\\n\"),r=n[0].split(\" \");try{e=JSON.parse(n.slice(1).join(\"\\n\"))}catch(t){e={}}return bn({},e,{key:\"KEY_FRAME\"===r[0]})})).filter((function(t){return t.key})),this.parseGlobalData(this._frames[0].global),this.playerCount=e,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1;var o=this._frames[0].frame;o.key=this._frames[0].key,this.frames.push(this.parseFrame(o,this.frames));for(var a=1;a<this._frames.length;++a)this.frames.push(this.parseFrame(this._frames[a],this.frames));this.asyncRenderingTime=t.RenderTimeout}},{key:\"renderDefaultScene\",value:function(t,e){if(e=Math.min(80,e),void 0===this.demo)return!1;this.currentFrame=this.currentFrameTemp||0,t.frameTime+=e,t.updateTime+=e,t.demotime+=e/1e3;var n=Math.max(0,Math.min(1,(t.demotime-1)/.5));if(t.logo&&(t.logo.alpha=n,t.logo.scale.x=t.logo.scale.y=(3-2*n)*t.logo.baseScale),!t.missingLogo&&1.5<t.demotime&&t.demotime<=2.2){var r=15*Math.max(0,1-(t.demotime-1.5)/.7);t.demo.x=(2*Math.random()-1)*r,t.demo.y=(2*Math.random()-1)*r}else t.demo.x=t.demo.y=0;var i=this.getFrameDuration(this.currentFrame);return 30<=t.updateTime&&(t.updateTime-=30,0===this.currentFrame?this.progress=1:this.progress=o(0,i,t.frameTime),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)),t.frameTime>=i&&(t.frameTime-=i,this.currentFrame=(this.currentFrame+1)%this.frames.length),this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],e,!0),this.currentFrameTemp=this.currentFrame,this.currentFrame=-1,!0}},{key:\"endDefaultScene\",value:function(){return!0}},{key:\"parseGlobalData\",value:function(t){for(var e in this.modules){var n=this.modules[e];\"function\"==typeof n.handleGlobalData&&n.handleGlobalData(this.playerInfo,t[e])}}},{key:\"parseFrame\",value:function(t,e){var n={data:{},frameInfo:{number:e.length}};if(n.previous=e[e.length-1]||n,n!==n.previous&&(n.previous.next=n),!t.key)return n.previous;for(var r in t.duration&&(this.currentFrameDuration=t.duration),n.frameInfo.frameDuration=this.currentFrameDuration,n===n.previous?(n.frameInfo.date=0,n.frameInfo.frameDuration=0):n.frameInfo.date=n.previous.frameInfo.date+n.previous.frameInfo.frameDuration,this.modules){var i=this.modules[r];\"function\"==typeof i.handleFrameData&&(n.data[r]=i.handleFrameData(n.frameInfo,t[r]))}return n}},{key:\"preconstructScene\",value:function(e,n,r,i){e.canvasHeight=i,e.canvasWidth=r,e.time=0,e.endTime=0,e.playerInfo=this.playerInfo,n.scale.x=r/t.WIDTH,n.scale.y=i/t.HEIGHT}},{key:\"initScene\",value:function(t,e){for(var n in this.modules){var r=this.modules[n],i=new PIXI.Container;try{r.reinitScene(i,{width:t.canvasWidth,height:t.canvasHeight,oversampling:this.oversampling})}catch(t){this.handleModuleError(n,t)}e.addChild(i)}}},{key:\"updateScene\",value:function(t,e,n,r,i,o,a,u,s){var c=n[r];if(!s&&this.stepByStepAnimateSpeed&&this.checkSteppedToNextFrame(t,c))this.startAsynchronousAnimation(t,i,c);else for(var l in t.currentFrame=c,t.currentProgress=i,t.reason=a,this.modules){var f=this.modules[l];if(c.data.hasOwnProperty(l))try{f.updateScene(c.previous.data[l],c.data[l],i,o)}catch(t){this.handleModuleError(l,t)}}}},{key:\"startAsynchronousAnimation\",value:function(t,e,n){t.targetProgress=e,t.currentProgress=0,t.currentFrame=n}},{key:\"checkSteppedToNextFrame\",value:function(t,e){return t.currentFrame&&t.currentFrame!==e&&t.currentFrame===e.previous&&0===this.speed}},{key:\"initEndScene\",value:function(t){t.endSceneViewed=!1}},{key:\"destroyEndScene\",value:function(){}},{key:\"renderEndScene\",value:function(t,e,n){0===t.endTime&&this.initEndScene(t,n),t.endTime+=e,void 0<=t.endTime&&!t.endSceneViewed&&(this.endCallback&&this.endCallback(),t.endSceneViewed=!0)}},{key:\"renderScene\",value:function(t,e,n,r,i,o,a,u){if(u=Math.min(80,u),this.debugMode||r!==n.length-1||1!==i?(0<t.endTime&&this.destroyEndScene(t),t.endTime=0):this.renderEndScene(t,u,\"Win\"!==a),this.stepByStepAnimateSpeed&&this.isAsynchronousAnimationOngoing(t)){var s=t.currentProgress+u/200*this.getFrameSpeed(this.currentFrame)*this.stepByStepAnimateSpeed;s=Math.min(t.targetProgress,s),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,s,this.speed,this.reasons[this.currentFrame],!1,!0)}for(var c in this.modules){var l=this.modules[c];if(\"function\"==typeof l.animateScene)try{l.animateScene(u)}catch(t){this.handleModuleError(c,t)}}return!0}},{key:\"isAsynchronousAnimationOngoing\",value:function(t){return null!=t.targetProgress&&t.currentProgress!==t.targetProgress}},{key:\"getFrameSpeed\",value:function(t){return 500/this.getFrameDuration(t)}},{key:\"getFrameDuration\",value:function(t){return this.frames&&this.frames[t]&&this.frames[t].frameInfo.frameDuration||1e3}},{key:\"enableAsyncRendering\",value:function(e){this.asyncRendering=e,this.asyncRenderingTime=t.RenderTimeout}},{key:\"purge\",value:function(){this.scope={},this.changed=!0,this.container.interactiveChildren=!1,this.container.destroy({texture:!1,children:!0}),delete this.container,this.container=new PIXI.Container}},{key:\"reinitScene\",value:function(){1<=this.loaded&&(this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.preconstructScene(this.scope,this.container,this.initWidth,this.initHeight),this.initScene(this.scope,this.container,this.frames),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame]),this.changed=!0)}},{key:\"reinitDefaultScene\",value:function(){1<=this.loaded&&(this.intro=!0,this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initDefaultScene(this.scope,this.container,this.initWidth,this.initHeight),this.changed=!0)}},{key:\"reinitLoadingScene\",value:function(){this.loaded<1&&(this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initPreload(this.scope,this.container,this.loaded,this.initWidth,this.initHeight))}},{key:\"reinit\",value:function(t){1<=this.loaded?0<=this.currentFrame&&!this.intro?this.reinitScene():this.intro&&!t||this.reinitDefaultScene():this.reinitLoadingScene()}},{key:\"animate\",value:function(t){if(!this.destroyed){this.lastRenderTime||(this.lastRenderTime=t);var e=t-this.lastRenderTime;this.asynchronousStep&&(e=this.asynchronousStep),this.onBeforeRender&&this.onBeforeRender(),this.loading||(this.loaded<1?this.changed|=this.renderPreloadScene(this.scope,e):(this.changed||this.asyncRendering&&0<this.asyncRenderingTime||this.isAsynchronousAnimationOngoing(this.scope))&&(this.currentFrame<0?this.changed|=this.renderDefaultScene(this.scope,e):this.intro?(this.changed=!0,this.endDefaultScene(this.scope,e)&&(this.intro=!1,this.reinit(!0))):this.changed|=this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame],e)),this.changed&&(this.renderer.render(this.container),this.changed=!1)),this.onAfterRender&&this.onAfterRender(),this.lastRenderTime=t,this.destroyed||requestAnimationFrame(this.animate.bind(this)),this.asyncRenderingTime-=e}}},{key:\"_initFrames\",value:function(t,e){this.instantiateModules(),this._frames=e.map((function(t){var e,n=t[0].split(\" \");try{e=JSON.parse(t.slice(1).join(\"\\n\"))}catch(t){e={}}return bn({},e,{key:\"KEY_FRAME\"===n[0]})})),this.parseGlobalData(this._frames[0].global),this.playerCount=t,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1;var n=this._frames[0].frame;n.key=this._frames[0].key,this.frames.push(this.parseFrame(n,this.frames));for(var r=1;r<this._frames.length;++r)this.frames.push(this.parseFrame(this._frames[r],this.frames))}},{key:\"isTurnBasedGame\",value:function(){return!1}},{key:\"initFrames\",value:function(t,e){this.playerInfo&&this.playerInfo.forEach((function(t){t.avatar&&t.avatar.destroy(!0)}));var n=this,r=new PIXI.loaders.Loader(window.location.origin);function i(){n._initFrames(e.length,t),n.loading=!1,n.reinit(!1),o=!0}this.playerInfo=e.map((function(t,e){var i={name:t.name||\"Anonymous\",color:t.color?n.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:null};return r.add(\"avatar\"+e,t.avatar,{loadType:2,crossOrigin:!0},(function(t){i.avatar=t.texture,PIXI.Texture.addToCache(t.texture,\"$\"+i.index)})),i}));var o=!(this.loading=!0);r.on(\"complete\",i),r.on(\"error\",(function(t){console.warn(t),o||i()})),r.load()}},{key:\"update\",value:function(e,n,r){0<=this.currentFrame&&(this.asyncRenderingTime=t.RenderTimeout,this.changed=!0,this.speed=r,this.currentFrame=e,this.progress=n,1<=this.loaded&&!this.intro&&this.updateScene(this.scope,this.question,this.frames,e,n,this.speed,this.reasons[this.currentFrame]))}},{key:\"parseColor\",value:function(t){if(Array.isArray(t)){var e,n=[];for(e=0;e<t.length;++e)n.push(this.parseColor(t[e]));return n}return parseInt(t.substring(1),16)}},{key:\"init\",value:function(e,n,r,i,o,a,u){var s,c=this;function f(){0<=c.currentFrame&&(c.changed=!0)}window.PIXI=t.PIXI||window.PIXI,this.oversampling=o||1,this.canvas=$(e),this.canvas.off(\"mousemove\"),this.canvas.off(\"wheel\"),this.canvas.bind(\"wheel\",f),this.canvas.mousemove(f),i&&(this.colors=this.parseColor(i)),\"ide\"===u&&(this.debugModeSetByUser||(this.debugMode=!0),l.listen((function(t){return console.error(t.cause?t.cause:t)}))),this.asyncRendering=!0,this.asyncRenderingTime=0,this.destroyed=!1,this.asynchronousStep=null;var p=this;if(this.initWidth=0|n,this.initHeight=0|r,this.endCallback=a||this.endCallback,this.alreadyLoaded)this.changed=!0,this.renderer.resize(this.initWidth,this.initHeight),this.reinit(!0);else{this.alreadyLoaded=!0,this.question=null,this.scope=null,this.currentFrame=-1,this.loaded=0,this.container=new PIXI.Container;var h=this.getResources();this.renderer=this.createRenderer(this.initWidth,this.initHeight,e),function(t){ae=t}(this.renderer);var y,d=new PIXI.loaders.Loader(h.baseUrl);for(s in h.images)d.add(s,h.images[s],{crossOrigin:!0});for(y=0;y<h.sprites.length;++y)d.add(h.sprites[y],{crossOrigin:!0});for(y=0;y<h.fonts.length;++y)d.add(h.fonts[y],{crossOrigin:!0});for(s in h.spines)d.add(s,h.spines[s],{crossOrigin:!0});for(y=0;y<h.others.length;++y)d.add(h.others[y],{crossOrigin:!0});this.demo&&this.demo.agents.forEach((function(t){d.add(\"avatar\"+t.index,t.avatar,{loadType:2,crossOrigin:!0},(function(e){t.avatarTexture=e.texture,PIXI.Texture.addToCache(e.texture,\"$\"+t.index)}))})),p.scope={};var b=function(){requestAnimationFrame(p.animate.bind(p)),p.initPreload(p.scope,p.container,p.loaded=0,p.initWidth,p.initHeight)};d.on(\"start\",b),d.on(\"progress\",(function(t,e){t.progress<100&&p.preload(p.scope,p.container,p.loaded=t.progress/100,p.initWidth,p.initHeight,e)}));var g=function(){var t;for(t in h.images)h.images.hasOwnProperty(t)&&d.resources[t].texture&&PIXI.Texture.addToCache(d.resources[t].texture,t);for(t in h.spines)h.spines.hasOwnProperty(t)&&(PIXI.AnimCache[t]=PIXI.AnimCache[h.baseUrl+h.spines[t]]);p.loaded=1,p.reinit(!0),p.changed=!0};d.on(\"complete\",g),d.on(\"error\",(function(t){console.warn(t)})),Object.keys(d.resources).length?d.load():(b(),g())}}},{key:\"createRenderer\",value:function(t,e,n){return PIXI.autoDetectRenderer(t,e,{view:n,clearBeforeRender:!0,preserveDrawingBuffer:!1})}},{key:\"isReady\",value:function(){return 1<=this.loaded}}],[{key:\"getGameRatio\",value:function(){return t.WIDTH/t.HEIGHT}},{key:\"requirements\",get:function(){return{PIXI:\"PIXI4\"}}},{key:\"VERSION\",get:function(){return 2}},{key:\"WIDTH\",get:function(){return 1920}},{key:\"HEIGHT\",get:function(){return 1080}},{key:\"playerColors\",get:function(){return sn}},{key:\"SDK_GAME\",get:function(){return!0}},{key:\"RenderTimeout\",get:function(){return\"localhost\"===window.location.hostname?1/0:2e4}}]),t}()}]).Drawer;",
      "levelParams": {
        "0": {
          "aiCode": "import java.util.ArrayList;\r\nimport java.util.Scanner;\r\n\r\nclass Player {\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        while (true) \r\n        {\r\n/*\r\n            for(int i = 0;i<8;i++)\r\n            {\r\n                String input = scanner.nextLine();\r\n            }\r\n*/\r\n            String my_player = scanner.nextLine();\r\n            \r\n            int N = scanner.nextInt();\r\n            scanner.nextLine();\r\n            \r\n            ArrayList<String> Moves = new ArrayList<String>();\r\n            for(int i = 0;i<N;i++)\r\n            {\r\n            \tMoves.add(scanner.nextLine());\r\n            }\r\n            \r\n            System.out.println(Moves.get(0));\r\n        }\r\n    }\r\n}\r\n",
          "testCases": [],
          "maxPlayers": 2,
          "minPlayers": 2,
          "statements": {
            "1": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n<div class=\"statement-body\">\n    <div style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:20px;margin-right:15px;margin-left:15px;margin-bottom:10px;text-align:left\">\n        <span class=\"statement-league-alert-content\">\n            Une implmentation du jeu de plateau <a href=\"https://en.wikipedia.org/wiki/Breakthrough_(board_game)\">Breakthrough</a>\n        </span>\n    </div>\n\n  <!-- GOAL -->\n  <div class=\"statement-section statement-goal\">\n    <h1>\n      <span class=\"icon icon-goal\">&nbsp;</span>\n      <span>Objectif</span>\n    </h1>\n    <div class=\"statement-goal-content\">\n        Le but du jeu est d'atteindre le premier la ligne de dpart de l'adversaire.\n    </div>\n  </div>\n  <!-- RULES -->\n  <div class=\"statement-section statement-rules\">\n    <h1>\n      <span class=\"icon icon-rules\">&nbsp;</span>\n      <span>Rgles</span>\n    </h1> \n    <div>\n      <div class=\"statement-rules-content\">Ce jeu se joue  deux sur un chiquier standard (8x8 cases).\n        Dans la position de dpart, chaque joueur dispose de 16 pions, les Blancs occupent les deux lignes du bas et les Noirs les deux lignes du haut. Les Blancs commencent.<br>\n        <br>\n        Les pions se dplacent de la faon suivante:\n        <ul>\n          <li>Un pion se dplace toujours vers l'avant d'une case  la fois soit en diagonale, soit tout droit si la case est vide.\n          <li>Un pion peut aussi se dplacer sur une case occupe par l'adversaire mais seulement en diagonale et toujours d'une seule case. Le pion adverse est alors captur.</li>\n          <li>Il est  noter qu'une capture n'est jamais obligatoire et qu'on ne peut pas enchaner les captures comme au jeu de dames.</li>\n        </ul>\n          Du fait que les pions peuvent seulement aller de l'avant, les parties nulles sont impossibles  Breakthrough.\n          Une partie peut durer thoriquement jusqu' <const>209</const> coups mais, en pratique, une partie est gnralement dcide en moins de <const>100</const> coups.\n      </div>\n    </div>\n  </div>\n    <!-- Victory conditions -->\n    <div class=\"statement-victory-conditions\">\n        <div class=\"icon victory\"></div>\n        <div class=\"blk\">\n            <div class=\"title\">Conditions de victoire</div>\n            <div class=\"text\">\n                <ul style=\"padding-top:0; padding-bottom: 0;\">\n                    <li>Vous atteignez le premier la ligne de dpart de l'adversaire. <li>Vous capturez tous les pions de l'adversaire.</li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <!-- Lose conditions -->\n    <div class=\"statement-lose-conditions\">\n        <div class=\"icon lose\"></div>\n        <div class=\"blk\">\n            <div class=\"title\">Conditions de dfaite</div>\n            <div class=\"text\">\n                <li>Votre programme n'a pas fourni une commande valide dans le temps imparti.</li>\n                <li>Vous n'avez pas russi  protger votre ligne de dpart.</li>\n                <li>Vous avez perdu tous vos pions.</li>\n            </div>\n        </div>\n    </div>\n  <!-- PROTOCOL -->\n  <div class=\"statement-section statement-protocol\">\n    <h1>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Entres du jeu</span>\n    </h1>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Entres pour un tour de jeu</div>\n      <div class=\"text\">\n         <p><span class=\"statement-lineno\">Premire ligne: </span>Le dernier coup jou par l'adversaire ou \"None\" si vous commencez la partie</p>\n         <p><span class=\"statement-lineno\">La ligne suivante: </span>Le nombre de coups lgaux</p>\n         <p><span class=\"statement-lineno\">Les lignes suivantes: </span>Une chane de caractres par coup lgal</p>\n       </div>\n     </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Sortie pour un tour de jeu</div>\n      <div class=\"text\">\n        <p><span class=\"statement-lineno\">Une unique ligne: </span>Votre coup suivi ventuellement d'un court message</p>\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Format d'un coup</div>\n      <div class=\"text\">\n        <br>Un coup est dfini par sa case de dpart et sa case d'arrive. Les cases sont dcrites en notation chiquenne. <br>Un exemple de coup: c2c3\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n        <div class=\"title\">Contraintes de temps</div>\n        <div class=\"text\">\n            <br>Le temps de rponse pour le premier coup est  <const>1000</const> milliseconds.\n            <br>Pour les autres tours, le temps de rponse est  <const>100</const> milliseconds.\n        </div>\n        </div>\n    </div>\n  </div>\n</div>\n",
            "2": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n<div class=\"statement-body\">\n    <div style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:20px;margin-right:15px;margin-left:15px;margin-bottom:10px;text-align:left\">\n        <span class=\"statement-league-alert-content\">\n            This is a port of the board game <a href=\"https://en.wikipedia.org/wiki/Breakthrough_(board_game)\">Breakthrough</a>\n        </span>\n    </div>\n\n  <!-- GOAL -->\n  <div class=\"statement-section statement-goal\">\n    <h1>\n      <span class=\"icon icon-goal\">&nbsp;</span>\n      <span>The Goal</span>\n    </h1>\n    <div class=\"statement-goal-content\">\n        The goal of the game is to reach first the opponent's home row.\n    </div>\n  </div>\n  <!-- RULES -->\n  <div class=\"statement-section statement-rules\">\n    <h1>\n      <span class=\"icon icon-rules\">&nbsp;</span>\n      <span>Rules</span>\n    </h1> \n    <div>\n      <div class=\"statement-rules-content\">The game is a two player game played on a 8x8 board, each player has 16 pieces.<br>\n        At the starting position, the two bottom rows (for White) and the two top rows (for Black) of the board are filled with pieces. White makes the first move.<br>\n        <br>\n        Movement works as follow:\n        <ul>\n          <li>A piece may move one space straight or diagonally forward if the target square is empty.</li>\n          <li>A piece may move into a square containing an opponent's piece if and only if that square is one step diagonally forward. The opponent's piece is removed and the player's piece replaces it.</li>\n          <li>Note that capturing is not compulsory, nor is it \"chained\" as in checkers.</li>\n        </ul>\n          Because pawns can only move forward, draws are impossible in Breakthrough games.\n          A game may last theoretically up to <const>209</const> moves but, in practice, a game is generally decided before <const>100</const> moves are played.\n      </div>\n    </div>\n  </div>\n    <!-- Victory conditions -->\n    <div class=\"statement-victory-conditions\">\n        <div class=\"icon victory\"></div>\n        <div class=\"blk\">\n            <div class=\"title\">Victory conditions</div>\n            <div class=\"text\">\n                <ul style=\"padding-top:0; padding-bottom: 0;\">\n                    <li>You reach first the opponent's home row. <li>You capture all opponent pieces.</li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <!-- Lose conditions -->\n    <div class=\"statement-lose-conditions\">\n        <div class=\"icon lose\"></div>\n        <div class=\"blk\">\n            <div class=\"title\">Defeat Conditions</div>\n            <div class=\"text\">\n                <ul style=\"padding-top:0; padding-bottom: 0;\">\n                    <li>Your program does not provide a valid command in time.</li>\n                    <li>You fail to protect your home row.</li>\n                    <li>You lose all your pieces.</li>\n                </ul>\n            </div>\n        </div>\n    </div>\n  <!-- PROTOCOL -->\n  <div class=\"statement-section statement-protocol\">\n    <h1>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Game Input</span>\n    </h1>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Input for one game turn</div>\n      <div class=\"text\">\n         <p><span class=\"statement-lineno\">First line: </span>The last move of your opponent or \"None\" if you start the game</p>\n         <p><span class=\"statement-lineno\">Next line: </span>Number of legal moves as an integer </p>\n         <p><span class=\"statement-lineno\">Next lines: </span>The legal moves as strings</p>\n       </div>\n     </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"text\">\n        <p><span class=\"statement-lineno\">A single line: </span>Your move and an additional short message separated by a whitespace</p>\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Move encoding</div>\n      <div class=\"text\">\n        <br>A move is defined by its starting square and ending square. Squares are described using chess notation.<br>Example move: c2c3\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n        <div class=\"title\">Constraints</div>\n        <div class=\"text\">\n            <br>The response time for the first turn is  <const>1000</const> milliseconds.\n            <br>The response time for the following turns is  <const>100</const> milliseconds.\n        </div>\n        </div>\n    </div>\n  </div>\n</div>\n"
          },
          "questionType": "multi",
          "stubGenerator": "gameloop\r\nread opponentMove:string(4)\r\nread legalMoves:int\r\nloop legalMoves read moveString:word(10)\r\nwrite MOVE\r\n\r\nSTATEMENT\r\nRush to the opponent's row\r\n\r\nINPUT\r\nopponentMove: last move played or \"None\"\r\nlegalMoves: number of legal moves\r\nmoveString: a legal move",
          "welcomePopups": {},
          "aiCodeExtension": "java",
          "criteriaLanguageMap": {}
        }
      },
      "directoryPrefix": "community/2923506-1571515727346",
      "allowSourceDownload": true,
      "originalArchiveBinaryId": 36144345912248
    },
    "draft": false,
    "readyForModeration": true
  },
  "validatedFor": 198110602738,
  "avatar": 23496414257567,
  "commentCount": 27,
  "upVotes": 14,
  "downVotes": 0,
  "validateAction": {
    "actionId": 400344,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1572620544612,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}