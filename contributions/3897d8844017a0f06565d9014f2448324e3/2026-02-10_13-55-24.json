{
  "id": 389,
  "activeVersion": 9,
  "score": 11,
  "votableId": 3028462,
  "codingamerId": 199979,
  "views": 164,
  "commentableId": 2975551,
  "title": "Queneau Numbers",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "VonRickroll",
  "publicHandle": "3897d8844017a0f06565d9014f2448324e3",
  "codingamerHandle": "1f902a3213291dfd0de802207d362bdf979991",
  "lastVersion": {
    "version": 9,
    "data": {
      "title": "Queneau Numbers",
      "topics": [
        {
          "id": 70,
          "handle": "permutations",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Permutations",
            "2": "Permutations"
          },
          "pageTitle": "Permutations: exercises and theory",
          "puzzleCount": 6,
          "parentTopicId": 41,
          "contentDetailsId": 103
        },
        {
          "id": 50,
          "handle": "lists",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Listes",
            "2": "Lists"
          },
          "pageTitle": "Lists: exercises and theory",
          "puzzleCount": 5,
          "parentTopicId": 40,
          "contentDetailsId": 96
        }
      ],
      "solution": "var N = parseInt(readline());\nprintErr('Going with '+N);\n\n// Init\nvar sequence = [];\nfor(var i=1;i<=N;i++){\n\tsequence.push(i);\n}\n\nvar orig = sequence.join('');\t// Used for verification\n\nvar steps = [];\t// Used to track steps\n\n// Chain N permutations\nfor(var i=0; i<N; i++) {\n\tvar newSeries = [];\n\t// Queneau Permutation\n\tfor(j=0; j<N/2; j++){\n\t\tnewSeries.push(sequence[N-1-j]);\n\t\tif(sequence[j] !== sequence[N-1-j]) {\t// Avoid repeating the middle number for odd N\n\t\t\tnewSeries.push(sequence[j]);\n\t\t}\n\t}\n\tsequence = newSeries;\n\tsteps.push(sequence.join(','));\t// Track step\n}\n\nvar dest = sequence.join('');\nif(dest !== orig) {\t\t\t\t// Test if the last permutation brought back the original sequence\n\tprint('IMPOSSIBLE');\n}\nelse {\n\tprint(steps.join('\\n'));\t// Print all steps\n}",
      "statement": "Queneau Numbers were discovered by the French writer and mathematician Raymond Queneau, while member of the OULIPO.\n\nA Queneau Number is a number [[N]] such that the sequence [1..N] can go through a series of spiral permutations (or \"snail\" permutations) and come back to [1..N] in exactly N iterations. The permutation consists in tracing a spiral from the last number of the sequence, spiraling towards the center. \nYou can visualize it for the sequence 1 2 3 4 5 :\n1←←←←5 \n1→→→45 \n12←←45\n12→345\nthus [1 2 3 4 5] becomes [5 1 4 2 3]\n\n\nFor instance, 5 being a Queneau Number, the permutations will start from the sequence\n\n`1,2,3,4,5`\n\nAnd go as follows:\n\n`5,1,4,2,3`\n`3,5,2,1,4`\n`4,3,1,5,2`\n`2,4,5,3,1`\n`1,2,3,4,5`\n\nThe Nth line is always the same as the initial sequence, or else the number is <<not>> a Queneau Number.\n\nErratum: Actually, a Queneau number should be such that the order of the permutation is exactly N, (i.e the sequence [1..N] cannot become [1..N] again before exactly N spiral permutations).\nIn this problem, all numbers such that [1..N] is still [1..N] after N spiral permutations are considered valid even if it might take less than N spiral permutations to encounter [1..N]",
      "testCases": [
        {
          "title": "Terine",
          "isTest": true,
          "testIn": "3",
          "testOut": "3,1,2\n2,3,1\n1,2,3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "5",
          "testOut": "5,1,4,2,3\n3,5,2,1,4\n4,3,1,5,2\n2,4,5,3,1\n1,2,3,4,5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Impossible",
          "isTest": true,
          "testIn": "4",
          "testOut": "IMPOSSIBLE",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "7",
          "testOut": "IMPOSSIBLE",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Sextine",
          "isTest": true,
          "testIn": "6",
          "testOut": "6,1,5,2,4,3\n3,6,4,1,2,5\n5,3,2,6,1,4\n4,5,1,3,6,2\n2,4,6,5,3,1\n1,2,3,4,5,6",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "9",
          "testOut": "9,1,8,2,7,3,6,4,5\n5,9,4,1,6,8,3,2,7\n7,5,2,9,3,4,8,1,6\n6,7,1,5,8,2,4,9,3\n3,6,9,7,4,1,2,5,8\n8,3,5,6,2,9,1,7,4\n4,8,7,3,1,5,9,6,2\n2,4,6,8,9,7,5,3,1\n1,2,3,4,5,6,7,8,9",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "So big yet so perfect",
          "isTest": true,
          "testIn": "15",
          "testOut": "15,1,14,2,13,3,12,4,11,5,10,6,9,7,8\n8,15,7,1,9,14,6,2,10,13,5,3,11,12,4\n4,8,12,15,11,7,3,1,5,9,13,14,10,6,2\n2,4,6,8,10,12,14,15,13,11,9,7,5,3,1\n1,2,3,4,5,6,7,8,9,10,11,12,13,14,15\n15,1,14,2,13,3,12,4,11,5,10,6,9,7,8\n8,15,7,1,9,14,6,2,10,13,5,3,11,12,4\n4,8,12,15,11,7,3,1,5,9,13,14,10,6,2\n2,4,6,8,10,12,14,15,13,11,9,7,5,3,1\n1,2,3,4,5,6,7,8,9,10,11,12,13,14,15\n15,1,14,2,13,3,12,4,11,5,10,6,9,7,8\n8,15,7,1,9,14,6,2,10,13,5,3,11,12,4\n4,8,12,15,11,7,3,1,5,9,13,14,10,6,2\n2,4,6,8,10,12,14,15,13,11,9,7,5,3,1\n1,2,3,4,5,6,7,8,9,10,11,12,13,14,15",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "18",
          "testOut": "18,1,17,2,16,3,15,4,14,5,13,6,12,7,11,8,10,9\n9,18,10,1,8,17,11,2,7,16,12,3,6,15,13,4,5,14\n14,9,5,18,4,10,13,1,15,8,6,17,3,11,12,2,16,7\n7,14,16,9,2,5,12,18,11,4,3,10,17,13,6,1,8,15\n15,7,8,14,1,16,6,9,13,2,17,5,10,12,3,18,4,11\n11,15,4,7,18,8,3,14,12,1,10,16,5,6,17,9,2,13\n13,11,2,15,9,4,17,7,6,18,5,8,16,3,10,14,1,12\n12,13,1,11,14,2,10,15,3,9,16,4,8,17,5,7,18,6\n6,12,18,13,7,1,5,11,17,14,8,2,4,10,16,15,9,3\n3,6,9,12,15,18,16,13,10,7,4,1,2,5,8,11,14,17\n17,3,14,6,11,9,8,12,5,15,2,18,1,16,4,13,7,10\n10,17,7,3,13,14,4,6,16,11,1,9,18,8,2,12,15,5\n5,10,15,17,12,7,2,3,8,13,18,14,9,4,1,6,11,16\n16,5,11,10,6,15,1,17,4,12,9,7,14,2,18,3,13,8\n8,16,13,5,3,11,18,10,2,6,14,15,7,1,9,17,12,4\n4,8,12,16,17,13,9,5,1,3,7,11,15,18,14,10,6,2\n2,4,6,8,10,12,14,16,18,17,15,13,11,9,7,5,3,1\n1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "So big yet so ugly",
          "isTest": true,
          "testIn": "27",
          "testOut": "IMPOSSIBLE",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "28",
          "testOut": "IMPOSSIBLE",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "2 ≤ [[N]] ≤ 30",
      "stubGenerator": "read N:int\n\nwrite IMPOSSIBLE",
      "inputDescription": "One number [[N]]",
      "solutionLanguage": "Javascript",
      "outputDescription": "<<[[N]] lines:>> the different steps of permutations, as a comma-separated sequence\nOR\n{{IMPOSSIBLE}} if the number is not a Queneau number."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Queneau Numbers were discovered by the French writer and mathematician Raymond Queneau, while member of the OULIPO.<br><br>A Queneau Number is a number <var>N</var> such that the sequence [1..N] can go through a series of spiral permutations (or &quot;snail&quot; permutations) and come back to [1..N] in exactly N iterations. The permutation consists in tracing a spiral from the last number of the sequence, spiraling towards the center. <br>You can visualize it for the sequence 1 2 3 4 5 :<br>1&larr;&larr;&larr;&larr;5 <br>1&rarr;&rarr;&rarr;45 <br>12&larr;&larr;45<br>12&rarr;345<br>thus [1 2 3 4 5] becomes [5 1 4 2 3]<br><br><br>For instance, 5 being a Queneau Number, the permutations will start from the sequence<br><br><pre style=\"font-family: monospace\">1,2,3,4,5</pre><br><br>And go as follows:<br><br><pre style=\"font-family: monospace\">5,1,4,2,3</pre><br><pre style=\"font-family: monospace\">3,5,2,1,4</pre><br><pre style=\"font-family: monospace\">4,3,1,5,2</pre><br><pre style=\"font-family: monospace\">2,4,5,3,1</pre><br><pre style=\"font-family: monospace\">1,2,3,4,5</pre><br><br>The Nth line is always the same as the initial sequence, or else the number is <strong>not</strong> a Queneau Number.<br><br>Erratum: Actually, a Queneau number should be such that the order of the permutation is exactly N, (i.e the sequence [1..N] cannot become [1..N] again before exactly N spiral permutations).<br>In this problem, all numbers such that [1..N] is still [1..N] after N spiral permutations are considered valid even if it might take less than N spiral permutations to encounter [1..N]</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\">One number <var>N</var></div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong><var>N</var> lines:</strong> the different steps of permutations, as a comma-separated sequence<br>OR<br><const>IMPOSSIBLE</const> if the number is not a Queneau number.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">2 &le; <var>N</var> &le; 30</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">3</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">3,1,2\n2,3,1\n1,2,3</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 302318232261,
  "avatar": 4699081038708,
  "commentCount": 12,
  "upVotes": 11,
  "downVotes": 0,
  "validateAction": {
    "actionId": 865,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}