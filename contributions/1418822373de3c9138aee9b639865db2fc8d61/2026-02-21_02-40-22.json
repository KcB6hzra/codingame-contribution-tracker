{
  "id": 141882,
  "activeVersion": 25,
  "score": 3,
  "votableId": 39040676,
  "codingamerId": 3589590,
  "views": 193,
  "commentableId": 38873481,
  "title": "Polygon equilibrium",
  "status": "PENDING",
  "type": "PUZZLE_INOUT",
  "nickname": "Edjy",
  "publicHandle": "1418822373de3c9138aee9b639865db2fc8d61",
  "codingamerHandle": "674fbda5df945919eb37269de9e598e10959853",
  "lastVersion": {
    "version": 25,
    "autocloseTime": 1772059249363,
    "freezeTime": 1770072049363,
    "data": {
      "title": "Polygon equilibrium",
      "topics": [
        {
          "id": 95,
          "handle": "geometry",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Geometry",
            "2": "Geometry"
          },
          "puzzleCount": 38,
          "parentTopicId": 93
        },
        {
          "id": 46,
          "handle": "loops",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Boucles",
            "2": "Loops"
          },
          "pageTitle": "Loops: exercises and theory",
          "puzzleCount": 123,
          "parentTopicId": 39,
          "contentDetailsId": 71
        },
        {
          "id": 94,
          "handle": "mathematics",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Mathematics",
            "2": "Mathematics"
          },
          "puzzleCount": 79,
          "parentTopicId": 93
        }
      ],
      "solution": "n = int(input())\npoly = []\nfor i in range(n):\n    x, y = [int(j) for j in input().split()]\n    poly.append((x, y))\n\n# Quickhull\n\nA = min(poly)\nB = max(poly)\n\nconvex_hull = [(0, A), (1, B), (2, A)]\n\ndef is_right_from(a, b, c):\n    return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]) < 0\n\ndef partition(points, p, q, r):\n    s0 = []\n    s1 = []\n    s2 = []\n    for z in points:\n        if is_right_from(p, q, z):\n            s1.append(z)\n        elif is_right_from(q, r, z):\n            s2.append(z)\n        else:\n            s0.append(z)\n    return s0, s1, s2\n\ndef hull(points, a, c):\n    if not points: return\n    aa, p = a\n    cc, r = c\n    q = max(points, key=lambda q:(p[1]-q[1]) * (r[0]-p[0]) - (p[0]-q[0]) * (r[1]-p[1]))\n    b = ((aa+cc)/2, q)\n    convex_hull.append(b)\n    _, p1, p2 = partition(points, p, q, r)\n    hull(p1, a, b)\n    hull(p2, b, c)\n\nhull([p for p in poly if is_right_from(A, B, p)], (0, A), (1, B))\nhull([p for p in poly if is_right_from(B, A, p)], (1, B), (2, A))\n\nconvex_hull = [p for s, p in sorted(convex_hull)]\nconvex_hull.pop()\n\n# Centroid\nA = sum(poly[i-1][0]*poly[i][1] - poly[i][0]*poly[i-1][1] for i in range(len(poly))) / 2\ncx = sum((poly[i-1][0] + poly[i][0]) * (poly[i-1][0]*poly[i][1] - poly[i][0]*poly[i-1][1]) for i in range(len(poly))) / (6 * A)\ncy = sum((poly[i-1][1] + poly[i][1]) * (poly[i-1][0]*poly[i][1] - poly[i][0]*poly[i-1][1]) for i in range(len(poly))) / (6 * A)\nc = (cx, cy)\n\n# Count stable equilibriums\nn_stable = 0\nfor i in range(len(convex_hull)):\n    a = convex_hull[i-1]\n    b = convex_hull[i]\n    r = ((c[0]-a[0]) * (b[0]-a[0]) + (c[1]-a[1]) * (b[1] - a[1])) / ((b[0]-a[0]) ** 2 + (b[1]-a[1]) ** 2)\n    if 0 <= r <= 1:\n        n_stable += 1\n\n\nprint(len(convex_hull))\nprint(n_stable)",
      "statement": "We consider a solid planar polygon with uniform density, placed upright on a horizontal ground line. The polygon can be rotated freely and then lowered until it touches the ground.\n\nWhen the polygon is resting on the ground, it may touch the ground at one or more of its vertices. A <<supporting segment>> is defined as a pair of vertices of the polygon such that, in some rotation of the polygon:\n• Both vertices lie on the ground at the same time, and\n• No other part of the polygon goes below the ground in that position.\n• Any other part of the polygon touching the ground (edge, vertex) is located between the 2 vertices.\n\nWhen more than two vertices can touch the ground at the same time, the corresponding supporting segment is defined by the leftmost and rightmost vertices.\n\nA <<static equilibrium>> occurs when, in addition to being a supporting segment, the polygon remains at rest on that segment without tipping to either side. This happens when the center of mass of the polygon lies horizontally between the two vertices touching the ground (both vertices included).\n\nIn the following image, a polygon is represented on all its five supporting segments. State 5 is not a static equilibrium: the polygon will tip on the right until reaching a static equilibrium on another supporting segment, in this case state 4.\nhttps://archive.org/details/a_20260128\n\nYour task is to:\n• Count how many distinct pairs of vertices form supporting segments.\n• Count how many of these supporting segments correspond to static equilibria.",
      "testCases": [
        {
          "title": "Simple triangle",
          "isTest": true,
          "testIn": "3\n2 1\n5 1\n3 3",
          "testOut": "3\n3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Simple triangle",
          "isTest": false,
          "testIn": "3\n1 2\n5 3\n3 5",
          "testOut": "3\n3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Tipping triangle",
          "isTest": true,
          "testIn": "3\n1 2\n8 5\n3 2",
          "testOut": "3\n2",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Tipping triangle",
          "isTest": false,
          "testIn": "3\n1 2\n2 4\n8 6",
          "testOut": "3\n2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Trapezoid",
          "isTest": true,
          "testIn": "4\n2 3\n5 3\n9 5\n5 5",
          "testOut": "4\n3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Trapezoid",
          "isTest": false,
          "testIn": "4\n1 1\n5 3\n9 8\n7 7",
          "testOut": "4\n2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Regular Octogon",
          "isTest": true,
          "testIn": "8\n33 0\n54 0\n69 15\n69 36\n54 51\n33 51\n18 36\n18 15",
          "testOut": "8\n8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Regular Decagon",
          "isTest": false,
          "testIn": "10\n48 0\n74 0\n95 15\n103 40\n95 65\n74 80\n48 80\n27 65\n19 40\n27 15",
          "testOut": "10\n10",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "An L-shape",
          "isTest": true,
          "testIn": "6\n4 18\n26 18\n26 12\n22 12\n22 10\n4 10",
          "testOut": "5\n4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "An L-shape",
          "isTest": false,
          "testIn": "6\n8 14\n16 14\n16 4\n20 4\n20 2\n8 2",
          "testOut": "5\n4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "A T-shape",
          "isTest": true,
          "testIn": "8\n14 2\n22 2\n22 14\n26 14\n26 18\n4 18\n4 10\n14 10",
          "testOut": "6\n5",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "A T-shape",
          "isTest": false,
          "testIn": "8\n14 2\n22 2\n22 12\n38 12\n38 20\n12 20\n12 8\n14 8",
          "testOut": "6\n4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 7",
          "isTest": true,
          "testIn": "11\n14 2\n22 2\n22 12\n38 12\n38 20\n12 20\n8 18\n8 12\n12 12\n20 16\n18 6",
          "testOut": "7\n5",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "11\n16 3\n24 4\n22 12\n34 8\n36 15\n6 19\n5 16\n4 8\n11 5\n15 16\n13 1",
          "testOut": "7\n4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 8",
          "isTest": true,
          "testIn": "17\n24 2\n21 6\n23 7\n33 8\n38 6\n42 16\n40 18\n35 19\n31 24\n25 25\n23 22\n23 25\n8 17\n8 16\n18 6\n19 2\n20 1",
          "testOut": "11\n6",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 8",
          "isTest": false,
          "testIn": "18\n28 5\n24 5\n24 7\n31 6\n36 9\n34 12\n34 14\n35 15\n34 16\n31 17\n30 18\n28 21\n24 18\n9 16\n9 15\n16 14\n18 10\n20 4",
          "testOut": "9\n5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Centroid outside of polygon",
          "isTest": true,
          "testIn": "18\n28 4\n28 2\n32 3\n35 6\n36 10\n35 14\n30 16\n20 14\n18 10\n19 6\n22 3\n26 2\n26 4\n20 6\n20 12\n26 14\n32 12\n32 8",
          "testOut": "11\n8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Centroid outside of polygon",
          "isTest": false,
          "testIn": "18\n31 2\n31 4\n35 4\n35 10\n36 10\n35 14\n31 16\n20 14\n18 10\n19 6\n22 3\n24 4\n23 7\n24 12\n28 10\n28 7\n27 5\n28 2",
          "testOut": "10\n8",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Multiple vertices supporting segment",
          "isTest": true,
          "testIn": "6\n1 1\n2 1\n3 3\n4 1\n5 1\n3 5",
          "testOut": "3\n3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Multiple vertices supporting segment",
          "isTest": false,
          "testIn": "13\n2 7\n4 1\n6 1\n7 4\n8 1\n10 1\n12 7\n10 7\n9 4\n8 7\n6 7\n5 4\n4 7",
          "testOut": "4\n4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Weird shape",
          "isTest": true,
          "testIn": "11\n3 2\n4 2\n5 3\n6 2\n7 2\n12 4\n12 5\n11 6\n12 7\n12 8\n9 8",
          "testOut": "5\n3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Weird shape",
          "isTest": false,
          "testIn": "8\n4 3\n5 4\n5 3\n6 4\n6 3\n7 4\n6 5\n2 5",
          "testOut": "5\n3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Barely balanced",
          "isTest": true,
          "testIn": "4\n2 3\n2 5\n3 3\n3 1",
          "testOut": "4\n4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Barely balanced",
          "isTest": false,
          "testIn": "4\n9 3\n6 1\n3 1\n6 3",
          "testOut": "4\n4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "CG",
          "isTest": true,
          "testIn": "42\n9 11\n11 11\n11 13\n9 15\n4 15\n2 13\n2 4\n4 2\n9 2\n11 4\n12 4\n14 2\n19 2\n21 4\n21 8\n18 8\n18 6\n19 6\n19 5\n18 4\n15 4\n14 5\n14 12\n15 13\n18 13\n19 12\n19 11\n21 11\n21 13\n19 15\n14 15\n12 13\n12 6\n9 6\n9 5\n8 4\n5 4\n4 5\n4 12\n5 13\n8 13\n9 12",
          "testOut": "8\n4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "ADA",
          "isTest": false,
          "testIn": "32\n2 2\n10 2\n13 8\n21 8\n24 2\n40 2\n40 28\n50 28\n54 24\n54 14\n50 10\n41 10\n41 2\n54 2\n62 10\n58 2\n66 2\n69 8\n77 8\n80 2\n88 2\n76 26\n70 26\n64 14\n62 14\n62 26\n52 36\n32 36\n32 6\n30 6\n20 26\n14 26",
          "testOut": "6\n3",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "3 ≤ [[n]] ≤ 100\n0 ≤ [[x]], [[y]] ≤ 1000\nThe polygon is non-self-intersecting.\nThe polygon is non-degenerate.",
      "coverBinaryId": 156814569523950,
      "stubGenerator": "read n:int\nloop n read x:int y:int\nwrite number of supporting segments\nnumber of static equilibriums",
      "inputDescription": "<<Line 1:>> an integer [[n]], the number of vertices.\n<<Next [[n]] lines:>> two space-separated integers [[x]] and [[y]], the coordinates of one vertex of the polygon. The vertices are given in order.",
      "solutionLanguage": "Python3",
      "outputDescription": "<<Line 1:>> an integer, the number of supporting segments.\n<<Line 2:>> an integer, the number of static equilibria."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">We consider a solid planar polygon with uniform density, placed upright on a horizontal ground line. The polygon can be rotated freely and then lowered until it touches the ground.<br><br>When the polygon is resting on the ground, it may touch the ground at one or more of its vertices. A <strong>supporting segment</strong> is defined as a pair of vertices of the polygon such that, in some rotation of the polygon:<br>&bull; Both vertices lie on the ground at the same time, and<br>&bull; No other part of the polygon goes below the ground in that position.<br>&bull; Any other part of the polygon touching the ground (edge, vertex) is located between the 2 vertices.<br><br>When more than two vertices can touch the ground at the same time, the corresponding supporting segment is defined by the leftmost and rightmost vertices.<br><br>A <strong>static equilibrium</strong> occurs when, in addition to being a supporting segment, the polygon remains at rest on that segment without tipping to either side. This happens when the center of mass of the polygon lies horizontally between the two vertices touching the ground (both vertices included).<br><br>In the following image, a polygon is represented on all its five supporting segments. State 5 is not a static equilibrium: the polygon will tip on the right until reaching a static equilibrium on another supporting segment, in this case state 4.<br>https://archive.org/details/a_20260128<br><br>Your task is to:<br>&bull; Count how many distinct pairs of vertices form supporting segments.<br>&bull; Count how many of these supporting segments correspond to static equilibria.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> an integer <var>n</var>, the number of vertices.<br><strong>Next <var>n</var> lines:</strong> two space-separated integers <var>x</var> and <var>y</var>, the coordinates of one vertex of the polygon. The vertices are given in order.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> an integer, the number of supporting segments.<br><strong>Line 2:</strong> an integer, the number of static equilibria.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">3 &le; <var>n</var> &le; 100<br>0 &le; <var>x</var>, <var>y</var> &le; 1000<br>The polygon is non-self-intersecting.<br>The polygon is non-degenerate.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">3\n2 1\n5 1\n3 3</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">3\n3</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "avatar": 43965748895173,
  "commentCount": 31,
  "upVotes": 3,
  "downVotes": 0,
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}