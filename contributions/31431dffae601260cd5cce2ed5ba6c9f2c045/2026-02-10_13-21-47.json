{
  "id": 31431,
  "activeVersion": 121,
  "score": 7,
  "votableId": 25332775,
  "codingamerId": 4433844,
  "views": 333,
  "commentableId": 25211941,
  "title": "Merlin's Magic Square",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "Lisa-Has-Ideas",
  "publicHandle": "31431dffae601260cd5cce2ed5ba6c9f2c045",
  "codingamerHandle": "6057618d773e6e27a20abefa031c4e674483344",
  "lastVersion": {
    "version": 121,
    "autocloseTime": 1665863965372,
    "data": {
      "title": "Merlin's Magic Square",
      "topics": [
        {
          "id": 244,
          "handle": "strive-for-simplicity",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Strive for Simplicity",
            "2": "Strive for Simplicity"
          },
          "puzzleCount": 3,
          "parentTopicId": 39
        },
        {
          "id": 47,
          "handle": "arrays",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Tableaux",
            "2": "Arrays"
          },
          "pageTitle": "Arrays: exercises and theory",
          "puzzleCount": 29,
          "parentTopicId": 40,
          "contentDetailsId": 78
        },
        {
          "id": 86,
          "handle": "simulation",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Simulation",
            "2": "Simulation"
          },
          "pageTitle": "Simulation: exercises and theory",
          "puzzleCount": 33,
          "parentTopicId": 42,
          "contentDetailsId": 72
        },
        {
          "id": 213,
          "handle": "bitboarding",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Bitboarding",
            "2": "Bitboarding"
          },
          "puzzleCount": 5,
          "parentTopicId": 93
        },
        {
          "id": 117,
          "handle": "logic",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Logic",
            "2": "Logic"
          },
          "puzzleCount": 17,
          "parentTopicId": 93
        }
      ],
      "solution": "using System;\nusing System.Linq;\nusing System.IO;\nusing System.Text;\nusing System.Collections;\nusing System.Collections.Generic;\n\nclass Solution\n{\n    public static char[] cRay;\n    static void Main(string[] args)\n    {\n\t\tstring row1 = Console.ReadLine();\n\t\tstring row2 = Console.ReadLine();\n\t\tstring row3 = Console.ReadLine();\n        string allButtonsPressed = Console.ReadLine();\n\t\n\t\tstring fullInput = \"_\" + row1 + row2 + row3; //doing it this way so array indexes will match the button numbers\n\t\tfullInput = fullInput.Replace(\" \",\"\");\n\t\tcRay = fullInput.ToCharArray();\n\t\t\n\t\tvar buttonsPressed = allButtonsPressed.ToCharArray();\n\t\tforeach (char ch in buttonsPressed)\n\t\t{\n\t\t\tint bpi = ch - '0'; //button pressed integer\n\t\t\tchangeBoard(bpi);\n\t\t\tShowMS();\n\t\t}\t\t\t\n\t\tint sol = FindSolution();\n\t\tConsole.Error.WriteLine(\"solution is \" + sol);\n\t\tConsole.WriteLine(sol);\n\t}\n\t\n\tpublic static void changeBoard(int bp)\n\t{\n\t\tif (bp == 1) ReversePart(1245);\n\t\tif (bp == 3) ReversePart(2356);\n\t\tif (bp == 7) ReversePart(4578);\n\t\tif (bp == 9) ReversePart(5689);\n\t\t\n\t\tif (bp == 2) ReversePart(123);\n\t\tif (bp == 8) ReversePart(789);\n\t\tif (bp == 4) ReversePart(147);\n\t\tif (bp == 6) ReversePart(369);\n\t\t\n\t\tif (bp == 5) ReversePart(24568);\n\t}\n\t\n\tpublic static void ReversePart(int reverseTheseInt)\n\t{\n\t\tstring reverseTheseString = reverseTheseInt.ToString();\n\t\tforeach (char ch in reverseTheseString)\n\t\t{\n\t\t\tint i = ch - '0';\n\t\t\tif (cRay[i] == '*')\n\t\t\t{\n\t\t\t\tcRay[i] = '~';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcRay[i] = '*';\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic static void ShowMS()\n\t{\n\t\tint st = 1;\n\t\tConsole.Error.WriteLine(\"\" + cRay[st + 0] + cRay[st + 1] + cRay[st + 2]);\n\t\tst = 4;\n\t\tConsole.Error.WriteLine(\"\" + cRay[st + 0] + cRay[st + 1] + cRay[st + 2]);\n\t\tst = 7;\n\t\tConsole.Error.WriteLine(\"\" + cRay[st + 0] + cRay[st + 1] + cRay[st + 2]);\t\t\n\t\tConsole.Error.WriteLine();\n\t}\n\t\n\tpublic static int FindSolution()\n\t{\n\t\tfor (int i = 1 ; i <= 9 ; i++)\n\t\t{\n\t\t\tchangeBoard(i);\n\t\t\tif (IsItSolved())\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tchangeBoard(i); //reverse it back if that doesnt solve it\n\t\t\t}\n\t\t}\n\t\treturn -1;///should never get here;\n\t}\n\t\n\tpublic static bool IsItSolved()\n\t{\n\t\tchar lit = '*';\n\t\tchar notLit = '~';\n\t\tint middleSq = 5;\n\t\t\n\t\tbool isSolved = true;\n\t\tif (cRay[middleSq] == lit)\n\t\t{\n\t\t\tisSolved = false;\n\t\t}\n\t\tfor (int i = 1 ; i <= 9 ; i++)\n\t\t{\n\t\t\tif (i != middleSq && cRay[i] == notLit) isSolved = false;\n\t\t}\n\t\treturn isSolved;\n\t}\n}\n\n/*\nOr...\nPer Codingame Coder \"Remi.\", it can be done in just a few lines using Bitboard\nusing System;\n\nclass Solution\n{\n    // 123\n    // 456 => 987654321\n    // 789\n    static int[] buttons = { 27, 7, 54, 73, 186, 292, 216, 448, 432 }; // 0b000011011, ...\n    static int wanted = 495; // 0b111101111\n\n    static void Main(string[] args)\n    {\n        // Read tab\n        String[] rows = { \"\", \"\", \"\" };\n        for (int i=0; i<3; ++i)\n            rows[i] = Console.ReadLine();\n\n        // Construct bitboard\n        int bitboard = 0;\n        for (int i=0; i<9; ++i)\n            if ('*'==rows[i/3].ToCharArray()[i%3*2])\n                bitboard |= 1<<i;\n\n        // Read buttons and apply change to magic square\n        string allButtonsPressed = Console.ReadLine();\n        foreach(char c in allButtonsPressed)\n            bitboard ^= buttons[c-'1'];\n\n        // Find last answer\n        for (int i=0; i<9; ++i)\n            if ((bitboard ^ buttons[i]) == wanted)\n                Console.Write(i+1);\n    }\n}\n\n\n*/",
      "statement": "<<Background and Symbols:>>\nMerlin was a hand-held electronic gaming-device from 1978.  It played multiple games with the kids back then, including \"Magic Square\"\n\nWe will refer to each location (aka button) within Merlin's Magic Square using this numbering system (which is the same as the instructions from the original game):\n1  2  3\n4  5  6\n7  8  9\n(This is also shown in the banner image)\n\nasterisk {{*}} = lit\ntilde {{~}} = unlit (not lit)\n\n<<Situation:>>\nYou and your friend Lizzo are given a starting \"Merlin's Magic Square\", which consists of:\n3 rows of 3 characters (characters are separated by a space), such as....{{`~ * ~``~ ~ ~``~ * ~`}}And y'all want to solve it by changing it into The Solved State, which is:{{`* * *``* ~ *``* * *`}}\n<<Your Task:>>\nLizzo presses some buttons, such as 884 (meaning: first she presses 8, then 8, then 4).\nYou only need to press one more button to solve it; what button is that?\n\n\n<<The Rules of Merlin's Magic Square:>>\n• When you press a corner button (1, 3, 7 or 9), it reverses the 4 buttons in the 2x2 corner square it's in\n• When you press a side button (2, 4, 6 or 8), it reverses the 3 buttons in that border\n• When you press the middle button (5), it reverses the 5 buttons in the middle \"<<+>>\" shape\n• (\"Reverse\" means that if it's lit, it becomes unlit; if it's unlit, it becomes lit.)\n• The Solved State is when all buttons are lit except for the middle one (5) ; this is shown above in blue\n\n\n<<See someone play it, or play it yourself, to better understand:>>\n• 1-minute long example of a person playing this: https://youtu.be/M2pSiuIKn6k?t=462\n• Play it yourself in this simulator I made: https://openprocessing.org/sketch/1643473",
      "testCases": [
        {
          "title": "Simple",
          "isTest": true,
          "testIn": "~ * ~\n~ ~ ~\n~ * ~\n884",
          "testOut": "6",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Simple Validator",
          "isTest": false,
          "testIn": "~ ~ ~\n* ~ *\n~ ~ ~\n811",
          "testOut": "2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 2",
          "isTest": true,
          "testIn": "~ ~ *\n* * ~\n* * ~\n45",
          "testOut": "8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Test 2 Validator",
          "isTest": false,
          "testIn": "~ * *\n~ ~ ~\n* ~ ~\n2461",
          "testOut": "7",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 3",
          "isTest": true,
          "testIn": "~ ~ *\n~ ~ *\n* * *\n24618",
          "testOut": "5",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "* ~ ~\n~ ~ ~\n* ~ *\n48359",
          "testOut": "1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 4",
          "isTest": true,
          "testIn": "~ ~ *\n~ ~ ~\n~ ~ ~\n485",
          "testOut": "7",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "* * ~\n* * ~\n~ * ~\n127",
          "testOut": "9",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 5",
          "isTest": true,
          "testIn": "* * *\n* ~ *\n* ~ ~\n5741",
          "testOut": "9",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "* ~ ~\n~ * *\n~ * ~\n97",
          "testOut": "3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 6",
          "isTest": true,
          "testIn": "~ * *\n* * ~\n~ * ~\n56421",
          "testOut": "5",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 6",
          "isTest": false,
          "testIn": "* ~ *\n* ~ ~\n~ ~ ~\n41",
          "testOut": "9",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 7",
          "isTest": true,
          "testIn": "* ~ *\n~ ~ *\n* * *\n687",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "* ~ ~\n~ * ~\n* ~ *\n6319",
          "testOut": "2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 8",
          "isTest": true,
          "testIn": "* * ~\n~ ~ ~\n* * ~\n39246",
          "testOut": "8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 8",
          "isTest": false,
          "testIn": "* * ~\n* ~ *\n~ ~ ~\n123589",
          "testOut": "6",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 9",
          "isTest": true,
          "testIn": "* * *\n* * ~\n* ~ ~\n1212",
          "testOut": "9",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 9",
          "isTest": false,
          "testIn": "* ~ *\n~ * ~\n* ~ *\n2323",
          "testOut": "5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Lizzo is making this too hard",
          "isTest": true,
          "testIn": "* * *\n* ~ *\n~ ~ ~\n987654321987654321987654321987654321",
          "testOut": "8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Lizzo is making this too hard Validator",
          "isTest": false,
          "testIn": "~ * *\n~ ~ *\n~ * *\n123456789123456789123456789123456789123456789123456789",
          "testOut": "4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "One Button",
          "isTest": true,
          "testIn": "* ~ ~\n~ ~ ~\n~ ~ *\n3",
          "testOut": "7",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "One Button Validator",
          "isTest": false,
          "testIn": "~ ~ *\n* ~ ~\n* * ~\n6",
          "testOut": "2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Now you're just Messing Around",
          "isTest": true,
          "testIn": "~ ~ *\n~ * *\n* * *\n5555555555",
          "testOut": "1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Now you're just Messing Around Validator",
          "isTest": false,
          "testIn": "* * *\n~ * *\n~ ~ *\n3333333333333333",
          "testOut": "7",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 13",
          "isTest": true,
          "testIn": "* ~ ~\n* * *\n~ ~ ~\n2137",
          "testOut": "6",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 13",
          "isTest": false,
          "testIn": "* * *\n~ * ~\n~ * *\n42",
          "testOut": "3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 14",
          "isTest": true,
          "testIn": "* ~ *\n* ~ ~\n* * *\n981",
          "testOut": "4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 14",
          "isTest": false,
          "testIn": "* * ~\n* ~ ~\n* * ~\n1551",
          "testOut": "6",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 15",
          "isTest": true,
          "testIn": "* ~ ~\n~ ~ ~\n~ * *\n641117",
          "testOut": "8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 15",
          "isTest": false,
          "testIn": "~ ~ *\n~ ~ *\n~ * ~\n22238",
          "testOut": "5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 16",
          "isTest": true,
          "testIn": "* ~ ~\n~ * *\n~ ~ *\n13665",
          "testOut": "4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 16",
          "isTest": false,
          "testIn": "* * *\n* ~ ~\n* ~ ~\n6422589",
          "testOut": "2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 17",
          "isTest": true,
          "testIn": "~ ~ *\n* ~ ~\n~ * *\n9951234",
          "testOut": "5",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 17",
          "isTest": false,
          "testIn": "~ ~ ~\n~ * *\n* ~ *\n7897452",
          "testOut": "1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 18",
          "isTest": true,
          "testIn": "~ ~ *\n~ * ~\n* * ~\n32579",
          "testOut": "7",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 18",
          "isTest": false,
          "testIn": "* ~ *\n~ * *\n* * ~\n9862",
          "testOut": "4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 19",
          "isTest": true,
          "testIn": "~ * ~\n~ * ~\n~ * ~\n25",
          "testOut": "8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 19",
          "isTest": false,
          "testIn": "* * ~\n* * *\n* ~ *\n9",
          "testOut": "6",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 20",
          "isTest": true,
          "testIn": "* * *\n* * ~\n* ~ *\n5678",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 20",
          "isTest": false,
          "testIn": "* * ~\n* * ~\n~ * *\n86123",
          "testOut": "5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 21",
          "isTest": true,
          "testIn": "~ ~ ~\n~ * ~\n~ * *\n4",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 21",
          "isTest": false,
          "testIn": "~ * ~\n* * ~\n* * *\n169",
          "testOut": "5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 22",
          "isTest": true,
          "testIn": "* ~ *\n~ * *\n* * ~\n4682",
          "testOut": "9",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 22",
          "isTest": false,
          "testIn": "~ * *\n* ~ ~\n~ ~ *\n498",
          "testOut": "7",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 23",
          "isTest": true,
          "testIn": "~ * ~\n* * *\n~ * ~\n98765432",
          "testOut": "1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 23",
          "isTest": false,
          "testIn": "~ ~ ~\n* * *\n* ~ *\n13",
          "testOut": "5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 24",
          "isTest": true,
          "testIn": "* ~ *\n* ~ ~\n* * ~\n36517",
          "testOut": "4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 24",
          "isTest": false,
          "testIn": "* ~ ~\n~ ~ ~\n~ ~ *\n3",
          "testOut": "7",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 25",
          "isTest": true,
          "testIn": "* * ~\n~ * *\n~ ~ *\n321569",
          "testOut": "7",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 25",
          "isTest": false,
          "testIn": "~ * *\n~ ~ *\n~ ~ *\n12359528296",
          "testOut": "2",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "easy",
      "constraints": "Lizzo presses at least one button",
      "coverBinaryId": 89992283027455,
      "stubGenerator": "read row1:string(5)\nread row2:string(5)\nread row3:string(5)\nread allButtonsPressed:string(100)\nwrite answer (a single digit)",
      "inputDescription": "<<Lines 1 to 3:>> The starting Merlin's Magic Square, in 3 rows\n<<Line 4:>> The numbers of the buttons that Lizzo presses",
      "solutionLanguage": "C#",
      "outputDescription": "The number of the final button you should press to solve it"
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\"><strong>Background and Symbols:</strong><br>Merlin was a hand-held electronic gaming-device from 1978.  It played multiple games with the kids back then, including &quot;Magic Square&quot;<br><br>We will refer to each location (aka button) within Merlin's Magic Square using this numbering system (which is the same as the instructions from the original game):<br>1  2  3<br>4  5  6<br>7  8  9<br>(This is also shown in the banner image)<br><br>asterisk <const>*</const> = lit<br>tilde <const>~</const> = unlit (not lit)<br><br><strong>Situation:</strong><br>You and your friend Lizzo are given a starting &quot;Merlin's Magic Square&quot;, which consists of:<br>3 rows of 3 characters (characters are separated by a space), such as....<const><pre style=\"font-family: monospace\">~ * ~</pre><pre style=\"font-family: monospace\">~ ~ ~</pre><pre style=\"font-family: monospace\">~ * ~</pre></const>And y'all want to solve it by changing it into The Solved State, which is:<const><pre style=\"font-family: monospace\">* * *</pre><pre style=\"font-family: monospace\">* ~ *</pre><pre style=\"font-family: monospace\">* * *</pre></const><br><strong>Your Task:</strong><br>Lizzo presses some buttons, such as 884 (meaning: first she presses 8, then 8, then 4).<br>You only need to press one more button to solve it; what button is that?<br><br><br><strong>The Rules of Merlin's Magic Square:</strong><br>&bull; When you press a corner button (1, 3, 7 or 9), it reverses the 4 buttons in the 2x2 corner square it's in<br>&bull; When you press a side button (2, 4, 6 or 8), it reverses the 3 buttons in that border<br>&bull; When you press the middle button (5), it reverses the 5 buttons in the middle &quot;<strong>+</strong>&quot; shape<br>&bull; (&quot;Reverse&quot; means that if it's lit, it becomes unlit; if it's unlit, it becomes lit.)<br>&bull; The Solved State is when all buttons are lit except for the middle one (5) ; this is shown above in blue<br><br><br><strong>See someone play it, or play it yourself, to better understand:</strong><br>&bull; 1-minute long example of a person playing this: https://youtu.be/M2pSiuIKn6k?t=462<br>&bull; Play it yourself in this simulator I made: https://openprocessing.org/sketch/1643473</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Lines 1 to 3:</strong> The starting Merlin's Magic Square, in 3 rows<br><strong>Line 4:</strong> The numbers of the buttons that Lizzo presses</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">The number of the final button you should press to solve it</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">Lizzo presses at least one button</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">~ * ~\n~ ~ ~\n~ * ~\n884</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">6</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 107422860274,
  "avatar": 94714081045618,
  "commentCount": 25,
  "upVotes": 7,
  "downVotes": 0,
  "validateAction": {
    "actionId": 701094,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1663306846194,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}