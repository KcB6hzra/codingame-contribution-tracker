{
  "id": 5945,
  "activeVersion": 16,
  "score": 39,
  "votableId": 16427979,
  "codingamerId": 1360513,
  "views": 1184,
  "commentableId": 16340178,
  "title": "Connect 4",
  "status": "ACCEPTED",
  "type": "PUZZLE_MULTI",
  "nickname": "AshKetchum",
  "publicHandle": "59458ca85b08f914f150d1ccf0350fe7b233",
  "codingamerHandle": "42ba46c54385f23e35e4628a9c77062a3150631",
  "lastVersion": {
    "version": 16,
    "autocloseTime": 1616520986059,
    "data": {
      "title": "Connect 4",
      "topics": [
        {
          "id": 83,
          "handle": "minimax",
          "labelMap": {
            "1": "Minimax",
            "2": "Minimax"
          },
          "pageTitle": "Minimax: exercises and theory",
          "puzzleCount": 19,
          "parentTopicId": 42,
          "contentDetailsId": 93
        }
      ],
      "refereeMd5": "1360513/37b193bff0704d16d73294defb0e36bf",
      "testHandle": "865093739b7ba38bf8ceaf629618b54987f75f",
      "viewerCode": "var Drawer=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";n.r(e),n.d(e,\"Drawer\",(function(){return Cn}));var r={baseUrl:\"https://cdn-games.codingame.com/community/1360513-1608469222400/\",images:{\"chip_91_in_105.png\":\"61724787f961a0b7f4b62b2a3247236106122239f528362eb6a56bad9c61d932.png\",\"board_tile_106_in_120.png\":\"c2126845ef1fc1b16e49c50eca862cf3cb567429ecedfaccb607b603c52bb7fa.png\",\"logo.png\":\"e248010031c9465dd952090989b39f2b831098463751c4259679afa57679cb0b.png\",\"down_arrow_105.png\":\"713573fcec77c7badc351d1d91729d1eab5fac02da2f7e51667f9d3d0887c328.png\",\"board_tile_91_in_105.png\":\"69ca3a7302a9b45bd509d77e348cd34f5b0a10244d5c8b9c9378b9d5c4e8f2cc.png\",\"chip_106_in_120.png\":\"49abf4c78d86a4f2fc8598c9df228a5c437de05e79c427532d440c360aef4152.png\",\"Background.jpg\":\"c54eabf9d0b0999f1d8c7b5f79a505fb5a7a7b8010a080bdcb6952de14570712.jpg\",\"down_arrow_120.png\":\"505253529ec33e9a8cd4897c711d2bdef6b0084e61a0689c701d2b1c4a8b9747.png\"},sprites:[],fonts:[]};function i(t,e,n){return t<=e?t+(e-t)*n:e+(t-e)*(1-n)}function o(t,e,n){return Math.min(1,Math.max(0,(n-(t=t))/(e-t)))}function a(t,e,n,r,i){return i=i||0,Math.min(n/(t+i),r/(e+i))}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=[],s=[],l=function(){function t(){!function(e){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this)}var e,n;return e=t,n=[{key:\"listen\",value:function(t){if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");s.push(t)}},{key:\"push\",value:function(t){u.push(t),s.forEach((function(e){return e(t)}))}}],null&&c(e.prototype,null),n&&c(e,n),t}();function f(t){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function p(t){var e=\"function\"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf(\"[native code]\")))return t;var n;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,b(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,t)})(t)}function h(t,e,n){return(h=y()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&d(r,n.prototype),r}).apply(null,arguments)}function y(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,p(Error));var t=function(t){var e=y();return function(){var n,r=b(t);return n=e?(n=b(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==f(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(e);function e(n,r){var i;return function(t){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),(i=t.call(this,\"Invalid color token: there is no player at index \".concat(n,\". Make sure to use getColorToken() if you want the color of a specific player.\"))).playerIdx=n,i.cause=r,i.name=\"InvalidPlayerColorTokenError\",i}return e}();function m(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){var r,i;r=t,e=n[i=e],i in r?Object.defineProperty(r,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[i]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return n<1?t:e}var S={type:Number,lerpMethod:function(t,e,n){return null===e?null:i((t={r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t}).r,(e={r:(16711680&e)>>16,g:(65280&e)>>8,b:255&e}).r,n)<<16|i(t.g,e.g,n)<<8|i(t.b,e.b,n)},convert:function(t,e){var n=-(t+1);try{return t<0?e.players[n].color:t}catch(t){return l.push(new g(n)),16777215}}},w={type:String,lerpMethod:_,convert:j},O={type:Number,lerpMethod:function(t,e,n,r){for(;e>t+Math.PI;)e-=2*Math.PI;for(;e<t-Math.PI;)e+=2*Math.PI;return(n=void 0!==r&&Math.abs(e-t)>r?e:t+(e-t)*n)%(2*Math.PI)},convert:function(t){return t*Math.PI/180}},x={type:Number,lerpMethod:_},P=(n={type:function(t){return\"1\"===t},lerpMethod:_},e={type:Number,lerpMethod:function(t,e,n){return e<t?e:i(t,e,n)}},{default:{type:Number,lerpMethod:i},visible:n,rotation:O,skewX:O,skewY:O,fillColor:S,lineColor:S,strokeColor:S,tint:S,animationProgressTime:e,maxWidth:x,mask:x,baseWidth:x,baseHeight:x,image:w,images:w,scaleMode:w,restarted:{type:String,convert:function(t,e,n,r){return t?{date:n.date+r*n.frameDuration}:null},lerpMethod:_},playing:n,duration:x,blendMode:x,loop:n,text:v(v({},w),{},{convert:function(t,e){t=j(t);for(var n=/\\$(\\d)/g,r=n.exec(t),i=\"\",o=0;r;)r[1]<e.players.length&&(i+=t.substring(o,r.index),i+=e.players[+r[1]].name),o=r.index+r[0].length,r=n.exec(t);return i+t.substring(o)}}),textAlign:v(v({},w),{},{convert:function(t){return{0:\"left\",1:\"center\",2:\"right\"}[t]}}),fontFamily:w,fontWeight:w,children:v(v({},w),{},{convert:function(t){return t?t.split(\",\").map((function(t){return+t})):[]}}),points:v(v({},w),{},{convert:function(t){return t?t.split(\",\").map((function(t){return parseInt(t)})):[]},lerpMethod:function(t,e,n){return t.length===e.length?t.map((function(t,r){return i(t,e[r],n)})):_(t,e,n)}})});function j(t){return(t=t.split(\"\\\\'\").join(\"'\")).includes(\" \")||t.includes(\";\")||t.includes(\"\\n\")?t.slice(1,t.length-1):t}function R(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){var r,i;r=t,e=n[i=e],i in r?Object.defineProperty(r,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[i]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D(t){return(D=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var E=function(){function t(){!function(e){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.defaultState={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0,zIndex:0,alpha:1,visible:!1,rotation:0,mask:-1},this.states={}}var e,n,r;return e=t,r=[{key:\"createState\",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return k(k({t:t},e),{},{curve:n})}}],(n=[{key:\"init\",value:function(){this.properties=Object.keys(this.defaultState),this.initDisplay(),this.currentState=Object.assign({},this.defaultState),\"object\"===D(this.graphics)&&this.container.addChild(this.graphics)}},{key:\"setHidden\",value:function(t){this.hide=t,this.container.visible=this.currentState.visible&&!this.hide}},{key:\"addState\",value:function(e,n,r){this.states[r]||(this.states[r]=[]);var i=t.createState(e,n.values,n.curve);(n=this.states[r].find((function(t){return t.t===e})))&&0===Object.keys(i.curve).length&&(i.curve=n.curve),n?(C(i)||C(n)||l.push(new Error(\"Different updates for same t \"+e)),Object.assign(n,i)):this.states[r].push(i)}},{key:\"set\",value:function(t,e,n){this.addState(t,e,n)}},{key:\"render\",value:function(t,e,n){var r=this.states[e.number];this.container.visible=!1;var i,a=null,c=1;if(r&&r.length){for(var u=0;u<r.length-1&&r[u].t<t;)u++;if(a=r[u-1],i=r[u],a)c=o(a.t,i.t,t);else{var s=Object.keys(this.states),l=s.indexOf(e.number.toString())-1;for(-1===l&&(l=s.length-1);0<=l&&s[l]>=e.number;)l--;var f=this.states[s[l]]||[];c=!(a=f[f.length-1])&&t>=i.t?(a=i,1):o(0,i.t,t)}}else{for(var p=Object.keys(this.states),h=p.length-1;0<=h&&p[h]>e.number;)h--;null!=(f=this.states[p[h]])?i=a=f[f.length-1]:Object.assign(this.currentState,this.defaultState)}if(a){var y={},d=Object.assign({},this.currentState),b=function(t,e){var n;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if(\"string\"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(t,e):void 0}}(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(this.properties);try{for(b.s();!(v=b.n()).done;){var g=v.value,m=(P[g]||P.default).lerpMethod,v=i.curve[g]||function(t){return t};(v=m(a[g],i[g],v(c)))!==this.currentState[g]&&(y[g]=!0,d[g]=v)}}catch(t){b.e(t)}finally{b.f()}this.updateDisplay(d,y,n,e,t),Object.assign(this.currentState,d),this.container.visible=this.container._visible,y.children&&(n.mustResetTree=!0,\"function\"==typeof this.postUpdate&&n.updatedBuffers.push(this)),y.zIndex&&(n.mustResort=!0),y.mask&&(n.maskUpdates[this.id]=d.mask),0!==Object.keys(y).length&&this.parent&&this.parent.notifyChange()}}},{key:\"notifyChange\",value:function(){this.parent&&this.parent.notifyChange()}},{key:\"initDisplay\",value:function(){this.container=new PIXI.Container,this.container.zIndex=this.defaultState.zIndex,this.container.id=this.id,this.container._visible=this.defaultState.visible}},{key:\"updateDisplay\",value:function(t,e,n){this.container.zIndex=t.zIndex,this.container.alpha=t.alpha,(e.x||e.y)&&this.container.position.set(t.x*n.toWorldUnits,t.y*n.toWorldUnits),(e.scaleX||e.scaleY)&&this.container.scale.set(t.scaleX||1e-8,t.scaleY||1e-8),this.container.rotation=t.rotation,this.container._visible=t.visible&&!this.hide,this.container.skew.set(t.skewX,t.skewY)}}])&&I(e.prototype,n),r&&I(e,r),t}();function C(t){return Object.keys(t).length===Object.keys(E.createState()).length}function F(t){return(F=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return(A=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=W(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(i,E);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=W(t);return n=e?(n=W(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==F(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(i);function i(){var t;return function(t){if(!(t instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),t=r.call(this),Object.assign(t.defaultState,{fillColor:i.defaultFillColor(),lineWidth:i.defaultLineWidth(),lineColor:i.defaultLineColor(),fillAlpha:i.defaultFillAlpha(),lineAlpha:i.defaultLineAlpha(),blendMode:PIXI.BLEND_MODES.NORMAL}),t}return t=i,n=[{key:\"defaultLineWidth\",value:function(){return 0}},{key:\"defaultFillColor\",value:function(){return 16777215}},{key:\"defaultLineColor\",value:function(){return 0}},{key:\"defaultLineAlpha\",value:function(){return 1}},{key:\"defaultFillAlpha\",value:function(){return 1}}],(e=[{key:\"initDisplay\",value:function(){A(W(i.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Graphics,this.graphics.lineStyle(this.defaultState.lineWidth,this.defaultState.lineColor,this.defaultState.lineAlpha),null!==this.defaultState.fillColor&&this.graphics.beginFill(this.defaultState.fillColor,this.defaultState.fillAlpha)}},{key:\"updateDisplay\",value:function(t,e,n){A(W(i.prototype),\"updateDisplay\",this).call(this,t,e,n),this.graphics.blendMode=t.blendMode}}])&&M(t.prototype,e),n&&M(t,n),i}();function U(t){return(U=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e,n){return(H=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(i,X);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);return n=e?(n=B(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==U(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(i);function i(){var t;return function(t){if(!(t instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),(t=r.call(this)).defaultState.radius=i.defaultRadius(),t}return t=i,n=[{key:\"defaultRadius\",value:function(){return 100}}],(e=[{key:\"initDisplay\",value:function(){H(B(i.prototype),\"initDisplay\",this).call(this),this.graphics.drawCircle(0,0,this.defaultState.radius),null!==this.defaultState.fillColor&&this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,n){H(B(i.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.radius||e.lineColor||e.lineWidth||e.fillColor||e.fillAlpha||e.lineAlpha)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor),this.graphics.drawCircle(0,0,t.radius*n.toWorldUnits),null!==t.fillColor&&this.graphics.endFill())}}])&&L(t.prototype,e),n&&L(t,n),i}();function N(t){return(N=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e,n){return(q=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Q=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(i,X);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=J(t);return n=e?(n=J(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==N(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(i);function i(){var t;return function(t){if(!(t instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),(t=r.call(this)).defaultState.x2=i.defaultPosition(),t.defaultState.y2=i.defaultPosition(),t}return t=i,n=[{key:\"defaultPosition\",value:function(){return 100}}],(e=[{key:\"initDisplay\",value:function(){q(J(i.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(t,e,n){q(J(i.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.lineWidth||e.lineColor||e.lineAlpha||e.x2||e.y2||e.x||e.y)&&(this.graphics.clear(),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.moveTo(0,0),this.graphics.lineTo(-this.container.x+t.x2*n.toWorldUnits,-this.container.y+t.y2*n.toWorldUnits))}}])&&K(t.prototype,e),n&&K(t,n),i}();function Z(t){return(Z=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e,n){return(et=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var it=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(i,X);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);return n=e?(n=rt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==Z(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(i);function i(){var t;return function(t){if(!(t instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),t=r.call(this),Object.assign(t.defaultState,{width:i.defaultSideLength(),height:i.defaultSideLength()}),t}return t=i,n=[{key:\"defaultSideLength\",value:function(){return 100}}],(e=[{key:\"initDisplay\",value:function(){et(rt(i.prototype),\"initDisplay\",this).call(this),this.graphics.drawRect(0,0,this.defaultState.width,this.defaultState.height),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,n){et(rt(i.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.lineWidth||e.lineColor||e.width||e.height||e.lineAlpha||e.fillColor)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawRect(0,0,t.width*n.toWorldUnits,t.height*n.toWorldUnits),null!==t.fillColor&&this.graphics.endFill())}}])&&tt(t.prototype,e),n&&tt(t,n),i}();function ot(t){return(ot=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e,n){return(ct=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=st(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(i,E);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=st(t);return n=e?(n=st(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==ot(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(i);function i(){var t;return function(t){if(!(t instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),t=r.call(this),Object.assign(t.defaultState,{anchorX:i.defaultAnchor(),anchorY:i.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215}),t}return t=i,n=[{key:\"defaultAnchor\",value:function(){return 0}}],(e=[{key:\"initDisplay\",value:function(){ct(st(i.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(t,e,n){ct(st(i.prototype),\"updateDisplay\",this).call(this,t,e,n),this.graphics.anchor.set(t.anchorX,t.anchorY),this.graphics.blendMode=t.blendMode,this.graphics.tint=t.tint}}])&&at(t.prototype,e),n&&at(t,n),i}();function ft(t){return(ft=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function pt(t){var e=\"function\"==typeof Map?new Map:void 0;return(pt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf(\"[native code]\")))return t;var n;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ht(t,arguments,bt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),dt(r,t)})(t)}function ht(t,e,n){return(ht=yt()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&dt(r,n.prototype),r}).apply(null,arguments)}function yt(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(e,pt(Error));var t=function(t){var e=yt();return function(){var n,r=bt(t);return n=e?(n=bt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==ft(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(e);function e(n,r){var i;return function(t){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),(i=t.call(this,'Could not find image: \"'+n+'\". Make sure it is in your assets folder and is spelled correctly.')).image=n,i.cause=r,i.name=\"MissingImageError\",i}return e}();function mt(t){return(mt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e,n){return(_t=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ot=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(r,lt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wt(t);return n=e?(n=wt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==mt(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){var t;return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),t=n.call(this),Object.assign(t.defaultState,{image:null,baseWidth:null,baseHeight:null,scaleMode:\"LINEAR\"}),t.missingTextures={},t}return t=r,(e=[{key:\"updateDisplay\",value:function(t,e,n){if(_t(wt(r.prototype),\"updateDisplay\",this).call(this,t,e,n),e.image)try{null!==t.image?this.graphics.texture=PIXI.Texture.fromFrame(t.image):this.graphics.texture=PIXI.Texture.EMPTY,this.graphics.texture.baseTexture.scaleMode=PIXI.SCALE_MODES[t.scaleMode]}catch(e){this.missingTextures[t.image]||(this.missingTextures[t.image]=!0,l.push(new gt(t.image,e)))}e.baseWidth&&(this.graphics.width=t.baseWidth),e.baseHeight&&(this.graphics.height=t.baseHeight)}}])&&vt(t.prototype,e),r}();function xt(t){return(xt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jt(t,e,n){return(jt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Rt(t,e){return(Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rt(t,e)}(r,Ot);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kt(t);return n=e?(n=kt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==xt(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),n.apply(this,arguments)}return t=r,(e=[{key:\"initDisplay\",value:function(){jt(kt(r.prototype),\"initDisplay\",this).call(this),null===this.defaultState.image?this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY):this.graphics=PIXI.Sprite.fromFrame(this.defaultState.image)}}])&&Pt(t.prototype,e),r}();function Dt(t,e){if(t.width>e)for(;3<t.text.length&&t.width>e;)t.text=t.text.slice(0,-4)+\"...\"}function It(t){return(It=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ct(t,e,n){return(Ct=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var At=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(r,lt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mt(t);return n=e?(n=Mt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==It(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){var t;return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),t=n.call(this),Object.assign(t.defaultState,{text:\"\",textAlign:\"left\",strokeColor:0,strokeThickness:0,fillColor:0,fontSize:26,fontFamily:\"Lato\",fontWeight:\"normal\",maxWidth:0}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){Ct(Mt(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Text(this.defaultState.text,{align:this.defaultState.textAlign,fontSize:this.defaultState.fontSize+\"px\",fontFamily:this.defaultState.fontFamily,fill:this.defaultState.fillColor})}},{key:\"updateDisplay\",value:function(t,e,n){Ct(Mt(r.prototype),\"updateDisplay\",this).call(this,t,e,n),this.graphics.style.align=t.textAlign,this.graphics.style.stroke=t.strokeColor,this.graphics.style.strokeThickness=t.strokeThickness,this.graphics.style.fill=t.fillColor,this.graphics.style.fontSize=t.fontSize||1,this.graphics.style.fontFamily=t.fontFamily,this.graphics.style.fontWeight=t.fontWeight,(e.text||e.strokeThickness||e.fontSize||e.fontFamily||e.fontWeight||e.maxWidth||e.maxWidth)&&(this.graphics.text=t.text,t.maxWidth&&Dt(this.graphics,t.maxWidth))}}])&&Et(t.prototype,e),r}();function zt(t){return(zt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Wt(t){var e=\"function\"==typeof Map?new Map:void 0;return(Wt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf(\"[native code]\")))return t;var n;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Xt(t,arguments,Ht(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Lt(r,t)})(t)}function Xt(t,e,n){return(Xt=Ut()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&Lt(r,n.prototype),r}).apply(null,arguments)}function Ut(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(e,Wt(Error));var t=function(t){var e=Ut();return function(){var n,r=Ht(t);return n=e?(n=Ht(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==zt(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(e);function e(n,r){var i;return function(t){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),(i=t.call(this,'Could not find font: \"'+n+'\". Make sure it is in your assets folder and is spelled correctly.')).font=n,i.cause=r,i.name=\"MissingBitmapFontError\",i}return e}();function Bt(t){return(Bt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nt(t,e,n){return(Nt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kt(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function $t(t,e){return($t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qt=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$t(t,e)}(r,E);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kt(t);return n=e?(n=Kt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==Bt(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){var t;return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),t=n.call(this),Object.assign(t.defaultState,{text:\"\",textAlign:\"left\",fontSize:26,fontFamily:null,anchorX:lt.defaultAnchor(),anchorY:lt.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215,maxWidth:0}),t.missingFonts={},t}return t=r,(e=[{key:\"initDisplay\",value:function(){Nt(Kt(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(t,e,n){Nt(Kt(r.prototype),\"updateDisplay\",this).call(this,t,e,n),null!==t.fontFamily?PIXI.extras.BitmapText.fonts[t.fontFamily]?(0===this.graphics.children.length?(this.displayed=new PIXI.extras.BitmapText(\"\",{font:{size:t.fontSize||1,name:t.fontFamily}}),this.graphics.addChild(this.displayed)):this.displayed.font={size:t.fontSize||1,name:t.fontFamily},this.displayed.anchor.set(t.anchorX,t.anchorY),this.displayed.blendMode=t.blendMode,this.displayed.tint=t.tint,this.displayed.align=t.textAlign,(e.text||e.maxWidth||e.fontSize||e.fontFamily)&&(this.displayed.text=t.text,t.maxWidth&&Dt(this.displayed,t.maxWidth))):(this.missingFonts[t.fontFamily]||(this.missingFonts[t.fontFamily]=!0,l.push(new Yt(t.fontFamily))),this.graphics.removeChildren()):this.graphics.removeChildren()}}])&&Gt(t.prototype,e),r}();function Vt(t){return(Vt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qt(t,e,n){return(Qt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=te(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ee=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(r,E);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=te(t);return n=e?(n=te(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==Vt(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){var t;return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),t=n.call(this),Object.assign(t.defaultState,{children:[]}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){Qt(te(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(t,e,n){Qt(te(r.prototype),\"updateDisplay\",this).call(this,t,e,n)}},{key:\"childrenContainer\",get:function(){return this.graphics}}])&&Jt(t.prototype,e),r}();function ne(t){return(ne=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,ee);var t=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ie(t);return n=e?(n=ie(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==ne(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(e);function e(){return function(t){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),t.apply(this,arguments)}return e}(),ae=null,ce=[];function ue(t){return(ue=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function le(t,e,n){return(le=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pe(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var he=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(r,ee);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pe(t);return n=e?(n=pe(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==ue(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),n.apply(this,arguments)}return t=r,(e=[{key:\"initDisplay\",value:function(){le(pe(r.prototype),\"initDisplay\",this).call(this),this.buffer=new PIXI.Container,this.gameTexture=null,this.graphics=new PIXI.Sprite,this.needsRender=!0}},{key:\"postUpdate\",value:function(){var t,e;this.needsRender&&(t=this.buffer.getBounds().width,e=this.buffer.getBounds().height,(null==this.gameTexture||this.gameTexture.width<t||this.gameTexture.height<e)&&(t=Math.min(Math.max(t,512),4096),e=Math.min(Math.max(e,512),4096),this.gameTexture=PIXI.RenderTexture.create(t,e),e=this.gameTexture,ce.push(e),this.graphics.texture=this.gameTexture),ae.render(this.buffer,this.gameTexture),this.needsRender=!1)}},{key:\"childrenContainer\",get:function(){return this.buffer}},{key:\"notifyChange\",value:function(){this.needsRender=!0,this.parent&&this.parent.notifyChange()}}])&&se(t.prototype,e),r}();function ye(t){return(ye=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function de(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){var r,i;r=t,e=n[i=e],i in r?Object.defineProperty(r,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[i]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function me(t,e,n){return(me=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_e(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Se=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(r,lt);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_e(t);return n=e?(n=_e(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==ye(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){var t;return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),t=n.call(this),Object.assign(t.defaultState,{images:\"\",loop:!1,duration:1e3,playing:!0,restarted:null,animationProgress:0,date:0}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){me(_e(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY)}},{key:\"addState\",value:function(t,e,n,i){me(_e(r.prototype),\"addState\",this).call(this,t,e,n),n=this.states[n].find((function(e){return e.t===t})),i=i.date+i.frameDuration*t,n.date=i}},{key:\"updateDisplay\",value:function(t,e,n,i,o){if(me(_e(r.prototype),\"updateDisplay\",this).call(this,t,e,n),t.images){if(n=t.images.split(\",\"),0<=t.animationProgress){o=i.date+i.frameDuration*o,o=be(be({},t),{},{date:o}),this.computeAnimationProgressTime(t,o);o=Math.floor(n.length*o.animationProgress);var a=t.loop?n[o%n.length]:n[o]||n[n.length-1];try{this.graphics.texture=PIXI.Texture.fromFrame(a)}catch(t){l.push(new gt(a,t))}}}else this.graphics.texture=PIXI.Texture.EMPTY}},{key:\"computeAnimationProgressTime\",value:function(t,e){e.restarted&&e.restarted.date===e.date?e.animationProgress=0:(e.animationProgress=t.animationProgress,t.playing&&(e.animationProgress+=(e.date-t.date)/t.duration))}}])&&ge(t.prototype,e),r}();function we(t){return(we=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t,e,n){return(xe=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=je(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Pe(t,e){return(Pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Re=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pe(t,e)}(i,X);var t,e,n,r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=je(t);return n=e?(n=je(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==we(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(i);function i(){var t;return function(t){if(!(t instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),t=r.call(this),Object.assign(t.defaultState,{width:i.defaultSideLength(),height:i.defaultSideLength(),radius:i.defaultRadius()}),t}return t=i,n=[{key:\"defaultSideLength\",value:function(){return 100}},{key:\"defaultRadius\",value:function(){return 20}}],(e=[{key:\"initDisplay\",value:function(){xe(je(i.prototype),\"initDisplay\",this).call(this),this.graphics.drawRoundedRect(0,0,this.defaultState.width,this.defaultState.height,this.defaultState.radius),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,n){xe(je(i.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.lineWidth||e.lineColor||e.lineAlpha||e.fillColor||e.radius||e.height||e.width)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawRoundedRect(0,0,t.width*n.toWorldUnits,t.height*n.toWorldUnits,t.radius*n.toWorldUnits),null!==t.fillColor&&this.graphics.endFill())}}])&&Oe(t.prototype,e),n&&Oe(t,n),i}();function ke(t){return(ke=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function De(t,e,n){return(De=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ee(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function Ie(t,e){return(Ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ce=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ie(t,e)}(r,X);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ee(t);return n=e?(n=Ee(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==ke(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){var t;return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),t=n.call(this),Object.assign(t.defaultState,{points:[]}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){De(Ee(r.prototype),\"initDisplay\",this).call(this),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,n){De(Ee(r.prototype),\"updateDisplay\",this).call(this,t,e,n),(e.lineWidth||e.lineColor||e.lineAlpha||e.fillColor||e.points)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawPolygon(t.points.map((function(t){return t*n.toWorldUnits}))),null!==t.fillColor&&this.graphics.endFill())}}])&&Te(t.prototype,e),r}();function Fe(t){return(Fe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ae(t,e,n){return(Ae=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=We(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function ze(t,e){return(ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xe=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ze(t,e)}(r,Ot);var t,e,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=We(t);return n=e?(n=We(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==Fe(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(r);function r(){var t;return function(t){if(!(t instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this),t=n.call(this),Object.assign(t.defaultState,{tileX:0,tileY:0,tileScaleX:1,tileScaleY:1}),t}return t=r,(e=[{key:\"initDisplay\",value:function(){Ae(We(r.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.extras.TilingSprite(PIXI.Texture.EMPTY)}},{key:\"updateDisplay\",value:function(t,e,n){Ae(We(r.prototype),\"updateDisplay\",this).call(this,t,e,n),this.graphics.tilePosition.x=t.tileX,this.graphics.tilePosition.y=t.tileY,this.graphics.tileScale.x=t.tileScaleX,this.graphics.tileScale.y=t.tileScaleY}}])&&Me(t.prototype,e),r}();function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Le=function(){function t(){!function(e){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this)}var e,n;return e=t,n=[{key:\"create\",value:function(t){var e={C:G,R:it,L:Q,S:Tt,T:At,X:qt,G:oe,B:he,A:Se,K:Re,P:Ce,D:Xe}[t];if(!e)throw new Error(\"Exception: entity type not found: \"+t);return new e}}],null&&Ue(e.prototype,null),n&&Ue(e,n),t}();function He(t){var e=1.70158,n=0,r=1;return 0===t?0:1==(t/=1)?1:(n=n||.3,e=r<Math.abs(1)?(r=1,n/4):n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*t)*Math.sin((+t-e)*(2*Math.PI)/n)+1)}function Ye(t){return t<.5?2*t*t:(4-2*t)*t-1}function Be(t){return Math.pow(t,3)}function Ge(t){return 1+Math.pow(t-1,3)}function Ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $e(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qe(t,e,n){return e&&Ke(t.prototype,e),n&&Ke(t,n),t}var Ve={r:\"rotation\",R:\"radius\",X:\"x2\",Y:\"y2\",w:\"width\",h:\"height\",t:\"tint\",f:\"fillColor\",F:\"fillAlpha\",c:\"lineColor\",W:\"lineWidth\",A:\"lineAlpha\",a:\"alpha\",i:\"image\",S:\"strokeThickness\",sc:\"strokeColor\",ff:\"fontFamily\",s:\"fontSize\",fw:\"fontWeight\",T:\"text\",ta:\"textAlign\",ch:\"children\",sx:\"scaleX\",sy:\"scaleY\",ax:\"anchorX\",ay:\"anchorY\",kx:\"skewX\",ky:\"skewY\",v:\"visible\",z:\"zIndex\",b:\"blendMode\",I:\"images\",rs:\"restarted\",p:\"playing\",l:\"loop\",d:\"duration\",bw:\"baseWidth\",bh:\"baseHeight\",ps:\"points\",tx:\"tileX\",ty:\"tileY\",tsx:\"tileScaleX\",tsy:\"tileScaleY\",sm:\"scaleMode\"};n=function(){function t(e,n){$e(this,t),this.id=++n.instanceCount,this.type=e[0]}return qe(t,[{key:\"apply\",value:function(t){var e=Le.create(this.type);e.id=this.id,t.set(this.id,e)}}]),t}(),w=function(){function t(e,n){var i=(l=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if(\"string\"==typeof t)return Ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(t,e):void 0}}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}(e,8))[0],o=(e=l[1],l[2]),a=l[3],c=l[4],u=l[5],s=l[6],l=l[7];$e(this,t),this.loader=new PIXI.loaders.Loader,\"0\"===o&&(o=PIXI.utils.TextureCache[e].width),\"0\"===a&&(a=PIXI.utils.TextureCache[e].height);for(var f=0<l?l:s,p={frames:{},meta:{image:(r.baseUrl||\"\")+r.images[e]}},h=0;h<s;h++){var y=1<s?i+h:i;p.frames[y]={frame:{x:o*u+h%f*o,y:a*c+Math.floor(h/f)*a,w:o,h:a},sourceSize:{w:o,h:a},rotated:!1,trimmed:!1}}e=\"data:text/json;charset=UTF-8,\"+JSON.stringify(p),PIXI.utils.TextureCache[e+\"_image\"]||this.loader.add(e,{crossOrigin:!0})}return qe(t,[{key:\"apply\",value:function(){var t=this;if(0<Object.keys(this.loader.resources).length)return new Promise((function(e){t.loader.load(),t.loader.on(\"complete\",e)}))}}]),t}();function Je(t){return function(t){if(Array.isArray(t))return Qe(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if(\"string\"==typeof t)return Qe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(t,e):void 0}}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tn={C:n,U:function(){function t(e,n,r){$e(this,t),this.id=+e[0],this.t=+e[1],this.params={},this.curve={};for(var i=2;i<e.length;){var o=Ve[e[i]]||e[i],a=P[o]||P.default,c=a.type(e[i+1]);\"function\"==typeof a.convert&&(c=a.convert(c,n,r,this.t)),a=t.curves[e[i+2]],this.params[o]=c,i+=2,a&&(this.curve[o]=a,i+=1)}}return qe(t,[{key:\"apply\",value:function(t,e){(t=t.get(this.id)).addState(this.t,{values:this.params,curve:this.curve},e.number,e),t.stateAdded=!0}}],[{key:\"curves\",get:function(){return{_:function(t){return t<1?0:1},\"\":Ye,\"\":Be,\"\":Ge,\"~\":He,\"\":function(t){return 1}}}}]),t}(),L:w};function en(t,e){for(var n=[],r=\"\",i=0,o=\"\",a=!1;i<t.length;){var c=t[i++];c===e?a?r+=c:(n.push(r),r=\"\"):\"'\"===c&&\"\\\\\"!==o?(a=!a,r+=c):\"\\\\\"===o?r+=\"'\"===c?\"\\\\'\":\"\\\\\"+c:\"\\\\\"!==c&&(r+=c),o=c}return n.push(r),n}var nn=function(){function t(){!function(e){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this)}var e,n;return e=t,n=[{key:\"parse\",value:function(t,e,n){var r,i=[],o=en(t,\"\\n\");for(r in o){var a=tn[o[r][0]];if(!a)throw new Error(\"Unrecognised command : \"+o[r][0]);i=[].concat(Je(i),Je(function(t,e,n,r){e=en(e,\";\");var i=[];return e.forEach((function(e){return i.push(new t(en(e,\" \"),n,r))})),i}(a,o[r].slice(1),e,n)))}return i}}],null&&Ze(e.prototype,null),n&&Ze(e,n),t}(),rn=1920;function on(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function an(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function cn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?an(Object(n),!0).forEach((function(e){var r,i;r=t,e=n[i=e],i in r?Object.defineProperty(r,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[i]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var sn={};w=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.entities=new Map,this.frames=[],this.loadingAssets=0,this.extrapolationMap={},this.globalData={toWorldUnits:1,mustResetTree:!0,mustResort:!0,maskUpdates:{},updatedBuffers:[],players:[],instanceCount:0},sn.entities=this.entities}var e,n,r;return e=t,r=[{key:\"name\",get:function(){return\"entitymodule\"}}],(n=[{key:\"handleFrameData\",value:function(t,e){var n=this;!e||(r=nn.parse(e,this.globalData,t))&&r.forEach((function(e){(e=e.apply(n.entities,t))&&(n.loadingAssets++,e.then((function(){n.loadingAssets--})))}));var r=cn({},t);return r.previous=this.frames[this.frames.length-1]||r,this.extrapolate(r),r!==r.previous&&(r.previous.next=r),this.frames.push(r),r}},{key:\"lastElementOf\",value:function(t){return t[t.length-1]}},{key:\"extrapolate\",value:function(t){var e=this,n=t.number,r=t.previous.number;this.entities.forEach((function(i){var o,a;i.stateAdded&&(i.stateAdded=!1,i.states[n]||(i.states[n]=[]),e.extrapolationMap[i.id]||(e.extrapolationMap[i.id]=cn({},i.defaultState)),(o=i.states[n]).sort((function(t,e){return t.t-e.t})),o.length&&1===e.lastElementOf(o).t||i.addState(1,{},n,t),a=e.extrapolationMap[i.id],i.states[r]&&r!==n&&(a=i.states[r][i.states[r].length-1]),i.states[n]=o.map((function(t){return t=e.extrapolationMap[i.id]=cn(cn({},e.extrapolationMap[i.id]),t),\"function\"==typeof i.computeAnimationProgressTime&&i.computeAnimationProgressTime(a,t),a=t})))}))}},{key:\"reinitScene\",value:function(t,e){this.globalData.toPixel=rn/e.width*e.oversampling,this.globalData.mustResetTree=!0,sn.container=this.container=t,this.entities.forEach((function(t){t.init()}))}},{key:\"sortChildren\",value:function(t){t.children.sort((function(t,e){return t.zIndex===e.zIndex?t.id-e.id:t.zIndex-e.zIndex}))}},{key:\"stillLoading\",value:function(){return 0<this.loadingAssets}},{key:\"updateScene\",value:function(t,e,n){var r=this;if(!this.stillLoading()){for(var i in this.entities.forEach((function(t){return t.render(n,e,r.globalData)})),this.globalData.mustResetTree&&(this.reconstructTree(),this.globalData.mustResetTree=!1,this.globalData.mustResort=!0),this.globalData.mustResort&&(this.resortTree(),this.globalData.mustResort=!1),this.globalData.maskUpdates){var o=this.entities.get(+i);i=this.globalData.maskUpdates[i];o.container.mask=-1===i?null:this.entities.get(i).graphics}var a,c=function(t,e){var n;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if(\"string\"==typeof t)return on(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(t,e):void 0}}(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(this.globalData.updatedBuffers);try{for(c.s();!(a=c.n()).done;)a.value.postUpdate()}catch(t){c.e(t)}finally{c.f()}this.globalData.maskUpdates={}}}},{key:\"resortTree\",value:function(){var t=this;this.entities.forEach((function(e){e instanceof ee&&t.sortChildren(e.childrenContainer)})),this.sortChildren(this.container)}},{key:\"reconstructTree\",value:function(){var t=this;this.container.removeChildren(),this.entities.forEach((function(e){e instanceof ee&&(e.childrenContainer.removeChildren(),e.currentState.children.forEach((function(n){n=t.entities.get(n),e.childrenContainer.addChild(n.container),n.parent=e})))})),this.entities.forEach((function(e){e.container.parent||t.container.addChild(e.container)}))}},{key:\"handleGlobalData\",value:function(t,e){this.globalData.players=t,t=e.width,e=e.height,this.globalData.toWorldUnits=a(t,e,rn,1080),sn.toWorldUnits=this.globalData.toWorldUnits,sn.hasOwnProperty(\"coeff\")||Object.defineProperty(sn,\"coeff\",{get:function(){var t='The \"coeff\" property of GraphicEntityModule\\'s API is deprecated, please use \"toWorldUnits\" instead',e=(new Error).stack;return console.groupCollapsed?(console.groupCollapsed(\"%cDeprecation Warning: %c%s\",\"color:#614108;background:#fffbe6\",\"font-weight:normal;color:#614108;background:#fffbe6\",t),console.warn(e),console.groupEnd()):console.warn(\"Deprecation Warning: \",t),sn.toWorldUnits}})}}])&&un(e.prototype,n),r&&un(e,r),t}();function ln(t){return(ln=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function fn(t){var e=\"function\"==typeof Map?new Map:void 0;return(fn=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf(\"[native code]\")))return t;var n;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return pn(t,arguments,dn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),yn(r,t)})(t)}function pn(t,e,n){return(pn=hn()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&yn(r,n.prototype),r}).apply(null,arguments)}function hn(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function yn(t,e){return(yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bn=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yn(t,e)}(e,fn(Error));var t=function(t){var e=hn();return function(){var n,r=dn(t);return n=e?(n=dn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==ln(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(e);function e(n,r){var i;return function(t){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),(i=t.call(this,'Could not find image: \"'+n+'\". Make sure it is in your assets folder and is spelled correctly.')).image=n,i.cause=r,i.name=\"MissingImageError\",i}return e}();function gn(t){return function(t){if(Array.isArray(t))return mn(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if(\"string\"==typeof t)return mn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(t,e):void 0}}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _n=[w,function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.states=[],this.scores=[],this.globalData={},this.atEnd=!1}var e,n,r;return e=t,r=[{key:\"name\",get:function(){return\"endScreen\"}}],(n=[{key:\"updateScene\",value:function(t,e,n){e.scores&&1===n?this.atEnd=!0:this.atEnd=!1}},{key:\"handleFrameData\",value:function(t,e){var n=null,r=null,i=null;return e&&(n=e[0],r=e[1],i=e[2]),t={number:t.number,scores:n,spriteName:r,displayedText:i},n&&(this.scores=n),r&&(this.spriteName=r),i&&(this.displayedText=i),this.states.push(t),t}},{key:\"reinitScene\",value:function(t,e){this.container=t,this.endLayer=this.createEndScene(this),this.atEnd&&this.initEndScene(),this.container.addChild(this.endLayer)}},{key:\"animateScene\",value:function(t){t=Math.min(32,t),this.atEnd?this.animationEnded||this.renderEndScene(t):(0<this.endTime&&this.destroyEndScene(),this.endTime=0)}},{key:\"destroyEndScene\",value:function(){this.animationEnded=!1,this.endLayer.visible=!1}},{key:\"initEndScene\",value:function(){this.animationEnded=!1,this.endLayer.visible=!0}},{key:\"renderEndScene\",value:function(t){0===this.endTime&&this.initEndScene();var e=o(0,400,this.endTime);this.endLayer.backgroundRanking.alpha=.9*e,e=o(400,1e3,this.endTime),this.endLayer.titleRanking.scale.x=this.endLayer.titleRanking.scale.y=.001+i(10,.8,e),this.endLayer.titleRanking.visible=!!e;for(var n=0;n<this.finishers.length;++n){var r=o(1e3+300*n,1e3+300*n+300,this.endTime);this.finishers[n].alpha=r}this.endTime+=t,1e4<=this.endTime&&(this.animationEnded=!0)}},{key:\"handleGlobalData\",value:function(t,e){this.globalData={players:t,playerCount:t.length}}},{key:\"fitTextInWidth\",value:function(t,e){for(var n=t.text;t.width>e;)n=n.slice(0,-1),t.text=n+\"...\"}},{key:\"generateText\",value:function(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return(r=new PIXI.Text(t,{fontSize:Math.round(e/1.2)+\"px\",fontFamily:\"Lato\",fontWeight:\"bold\",fill:r})).lineHeight=Math.round(e/1.2),\"right\"===n?r.anchor.x=1:\"center\"===n&&(r.anchor.x=.5),null!==i&&this.fitTextInWidth(r,i),r}},{key:\"createFinisher\",value:function(t){var e=new PIXI.Container,n=new PIXI.Container;n.y=0,n.x=0;var r=new PIXI.Graphics;r.beginFill(16777215),r.alpha=.1,r.drawRect(0,0,240,120),n.addChild(r);var i=new PIXI.Graphics;i.lineStyle(1,16777215),i.alpha=.5,i.drawRect(0,0,120,120),n.addChild(i);var o=new PIXI.Sprite(t.player.avatar);return o.width=o.height=120,(r=this.generateText(t.rank.toString(),76,\"center\",t.player.color)).anchor.y=.5,r.position.x=160,r.position.y=56,n.addChild(r),i=\"TH\",t.rank<4&&(i=[\"ST\",\"ND\",\"RD\"][t.rank-1]),(r=this.generateText(i.toString(),34,\"left\",t.player.color)).position.x=184,r.position.y=32,n.addChild(r),(i=new PIXI.Container).addChild(o),n.addChild(i),r=this.globalData.playerCount<=4?1500:500,o=this.generateText(t.player.name.toUpperCase(),50,\"left\",t.player.color,r),i=t.text||(0<=t.score?t.score.toString()+\" points\":\"-\"),r=this.generateText(i,64,\"left\",t.player.color,r),o.x=330,o.y=-4,r.x=330,r.y=50,e.addChild(n),e.addChild(o),e.addChild(r),e}},{key:\"createEndScene\",value:function(){var t=new PIXI.Container,e=new PIXI.Graphics;e.beginFill(0,.85),e.drawRect(0,0,rn,1080),e.endFill(),t.backgroundRanking=e;var n=this.spriteName;(n=PIXI.utils.TextureCache[n]?PIXI.Sprite.fromFrame(n):(l.push(new bn(n)),new PIXI.Sprite(PIXI.Texture.EMPTY))).anchor.x=n.anchor.y=.5,(t.titleRanking=n).position.x=960,n.position.y=230;for(var r=[],i=0;i<this.globalData.playerCount;++i)r.push({score:this.scores[i],text:this.displayedText?this.displayedText[i]:null,player:this.globalData.players[i],rank:0});r.sort((function(t,e){return e.score-t.score})),this.finishers=[];var o,a=new PIXI.Container;for(i=0;i<r.length;++i)r[i].rank=r.filter((function(t){return t.score>r[i].score})).length+1,o=this.createFinisher(r[i]),a.addChild(o),this.finishers.push(o);if(this.finishers.length<=4){var c=Math.max.apply(Math,gn(this.finishers.map((function(t){return t.width}))));for(i=0;i<this.finishers.length;++i)this.finishers[i].position.x=(rn-c)/2,this.finishers[i].position.y=150*i}else{var u=Math.ceil(this.finishers.length/2),s=Math.max.apply(Math,gn(this.finishers.slice(0,u).map((function(t){return t.width}))));for(i=0;i<this.finishers.length;++i)this.finishers[i].position.x=i<u?960-(s+50):1010,this.finishers[i].position.y=i%u*150}return a.y=400,t.addChild(e),t.addChild(n),t.addChild(a),t.visible=!1,t}}])&&vn(e.prototype,n),r&&vn(e,r),t}()],Sn={views:['KEY_FRAME 0\\n{\"global\":{\"entitymodule\":{\"width\":1920,\"height\":1080}},\"frame\":{\"entitymodule\":\"CS;R;R;T;S;T;R;R;T;S;T;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;S;R;T;T;T;T;T;T;T;T;T;T;S\\\\nU55 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1274 y 732 t 7694671 z 19;38 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1379 y 522 t 7694671 z 19;84 1 f 16777215 ay 0.5 v 1 ax 0.5 x 1379 y 207 s 40 T 8 z 20;33 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 854 y 522 t 7694671 z 19;71 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1064 y 942 t 7694671 z 19;32 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 749 y 522 t 7694671 z 19;29 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1379 y 417 t 7694671 z 19;80 1 f 16777215 ay 0.5 v 1 ax 0.5 x 959 y 207 s 40 T 4 z 20;20 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1379 y 312 t 7694671 z 19;49 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 644 y 732 t 7694671 z 19;43 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 959 y 627 t 7694671 z 19;15 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 854 y 312 t 7694671 z 19;47 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1379 y 627 t 7694671 z 19;9 1 f 16777215 ay 0.5 v 1 ax 0.5 x 1670 y 340 s 40 T $1 z 20;27 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1169 y 417 t 7694671 z 19;57 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 539 y 837 t 7694671 z 19;6 1 f 16777215 ay 0 v 1 ax 0.5 x 250 y 370 s 35 T  z 20;62 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1064 y 837 t 7694671 z 19;64 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1274 y 837 t 7694671 z 19;22 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 644 y 417 t 7694671 z 19;78 1 f 16777215 ay 0.5 v 1 ax 0.5 x 749 y 207 s 40 T 2 z 20;24 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 854 y 417 t 7694671 z 19;16 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 959 y 312 t 7694671 z 19;5 1 bw 116 i $0 ay 0.5 v 1 ax 0.5 x 250 y 220 bh 116 z 20;2 1 f -1 v 1 w 140 x 180 y 150 W 0 h 140;17 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1064 y 312 t 7694671 z 19;53 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1064 y 732 t 7694671 z 19;79 1 f 16777215 ay 0.5 v 1 ax 0.5 x 854 y 207 s 40 T 3 z 20;28 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1274 y 417 t 7694671 z 19;41 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 749 y 627 t 7694671 z 19;70 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 959 y 942 t 7694671 z 19;11 1 f 16777215 ay 0 v 1 ax 0.5 x 1670 y 370 s 35 T  z 20;60 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 854 y 837 t 7694671 z 19;4 1 f 16777215 ay 0.5 v 1 ax 0.5 x 250 y 340 s 40 T $0 z 20;85 1 f 16777215 ay 0.5 v 1 ff \\'monospace, monospace\\' ax 0.5 x 959 y 102 s 40 T \\'Turn index: --\\' fw bold z 20;48 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 539 y 732 t 7694671 z 19;82 1 f 16777215 ay 0.5 v 1 ax 0.5 x 1169 y 207 s 40 T 6 z 20;61 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 959 y 837 t 7694671 z 19;36 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1169 y 522 t 7694671 z 19;37 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1274 y 522 t 7694671 z 19;52 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 959 y 732 t 7694671 z 19;66 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 539 y 942 t 7694671 z 19;26 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1064 y 417 t 7694671 z 19;23 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 749 y 417 t 7694671 z 19;69 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 854 y 942 t 7694671 z 19;7 1 f -2 v 1 w 140 x 1600 y 150 W 0 h 140;56 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1379 y 732 t 7694671 z 19;72 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1169 y 942 t 7694671 z 19;76 1 f 16777215 ay 0.5 v 1 ax 0.5 x 539 y 207 s 40 T 0 z 20;14 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 749 y 312 t 7694671 z 19;34 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 959 y 522 t 7694671 z 19;74 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1379 y 942 t 7694671 z 19;39 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 539 y 627 t 7694671 z 19;75 1 v 1 x 482 w 954 y 255 F 0 c 7694671 W 10 h 744 z 19;68 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 749 y 942 t 7694671 z 19;46 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1274 y 627 t 7694671 z 19;45 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1169 y 627 t 7694671 z 19;19 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1274 y 312 t 7694671 z 19;10 1 bw 116 i $1 ay 0.5 v 1 ax 0.5 x 1670 y 220 bh 116 z 20;44 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1064 y 627 t 7694671 z 19;50 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 749 y 732 t 7694671 z 19;83 1 f 16777215 ay 0.5 v 1 ax 0.5 x 1274 y 207 s 40 T 7 z 20;21 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 539 y 417 t 7694671 z 19;51 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 854 y 732 t 7694671 z 19;58 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 644 y 837 t 7694671 z 19;59 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 749 y 837 t 7694671 z 19;3 1 f 16777215 v 1 w 120 x 190 y 160 W 0 h 120;25 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 959 y 417 t 7694671 z 19;86 1 ay 0.5 i down_arrow_105.png v 1 ax 0.5 x -500 y -500;30 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 539 y 522 t 7694671 z 19;13 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 644 y 312 t 7694671 z 19;18 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1169 y 312 t 7694671 z 19;65 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1379 y 837 t 7694671 z 19;8 1 f 16777215 v 1 w 120 x 1610 y 160 W 0 h 120;12 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 539 y 312 t 7694671 z 19;81 1 f 16777215 ay 0.5 v 1 ax 0.5 x 1064 y 207 s 40 T 5 z 20;1 1 x 0 i Background.jpg y 0 v 1;73 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1274 y 942 t 7694671 z 19;54 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1169 y 732 t 7694671 z 19;67 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 644 y 942 t 7694671 z 19;31 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 644 y 522 t 7694671 z 19;35 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1064 y 522 t 7694671 z 19;40 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 644 y 627 t 7694671 z 19;42 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 854 y 627 t 7694671 z 19;77 1 f 16777215 ay 0.5 v 1 ax 0.5 x 644 y 207 s 40 T 1 z 20;63 1 ay 0.5 i board_tile_91_in_105.png v 1 ax 0.5 x 1169 y 837 t 7694671 z 19\"}}\\n','KEY_FRAME 1\\n{\"entitymodule\":\"CS\\\\nU85 0 T \\'Turn index: 00\\';86 0 x 644 y 207 t -1;6 0;87 0 i chip_91_in_105.png ay 0.5 v 1 ax 0.5 x 644 y 207 t -1;87 0.05 y 312;87 0.075 y 417;87 0.1 y 522;87 0.125 y 627;87 0.15 y 732;87 0.175 y 837;87 0.2 y 942\"}\\n','KEY_FRAME 2\\n{\"entitymodule\":\"CS\\\\nU11 0;88 0 i chip_91_in_105.png ay 0.5 v 1 ax 0.5 x 1274 y 207 t -2;85 0 T \\'Turn index: 01\\';86 0 x 1274 t -2;88 0.05 y 312;88 0.075 y 417;88 0.1 y 522;88 0.125 y 627;88 0.15 y 732;88 0.175 y 837;88 0.2 y 942\"}\\n','KEY_FRAME 3\\n{\"entitymodule\":\"CS\\\\nU85 0 T \\'Turn index: 02\\';86 0 x 749 t -1;89 0 i chip_91_in_105.png ay 0.5 v 1 ax 0.5 x 749 y 207 t -1;6 0;89 0.05 y 312;89 0.075 y 417;89 0.1 y 522;89 0.125 y 627;89 0.15 y 732;89 0.175 y 837;89 0.2 y 942\"}\\n','KEY_FRAME 4\\n{\"entitymodule\":\"CS\\\\nU11 0;90 0 i chip_91_in_105.png ay 0.5 v 1 ax 0.5 x 1169 y 207 t -2;85 0 T \\'Turn index: 03\\';86 0 x 1169 t -2;90 0.05 y 312;90 0.075 y 417;90 0.1 y 522;90 0.125 y 627;90 0.15 y 732;90 0.175 y 837;90 0.2 y 942\"}\\n','KEY_FRAME 5\\n{\"entitymodule\":\"CS\\\\nU85 0 T \\'Turn index: 04\\';91 0 i chip_91_in_105.png ay 0.5 v 1 ax 0.5 x 854 y 207 t -1;86 0 x 854 t -1;6 0;91 0.05 y 312;91 0.075 y 417;91 0.1 y 522;91 0.125 y 627;91 0.15 y 732;91 0.175 y 837;91 0.2 y 942\"}\\n','KEY_FRAME 6\\n{\"entitymodule\":\"CS\\\\nU11 0;92 0 i chip_91_in_105.png ay 0.5 v 1 ax 0.5 x 1064 y 207 t -2;85 0 T \\'Turn index: 05\\';86 0 x 1064 t -2;92 0.05 y 312;92 0.075 y 417;92 0.1 y 522;92 0.125 y 627;92 0.15 y 732;92 0.175 y 837;92 0.2 y 942\"}\\n','KEY_FRAME 7\\n{\"entitymodule\":\"CS;L;T\\\\nU85 0 T \\'Turn index: 06\\';86 0 x 959 t -1;93 0 i chip_91_in_105.png ay 0.5 v 1 ax 0.5 x 959 y 207 t -1;6 0;93 0.05 y 312;93 0.075 y 417;93 0.1 y 522;93 0.125 y 627;93 0.15 y 732;93 0.175 y 837;95 0.2 f -1 ay 0.5 v 1 ax 0.5 x 959 y 1042 s 40 T \\'First player ($0) has won the game\\' z 20;94 0.2 v 1 x 959 y 942 Y 942 X 644 c 16365312 W 10 z 50;93 0.2 y 942\",\"endScreen\":[[10,0],\"logo.png\",null]}\\n'],agents:[{index:0,name:\"Alpha\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085734516701&format=viewer_avatar\",agentId:0},{index:1,name:\"Bravo\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085846089817&format=viewer_avatar\",agentId:1}]};function wn(t){return(wn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function On(t){var e=\"function\"==typeof Map?new Map:void 0;return(On=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf(\"[native code]\")))return t;var n;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return xn(t,arguments,Rn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),jn(r,t)})(t)}function xn(t,e,n){return(xn=Pn()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&jn(r,n.prototype),r}).apply(null,arguments)}function Pn(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function jn(t,e){return(jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kn=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jn(t,e)}(e,On(Error));var t=function(t){var e=Pn();return function(){var n,r=Rn(t);return n=e?(n=Rn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==wn(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(e);function e(n,r){return function(t){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),(n=t.call(this,'<Error in module \"'+n+'\">')).cause=r,n.name=\"ModuleError\",n}return e}();function Tn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(n),!0).forEach((function(e){var r,i;r=t,e=n[i=e],i in r?Object.defineProperty(r,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[i]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function In(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cn=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.toDestroy=[],this.stepByStepAnimateSpeed=null;var n=e||Sn;n?(e=n.views,n=n.agents,this.demo={playerCount:n.length,logo:\"logo.png\",overlayAlpha:.2,agents:n,frames:e},this.demo.agents.forEach((function(e){e.color=t.playerColors[e.index]}))):this.demo=void 0}var e,n,i;return e=t,i=[{key:\"requirements\",get:function(){return{PIXI:\"PIXI4\"}}},{key:\"VERSION\",get:function(){return 2}},{key:\"WIDTH\",get:function(){return rn}},{key:\"HEIGHT\",get:function(){return 1080}},{key:\"getGameRatio\",value:function(){return t.WIDTH/t.HEIGHT}},{key:\"playerColors\",get:function(){return[\"#ff1d5c\",\"#22a1e4\",\"#ff8f16\",\"#6ac371\",\"#9975e2\",\"#3ac5ca\",\"#de6ddf\",\"#ff0000\"]}},{key:\"SDK_GAME\",get:function(){return!0}},{key:\"RenderTimeout\",get:function(){return\"localhost\"===window.location.hostname?1/0:2e4}}],(n=[{key:\"getDefaultOverSampling\",value:function(){return 2}},{key:\"handleModuleError\",value:function(t,e){l.push(new kn(t,e)),console.error(e),l.push({message:'<Module \"'.concat(t,'\" disabled>\\n')}),delete this.modules[t]}},{key:\"instantiateModules\",value:function(){this.modules={};var t,e=function(t,e){var n;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if(\"string\"==typeof t)return In(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(t,e):void 0}}(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(_n);try{for(e.s();!(t=e.n()).done;){var n=t.value;try{this.modules[n.name]=new n(r)}catch(t){this.handleModuleError(n.name,t)}}}catch(t){e.e(t)}finally{e.f()}}},{key:\"destroy\",value:function(){this.alreadyLoaded&&(this.renderer.destroy(),this.endCallback=null),this.destroyed=!0}},{key:\"destroyScene\",value:function(t){!function(){for(var t=0,e=ce.length;t<e;++t)ce[t].destroy(!0);ce=[]}()}},{key:\"getGameName\",value:function(){}},{key:\"canSwapPlayers\",value:function(){return!1}},{key:\"addErrorListener\",value:function(t){l.listen(t)}},{key:\"getResources\",value:function(){return Object.assign({baseUrl:\"\",images:{},spines:{},sprites:[],fonts:[],others:[]},r)}},{key:\"getOptions\",value:function(){return[]}},{key:\"setDebug\",value:function(e){this.asyncRenderingTime=t.RenderTimeout}},{key:\"initPreload\",value:function(t,e,n,r,i){t.canvasWidth=r,t.canvasHeight=i,t.loaderProgress=new PIXI.Text(\"100\",{fontSize:.117*i||30,fontFamily:\"Lato\",fontWeight:\"900\",fill:\"white\",align:\"center\"}),t.loaderProgress.anchor.y=1,t.loaderProgress.anchor.x=1.3,t.progress=t.realProgress=n,t.loaderProgress.position.y=i,t.progressBar=new PIXI.Graphics,e.addChild(t.progressBar),e.addChild(t.loaderProgress)}},{key:\"preload\",value:function(t,e,n,r,i,o){t.progress=n}},{key:\"renderPreloadScene\",value:function(t,e){return e=Math.pow(.998,e),t.realProgress=e*t.realProgress+(1-e)*t.progress,t.loaderProgress.text=(100*t.realProgress).toFixed(0),t.loaderProgress.position.x=t.realProgress*t.canvasWidth,t.progressBar.clear(),t.progressBar.beginFill(0,1),t.progressBar.drawRect(0,0,t.canvasWidth*t.realProgress+1,t.canvasHeight),t.progressBar.endFill(),t.progressBar.beginFill(4146246,1),t.progressBar.drawRect(t.canvasWidth*t.realProgress,0,t.canvasWidth,t.canvasHeight),t.progressBar.endFill(),!0}},{key:\"initDefaultScene\",value:function(e,n,r,i){var o=new PIXI.Container;if(e.drawer=this,e.time=0,this.demo){if(this.demo.logo)try{var c=PIXI.Sprite.fromFrame(this.demo.logo);c.position.set(t.WIDTH/2,t.HEIGHT/2),c.anchor.set(.5),c.baseScale=a(c.texture.width,c.texture.height,2*t.WIDTH/3,t.HEIGHT/2,0),o.addChild(c),e.logo=c}catch(n){l.push({cause:n,message:'Missing \"logo.png\" to complete replay.'}),e.logo=new PIXI.Container,e.logo.baseScale=1,o.addChild(e.logo),e.missingLogo=!0}var u=new PIXI.Graphics;e.missingLogo||(u.beginFill(0,this.demo.overlayAlpha||0),u.drawRect(0,0,t.WIDTH+20,t.HEIGHT+20),u.endFill(),u.x-=10,u.y-=10);var s=new PIXI.Container;try{this.initDefaultFrames(this.demo.playerCount,this.demo.frames,this.demo.agents),this.preconstructScene(this.scope,n,this.initWidth,this.initHeight),this.initScene(this.scope,s,this.frames,!0),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)}catch(n){l.push({cause:n,message:\"Cannot load demo, you might want to reset the demo\"})}e.demo=s,e.demotime=0,this.currentFrame=-1,n.addChild(s),n.addChild(u),n.addChild(o)}e.updateTime=0,e.frameTime=0}},{key:\"initDefaultFrames\",value:function(e,n,r){var i=this;this.instantiateModules(),this.playerInfo=r.map((function(t,e){return{name:t.name||\"Anonymous\",color:t.color?i.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:t.avatarTexture}})),this.instantiateModules(),this._frames=n.map((function(t){var e,n=t.split(\"\\n\");t=n[0].split(\" \");try{e=JSON.parse(n.slice(1).join(\"\\n\"))}catch(t){e={}}return Dn(Dn({},e),{},{key:\"KEY_FRAME\"===t[0]})})).filter((function(t){return t.key})),this.parseGlobalData(this._frames[0].global),this.playerCount=e,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,(e=this._frames[0].frame).key=this._frames[0].key,this.frames.push(this.parseFrame(e,this.frames));for(var o=1;o<this._frames.length;++o)this.frames.push(this.parseFrame(this._frames[o],this.frames));this.asyncRenderingTime=t.RenderTimeout}},{key:\"renderDefaultScene\",value:function(t,e){if(e=Math.min(80,e),void 0===this.demo)return!1;this.currentFrame=this.currentFrameTemp||0,t.frameTime+=e,t.updateTime+=e,t.demotime+=e/1e3;var n=Math.max(0,Math.min(1,(t.demotime-1)/.5));t.logo&&(t.logo.alpha=n,t.logo.scale.x=t.logo.scale.y=(3-2*n)*t.logo.baseScale),!t.missingLogo&&1.5<t.demotime&&t.demotime<=2.2?(r=15*Math.max(0,1-(t.demotime-1.5)/.7),t.demo.x=(2*Math.random()-1)*r,t.demo.y=(2*Math.random()-1)*r):t.demo.x=t.demo.y=0;var r=this.getFrameDuration(this.currentFrame);return 30<=t.updateTime&&(t.updateTime-=30,0===this.currentFrame?this.progress=1:this.progress=o(0,r,t.frameTime),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)),t.frameTime>=r&&(t.frameTime-=r,this.currentFrame=(this.currentFrame+1)%this.frames.length),this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],e,!0),this.currentFrameTemp=this.currentFrame,this.currentFrame=-1,!0}},{key:\"endDefaultScene\",value:function(t,e){return!0}},{key:\"parseGlobalData\",value:function(t){for(var e in this.modules){var n=this.modules[e];\"function\"==typeof n.handleGlobalData&&n.handleGlobalData(this.playerInfo,t[e])}}},{key:\"parseFrame\",value:function(t,e){var n,r={data:{},frameInfo:{number:e.length}};if(r.previous=e[e.length-1]||r,r!==r.previous&&(r.previous.next=r),!t.key)return r.previous;for(n in t.duration&&(this.currentFrameDuration=t.duration),r.frameInfo.frameDuration=this.currentFrameDuration,r===r.previous?(r.frameInfo.date=0,r.frameInfo.frameDuration=0):r.frameInfo.date=r.previous.frameInfo.date+r.previous.frameInfo.frameDuration,this.modules){var i=this.modules[n];\"function\"==typeof i.handleFrameData&&(r.data[n]=i.handleFrameData(r.frameInfo,t[n]))}return r}},{key:\"preconstructScene\",value:function(e,n,r,i){e.canvasHeight=i,e.canvasWidth=r,e.time=0,e.endTime=0,e.playerInfo=this.playerInfo,n.scale.x=r/t.WIDTH,n.scale.y=i/t.HEIGHT}},{key:\"initScene\",value:function(t,e,n){for(var r in this.modules){var i=this.modules[r],o=new PIXI.Container;try{i.reinitScene(o,{width:t.canvasWidth,height:t.canvasHeight,oversampling:this.oversampling})}catch(t){this.handleModuleError(r,t)}e.addChild(o)}}},{key:\"updateScene\",value:function(t,e,n,r,i,o,a,c,u){var s,l=n[r];if(!u&&this.stepByStepAnimateSpeed){if(this.checkSteppedToNextFrame(t,l,i))return void this.startAsynchronousAnimation(t,l);if(this.checkSteppedToPreviousFrame(t,l,i))return void this.startAsynchronousAnimation(t,t.currentFrame,!0);t.targetProgress=null}for(s in t.currentFrame=l,t.currentProgress=i,t.reason=a,this.modules){var f=this.modules[s];if(l.data.hasOwnProperty(s))try{f.updateScene(l.previous.data[s],l.data[s],i,o)}catch(t){this.handleModuleError(s,t)}}}},{key:\"startAsynchronousAnimation\",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t.targetProgress=n?0:1,n||1!==t.currentProgress||(t.currentProgress=0),t.currentFrame=e,t.reverseAsynchronousAnimation=n}},{key:\"checkStepped\",value:function(t,e,n){return t.currentFrame&&0===this.speed&&1===n}},{key:\"checkSteppedToNextFrame\",value:function(t,e,n){return this.checkStepped(t,e,n)&&(t.currentFrame===e.previous&&t.currentFrame!==e||t.currentFrame===e&&t.currentProgress!==n)}},{key:\"checkSteppedToPreviousFrame\",value:function(t,e,n){return this.checkStepped(t,e,n)&&t.currentFrame.previous===e&&t.currentFrame!==e}},{key:\"initEndScene\",value:function(t,e){t.endSceneViewed=!1}},{key:\"destroyEndScene\",value:function(t){}},{key:\"renderEndScene\",value:function(t,e,n){0===t.endTime&&this.initEndScene(t,n),t.endTime+=e,void 0<=t.endTime&&!t.endSceneViewed&&(this.endCallback&&this.endCallback(),t.endSceneViewed=!0)}},{key:\"renderScene\",value:function(t,e,n,r,i,o,a,c){var u,s;for(s in c=Math.min(80,c),this.debugMode||r!==n.length-1||1!==i?(0<t.endTime&&this.destroyEndScene(t),t.endTime=0):this.renderEndScene(t,c,\"Win\"!==a),this.stepByStepAnimateSpeed&&this.isAsynchronousAnimationOngoing(t)&&(i=this.currentFrame,t.reverseAsynchronousAnimation&&i++,a=c/200*this.getFrameSpeed(i)*this.stepByStepAnimateSpeed,t.reverseAsynchronousAnimation?(u=t.currentProgress-a)<=0&&(i=this.currentFrame,u=1,t.targetProgress=1):(u=t.currentProgress+a,u=Math.min(t.targetProgress,u)),this.updateScene(this.scope,this.question,this.frames,i,u,this.speed,this.reasons[i],!1,!0)),this.modules){var l=this.modules[s];if(\"function\"==typeof l.animateScene)try{l.animateScene(c)}catch(t){this.handleModuleError(s,t)}}return!0}},{key:\"isAsynchronousAnimationOngoing\",value:function(t){return null!=t.targetProgress&&t.currentProgress!==t.targetProgress}},{key:\"getFrameSpeed\",value:function(t){return 500/this.getFrameDuration(t)}},{key:\"getFrameDuration\",value:function(t){return this.frames&&this.frames[t]&&this.frames[t].frameInfo.frameDuration||1e3}},{key:\"enableAsyncRendering\",value:function(e){this.asyncRendering=e,this.asyncRenderingTime=t.RenderTimeout}},{key:\"purge\",value:function(){this.scope={},this.changed=!0,this.container.interactiveChildren=!1,this.container.destroy({texture:!1,children:!0}),delete this.container,this.container=new PIXI.Container}},{key:\"reinitScene\",value:function(){1<=this.loaded&&(this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.preconstructScene(this.scope,this.container,this.initWidth,this.initHeight),this.initScene(this.scope,this.container,this.frames),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame]),this.changed=!0)}},{key:\"reinitDefaultScene\",value:function(){1<=this.loaded&&(this.intro=!0,this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initDefaultScene(this.scope,this.container,this.initWidth,this.initHeight),this.changed=!0)}},{key:\"reinitLoadingScene\",value:function(){this.loaded<1&&(this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initPreload(this.scope,this.container,this.loaded,this.initWidth,this.initHeight))}},{key:\"reinit\",value:function(t){1<=this.loaded&&!this.loading?0<=this.currentFrame&&!this.intro?this.reinitScene():this.intro&&!t||this.reinitDefaultScene():this.reinitLoadingScene()}},{key:\"animate\",value:function(t){var e;this.destroyed||(this.lastRenderTime||(this.lastRenderTime=t),e=t-this.lastRenderTime,this.asynchronousStep&&(e=this.asynchronousStep),this.onBeforeRender&&this.onBeforeRender(),this.loading||(this.loaded<1?this.changed|=this.renderPreloadScene(this.scope,e):(this.changed||this.asyncRendering&&0<this.asyncRenderingTime||this.isAsynchronousAnimationOngoing(this.scope))&&(this.currentFrame<0?this.changed|=this.renderDefaultScene(this.scope,e):this.intro?(this.changed=!0,this.endDefaultScene(this.scope,e)&&(this.intro=!1,this.reinit(!0))):this.changed|=this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame],e)),this.changed&&(this.renderer.render(this.container),this.changed=!1)),this.onAfterRender&&this.onAfterRender(),this.lastRenderTime=t,this.destroyed||requestAnimationFrame(this.animate.bind(this)),this.asyncRenderingTime-=e)}},{key:\"_initFrames\",value:function(t,e){this.instantiateModules(),this._frames=e.map((function(t){var e,n=t[0].split(\" \");try{e=JSON.parse(t.slice(1).join(\"\\n\"))}catch(t){e={}}return Dn(Dn({},e),{},{key:\"KEY_FRAME\"===n[0]})})),this.parseGlobalData(this._frames[0].global),this.playerCount=t,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,(t=this._frames[0].frame).key=this._frames[0].key,this.frames.push(this.parseFrame(t,this.frames));for(var n=1;n<this._frames.length;++n)this.frames.push(this.parseFrame(this._frames[n],this.frames))}},{key:\"isTurnBasedGame\",value:function(){return!1}},{key:\"initFrames\",value:function(t,e){this.playerInfo&&this.playerInfo.forEach((function(t){t.avatar&&t.avatar.destroy(!0)}));var n=this,r=new PIXI.loaders.Loader(window.location.origin);function i(){n._initFrames(e.length,t),n.loading=!1,n.reinit(!1),o=!0}this.playerInfo=e.map((function(t,e){var i={name:t.name||\"Anonymous\",color:t.color?n.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:null};return null!=t.avatar&&r.add(\"avatar\"+e,t.avatar,{loadType:2,crossOrigin:!0},(function(t){i.avatar=t.texture,PIXI.Texture.addToCache(t.texture,\"$\"+i.index)})),i}));var o=!(this.loading=!0);r.on(\"complete\",i),r.on(\"error\",(function(t){console.warn(t),o||i()})),r.load()}},{key:\"update\",value:function(e,n,r){0<=this.currentFrame&&(this.asyncRenderingTime=t.RenderTimeout,this.changed=!0,this.speed=r,this.currentFrame=e,this.progress=n,1<=this.loaded&&!this.intro&&this.updateScene(this.scope,this.question,this.frames,e,n,this.speed,this.reasons[this.currentFrame]))}},{key:\"parseColor\",value:function(t){if(Array.isArray(t)){for(var e=[],n=0;n<t.length;++n)e.push(this.parseColor(t[n]));return e}return parseInt(t.substring(1),16)}},{key:\"init\",value:function(e,n,r,i,o,a,c){var u,s=this;window.PIXI=t.PIXI||window.PIXI,this.oversampling=o||1,o=function(){0<=s.currentFrame&&(s.changed=!0)},this.canvas=$(e),this.canvas.off(\"mousemove\"),this.canvas.off(\"wheel\"),this.canvas.bind(\"wheel\",o),this.canvas.mousemove(o),i&&(this.colors=this.parseColor(i)),\"ide\"===c&&(this.debugModeSetByUser||(this.debugMode=!0),l.listen((function(t){return console.error(t.cause||t)}))),this.asyncRendering=!0,this.asyncRenderingTime=0,this.destroyed=!1,this.asynchronousStep=null;var f=this;if(this.initWidth=0|n,this.initHeight=0|r,this.endCallback=a||this.endCallback,this.alreadyLoaded)this.changed=!0,this.renderer.resize(this.initWidth,this.initHeight),this.reinit(!0);else{this.alreadyLoaded=!0,this.question=null,this.scope=null,this.currentFrame=-1,this.loaded=0,this.container=new PIXI.Container;var p=this.getResources();this.renderer=this.createRenderer(this.initWidth,this.initHeight,e),a=this.renderer,ae=a;var h,y=new PIXI.loaders.Loader(p.baseUrl);for(u in p.images)y.add(u,p.images[u],{crossOrigin:!0});for(h=0;h<p.sprites.length;++h)y.add(p.sprites[h],{crossOrigin:!0});for(h=0;h<p.fonts.length;++h)y.add(p.fonts[h],{crossOrigin:!0});for(u in p.spines)y.add(u,p.spines[u],{crossOrigin:!0});for(h=0;h<p.others.length;++h)y.add(p.others[h],{crossOrigin:!0});this.demo&&this.demo.agents.forEach((function(t){y.add(\"avatar\"+t.index,t.avatar,{loadType:2,crossOrigin:!0},(function(e){t.avatarTexture=e.texture,PIXI.Texture.addToCache(e.texture,\"$\"+t.index)}))})),f.scope={},e=function(t,e){requestAnimationFrame(f.animate.bind(f)),f.initPreload(f.scope,f.container,f.loaded=0,f.initWidth,f.initHeight)},y.on(\"start\",e),y.on(\"progress\",(function(t,e){t.progress<100&&f.preload(f.scope,f.container,f.loaded=t.progress/100,f.initWidth,f.initHeight,e)})),a=function(){for(var t in p.images)p.images.hasOwnProperty(t)&&y.resources[t].texture&&PIXI.Texture.addToCache(y.resources[t].texture,t);for(t in p.spines)p.spines.hasOwnProperty(t)&&(PIXI.AnimCache[t]=PIXI.AnimCache[p.baseUrl+p.spines[t]]);f.loaded=1,f.reinit(!0),f.changed=!0},y.on(\"complete\",a),y.on(\"error\",(function(t){console.warn(t)})),Object.keys(y.resources).length?y.load():(e(),a())}}},{key:\"createRenderer\",value:function(t,e,n){return PIXI.autoDetectRenderer(t,e,{view:n,clearBeforeRender:!0,preserveDrawingBuffer:!1})}},{key:\"isReady\",value:function(){return 1<=this.loaded}}])&&En(e.prototype,n),i&&En(e,i),t}()}]).Drawer;",
      "levelParams": {
        "0": {
          "aiCode": "#include <iostream>\r\n#include <string>\r\n\r\n\r\n/**\r\n * Drop chips in the columns.\r\n * Connect at least 4 of your chips in any direction to win.\r\n **/\r\n\r\n\r\nconstexpr int NUM_ROWS = 7;\r\nconstexpr int NUM_COLS = 9;\r\nconstexpr int NUM_CHIPS_TO_BE_CONNECTED = 4;\r\nconstexpr char CHIP_FIRST_PLAYER = '0';\r\nconstexpr char CHIP_SECOND_PLAYER = '1';\r\nconstexpr char CHIP_EMPTY_CELL = '.';\r\nconstexpr int MINIMAX_DEPTH = 3;  // my play, opp play, my play\r\nconstexpr int MINIMAX_POSITIVE_INFINITE = 100000;\r\nconstexpr int MINIMAX_NEGATIVE_INFINITE = -MINIMAX_POSITIVE_INFINITE;\r\n\r\n\r\n// #define XY_MODE_PRINT  // comment this if should be printed as row,col\r\n\r\n\r\nconstexpr int UP = 0;\r\nconstexpr int RIGHT = 1;\r\nconstexpr int LEFT = 2;\r\nconstexpr int DOWN = 3;\r\nconstexpr int UP_RIGHT = 4;\r\nconstexpr int UP_LEFT = 5;\r\nconstexpr int DOWN_RIGHT = 6;\r\nconstexpr int DOWN_LEFT = 7;\r\nconstexpr char CELL_PRINT_ROW_COL_SEP = ',';\r\n\r\n\r\nvoid printInitialTabs(std::ostream& os, int tab_length) {\r\n    int num_spaces = 4 * tab_length;\r\n    for (int t = 0; t < num_spaces; t++) os << ' ';\r\n}\r\n\r\n\r\nclass Cell {\r\n    const static int additions[8][2];\r\n    const static int opposite_directions[8];\r\n\r\npublic:\r\n    int row;\r\n    int col;\r\n\r\n    Cell() {\r\n        row = 0;\r\n        col = 0;\r\n    }\r\n\r\n    Cell(int _row, int _col) {\r\n        row = _row;\r\n        col = _col;\r\n    }\r\n\r\n    Cell(const Cell &cell) {\r\n        row = cell.row;\r\n        col = cell.col;\r\n    }\r\n\r\n    void set_to(int _row, int _col) {\r\n        row = _row;\r\n        col = _col;\r\n    }\r\n\r\n    void set_to(const Cell &cell) {\r\n        row = cell.row;\r\n        col = cell.col;\r\n    }\r\n\r\n    inline void set_to_neighbor(int direction, int steps = 1) {\r\n        row += additions[direction][0] * steps;\r\n        col += additions[direction][1] * steps;\r\n    }\r\n\r\n    inline Cell get_neighbor(int direction, int steps = 1) const {\r\n        return Cell(row + additions[direction][0] * steps, col + additions[direction][1] * steps);\r\n    }\r\n\r\n    int manhattan_dist(const Cell &other) const {\r\n        return (abs(row - other.row) + abs(col - other.col));\r\n    }\r\n\r\n    int euclidean_dist(const Cell &other) const {\r\n        int dy = abs(row - other.row);\r\n        int dx = abs(col - other.col);\r\n        return dy > dx ? dy : dx;\r\n    }\r\n\r\n    friend std::ostream &operator<<(std::ostream &os, const Cell &cell) {\r\n#ifdef XY_MODE_PRINT\r\n        os << static_cast<int>(cell.col) << CELL_PRINT_ROW_COL_SEP << static_cast<int>(cell.row);\r\n#else\r\n        os << static_cast<int>(cell.row) << CELL_PRINT_ROW_COL_SEP << static_cast<int>(cell.col);\r\n#endif\r\n        return os;\r\n    }\r\n\r\n    bool is_in_bounds(int height, int width) const {\r\n        return !(row < 0 || row >= height || col < 0 || col >= width);\r\n    }\r\n\r\n    bool operator==(const Cell &rhs) const {\r\n        return row == rhs.row && col == rhs.col;\r\n    }\r\n\r\n    bool operator!=(const Cell &rhs) const {\r\n        return !(rhs == *this);\r\n    }\r\n\r\n    int get_opposite_direction(int direction) {\r\n        return opposite_directions[direction];\r\n    }\r\n};\r\n\r\n\r\nconst int Cell::additions[8][2] = {\r\n        {-1, 0}, {0, 1}, {0, -1}, {1, 0},  // UP 0; RIGHT 1; LEFT 2; DOWN 3\r\n        {-1, 1}, {-1, -1}, {1, 1}, {1, -1}  // UP_RIGHT 4; UP_LEFT 5; DOWN_RIGHT 6; DOWN_LEFT 7\r\n};\r\n\r\nconst int Cell::opposite_directions[8] = { DOWN, LEFT, RIGHT, UP, DOWN_LEFT, DOWN_RIGHT, UP_LEFT, UP_RIGHT };\r\n\r\n\r\nclass Utility {\r\npublic:\r\n    int p1_score;\r\n    int p2_score;\r\n    Utility() {\r\n        p1_score = 0;\r\n        p2_score = 0;\r\n    }\r\n    Utility(int _p1_score, int _p2_score) {\r\n        p1_score = _p1_score;\r\n        p2_score = _p2_score;\r\n    }\r\n    int getAsInt() {\r\n        return p1_score - p2_score;\r\n    }\r\n    void operator += (const Utility& other) {\r\n        p1_score += other.p1_score;\r\n        p2_score += other.p2_score;\r\n    }\r\n    void operator -= (const Utility& other) {\r\n        p1_score -= other.p1_score;\r\n        p2_score -= other.p2_score;\r\n    }\r\n    friend std::ostream &operator<<(std::ostream &os, const Utility &utility) {\r\n        os << \"U{\" << utility.p1_score << ',' << utility.p2_score << '}';\r\n        return os;\r\n    }\r\n};\r\n\r\n\r\nclass Connect4 {\r\n\r\n    public:\r\n        void set_one_board_row(int rowIndex, std::string rowString);\r\n        int get_move(int player);\r\n\r\n    private:\r\n        char board[NUM_ROWS][NUM_COLS];\r\n        Utility boardUtility;\r\n        char winner = CHIP_EMPTY_CELL;\r\n\r\n        void printState(std::ostream& os, int tab_length) {\r\n            for (int r = 0; r < NUM_ROWS; r++) {\r\n                printInitialTabs(os, tab_length);\r\n                for (int c = 0; c < NUM_COLS; c++) os << board[r][c];\r\n                os << '\\n';\r\n            }\r\n            printInitialTabs(os, tab_length);\r\n            os << boardUtility << \" W:\" << winner << '\\n';\r\n        }\r\n\r\n        int minimax_max_value(int depth, int* put_best_action_col_in_this);\r\n        int minimax_min_value(int depth, int* put_best_action_col_in_this);\r\n\r\n        bool can_place_chip_in_col(int col_index) const { return board[0][col_index] == CHIP_EMPTY_CELL; }\r\n\r\n        int get_resting_row_for_a_chip_placed_in_col(int col_index) const {\r\n            for (int r = NUM_ROWS - 1; r >= 0; r--) {\r\n                if (board[r][col_index] == CHIP_EMPTY_CELL) return r;\r\n            }\r\n            return -1;  // no empty cell, filled column\r\n        }\r\n\r\n        int get_utility();\r\n        int num_times_get_utility_is_called = 0;  // don't forget to reset it every time before calling minimax top level\r\n\r\n        Utility getUtilityDeltaOfTheMove(int row, int col, bool is_p1_turn);\r\n};\r\n\r\nvoid Connect4::set_one_board_row(int rowIndex, std::string rowString) {\r\n    for (int c = 0; c < NUM_COLS; c++) {\r\n        board[rowIndex][c] = rowString[c];\r\n    }\r\n}\r\n\r\nint Connect4::get_move(int player) {\r\n    int best_move;\r\n    int best_utility;\r\n    num_times_get_utility_is_called = 0;\r\n\r\n    if (player == 0) {\r\n        best_utility = minimax_max_value(1, &best_move);\r\n    } else {\r\n        best_utility = minimax_min_value(1, &best_move);\r\n    }\r\n\r\n    std::cerr << \"Utility: \" << best_utility << \"; Num leaf nodes: \" << num_times_get_utility_is_called << '\\n';\r\n\r\n    return best_move;\r\n}\r\n\r\nint Connect4::minimax_max_value(int depth, int* put_best_action_col_in_this) {\r\n#ifdef PRINT_ALL_DEBUG\r\n    printInitialTabs(std::cerr, depth - 1); std::cerr << \"Minimax:MAX depth:\" << depth << '\\n';\r\n#endif\r\n\r\n    // if terminal test passed: return utility of the state\r\n    if (winner == CHIP_FIRST_PLAYER) return MINIMAX_POSITIVE_INFINITE;\r\n    else if (winner == CHIP_SECOND_PLAYER) return MINIMAX_NEGATIVE_INFINITE;\r\n\r\n    if (depth >= MINIMAX_DEPTH) return get_utility();\r\n\r\n#ifdef PRINT_ALL_DEBUG\r\n    printInitialTabs(std::cerr, depth - 1); std::cerr << \"Not a leaf node\\n\";\r\n#endif\r\n\r\n    int v = MINIMAX_NEGATIVE_INFINITE - 1;  // so that at least one action is chosen\r\n    for (int c = 0; c < NUM_COLS; c++) {\r\n        if (!can_place_chip_in_col(c)) continue;\r\n\r\n        // play action\r\n        int resting_row = get_resting_row_for_a_chip_placed_in_col(c);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Play col:\" << c << \" row:\" << resting_row << '\\n';\r\n#endif\r\n\r\n        board[resting_row][c] = CHIP_FIRST_PLAYER;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Board after the move:\\n\";\r\n        printState(std::cerr, depth - 1);\r\n#endif\r\n\r\n        Utility uDelta = getUtilityDeltaOfTheMove(resting_row, c, true);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"utilityDelta: \" << uDelta << '\\n';\r\n#endif\r\n\r\n        boardUtility += uDelta;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"boardUtility: \" << boardUtility << '\\n';\r\n#endif\r\n\r\n        // get min value of the result\r\n        int u = minimax_min_value(depth + 1, nullptr);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Result of calling min_value for next depth = u = \" << u << '\\n';\r\n#endif\r\n\r\n        // undo play action\r\n        board[resting_row][c] = CHIP_EMPTY_CELL;\r\n        boardUtility -= uDelta;\r\n        winner = CHIP_EMPTY_CELL;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Move un done\\n\";\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Board after undoing:\\n\";\r\n        printState(std::cerr, depth - 1);\r\n#endif\r\n\r\n        // process the new utility: v takes max of them\r\n        if (v < u) {\r\n#ifdef PRINT_ALL_DEBUG\r\n            printInitialTabs(std::cerr, depth - 1); std::cerr << \"This u is new max utility\\n\";\r\n#endif\r\n            v = u;\r\n            if (put_best_action_col_in_this != nullptr) {\r\n                *put_best_action_col_in_this = c;\r\n            }\r\n        }\r\n    }\r\n\r\n    return v;\r\n}\r\n\r\nint Connect4::minimax_min_value(int depth, int* put_best_action_col_in_this) {\r\n#ifdef PRINT_ALL_DEBUG\r\n    printInitialTabs(std::cerr, depth - 1); std::cerr << \"Minimax:MIN depth:\" << depth << '\\n';\r\n#endif\r\n\r\n    // if terminal test passed: return utility of the state\r\n    if (winner == CHIP_FIRST_PLAYER) return MINIMAX_POSITIVE_INFINITE;\r\n    else if (winner == CHIP_SECOND_PLAYER) return MINIMAX_NEGATIVE_INFINITE;\r\n\r\n    if (depth >= MINIMAX_DEPTH) return get_utility();\r\n\r\n#ifdef PRINT_ALL_DEBUG\r\n    printInitialTabs(std::cerr, depth - 1); std::cerr << \"Not a leaf node\\n\";\r\n#endif\r\n\r\n    int v = MINIMAX_POSITIVE_INFINITE + 1;  // so that at least one action is chosen\r\n    for (int c = 0; c < NUM_COLS; c++) {\r\n        if (!can_place_chip_in_col(c)) continue;\r\n\r\n        // play action\r\n        int resting_row = get_resting_row_for_a_chip_placed_in_col(c);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Play col:\" << c << \" row:\" << resting_row << '\\n';\r\n#endif\r\n\r\n        board[resting_row][c] = CHIP_SECOND_PLAYER;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Board after the move:\\n\";\r\n        printState(std::cerr, depth - 1);\r\n#endif\r\n\r\n        Utility uDelta = getUtilityDeltaOfTheMove(resting_row, c, false);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"utilityDelta: \" << uDelta << '\\n';\r\n#endif\r\n\r\n        boardUtility += uDelta;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"boardUtility: \" << boardUtility << '\\n';\r\n#endif\r\n\r\n        // get max value of the result\r\n        int u = minimax_max_value(depth + 1, nullptr);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Result of calling max_value for next depth = u = \" << u << '\\n';\r\n#endif\r\n\r\n        // undo play action\r\n        board[resting_row][c] = CHIP_EMPTY_CELL;\r\n        boardUtility -= uDelta;\r\n        winner = CHIP_EMPTY_CELL;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Move un done\\n\";\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Board after undoing:\\n\";\r\n        printState(std::cerr, depth - 1);\r\n#endif\r\n\r\n        // process the new utility: v takes min of them\r\n        if (v > u) {\r\n#ifdef PRINT_ALL_DEBUG\r\n            printInitialTabs(std::cerr, depth - 1); std::cerr << \"This u is new max utility\\n\";\r\n#endif\r\n            v = u;\r\n            if (put_best_action_col_in_this != nullptr) {\r\n                *put_best_action_col_in_this = c;\r\n            }\r\n        }\r\n    }\r\n    return v;\r\n}\r\n\r\nint Connect4::get_utility() {\r\n    num_times_get_utility_is_called++;\r\n    return boardUtility.getAsInt();\r\n}\r\n\r\nUtility Connect4::getUtilityDeltaOfTheMove(int row, int col, bool is_p1_turn) {\r\n    Utility utilityDelta;\r\n    Cell curCell(row, col);\r\n\r\n    static const int FOUR_DIRECTIONS[] = {UP, RIGHT, UP_RIGHT, DOWN_RIGHT};\r\n    for (int d : FOUR_DIRECTIONS) {\r\n        for (int starting_cell_position_delta = 0; starting_cell_position_delta < 4; starting_cell_position_delta++) {\r\n            Cell cell = curCell.get_neighbor(curCell.get_opposite_direction(d), starting_cell_position_delta);\r\n\r\n            // check if this starting cell is of a valid line\r\n            if (!(cell.is_in_bounds(NUM_ROWS, NUM_COLS) && cell.get_neighbor(d, 3).is_in_bounds(NUM_ROWS, NUM_COLS))) {\r\n                continue;\r\n            }\r\n            \r\n            int num_p1_chips = 0;\r\n            int num_p2_chips = 0;\r\n            \r\n            for (int i = 0; i < 4; i++) {\r\n\r\n                if (board[cell.row][cell.col] == CHIP_FIRST_PLAYER) {\r\n                    num_p1_chips++;\r\n                } else if (board[cell.row][cell.col] == CHIP_SECOND_PLAYER) {\r\n                    num_p2_chips++;\r\n                }\r\n\r\n                cell.set_to_neighbor(d);\r\n            }\r\n\r\n            if (num_p1_chips == NUM_CHIPS_TO_BE_CONNECTED) {\r\n                winner = CHIP_FIRST_PLAYER;\r\n                utilityDelta.p1_score = utilityDelta.p2_score = 0;\r\n                return utilityDelta;\r\n            } else if (num_p2_chips == NUM_CHIPS_TO_BE_CONNECTED) {\r\n                winner = CHIP_SECOND_PLAYER;\r\n                utilityDelta.p1_score = utilityDelta.p2_score = 0;\r\n                return utilityDelta;\r\n            }\r\n\r\n            // a dropped chip will\r\n            // either add to the utility of the dropper\r\n            // or remove the previously added utility of opponent\r\n            // or no change\r\n\r\n            if (is_p1_turn) {\r\n                if (num_p2_chips == 0) {\r\n                    // no opponent's chips => utility boost (1 more chip added to line)\r\n                    utilityDelta.p1_score++;\r\n                } else {  // opponent's chips already exist in this line\r\n                    if (num_p1_chips == 1) {\r\n                        // blocking for the first time\r\n                        utilityDelta.p2_score -= num_p2_chips;\r\n                    } else {\r\n                        // already blocked this line for the opponent\r\n                        // no change\r\n                    }\r\n                }\r\n            } else { // p2's turn\r\n                if (num_p1_chips == 0) {\r\n                    utilityDelta.p2_score++;\r\n                } else {\r\n                    if (num_p2_chips == 1) {\r\n                        utilityDelta.p1_score -= num_p1_chips;\r\n                    } else {\r\n                        // no change\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return utilityDelta;\r\n}\r\n\r\n\r\nint main()\r\n{\r\n    Connect4 connect4;\r\n\r\n    // initialization input\r\n    int myId; // 0 or 1 (Player 0 plays first)\r\n    int oppId; // if your index is 0, this will be 1, and vice versa\r\n    std::cin >> myId >> oppId; std::cin.ignore();\r\n\r\n    // game loop\r\n    while (1) {\r\n        // input turn index\r\n        int turnIndex; // starts from 0; As the game progresses, Player0 gets [0,2,4,...] and Player1 gets [1,3,5,...]\r\n        std::cin >> turnIndex; std::cin.ignore();\r\n        if (turnIndex < 0) break;  // for local run purpose\r\n\r\n        // input board\r\n        for (int i = 0; i < 7; i++) {\r\n            std::string boardRow; // one row of the board (from top to bottom)\r\n            std::cin >> boardRow; std::cin.ignore();\r\n            connect4.set_one_board_row(i, boardRow);\r\n        }\r\n\r\n        // input valid actions\r\n        int numValidActions; // number of unfilled columns in the board\r\n        std::cin >> numValidActions; std::cin.ignore();\r\n        for (int i = 0; i < numValidActions; i++) {\r\n            int action; // a valid column index into which a chip can be dropped\r\n            std::cin >> action; std::cin.ignore();\r\n        }\r\n\r\n        // input opponent previous action\r\n        int oppPreviousAction; // opponent's previous chosen column index (will be -1 for Player 0 in the first turn)\r\n        std::cin >> oppPreviousAction; std::cin.ignore();\r\n\r\n        // Write an action using cout. DON'T FORGET THE \"<< endl\"\r\n        // To debug: cerr << \"Debug messages...\" << endl;\r\n\r\n\r\n        // Output a column index to drop the chip in. Append message to show in the viewer.\r\n        std::cout << connect4.get_move(myId) << std::endl;\r\n        std::cerr << std::endl;\r\n    }\r\n}\r\n",
          "testCases": [],
          "maxPlayers": 2,
          "minPlayers": 2,
          "statements": {
            "1": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\r\n<div class=\"statement-body\">\r\n\r\n  <!-- GOAL -->\r\n  <div class=\"statement-section statement-goal\">\r\n    <h1>\r\n      <span class=\"icon icon-goal\">&nbsp;</span>\r\n      <span>The Goal</span>\r\n    </h1>\r\n    <div class=\"statement-goal-content\">\r\n      The aim of this game is to connect at least 4 of your chips in any direction.\r\n    </div>\r\n  </div>\r\n\r\n  <!-- RULES -->\r\n  <div class=\"statement-section statement-rules\">\r\n    <h1>\r\n      <span class=\"icon icon-rules\">&nbsp;</span>\r\n      <span>Rules</span>\r\n    </h1>\r\n    <div>\r\n      <div class=\"statement-rules-content\">\r\n        The game takes place in a 7x9 board (7 Rows, and 9 Columns).<br>\r\n        Each player takes turns to drop chips into one of the columns.<br>\r\n        <br>\r\n        The game works as follows:\r\n        <ul>\r\n          <li>A player gets full state of the board as input.</li>\r\n          <li>The player chooses a column to drop their chip in (outputs a single integer in range [0,8])</li>\r\n          <li>The chip falls in that column of the board and settles in the bottom most empty cell.</li>\r\n        </ul>\r\n        <strong>Note:</strong><br>\r\n        There are 9 columns, indices are [0,8].<br>\r\n        0 => left most column.<br>\r\n        8 => right most column.\r\n        <br><br>\r\n        <strong>The STEAL move for the second player: (optional)</strong><br>\r\n        <ul>\r\n          <li>The second player can play \"STEAL\" for their first action.</li>\r\n          <li>This action does not place a new chip on the board but will convert the opponent's one and only existing chip into the second player's own chip.</li>\r\n          <li>This action is available only to the second player, and only for their first action.</li>\r\n          <li>An example is illustrated below<br>\r\n            <table style=\"border-collapse: collapse; width: 100%\">\r\n              <tr>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  <img src=\"https://github.com/AshKcg/cg-multi-connect4/raw/master/config/board250-1.jpg\" alt=\"Img: First player's action\">\r\n                </td>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  <img src=\"https://github.com/AshKcg/cg-multi-connect4/raw/master/config/board250-2.jpg\" alt=\"Img: Second player's action\">\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  First player placed a chip in<br>the middle column.\r\n                </td>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  Second Player used \"STEAL\"<br>and converted the existing chip.\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </li>\r\n          <li>The second player can output either the word <const>STEAL</const> or the integer <const>-2</const> for this action.</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"statement-victory-conditions\">\r\n    <div class=\"icon victory\"></div>\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Victory Conditions</div>\r\n      <div class=\"text\">\r\n        <ul style=\"padding-top:0;padding-bottom:0\"><li>\r\n          At least 4 of your chips are connected in any one direction (horizontal, vertical, or diagonal).\r\n        </li></ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"statement-lose-conditions\">\r\n    <div class=\"icon lose\"></div>\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Defeat Conditions</div>\r\n      <div class=\"text\">\r\n        <ul style=\"padding-top:0;padding-bottom:0\">\r\n          <li>Your program does not provide a command in the allotted time or one of the commands is unrecognized.</li>\r\n          <li>It chooses a column which is already filled, or, not in range i.e. not in [0,8].</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <br>\r\n  <h3 style=\"font-size:14px;font-weight:700;padding-top:15px;color:#838891;padding-bottom:15px\"> Debugging tips</h3>\r\n  <ul>\r\n    <li>Append text with a preceding space after your output and that text will appear below your player's name. Longer messages will be shown in lines of 15 characters.</li>\r\n    <li>Press the gear icon on the viewer to access extra display options.</li>\r\n    <li>Use the keyboard to control the action: space to play/pause, arrows to step 1 frame at a time.</li>\r\n  </ul>\r\n  <br>\r\n\r\n  <!-- PROTOCOL -->\r\n  <div class=\"statement-section statement-protocol\">\r\n    <h1>\r\n      <span class=\"icon icon-protocol\">&nbsp;</span>\r\n      <span>Game Input</span>\r\n    </h1>\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"text\">The program must first read the initialization data from standard input.\r\n        Then, within an infinite loop, read the contextual data from the standard input and\r\n        provide to the standard output one line with the index of the chosen column.</div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Initialization Input</div>\r\n      <div class=\"text\">\r\n        <p><span class=\"statement-lineno\">One line: </span>2 integers <var>myId</var>, <var>oppId</var>.\r\n          One of them will be <const>0</const> and the other will be <const>1</const>. <var>myId</var> will be <const>0</const> for first player and <const>1</const> for second player.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Input for one game turn</div>\r\n      <div class=\"text\">\r\n        <p><span class=\"statement-lineno\">\r\n          First Line: </span>integer <var>turnIndex</var>. Index of the current turn. As the game progresses,\r\n          first player receives <const>0,2,4,...</const> and second player receives <const>1,3,5,...</const>.</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">\r\n          Next <const>7</const> lines: </span>A string <var>boardRow</var> representing one row of the board\r\n          containing 9 characters (one character per column) with <const>'.'</const> for empty cells, <const>'0'</const> for cells with first player's chips,\r\n          and <const>'1'</const> for cells with second player's chips. The rows are given one by one from top to bottom.</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next line: </span>integer <var>numValidActions</var>:\r\n          the number of valid actions available to your bot (equal to the number of unfilled columns in the board, plus one for \"STEAL\" if it is second turn of the game).</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next <var>numValidActions</var> lines: </span>1 integer\r\n          <var>action</var>: one valid action (index of an unfilled column, or, -2 for STEAL in the second turn of the game).</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next line: </span>integer <var>oppPreviousAction</var>:\r\n          the column index chosen by the opponent in the previous turn (first player gets <const>-1</const> at the beginning, and <const>-2</const> if the opponent used STEAL).</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Output</div>\r\n      <div class=\"text\">\r\n        <span class=\"statement-lineno\">A single integer</span> the index of the column to drop the chip in. (Optional: If it is the second turn of the game (turnIndex == 1), then the second player can output STEAL or -2)\r\n        <br>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Constraints</div>\r\n      <div class=\"text\">\r\n        <const>0</const> <= <var>turnIndex</var> < <const>64</const>. (63 cells(7*9), and one STEAL turn if used)<br>\r\n        <const>1</const> <= <var>numValidActions</var> <= <const>10</const>. (9 cols, and one STEAL in second turn for second player)<br>\r\n        Response time per turn  <const>100</const> ms.<br>\r\n        Response time for the first turn <= <const>1000</const> ms.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <p>The source code of this game is available on <a href=\"https://github.com/AshKcg/cg-multi-connect4/\">GitHub</a>.</p>\r\n    </div>\r\n  </div>\r\n\r\n</div>",
            "2": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\r\n<div class=\"statement-body\">\r\n\r\n  <!-- GOAL -->\r\n  <div class=\"statement-section statement-goal\">\r\n    <h1>\r\n      <span class=\"icon icon-goal\">&nbsp;</span>\r\n      <span>The Goal</span>\r\n    </h1>\r\n    <div class=\"statement-goal-content\">\r\n      The aim of this game is to connect at least 4 of your chips in any direction.\r\n    </div>\r\n  </div>\r\n\r\n  <!-- RULES -->\r\n  <div class=\"statement-section statement-rules\">\r\n    <h1>\r\n      <span class=\"icon icon-rules\">&nbsp;</span>\r\n      <span>Rules</span>\r\n    </h1>\r\n    <div>\r\n      <div class=\"statement-rules-content\">\r\n        The game takes place in a 7x9 board (7 Rows, and 9 Columns).<br>\r\n        Each player takes turns to drop chips into one of the columns.<br>\r\n        <br>\r\n        The game works as follows:\r\n        <ul>\r\n          <li>A player gets full state of the board as input.</li>\r\n          <li>The player chooses a column to drop their chip in (outputs a single integer in range [0,8])</li>\r\n          <li>The chip falls in that column of the board and settles in the bottom most empty cell.</li>\r\n        </ul>\r\n        <strong>Note:</strong><br>\r\n        There are 9 columns, indices are [0,8].<br>\r\n        0 => left most column.<br>\r\n        8 => right most column.\r\n        <br><br>\r\n        <strong>The STEAL move for the second player: (optional)</strong><br>\r\n        <ul>\r\n          <li>The second player can play \"STEAL\" for their first action.</li>\r\n          <li>This action does not place a new chip on the board but will convert the opponent's one and only existing chip into the second player's own chip.</li>\r\n          <li>This action is available only to the second player, and only for their first action.</li>\r\n          <li>An example is illustrated below<br>\r\n            <table style=\"border-collapse: collapse; width: 100%\">\r\n              <tr>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  <img src=\"https://github.com/AshKcg/cg-multi-connect4/raw/master/config/board250-1.jpg\" alt=\"Img: First player's action\">\r\n                </td>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  <img src=\"https://github.com/AshKcg/cg-multi-connect4/raw/master/config/board250-2.jpg\" alt=\"Img: Second player's action\">\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  First player placed a chip in<br>the middle column.\r\n                </td>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  Second Player used \"STEAL\"<br>and converted the existing chip.\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </li>\r\n          <li>The second player can output either the word <const>STEAL</const> or the integer <const>-2</const> for this action.</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"statement-victory-conditions\">\r\n    <div class=\"icon victory\"></div>\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Victory Conditions</div>\r\n      <div class=\"text\">\r\n        <ul style=\"padding-top:0;padding-bottom:0\"><li>\r\n          At least 4 of your chips are connected in any one direction (horizontal, vertical, or diagonal).\r\n        </li></ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"statement-lose-conditions\">\r\n    <div class=\"icon lose\"></div>\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Defeat Conditions</div>\r\n      <div class=\"text\">\r\n        <ul style=\"padding-top:0;padding-bottom:0\">\r\n          <li>Your program does not provide a command in the allotted time or one of the commands is unrecognized.</li>\r\n          <li>It chooses a column which is already filled, or, not in range i.e. not in [0,8].</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <br>\r\n  <h3 style=\"font-size:14px;font-weight:700;padding-top:15px;color:#838891;padding-bottom:15px\"> Debugging tips</h3>\r\n  <ul>\r\n    <li>Append text with a preceding space after your output and that text will appear below your player's name. Longer messages will be shown in lines of 15 characters.</li>\r\n    <li>Press the gear icon on the viewer to access extra display options.</li>\r\n    <li>Use the keyboard to control the action: space to play/pause, arrows to step 1 frame at a time.</li>\r\n  </ul>\r\n  <br>\r\n\r\n  <!-- PROTOCOL -->\r\n  <div class=\"statement-section statement-protocol\">\r\n    <h1>\r\n      <span class=\"icon icon-protocol\">&nbsp;</span>\r\n      <span>Game Input</span>\r\n    </h1>\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"text\">The program must first read the initialization data from standard input.\r\n        Then, within an infinite loop, read the contextual data from the standard input and\r\n        provide to the standard output one line with the index of the chosen column.</div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Initialization Input</div>\r\n      <div class=\"text\">\r\n        <p><span class=\"statement-lineno\">One line: </span>2 integers <var>myId</var>, <var>oppId</var>.\r\n          One of them will be <const>0</const> and the other will be <const>1</const>. <var>myId</var> will be <const>0</const> for first player and <const>1</const> for second player.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Input for one game turn</div>\r\n      <div class=\"text\">\r\n        <p><span class=\"statement-lineno\">\r\n          First Line: </span>integer <var>turnIndex</var>. Index of the current turn. As the game progresses,\r\n          first player receives <const>0,2,4,...</const> and second player receives <const>1,3,5,...</const>.</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">\r\n          Next <const>7</const> lines: </span>A string <var>boardRow</var> representing one row of the board\r\n          containing 9 characters (one character per column) with <const>'.'</const> for empty cells, <const>'0'</const> for cells with first player's chips,\r\n          and <const>'1'</const> for cells with second player's chips. The rows are given one by one from top to bottom.</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next line: </span>integer <var>numValidActions</var>:\r\n          the number of valid actions available to your bot (equal to the number of unfilled columns in the board, plus one for \"STEAL\" if it is second turn of the game).</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next <var>numValidActions</var> lines: </span>1 integer\r\n          <var>action</var>: one valid action (index of an unfilled column, or, -2 for STEAL in the second turn of the game).</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next line: </span>integer <var>oppPreviousAction</var>:\r\n          the column index chosen by the opponent in the previous turn (first player gets <const>-1</const> at the beginning, and <const>-2</const> if the opponent used STEAL).</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Output</div>\r\n      <div class=\"text\">\r\n        <span class=\"statement-lineno\">A single integer</span> the index of the column to drop the chip in. (Optional: If it is the second turn of the game (turnIndex == 1), then the second player can output STEAL or -2)\r\n        <br>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Constraints</div>\r\n      <div class=\"text\">\r\n        <const>0</const> <= <var>turnIndex</var> < <const>64</const>. (63 cells(7*9), and one STEAL turn if used)<br>\r\n        <const>1</const> <= <var>numValidActions</var> <= <const>10</const>. (9 cols, and one STEAL in second turn for second player)<br>\r\n        Response time per turn  <const>100</const> ms.<br>\r\n        Response time for the first turn <= <const>1000</const> ms.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <p>The source code of this game is available on <a href=\"https://github.com/AshKcg/cg-multi-connect4/\">GitHub</a>.</p>\r\n    </div>\r\n  </div>\r\n\r\n</div>"
          },
          "questionType": "multi",
          "stubGenerator": "read myId:int oppId:int\r\ngameloop\r\nread turnIndex:int\r\nloop 7 read boardRow:word(9)\r\nread numValidActions:int\r\nloop numValidActions read action:int\r\nread oppPreviousAction:int\r\nwrite 0\r\n\r\nINPUT\r\nmyId: 0 or 1 (Player 0 plays first)\r\noppId: if your index is 0, this will be 1, and vice versa\r\nturnIndex: starts from 0; As the game progresses, first player gets [0,2,4,...] and second player gets [1,3,5,...]\r\nboardRow: one row of the board (from top to bottom)\r\nnumValidActions: number of unfilled columns in the board\r\naction: a valid column index into which a chip can be dropped\r\noppPreviousAction: opponent's previous chosen column index (will be -1 for first player in the first turn)\r\n\r\nOUTPUT\r\nOutput a column index to drop the chip in. Append message to show in the viewer.\r\n\r\nSTATEMENT\r\nDrop chips in the columns.\r\nConnect at least 4 of your chips in any direction to win.\r\n",
          "welcomePopups": {},
          "aiCodeExtension": "cpp",
          "criteriaLanguageMap": {}
        },
        "1": {
          "aiCode": "#include <iostream>\r\n#include <string>\r\n\r\n\r\n/**\r\n * Drop chips in the columns.\r\n * Connect at least 4 of your chips in any direction to win.\r\n **/\r\n\r\n\r\nconstexpr int NUM_ROWS = 7;\r\nconstexpr int NUM_COLS = 9;\r\nconstexpr int NUM_CHIPS_TO_BE_CONNECTED = 4;\r\nconstexpr char CHIP_FIRST_PLAYER = '0';\r\nconstexpr char CHIP_SECOND_PLAYER = '1';\r\nconstexpr char CHIP_EMPTY_CELL = '.';\r\nconstexpr int MINIMAX_DEPTH = 3;  // my play, opp play, my play\r\nconstexpr int MINIMAX_POSITIVE_INFINITE = 100000;\r\nconstexpr int MINIMAX_NEGATIVE_INFINITE = -MINIMAX_POSITIVE_INFINITE;\r\n\r\n\r\n// #define XY_MODE_PRINT  // comment this if should be printed as row,col\r\n\r\n\r\nconstexpr int UP = 0;\r\nconstexpr int RIGHT = 1;\r\nconstexpr int LEFT = 2;\r\nconstexpr int DOWN = 3;\r\nconstexpr int UP_RIGHT = 4;\r\nconstexpr int UP_LEFT = 5;\r\nconstexpr int DOWN_RIGHT = 6;\r\nconstexpr int DOWN_LEFT = 7;\r\nconstexpr char CELL_PRINT_ROW_COL_SEP = ',';\r\n\r\n\r\nvoid printInitialTabs(std::ostream& os, int tab_length) {\r\n    int num_spaces = 4 * tab_length;\r\n    for (int t = 0; t < num_spaces; t++) os << ' ';\r\n}\r\n\r\n\r\nclass Cell {\r\n    const static int additions[8][2];\r\n    const static int opposite_directions[8];\r\n\r\npublic:\r\n    int row;\r\n    int col;\r\n\r\n    Cell() {\r\n        row = 0;\r\n        col = 0;\r\n    }\r\n\r\n    Cell(int _row, int _col) {\r\n        row = _row;\r\n        col = _col;\r\n    }\r\n\r\n    Cell(const Cell &cell) {\r\n        row = cell.row;\r\n        col = cell.col;\r\n    }\r\n\r\n    void set_to(int _row, int _col) {\r\n        row = _row;\r\n        col = _col;\r\n    }\r\n\r\n    void set_to(const Cell &cell) {\r\n        row = cell.row;\r\n        col = cell.col;\r\n    }\r\n\r\n    inline void set_to_neighbor(int direction, int steps = 1) {\r\n        row += additions[direction][0] * steps;\r\n        col += additions[direction][1] * steps;\r\n    }\r\n\r\n    inline Cell get_neighbor(int direction, int steps = 1) const {\r\n        return Cell(row + additions[direction][0] * steps, col + additions[direction][1] * steps);\r\n    }\r\n\r\n    int manhattan_dist(const Cell &other) const {\r\n        return (abs(row - other.row) + abs(col - other.col));\r\n    }\r\n\r\n    int euclidean_dist(const Cell &other) const {\r\n        int dy = abs(row - other.row);\r\n        int dx = abs(col - other.col);\r\n        return dy > dx ? dy : dx;\r\n    }\r\n\r\n    friend std::ostream &operator<<(std::ostream &os, const Cell &cell) {\r\n#ifdef XY_MODE_PRINT\r\n        os << static_cast<int>(cell.col) << CELL_PRINT_ROW_COL_SEP << static_cast<int>(cell.row);\r\n#else\r\n        os << static_cast<int>(cell.row) << CELL_PRINT_ROW_COL_SEP << static_cast<int>(cell.col);\r\n#endif\r\n        return os;\r\n    }\r\n\r\n    bool is_in_bounds(int height, int width) const {\r\n        return !(row < 0 || row >= height || col < 0 || col >= width);\r\n    }\r\n\r\n    bool operator==(const Cell &rhs) const {\r\n        return row == rhs.row && col == rhs.col;\r\n    }\r\n\r\n    bool operator!=(const Cell &rhs) const {\r\n        return !(rhs == *this);\r\n    }\r\n\r\n    int get_opposite_direction(int direction) {\r\n        return opposite_directions[direction];\r\n    }\r\n};\r\n\r\n\r\nconst int Cell::additions[8][2] = {\r\n        {-1, 0}, {0, 1}, {0, -1}, {1, 0},  // UP 0; RIGHT 1; LEFT 2; DOWN 3\r\n        {-1, 1}, {-1, -1}, {1, 1}, {1, -1}  // UP_RIGHT 4; UP_LEFT 5; DOWN_RIGHT 6; DOWN_LEFT 7\r\n};\r\n\r\nconst int Cell::opposite_directions[8] = { DOWN, LEFT, RIGHT, UP, DOWN_LEFT, DOWN_RIGHT, UP_LEFT, UP_RIGHT };\r\n\r\n\r\nclass Utility {\r\npublic:\r\n    int p1_score;\r\n    int p2_score;\r\n    Utility() {\r\n        p1_score = 0;\r\n        p2_score = 0;\r\n    }\r\n    Utility(int _p1_score, int _p2_score) {\r\n        p1_score = _p1_score;\r\n        p2_score = _p2_score;\r\n    }\r\n    int getAsInt() {\r\n        return p1_score - p2_score;\r\n    }\r\n    void operator += (const Utility& other) {\r\n        p1_score += other.p1_score;\r\n        p2_score += other.p2_score;\r\n    }\r\n    void operator -= (const Utility& other) {\r\n        p1_score -= other.p1_score;\r\n        p2_score -= other.p2_score;\r\n    }\r\n    friend std::ostream &operator<<(std::ostream &os, const Utility &utility) {\r\n        os << \"U{\" << utility.p1_score << ',' << utility.p2_score << '}';\r\n        return os;\r\n    }\r\n};\r\n\r\n\r\nclass Connect4 {\r\n\r\n    public:\r\n        void set_one_board_row(int rowIndex, std::string rowString);\r\n        int get_move(int player);\r\n\r\n    private:\r\n        char board[NUM_ROWS][NUM_COLS];\r\n        Utility boardUtility;\r\n        char winner = CHIP_EMPTY_CELL;\r\n\r\n        void printState(std::ostream& os, int tab_length) {\r\n            for (int r = 0; r < NUM_ROWS; r++) {\r\n                printInitialTabs(os, tab_length);\r\n                for (int c = 0; c < NUM_COLS; c++) os << board[r][c];\r\n                os << '\\n';\r\n            }\r\n            printInitialTabs(os, tab_length);\r\n            os << boardUtility << \" W:\" << winner << '\\n';\r\n        }\r\n\r\n        int minimax_max_value(int depth, int* put_best_action_col_in_this);\r\n        int minimax_min_value(int depth, int* put_best_action_col_in_this);\r\n\r\n        bool can_place_chip_in_col(int col_index) const { return board[0][col_index] == CHIP_EMPTY_CELL; }\r\n\r\n        int get_resting_row_for_a_chip_placed_in_col(int col_index) const {\r\n            for (int r = NUM_ROWS - 1; r >= 0; r--) {\r\n                if (board[r][col_index] == CHIP_EMPTY_CELL) return r;\r\n            }\r\n            return -1;  // no empty cell, filled column\r\n        }\r\n\r\n        int get_utility();\r\n        int num_times_get_utility_is_called = 0;  // don't forget to reset it every time before calling minimax top level\r\n\r\n        Utility getUtilityDeltaOfTheMove(int row, int col, bool is_p1_turn);\r\n};\r\n\r\nvoid Connect4::set_one_board_row(int rowIndex, std::string rowString) {\r\n    for (int c = 0; c < NUM_COLS; c++) {\r\n        board[rowIndex][c] = rowString[c];\r\n    }\r\n}\r\n\r\nint Connect4::get_move(int player) {\r\n    int best_move;\r\n    int best_utility;\r\n    num_times_get_utility_is_called = 0;\r\n\r\n    if (player == 0) {\r\n        best_utility = minimax_max_value(1, &best_move);\r\n    } else {\r\n        best_utility = minimax_min_value(1, &best_move);\r\n    }\r\n\r\n    std::cerr << \"Utility: \" << best_utility << \"; Num leaf nodes: \" << num_times_get_utility_is_called << '\\n';\r\n\r\n    return best_move;\r\n}\r\n\r\nint Connect4::minimax_max_value(int depth, int* put_best_action_col_in_this) {\r\n#ifdef PRINT_ALL_DEBUG\r\n    printInitialTabs(std::cerr, depth - 1); std::cerr << \"Minimax:MAX depth:\" << depth << '\\n';\r\n#endif\r\n\r\n    // if terminal test passed: return utility of the state\r\n    if (winner == CHIP_FIRST_PLAYER) return MINIMAX_POSITIVE_INFINITE;\r\n    else if (winner == CHIP_SECOND_PLAYER) return MINIMAX_NEGATIVE_INFINITE;\r\n\r\n    if (depth >= MINIMAX_DEPTH) return get_utility();\r\n\r\n#ifdef PRINT_ALL_DEBUG\r\n    printInitialTabs(std::cerr, depth - 1); std::cerr << \"Not a leaf node\\n\";\r\n#endif\r\n\r\n    int v = MINIMAX_NEGATIVE_INFINITE - 1;  // so that at least one action is chosen\r\n    for (int c = 0; c < NUM_COLS; c++) {\r\n        if (!can_place_chip_in_col(c)) continue;\r\n\r\n        // play action\r\n        int resting_row = get_resting_row_for_a_chip_placed_in_col(c);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Play col:\" << c << \" row:\" << resting_row << '\\n';\r\n#endif\r\n\r\n        board[resting_row][c] = CHIP_FIRST_PLAYER;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Board after the move:\\n\";\r\n        printState(std::cerr, depth - 1);\r\n#endif\r\n\r\n        Utility uDelta = getUtilityDeltaOfTheMove(resting_row, c, true);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"utilityDelta: \" << uDelta << '\\n';\r\n#endif\r\n\r\n        boardUtility += uDelta;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"boardUtility: \" << boardUtility << '\\n';\r\n#endif\r\n\r\n        // get min value of the result\r\n        int u = minimax_min_value(depth + 1, nullptr);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Result of calling min_value for next depth = u = \" << u << '\\n';\r\n#endif\r\n\r\n        // undo play action\r\n        board[resting_row][c] = CHIP_EMPTY_CELL;\r\n        boardUtility -= uDelta;\r\n        winner = CHIP_EMPTY_CELL;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Move un done\\n\";\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Board after undoing:\\n\";\r\n        printState(std::cerr, depth - 1);\r\n#endif\r\n\r\n        // process the new utility: v takes max of them\r\n        if (v < u) {\r\n#ifdef PRINT_ALL_DEBUG\r\n            printInitialTabs(std::cerr, depth - 1); std::cerr << \"This u is new max utility\\n\";\r\n#endif\r\n            v = u;\r\n            if (put_best_action_col_in_this != nullptr) {\r\n                *put_best_action_col_in_this = c;\r\n            }\r\n        }\r\n    }\r\n\r\n    return v;\r\n}\r\n\r\nint Connect4::minimax_min_value(int depth, int* put_best_action_col_in_this) {\r\n#ifdef PRINT_ALL_DEBUG\r\n    printInitialTabs(std::cerr, depth - 1); std::cerr << \"Minimax:MIN depth:\" << depth << '\\n';\r\n#endif\r\n\r\n    // if terminal test passed: return utility of the state\r\n    if (winner == CHIP_FIRST_PLAYER) return MINIMAX_POSITIVE_INFINITE;\r\n    else if (winner == CHIP_SECOND_PLAYER) return MINIMAX_NEGATIVE_INFINITE;\r\n\r\n    if (depth >= MINIMAX_DEPTH) return get_utility();\r\n\r\n#ifdef PRINT_ALL_DEBUG\r\n    printInitialTabs(std::cerr, depth - 1); std::cerr << \"Not a leaf node\\n\";\r\n#endif\r\n\r\n    int v = MINIMAX_POSITIVE_INFINITE + 1;  // so that at least one action is chosen\r\n    for (int c = 0; c < NUM_COLS; c++) {\r\n        if (!can_place_chip_in_col(c)) continue;\r\n\r\n        // play action\r\n        int resting_row = get_resting_row_for_a_chip_placed_in_col(c);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Play col:\" << c << \" row:\" << resting_row << '\\n';\r\n#endif\r\n\r\n        board[resting_row][c] = CHIP_SECOND_PLAYER;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Board after the move:\\n\";\r\n        printState(std::cerr, depth - 1);\r\n#endif\r\n\r\n        Utility uDelta = getUtilityDeltaOfTheMove(resting_row, c, false);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"utilityDelta: \" << uDelta << '\\n';\r\n#endif\r\n\r\n        boardUtility += uDelta;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"boardUtility: \" << boardUtility << '\\n';\r\n#endif\r\n\r\n        // get max value of the result\r\n        int u = minimax_max_value(depth + 1, nullptr);\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Result of calling max_value for next depth = u = \" << u << '\\n';\r\n#endif\r\n\r\n        // undo play action\r\n        board[resting_row][c] = CHIP_EMPTY_CELL;\r\n        boardUtility -= uDelta;\r\n        winner = CHIP_EMPTY_CELL;\r\n#ifdef PRINT_ALL_DEBUG\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Move un done\\n\";\r\n        printInitialTabs(std::cerr, depth - 1); std::cerr << \"Board after undoing:\\n\";\r\n        printState(std::cerr, depth - 1);\r\n#endif\r\n\r\n        // process the new utility: v takes min of them\r\n        if (v > u) {\r\n#ifdef PRINT_ALL_DEBUG\r\n            printInitialTabs(std::cerr, depth - 1); std::cerr << \"This u is new max utility\\n\";\r\n#endif\r\n            v = u;\r\n            if (put_best_action_col_in_this != nullptr) {\r\n                *put_best_action_col_in_this = c;\r\n            }\r\n        }\r\n    }\r\n    return v;\r\n}\r\n\r\nint Connect4::get_utility() {\r\n    num_times_get_utility_is_called++;\r\n    return boardUtility.getAsInt();\r\n}\r\n\r\nUtility Connect4::getUtilityDeltaOfTheMove(int row, int col, bool is_p1_turn) {\r\n    Utility utilityDelta;\r\n    Cell curCell(row, col);\r\n\r\n    static const int FOUR_DIRECTIONS[] = {UP, RIGHT, UP_RIGHT, DOWN_RIGHT};\r\n    for (int d : FOUR_DIRECTIONS) {\r\n        for (int starting_cell_position_delta = 0; starting_cell_position_delta < 4; starting_cell_position_delta++) {\r\n            Cell cell = curCell.get_neighbor(curCell.get_opposite_direction(d), starting_cell_position_delta);\r\n\r\n            // check if this starting cell is of a valid line\r\n            if (!(cell.is_in_bounds(NUM_ROWS, NUM_COLS) && cell.get_neighbor(d, 3).is_in_bounds(NUM_ROWS, NUM_COLS))) {\r\n                continue;\r\n            }\r\n            \r\n            int num_p1_chips = 0;\r\n            int num_p2_chips = 0;\r\n            \r\n            for (int i = 0; i < 4; i++) {\r\n\r\n                if (board[cell.row][cell.col] == CHIP_FIRST_PLAYER) {\r\n                    num_p1_chips++;\r\n                } else if (board[cell.row][cell.col] == CHIP_SECOND_PLAYER) {\r\n                    num_p2_chips++;\r\n                }\r\n\r\n                cell.set_to_neighbor(d);\r\n            }\r\n\r\n            if (num_p1_chips == NUM_CHIPS_TO_BE_CONNECTED) {\r\n                winner = CHIP_FIRST_PLAYER;\r\n                utilityDelta.p1_score = utilityDelta.p2_score = 0;\r\n                return utilityDelta;\r\n            } else if (num_p2_chips == NUM_CHIPS_TO_BE_CONNECTED) {\r\n                winner = CHIP_SECOND_PLAYER;\r\n                utilityDelta.p1_score = utilityDelta.p2_score = 0;\r\n                return utilityDelta;\r\n            }\r\n\r\n            // a dropped chip will\r\n            // either add to the utility of the dropper\r\n            // or remove the previously added utility of opponent\r\n            // or no change\r\n\r\n            if (is_p1_turn) {\r\n                if (num_p2_chips == 0) {\r\n                    // no opponent's chips => utility boost (1 more chip added to line)\r\n                    utilityDelta.p1_score++;\r\n                } else {  // opponent's chips already exist in this line\r\n                    if (num_p1_chips == 1) {\r\n                        // blocking for the first time\r\n                        utilityDelta.p2_score -= num_p2_chips;\r\n                    } else {\r\n                        // already blocked this line for the opponent\r\n                        // no change\r\n                    }\r\n                }\r\n            } else { // p2's turn\r\n                if (num_p1_chips == 0) {\r\n                    utilityDelta.p2_score++;\r\n                } else {\r\n                    if (num_p2_chips == 1) {\r\n                        utilityDelta.p1_score -= num_p1_chips;\r\n                    } else {\r\n                        // no change\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return utilityDelta;\r\n}\r\n\r\n\r\nint main()\r\n{\r\n    Connect4 connect4;\r\n\r\n    // initialization input\r\n    int myId; // 0 or 1 (Player 0 plays first)\r\n    int oppId; // if your index is 0, this will be 1, and vice versa\r\n    std::cin >> myId >> oppId; std::cin.ignore();\r\n\r\n    // game loop\r\n    while (1) {\r\n        // input turn index\r\n        int turnIndex; // starts from 0; As the game progresses, Player0 gets [0,2,4,...] and Player1 gets [1,3,5,...]\r\n        std::cin >> turnIndex; std::cin.ignore();\r\n        if (turnIndex < 0) break;  // for local run purpose\r\n\r\n        // input board\r\n        for (int i = 0; i < 7; i++) {\r\n            std::string boardRow; // one row of the board (from top to bottom)\r\n            std::cin >> boardRow; std::cin.ignore();\r\n            connect4.set_one_board_row(i, boardRow);\r\n        }\r\n\r\n        // input valid actions\r\n        int numValidActions; // number of unfilled columns in the board\r\n        std::cin >> numValidActions; std::cin.ignore();\r\n        for (int i = 0; i < numValidActions; i++) {\r\n            int action; // a valid column index into which a chip can be dropped\r\n            std::cin >> action; std::cin.ignore();\r\n        }\r\n\r\n        // input opponent previous action\r\n        int oppPreviousAction; // opponent's previous chosen column index (will be -1 for Player 0 in the first turn)\r\n        std::cin >> oppPreviousAction; std::cin.ignore();\r\n\r\n        // Write an action using cout. DON'T FORGET THE \"<< endl\"\r\n        // To debug: cerr << \"Debug messages...\" << endl;\r\n\r\n\r\n        // Output a column index to drop the chip in. Append message to show in the viewer.\r\n        std::cout << connect4.get_move(myId) << std::endl;\r\n        std::cerr << std::endl;\r\n    }\r\n}\r\n",
          "testCases": [],
          "maxPlayers": 2,
          "minPlayers": 2,
          "statements": {
            "1": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\r\n<div class=\"statement-body\">\r\n\r\n  <!-- GOAL -->\r\n  <div class=\"statement-section statement-goal\">\r\n    <h1>\r\n      <span class=\"icon icon-goal\">&nbsp;</span>\r\n      <span>The Goal</span>\r\n    </h1>\r\n    <div class=\"statement-goal-content\">\r\n      The aim of this game is to connect at least 4 of your chips in any direction.\r\n    </div>\r\n  </div>\r\n\r\n  <!-- RULES -->\r\n  <div class=\"statement-section statement-rules\">\r\n    <h1>\r\n      <span class=\"icon icon-rules\">&nbsp;</span>\r\n      <span>Rules</span>\r\n    </h1>\r\n    <div>\r\n      <div class=\"statement-rules-content\">\r\n        The game takes place in a 7x9 board (7 Rows, and 9 Columns).<br>\r\n        Each player takes turns to drop chips into one of the columns.<br>\r\n        <br>\r\n        The game works as follows:\r\n        <ul>\r\n          <li>A player gets full state of the board as input.</li>\r\n          <li>The player chooses a column to drop their chip in (outputs a single integer in range [0,8])</li>\r\n          <li>The chip falls in that column of the board and settles in the bottom most empty cell.</li>\r\n        </ul>\r\n        <strong>Note:</strong><br>\r\n        There are 9 columns, indices are [0,8].<br>\r\n        0 => left most column.<br>\r\n        8 => right most column.\r\n        <br><br>\r\n        <strong>The STEAL move for the second player: (optional)</strong><br>\r\n        <ul>\r\n          <li>The second player can play \"STEAL\" for their first action.</li>\r\n          <li>This action does not place a new chip on the board but will convert the opponent's one and only existing chip into the second player's own chip.</li>\r\n          <li>This action is available only to the second player, and only for their first action.</li>\r\n          <li>An example is illustrated below<br>\r\n            <table style=\"border-collapse: collapse; width: 100%\">\r\n              <tr>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  <img src=\"https://github.com/AshKcg/cg-multi-connect4/raw/master/config/board250-1.jpg\" alt=\"Img: First player's action\">\r\n                </td>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  <img src=\"https://github.com/AshKcg/cg-multi-connect4/raw/master/config/board250-2.jpg\" alt=\"Img: Second player's action\">\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  First player placed a chip in<br>the middle column.\r\n                </td>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  Second Player used \"STEAL\"<br>and converted the existing chip.\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </li>\r\n          <li>The second player can output either the word <const>STEAL</const> or the integer <const>-2</const> for this action.</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"statement-victory-conditions\">\r\n    <div class=\"icon victory\"></div>\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Victory Conditions</div>\r\n      <div class=\"text\">\r\n        <ul style=\"padding-top:0;padding-bottom:0\"><li>\r\n          At least 4 of your chips are connected in any one direction (horizontal, vertical, or diagonal).\r\n        </li></ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"statement-lose-conditions\">\r\n    <div class=\"icon lose\"></div>\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Defeat Conditions</div>\r\n      <div class=\"text\">\r\n        <ul style=\"padding-top:0;padding-bottom:0\">\r\n          <li>Your program does not provide a command in the allotted time or one of the commands is unrecognized.</li>\r\n          <li>It chooses a column which is already filled, or, not in range i.e. not in [0,8].</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <br>\r\n  <h3 style=\"font-size:14px;font-weight:700;padding-top:15px;color:#838891;padding-bottom:15px\"> Debugging tips</h3>\r\n  <ul>\r\n    <li>Append text with a preceding space after your output and that text will appear below your player's name. Longer messages will be shown in lines of 15 characters.</li>\r\n    <li>Press the gear icon on the viewer to access extra display options.</li>\r\n    <li>Use the keyboard to control the action: space to play/pause, arrows to step 1 frame at a time.</li>\r\n  </ul>\r\n  <br>\r\n\r\n  <!-- PROTOCOL -->\r\n  <div class=\"statement-section statement-protocol\">\r\n    <h1>\r\n      <span class=\"icon icon-protocol\">&nbsp;</span>\r\n      <span>Game Input</span>\r\n    </h1>\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"text\">The program must first read the initialization data from standard input.\r\n        Then, within an infinite loop, read the contextual data from the standard input and\r\n        provide to the standard output one line with the index of the chosen column.</div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Initialization Input</div>\r\n      <div class=\"text\">\r\n        <p><span class=\"statement-lineno\">One line: </span>2 integers <var>myId</var>, <var>oppId</var>.\r\n          One of them will be <const>0</const> and the other will be <const>1</const>. <var>myId</var> will be <const>0</const> for first player and <const>1</const> for second player.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Input for one game turn</div>\r\n      <div class=\"text\">\r\n        <p><span class=\"statement-lineno\">\r\n          First Line: </span>integer <var>turnIndex</var>. Index of the current turn. As the game progresses,\r\n          first player receives <const>0,2,4,...</const> and second player receives <const>1,3,5,...</const>.</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">\r\n          Next <const>7</const> lines: </span>A string <var>boardRow</var> representing one row of the board\r\n          containing 9 characters (one character per column) with <const>'.'</const> for empty cells, <const>'0'</const> for cells with first player's chips,\r\n          and <const>'1'</const> for cells with second player's chips. The rows are given one by one from top to bottom.</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next line: </span>integer <var>numValidActions</var>:\r\n          the number of valid actions available to your bot (equal to the number of unfilled columns in the board, plus one for \"STEAL\" if it is second turn of the game).</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next <var>numValidActions</var> lines: </span>1 integer\r\n          <var>action</var>: one valid action (index of an unfilled column, or, -2 for STEAL in the second turn of the game).</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next line: </span>integer <var>oppPreviousAction</var>:\r\n          the column index chosen by the opponent in the previous turn (first player gets <const>-1</const> at the beginning, and <const>-2</const> if the opponent used STEAL).</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Output</div>\r\n      <div class=\"text\">\r\n        <span class=\"statement-lineno\">A single integer</span> the index of the column to drop the chip in. (Optional: If it is the second turn of the game (turnIndex == 1), then the second player can output STEAL or -2)\r\n        <br>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Constraints</div>\r\n      <div class=\"text\">\r\n        <const>0</const> <= <var>turnIndex</var> < <const>64</const>. (63 cells(7*9), and one STEAL turn if used)<br>\r\n        <const>1</const> <= <var>numValidActions</var> <= <const>10</const>. (9 cols, and one STEAL in second turn for second player)<br>\r\n        Response time per turn  <const>100</const> ms.<br>\r\n        Response time for the first turn <= <const>1000</const> ms.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <p>The source code of this game is available on <a href=\"https://github.com/AshKcg/cg-multi-connect4/\">GitHub</a>.</p>\r\n    </div>\r\n  </div>\r\n\r\n</div>",
            "2": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\r\n<div class=\"statement-body\">\r\n\r\n  <!-- GOAL -->\r\n  <div class=\"statement-section statement-goal\">\r\n    <h1>\r\n      <span class=\"icon icon-goal\">&nbsp;</span>\r\n      <span>The Goal</span>\r\n    </h1>\r\n    <div class=\"statement-goal-content\">\r\n      The aim of this game is to connect at least 4 of your chips in any direction.\r\n    </div>\r\n  </div>\r\n\r\n  <!-- RULES -->\r\n  <div class=\"statement-section statement-rules\">\r\n    <h1>\r\n      <span class=\"icon icon-rules\">&nbsp;</span>\r\n      <span>Rules</span>\r\n    </h1>\r\n    <div>\r\n      <div class=\"statement-rules-content\">\r\n        The game takes place in a 7x9 board (7 Rows, and 9 Columns).<br>\r\n        Each player takes turns to drop chips into one of the columns.<br>\r\n        <br>\r\n        The game works as follows:\r\n        <ul>\r\n          <li>A player gets full state of the board as input.</li>\r\n          <li>The player chooses a column to drop their chip in (outputs a single integer in range [0,8])</li>\r\n          <li>The chip falls in that column of the board and settles in the bottom most empty cell.</li>\r\n        </ul>\r\n        <strong>Note:</strong><br>\r\n        There are 9 columns, indices are [0,8].<br>\r\n        0 => left most column.<br>\r\n        8 => right most column.\r\n        <br><br>\r\n        <strong>The STEAL move for the second player: (optional)</strong><br>\r\n        <ul>\r\n          <li>The second player can play \"STEAL\" for their first action.</li>\r\n          <li>This action does not place a new chip on the board but will convert the opponent's one and only existing chip into the second player's own chip.</li>\r\n          <li>This action is available only to the second player, and only for their first action.</li>\r\n          <li>An example is illustrated below<br>\r\n            <table style=\"border-collapse: collapse; width: 100%\">\r\n              <tr>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  <img src=\"https://github.com/AshKcg/cg-multi-connect4/raw/master/config/board250-1.jpg\" alt=\"Img: First player's action\">\r\n                </td>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  <img src=\"https://github.com/AshKcg/cg-multi-connect4/raw/master/config/board250-2.jpg\" alt=\"Img: Second player's action\">\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  First player placed a chip in<br>the middle column.\r\n                </td>\r\n                <td style=\"border: 1px solid #dddddd; text-align: center;\">\r\n                  Second Player used \"STEAL\"<br>and converted the existing chip.\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </li>\r\n          <li>The second player can output either the word <const>STEAL</const> or the integer <const>-2</const> for this action.</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"statement-victory-conditions\">\r\n    <div class=\"icon victory\"></div>\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Victory Conditions</div>\r\n      <div class=\"text\">\r\n        <ul style=\"padding-top:0;padding-bottom:0\"><li>\r\n          At least 4 of your chips are connected in any one direction (horizontal, vertical, or diagonal).\r\n        </li></ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"statement-lose-conditions\">\r\n    <div class=\"icon lose\"></div>\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Defeat Conditions</div>\r\n      <div class=\"text\">\r\n        <ul style=\"padding-top:0;padding-bottom:0\">\r\n          <li>Your program does not provide a command in the allotted time or one of the commands is unrecognized.</li>\r\n          <li>It chooses a column which is already filled, or, not in range i.e. not in [0,8].</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <br>\r\n  <h3 style=\"font-size:14px;font-weight:700;padding-top:15px;color:#838891;padding-bottom:15px\"> Debugging tips</h3>\r\n  <ul>\r\n    <li>Append text with a preceding space after your output and that text will appear below your player's name. Longer messages will be shown in lines of 15 characters.</li>\r\n    <li>Press the gear icon on the viewer to access extra display options.</li>\r\n    <li>Use the keyboard to control the action: space to play/pause, arrows to step 1 frame at a time.</li>\r\n  </ul>\r\n  <br>\r\n\r\n  <!-- PROTOCOL -->\r\n  <div class=\"statement-section statement-protocol\">\r\n    <h1>\r\n      <span class=\"icon icon-protocol\">&nbsp;</span>\r\n      <span>Game Input</span>\r\n    </h1>\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"text\">The program must first read the initialization data from standard input.\r\n        Then, within an infinite loop, read the contextual data from the standard input and\r\n        provide to the standard output one line with the index of the chosen column.</div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Initialization Input</div>\r\n      <div class=\"text\">\r\n        <p><span class=\"statement-lineno\">One line: </span>2 integers <var>myId</var>, <var>oppId</var>.\r\n          One of them will be <const>0</const> and the other will be <const>1</const>. <var>myId</var> will be <const>0</const> for first player and <const>1</const> for second player.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Input for one game turn</div>\r\n      <div class=\"text\">\r\n        <p><span class=\"statement-lineno\">\r\n          First Line: </span>integer <var>turnIndex</var>. Index of the current turn. As the game progresses,\r\n          first player receives <const>0,2,4,...</const> and second player receives <const>1,3,5,...</const>.</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">\r\n          Next <const>7</const> lines: </span>A string <var>boardRow</var> representing one row of the board\r\n          containing 9 characters (one character per column) with <const>'.'</const> for empty cells, <const>'0'</const> for cells with first player's chips,\r\n          and <const>'1'</const> for cells with second player's chips. The rows are given one by one from top to bottom.</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next line: </span>integer <var>numValidActions</var>:\r\n          the number of valid actions available to your bot (equal to the number of unfilled columns in the board, plus one for \"STEAL\" if it is second turn of the game).</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next <var>numValidActions</var> lines: </span>1 integer\r\n          <var>action</var>: one valid action (index of an unfilled column, or, -2 for STEAL in the second turn of the game).</p><br>\r\n\r\n        <p><span class=\"statement-lineno\">Next line: </span>integer <var>oppPreviousAction</var>:\r\n          the column index chosen by the opponent in the previous turn (first player gets <const>-1</const> at the beginning, and <const>-2</const> if the opponent used STEAL).</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Output</div>\r\n      <div class=\"text\">\r\n        <span class=\"statement-lineno\">A single integer</span> the index of the column to drop the chip in. (Optional: If it is the second turn of the game (turnIndex == 1), then the second player can output STEAL or -2)\r\n        <br>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <div class=\"title\">Constraints</div>\r\n      <div class=\"text\">\r\n        <const>0</const> <= <var>turnIndex</var> < <const>64</const>. (63 cells(7*9), and one STEAL turn if used)<br>\r\n        <const>1</const> <= <var>numValidActions</var> <= <const>10</const>. (9 cols, and one STEAL in second turn for second player)<br>\r\n        Response time per turn  <const>100</const> ms.<br>\r\n        Response time for the first turn <= <const>1000</const> ms.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Protocol block -->\r\n    <div class=\"blk\">\r\n      <p>The source code of this game is available on <a href=\"https://github.com/AshKcg/cg-multi-connect4/\">GitHub</a>.</p>\r\n    </div>\r\n  </div>\r\n\r\n</div>"
          },
          "questionType": "multi",
          "stubGenerator": "read myId:int oppId:int\r\ngameloop\r\nread turnIndex:int\r\nloop 7 read boardRow:word(9)\r\nread numValidActions:int\r\nloop numValidActions read action:int\r\nread oppPreviousAction:int\r\nwrite 0\r\n\r\nINPUT\r\nmyId: 0 or 1 (Player 0 plays first)\r\noppId: if your index is 0, this will be 1, and vice versa\r\nturnIndex: starts from 0; As the game progresses, first player gets [0,2,4,...] and second player gets [1,3,5,...]\r\nboardRow: one row of the board (from top to bottom)\r\nnumValidActions: number of unfilled columns in the board\r\naction: a valid column index into which a chip can be dropped\r\noppPreviousAction: opponent's previous chosen column index (will be -1 for first player in the first turn)\r\n\r\nOUTPUT\r\nOutput a column index to drop the chip in. Append message to show in the viewer.\r\n\r\nSTATEMENT\r\nDrop chips in the columns.\r\nConnect at least 4 of your chips in any direction to win.\r\n",
          "welcomePopups": {},
          "aiCodeExtension": "cpp",
          "criteriaLanguageMap": {}
        }
      },
      "coverBinaryId": 56303266624470,
      "directoryPrefix": "community/1360513-1608469222400",
      "allowSourceDownload": false
    },
    "draft": false,
    "readyForModeration": true
  },
  "validatedFor": 156800546092,
  "avatar": 83292609243558,
  "commentCount": 94,
  "upVotes": 39,
  "downVotes": 0,
  "validateAction": {
    "actionId": 533971,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1611061537000,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1611377215906,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1613930138983,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}