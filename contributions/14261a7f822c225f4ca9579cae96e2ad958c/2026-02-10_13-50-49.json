{
  "id": 1426,
  "activeVersion": 25,
  "score": 2,
  "votableId": 8148284,
  "codingamerId": 2676033,
  "views": 143,
  "commentableId": 8084939,
  "title": "Trits (Balanced Ternary Computing)",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "lmat",
  "publicHandle": "14261a7f822c225f4ca9579cae96e2ad958c",
  "codingamerHandle": "ddb6435f9201901ee744bd42903363b13306762",
  "lastVersion": {
    "version": 25,
    "autocloseTime": 1532379662723,
    "data": {
      "title": "Trits (Balanced Ternary Computing)",
      "topics": [
        {
          "id": 67,
          "handle": "parsing",
          "labelMap": {
            "1": "Parsing",
            "2": "Parsing"
          },
          "pageTitle": "Parsing: exercises and theory",
          "puzzleCount": 2,
          "parentTopicId": 41,
          "contentDetailsId": 102
        },
        {
          "id": 69,
          "handle": "pattern-recognition",
          "labelMap": {
            "1": "Reconnaissance de motifs",
            "2": "Pattern recognition"
          },
          "pageTitle": "Pattern recognition: exercises and theory",
          "puzzleCount": 3,
          "parentTopicId": 41,
          "contentDetailsId": 88
        },
        {
          "id": 94,
          "handle": "mathematics",
          "labelMap": {
            "1": "Mathematics",
            "2": "Mathematics"
          },
          "puzzleCount": 3,
          "parentTopicId": 93
        }
      ],
      "solution": "#include <iostream>\n#include <algorithm>\n#include <sstream>\n\nint parse_ternary(std::string const & str)\n{\n    int ret{0};\n    unsigned multiplier{1};\n    std::for_each(str.crbegin(), str.crend(), [&] (auto c)\n    {\n        switch (c)\n        {\n            case '1': ret += multiplier; break;\n            case 'T': ret -= multiplier; break;\n        }\n        multiplier *= 3;\n    });\n    return ret;\n}\n\nstd::string get_ternary(int val)\n{\n    std::ostringstream str;\n    while (val)\n    {\n        auto rem {val % 3};\n        val /=3;\n        if (rem == 2)\n        {\n            rem = -1;\n            ++val;\n        }\n        str << (!rem ? '0' : (rem > 0 ? '1' : 'T'));\n    }\n    auto ret {str.str()};\n    std::reverse(ret.begin(), ret.end());\n    return ret;\n}\n\nint main()\n{\n    std::string lhs, rhs, op;\n    std::cin >> lhs >> op >> rhs;\n    if (op == \"<<\")\n    {\n        std::cout << lhs + std::string(parse_ternary(rhs), '0') << '\\n';\n        return 0;\n    }\n    if (op == \">>\")\n    {\n        auto ret{lhs.substr(0, std::max(static_cast<int>(lhs.size()) - parse_ternary(rhs), 0))};\n        if (!ret.size())\n            ret = \"0\";\n        std::cout << ret << '\\n';\n        return 0;\n    }\n    int ilhs {parse_ternary(lhs)};\n    int irhs {parse_ternary(rhs)};\n    if (op == \"+\")\n    {\n        std::cout << get_ternary(ilhs + irhs) << '\\n';\n        return 0;\n    }\n    if (op == \"-\")\n    {\n        std::cout << get_ternary(ilhs - irhs) << '\\n';\n        return 0;\n    }\n    if (op == \"*\")\n    {\n        std::cout << get_ternary(ilhs * irhs) << '\\n';\n        return 0;\n    }\n    return 1;\n}",
      "statement": "Although ternary computing has fallen out of favor these last 40 years or more, there is reason to think that it may be an important part of the future. Whereas each digit in a binary system has two possible states, ternary digits have three possible states. In the Balanced Ternary system, each digit represents either -1, 0, or +1.\n\nIn binary, each digit is worth its face value (1 or 0) multiplied by a power of two determined by its position:\n\n<<Binary>>\n`┌──────> 1 * (2^3) = 8\n│┌─────> 1 * (2^2) = 4\n││┌────> 0 * (2^1) = 0\n│││┌───> 1 * (2^0) = 1\n1101               = 13`\nIn Balanced Ternary, the system is similar except each value (-1, 0, or +1) is multiplied by a power of <<3>> determined by its position. \"1\" and \"0\" represent themselves and \"T\" represents  -1 (it sort of looks like \"-1\", right?):\n\n<<Balanced Ternary>>\n`┌───────> +1 * (3^4) = 81\n│┌──────> -1 * (3^3) = -27\n││┌─────>  0 * (3^2) = 0\n│││┌────> +1 * (3^1) = 3\n││││┌───> -1 * (3^0) = -1\n1T01T                = 56`\nIn order to be able to use Balanced Ternary, we need to be able to do some rudimentary operations. You must develop an application that can evaluate expressions using five binary operators: left shift, right shift, addition, subtraction, and multiplication. The shift operators do not wrap. Some examples:\n\n<<Examples>>\n`1T0 >> 1 = 1T\n1T0 >> 1T = 1\n1T0 << 1 = 1T00\n1T0 + 1 = 1T1\n1T1 + 1 = 10T\n1T0 - 1 = 1TT\n1T * 1T = 11`\n\nNote: You may want to complete the easier related puzzle first: https://www.codingame.com/training/easy/balanced-ternary-computer-encode",
      "testCases": [
        {
          "title": "Addition",
          "isTest": true,
          "testIn": "1T1\n+\n11",
          "testOut": "11T",
          "isValidator": false
        },
        {
          "title": "Addition Validator",
          "isTest": false,
          "testIn": "1T1\n+\n10",
          "testOut": "101",
          "isValidator": true
        },
        {
          "title": "Subtraction",
          "isTest": true,
          "testIn": "1T11\n-\n10",
          "testOut": "1T01",
          "isValidator": false
        },
        {
          "title": "Subtraction Validator",
          "isTest": false,
          "testIn": "1T10\n-\n10",
          "testOut": "1T00",
          "isValidator": true
        },
        {
          "title": "Multiplication",
          "isTest": true,
          "testIn": "11\n*\n10",
          "testOut": "110",
          "isValidator": false
        },
        {
          "title": "Multiplication Validator",
          "isTest": false,
          "testIn": "11\n*\n11",
          "testOut": "1TT1",
          "isValidator": true
        },
        {
          "title": "Shift Up",
          "isTest": true,
          "testIn": "1T0\n<<\n1",
          "testOut": "1T00",
          "isValidator": false
        },
        {
          "title": "Shift Up Validator",
          "isTest": false,
          "testIn": "1T1\n<<\n1",
          "testOut": "1T10",
          "isValidator": true
        },
        {
          "title": "Shift Down",
          "isTest": true,
          "testIn": "1T0\n>>\n1",
          "testOut": "1T",
          "isValidator": false
        },
        {
          "title": "Shift Down Validator",
          "isTest": false,
          "testIn": "1T1\n>>\n1",
          "testOut": "1T",
          "isValidator": true
        },
        {
          "title": "Larger Addition",
          "isTest": true,
          "testIn": "1T001110\n+\n1T110001",
          "testOut": "11111111",
          "isValidator": false
        },
        {
          "title": "Larger Addition Validator",
          "isTest": false,
          "testIn": "1T001110\n+\n1T110000",
          "testOut": "11111110",
          "isValidator": true
        },
        {
          "title": "Too Much Shift Down",
          "isTest": true,
          "testIn": "1TT1T\n>>\n1T0",
          "testOut": "0",
          "isValidator": false
        },
        {
          "title": "Too Much Shift Down Validator",
          "isTest": false,
          "testIn": "1TT1T\n>>\n1T1",
          "testOut": "0",
          "isValidator": true
        },
        {
          "title": "Larger Subtraction",
          "isTest": true,
          "testIn": "11111111\n-\n1T110001",
          "testOut": "1T001110",
          "isValidator": false
        },
        {
          "title": "Larger Subtraction Validator",
          "isTest": false,
          "testIn": "11111111\n-\n1T110000",
          "testOut": "1T001111",
          "isValidator": true
        },
        {
          "title": "Larger Shift Up",
          "isTest": true,
          "testIn": "1T\n<<\n1TT",
          "testOut": "1T00000",
          "isValidator": false
        },
        {
          "title": "Larger Shift Up Validator",
          "isTest": false,
          "testIn": "11\n<<\n1TT",
          "testOut": "1100000",
          "isValidator": true
        }
      ],
      "difficulty": "medium",
      "constraints": "<<In Decimal:>>\n-3280 <= [[lhs]] <= 3280\n-3280 <= [[rhs]] <= 3280\n-3280 <= [[ret]] <= 3280\n<<In Balanced Ternary:>>\nTTTTTTTT <= [[lhs]] <= 11111111\nTTTTTTTT <= [[rhs]] <= 11111111\nTTTTTTTT <= [[ret]] <= 11111111\n\n[[op]] is one of {{+}}, {{-}}, {{>>}} , {{<<}} , {{*}}.",
      "stubGenerator": "read lhs:string(10)\nread op:string(5)\nread rhs:string(10)\nwrite 11T",
      "inputDescription": "<<Line 1:>> The first operand, [[lhs]].\n<<Line 2:>> The operator, [[op]].\n<<Line 3:>> The second operand, [[rhs]].",
      "solutionLanguage": "C++",
      "outputDescription": "A single line containing the evaluation of the input expression in Balanced Ternary, [[ret]]."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Although ternary computing has fallen out of favor these last 40 years or more, there is reason to think that it may be an important part of the future. Whereas each digit in a binary system has two possible states, ternary digits have three possible states. In the Balanced Ternary system, each digit represents either -1, 0, or +1.<br><br>In binary, each digit is worth its face value (1 or 0) multiplied by a power of two determined by its position:<br><br><strong>Binary</strong><br><pre style=\"font-family: monospace\">┌──────&gt; 1 * (2^3) = 8<br>│┌─────&gt; 1 * (2^2) = 4<br>││┌────&gt; 0 * (2^1) = 0<br>│││┌───&gt; 1 * (2^0) = 1<br>1101               = 13</pre><br>In Balanced Ternary, the system is similar except each value (-1, 0, or +1) is multiplied by a power of <strong>3</strong> determined by its position. &quot;1&quot; and &quot;0&quot; represent themselves and &quot;T&quot; represents  -1 (it sort of looks like &quot;-1&quot;, right?):<br><br><strong>Balanced Ternary</strong><br><pre style=\"font-family: monospace\">┌───────&gt; +1 * (3^4) = 81<br>│┌──────&gt; -1 * (3^3) = -27<br>││┌─────&gt;  0 * (3^2) = 0<br>│││┌────&gt; +1 * (3^1) = 3<br>││││┌───&gt; -1 * (3^0) = -1<br>1T01T                = 56</pre><br>In order to be able to use Balanced Ternary, we need to be able to do some rudimentary operations. You must develop an application that can evaluate expressions using five binary operators: left shift, right shift, addition, subtraction, and multiplication. The shift operators do not wrap. Some examples:<br><br><strong>Examples</strong><br><pre style=\"font-family: monospace\">1T0 &gt;&gt; 1 = 1T<br>1T0 &gt;&gt; 1T = 1<br>1T0 &lt;&lt; 1 = 1T00<br>1T0 + 1 = 1T1<br>1T1 + 1 = 10T<br>1T0 - 1 = 1TT<br>1T * 1T = 11</pre><br><br>Note: You may want to complete the easier related puzzle first: https://www.codingame.com/training/easy/balanced-ternary-computer-encode</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> The first operand, <var>lhs</var>.<br><strong>Line 2:</strong> The operator, <var>op</var>.<br><strong>Line 3:</strong> The second operand, <var>rhs</var>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">A single line containing the evaluation of the input expression in Balanced Ternary, <var>ret</var>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\"><strong>In Decimal:</strong><br>-3280 &lt;= <var>lhs</var> &lt;= 3280<br>-3280 &lt;= <var>rhs</var> &lt;= 3280<br>-3280 &lt;= <var>ret</var> &lt;= 3280<br><strong>In Balanced Ternary:</strong><br>TTTTTTTT &lt;= <var>lhs</var> &lt;= 11111111<br>TTTTTTTT &lt;= <var>rhs</var> &lt;= 11111111<br>TTTTTTTT &lt;= <var>ret</var> &lt;= 11111111<br><br><var>op</var> is one of <const>+</const>, <const>-</const>, <const>&gt;&gt;</const> , <const>&lt;&lt;</const> , <const>*</const>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">1T1\n+\n11</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">11T</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 240699047825,
  "commentCount": 16,
  "upVotes": 2,
  "downVotes": 0,
  "validateAction": {
    "actionId": 237077,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}