{
  "id": 981,
  "activeVersion": 27,
  "score": 1,
  "votableId": 6529075,
  "codingamerId": 878974,
  "views": 328,
  "commentableId": 6468719,
  "title": "Factorials of primes decomposition",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "nicola",
  "publicHandle": "98115ecbafec4a3da3ef86e07c9aaeef81b",
  "codingamerHandle": "21bf42f790de293c3aef398f18cd2627479878",
  "lastVersion": {
    "version": 27,
    "autocloseTime": 1532016703560,
    "data": {
      "title": "Factorials of primes decomposition",
      "topics": [
        {
          "id": 129,
          "handle": "arithmetic",
          "labelMap": {
            "1": "Arithmetic",
            "2": "Arithmetic"
          },
          "puzzleCount": 7,
          "parentTopicId": 93
        },
        {
          "id": 143,
          "handle": "primes",
          "labelMap": {
            "1": "Primes",
            "2": "Primes"
          },
          "puzzleCount": 4,
          "parentTopicId": 93
        }
      ],
      "solution": "def cf(n,p):\n    pp=p\n    s=0\n    r=1\n\n    while True:\n        r=n//pp\n        if r:\n            s+=r\n            pp*=p\n        else:\n            break\n    return s\n\nn=input().split(\"/\")\nif len(n)==1:\n    n,d=int(n[0]),1\nelse:\n    n,d=map(int,n)\n\nnb=max(n,d)\ncrible=[True]*(nb+1)\ncrible[0:2]=False,False\nm=2\nwhile m<=(nb+1)**.5:\n    crible[2*m::m]=[False for _ in range(2*m,nb+1,m)]\n    m+=1\n    while not crible[m]:\n        m+=1\nprem=[i for i in range(nb+1) if crible[i]]\n\ndef liste(nb):\n    div=dict()\n    i=0\n    while nb!=1:\n        if nb%prem[i]==0:\n            div[prem[i]]=0\n            while nb%prem[i]==0:\n                div[prem[i]]+=1\n                nb//=prem[i]\n        i+=1\n    d=dict()\n    while div:\n        f=max(div)\n        n=div[f]\n        l={p:cf(f,p) for p in prem if p<=f}\n        for p,e in l.items():\n            d[p]=e*n\n            if p in div:\n                div[p]-=e*n\n            else:\n                div[p]=-e*n\n        div.pop(f)\n    return d\n\nnp=liste(n)\ndp=liste(d)\nfor p,e in dp.items():\n    if p in np:\n        np[p]-=e\n    else:\n        np[p]=-e\ns=sorted(np,reverse=True)\nprint(\" \".join(\"%d#%d\"%(p,np[p]) for p in s if np[p] and p!=1))",
      "statement": "You have to decompose a positive integer/fraction as a product of powers of factorials of prime numbers.\n\nFor example,\n22 = {{(11!)^1 × (7!)^(−1) × (5!)^(−1) × (3!)^(−1) × (2!)^1}}\n10/9 = {{(5!)^1 × (3!)^(−3) × (2!)^1}}\n\nUse this special notation: [[prime number]]{{#}}[[power]]\nto denote each term, e.g. {{(11!)^4}} is denoted as {{11#4}}.\n\nOutput the non-zero terms only, with space separation, and order them in descending order of the prime numbers.\n\nThe above examples hence become:\n22 = {{11#1 7#-1 5#-1 3#-1 2#1}}\n10/9 = {{5#1 3#-3 2#1}}",
      "testCases": [
        {
          "title": "Pure factorial",
          "isTest": true,
          "testIn": "6",
          "testOut": "3#1",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Pure factorial",
          "isTest": false,
          "testIn": "5040",
          "testOut": "7#1",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Small integer",
          "isTest": true,
          "testIn": "22",
          "testOut": "11#1 7#-1 5#-1 3#-1 2#1",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Small integer",
          "isTest": false,
          "testIn": "42",
          "testOut": "7#1 5#-1",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Power of factorial",
          "isTest": true,
          "testIn": "36",
          "testOut": "3#2",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Power of factorial",
          "isTest": false,
          "testIn": "14400",
          "testOut": "5#2",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Bigger integer",
          "isTest": true,
          "testIn": "2018",
          "testOut": "1009#1 997#-1 503#-1 491#1 83#1 79#-1 71#1 67#-2 61#1 59#-1 47#1 37#-1 31#3 23#-3 19#2 13#-1 11#4 7#-3 5#-8 3#-9 2#16",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Bigger integer",
          "isTest": false,
          "testIn": "1951",
          "testOut": "1951#1 1949#-1 13#-1 11#1 5#-2 3#2 2#5",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Inverse of factorial",
          "isTest": true,
          "testIn": "1/24",
          "testOut": "3#-1 2#-2",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Inverse of factorial",
          "isTest": false,
          "testIn": "1/720",
          "testOut": "5#-1 3#-1",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Fraction",
          "isTest": true,
          "testIn": "10/9",
          "testOut": "5#1 3#-3 2#1",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Fraction",
          "isTest": false,
          "testIn": "720/121",
          "testOut": "11#-2 7#2 5#3 3#3",
          "isValidator": true,
          "needValidation": false
        }
      ],
      "difficulty": "hard",
      "constraints": "0 < [[N]], [[numerator]], [[denominator]] < 20000\nEvery prime involved is less than 2000.",
      "coverBinaryId": 42882321966341,
      "stubGenerator": "read n:string(20)\nwrite list",
      "inputDescription": "<<Line 1:>> a positive number [[N]], that can be either <<an integer or a fraction>> of the form [[numerator]]{{/}}[[denominator]].",
      "solutionLanguage": "Python3",
      "outputDescription": "<<Line 1:>> The ordered list of the non-zero terms of the decomposition of [[N]], denoted using the special notation."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">You have to decompose a positive integer/fraction as a product of powers of factorials of prime numbers.<br><br>For example,<br>22 = <const>(11!)^1 &times; (7!)^(&minus;1) &times; (5!)^(&minus;1) &times; (3!)^(&minus;1) &times; (2!)^1</const><br>10/9 = <const>(5!)^1 &times; (3!)^(&minus;3) &times; (2!)^1</const><br><br>Use this special notation: <var>prime number</var><const>#</const><var>power</var><br>to denote each term, e.g. <const>(11!)^4</const> is denoted as <const>11#4</const>.<br><br>Output the non-zero terms only, with space separation, and order them in descending order of the prime numbers.<br><br>The above examples hence become:<br>22 = <const>11#1 7#-1 5#-1 3#-1 2#1</const><br>10/9 = <const>5#1 3#-3 2#1</const></span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> a positive number <var>N</var>, that can be either <strong>an integer or a fraction</strong> of the form <var>numerator</var><const>/</const><var>denominator</var>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> The ordered list of the non-zero terms of the decomposition of <var>N</var>, denoted using the special notation.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">0 &lt; <var>N</var>, <var>numerator</var>, <var>denominator</var> &lt; 20000<br>Every prime involved is less than 2000.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">6</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">3#1</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 240319447016,
  "avatar": 26090852120005,
  "commentCount": 18,
  "upVotes": 2,
  "downVotes": 1,
  "validateAction": {
    "actionId": 237978,
    "progress": 1,
    "alreadyDone": false
  },
  "denyAction": {
    "actionId": 213291,
    "progress": 0,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}