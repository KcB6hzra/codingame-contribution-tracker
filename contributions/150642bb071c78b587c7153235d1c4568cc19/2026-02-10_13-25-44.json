{
  "id": 15064,
  "activeVersion": 15,
  "score": 21,
  "votableId": 22983326,
  "codingamerId": 3323757,
  "views": 332,
  "commentableId": 22869825,
  "title": "Calculator",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "ByteWolf",
  "publicHandle": "150642bb071c78b587c7153235d1c4568cc19",
  "codingamerHandle": "42260fcf4daffca50a7a394654cd9c5a7573233",
  "lastVersion": {
    "version": 15,
    "autocloseTime": 1653153180167,
    "data": {
      "title": "Calculator",
      "topics": [],
      "solution": "operations_dictionary={\n    '+': lambda x,y: x+y,\n    '-': lambda x,y: x-y,\n    'x': lambda x,y: x*y,\n    '/': lambda x,y: x/y,\n    '': lambda x,y: y\n}\n\nn = int(input())\n\nmemory = current = 0        #Number stored in memory and number being constructed\nlast_operation = ''         #Last operation key(+ - x /) pressed\nlast_key_type = 0           #0 for numbers or 'AC', 1 for operations and 2 for '='\nstart_number = True         #Start constructing a new number\n\nfor _ in range(n):\n    key = input()\n    if key.isdigit():\n        if last_key_type == 2:      #start a new operation\n            memory = 0\n            last_operation = ''\n        if start_number:            #start to write a new number\n            current = 0\n            start_number = False\n        current = 10*current + int(key) #add key to current number\n        last_key_type = 0\n        print(current)\n        continue\n    elif key == 'AC':               #start a new operation\n        memory = current = 0\n        last_operation = ''\n        last_key_type = 0\n        start_number = True\n    elif key in '+-x/':\n        if not last_key_type:      #Only false if previously pressed +, -, x, / or =. Then:\n            memory = operations_dictionary[last_operation](memory, current) #Operate and\n            start_number = True                                             #start a new number\n        last_key_type = 1\n        last_operation = key\n    elif key == '=':                #Operate and start a new number\n        memory = operations_dictionary[last_operation](memory, current)\n        start_number = True\n        last_key_type = 2\n\n    if memory%1:\n        print(round(memory,3))\n    else:\n        print(int(memory))\n\n\n",
      "statement": "Your task is to output the [[screen]] of a calculator when a [[key]] is pressed. For example:\n-Input {{3}}: Output {{3}}\n-Input {{4}}: Output {{34}}\n-Input {{+}}: Output {{34}}\n-Input {{2}}: Output {{2}}\n-Input {{3}}: Output {{23}}\n-Input {{-}}: Output {{57}}\n-Input {{4}}: Output {{4}}\n-Input {{=}}: Output {{53}}\n-Input {{AC}}: Output {{0}}\n\nThe calculator doesn't take into account the priority of the operators. If the user presses:\n{{2 + 3 x 5}}\nthe final output will be {{25}}\nThe user may press two operation keys consecutively. In that case, the operation that must be taken into account is the second one.\nIf the result has decimal numbers, it must be output with, at most, 3 decimal places. Otherwise, it must be output without a decimal point. Decimal numbers are also stored rounded with 3 decimal places.\nIf the user presses the {{=}} key consecutively, the last operation should be performed repeatedly. For example, {{1 0 - 3 = = =}} is the same as calculating {{10 - 3 - 3 - 3}}.",
      "testCases": [
        {
          "title": "A simple operation",
          "isTest": true,
          "testIn": "7\n2\n5\n+\n6\n-\n7\n=",
          "testOut": "2\n25\n25\n6\n31\n7\n24",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "A simple operation",
          "isTest": false,
          "testIn": "8\n4\n5\n+\n8\n0\n-\n2\n=",
          "testOut": "4\n45\n45\n8\n80\n125\n2\n123",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Multiplication and division",
          "isTest": true,
          "testIn": "8\n9\n3\nx\n1\n2\n/\n5\n=",
          "testOut": "9\n93\n93\n1\n12\n1116\n5\n223.2",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Multiplication and division",
          "isTest": false,
          "testIn": "8\n3\n7\nx\n1\n7\n/\n2\n=",
          "testOut": "3\n37\n37\n1\n17\n629\n2\n314.5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Using AC",
          "isTest": true,
          "testIn": "10\n3\n/\n4\nAC\n7\n/\n4\nx\n8\n=",
          "testOut": "3\n3\n4\n0\n7\n7\n4\n1.75\n8\n14",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Using AC",
          "isTest": false,
          "testIn": "10\n2\n+\n5\nAC\n2\n/\n5\nx\n9\n=",
          "testOut": "2\n2\n5\n0\n2\n2\n5\n0.4\n9\n3.6",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Change of opinion",
          "isTest": true,
          "testIn": "8\n2\n1\nx\n3\n-\n/\n9\n=",
          "testOut": "2\n21\n21\n3\n63\n63\n9\n7",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Change of opinion",
          "isTest": false,
          "testIn": "8\n7\n+\n3\n5\n/\n-\n9\n=",
          "testOut": "7\n7\n3\n35\n42\n42\n9\n33",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Many operations",
          "isTest": true,
          "testIn": "24\n3\n1\n5\n6\n-\n2\n7\n4\n=\n7\n9\nx\n1\n2\n+\n3\n=\n2\nAC\n7\n9\n/\n3\n=",
          "testOut": "3\n31\n315\n3156\n3156\n2\n27\n274\n2882\n7\n79\n79\n1\n12\n948\n3\n951\n2\n0\n7\n79\n79\n3\n26.333",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Many operations",
          "isTest": false,
          "testIn": "22\n6\n1\n7\n-\n8\n7\nx\n5\n=\n2\n1\n/\n7\n+\n8\n=\n7\nAC\n9\n-\n4\n=",
          "testOut": "6\n61\n617\n617\n8\n87\n530\n5\n2650\n2\n21\n21\n7\n3\n8\n11\n7\n0\n9\n9\n4\n5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Press equal many times",
          "isTest": true,
          "testIn": "18\n8\nx\n3\n+\n2\n=\n=\n=\n2\n7\n9\n/\n9\n-\n4\n=\n=\n=",
          "testOut": "8\n8\n3\n24\n2\n26\n28\n30\n2\n27\n279\n279\n9\n31\n4\n27\n23\n19",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Press equal many times",
          "isTest": false,
          "testIn": "18\n9\nx\n7\n+\n6\n=\n=\n=\n1\n7\n5\n/\n7\n-\n6\n=\n=\n=",
          "testOut": "9\n9\n7\n63\n6\n69\n75\n81\n1\n17\n175\n175\n7\n25\n6\n19\n13\n7",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Long test",
          "isTest": true,
          "testIn": "26\n7\n9\nx\n-\n7\n+\nAC\n8\n/\n3\n+\n5\n=\n8\n2\n5\n7\n-\n5\n4\n=\n=\n+\n1\n2\n=",
          "testOut": "7\n79\n79\n79\n7\n72\n0\n8\n8\n3\n2.667\n5\n7.667\n8\n82\n825\n8257\n8257\n5\n54\n8203\n8149\n8149\n1\n12\n8161",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Long test",
          "isTest": false,
          "testIn": "27\n9\n9\n4\n/\n2\n0\nx\nAC\n7\n+\n3\n/\n5\n1\n=\n8\n2\n5\n+\n5\n=\n=\n=\n/\n3\n=\n=",
          "testOut": "9\n99\n994\n994\n2\n20\n49.7\n0\n7\n7\n3\n10\n5\n51\n0.196\n8\n82\n825\n825\n5\n830\n835\n840\n840\n3\n280\n93.333",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "easy",
      "constraints": "The key will be one of these: {{0}}-{{9}}, {{+}}, {{-}}, {{x}}, {{/}}, {{=}}, {{AC}}\nNeither test cases nor validator will divide by zero. First key will always be a cipher.",
      "stubGenerator": "read n:int\nloop n read key:string(2)\nloop n write answer",
      "inputDescription": "<<Line 1:>> An integer [[n]] for the number of keys to press.\n<<Next [[n]] lines:>> A string that shows the [[key]] pressed.",
      "solutionLanguage": "Python3",
      "outputDescription": "<<[[n]] lines:>> The output of the screen after each key is pressed"
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Your task is to output the <var>screen</var> of a calculator when a <var>key</var> is pressed. For example:<br>-Input <const>3</const>: Output <const>3</const><br>-Input <const>4</const>: Output <const>34</const><br>-Input <const>+</const>: Output <const>34</const><br>-Input <const>2</const>: Output <const>2</const><br>-Input <const>3</const>: Output <const>23</const><br>-Input <const>-</const>: Output <const>57</const><br>-Input <const>4</const>: Output <const>4</const><br>-Input <const>=</const>: Output <const>53</const><br>-Input <const>AC</const>: Output <const>0</const><br><br>The calculator doesn't take into account the priority of the operators. If the user presses:<br><const>2 + 3 x 5</const><br>the final output will be <const>25</const><br>The user may press two operation keys consecutively. In that case, the operation that must be taken into account is the second one.<br>If the result has decimal numbers, it must be output with, at most, 3 decimal places. Otherwise, it must be output without a decimal point. Decimal numbers are also stored rounded with 3 decimal places.<br>If the user presses the <const>=</const> key consecutively, the last operation should be performed repeatedly. For example, <const>1 0 - 3 = = =</const> is the same as calculating <const>10 - 3 - 3 - 3</const>.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> An integer <var>n</var> for the number of keys to press.<br><strong>Next <var>n</var> lines:</strong> A string that shows the <var>key</var> pressed.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong><var>n</var> lines:</strong> The output of the screen after each key is pressed</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">The key will be one of these: <const>0</const>-<const>9</const>, <const>+</const>, <const>-</const>, <const>x</const>, <const>/</const>, <const>=</const>, <const>AC</const><br>Neither test cases nor validator will divide by zero. First key will always be a cipher.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">7\n2\n5\n+\n6\n-\n7\n=</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">2\n25\n25\n6\n31\n7\n24</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 117586085043,
  "avatar": 27691847843292,
  "commentCount": 16,
  "upVotes": 25,
  "downVotes": 4,
  "validateAction": {
    "actionId": 665314,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1653143857681,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}