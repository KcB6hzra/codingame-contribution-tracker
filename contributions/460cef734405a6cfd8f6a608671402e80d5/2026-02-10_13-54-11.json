{
  "id": 460,
  "activeVersion": 10,
  "score": 8,
  "votableId": 3436418,
  "codingamerId": 1100752,
  "views": 172,
  "commentableId": 3382013,
  "title": "Zergling rush",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "ValNykol",
  "publicHandle": "460cef734405a6cfd8f6a608671402e80d5",
  "codingamerHandle": "512fb043c43498b9bc7605da47190de72570011",
  "lastVersion": {
    "version": 10,
    "data": {
      "title": "Zergling rush",
      "topics": [],
      "solution": "w, h = gets.split.map &:to_i\ngrid = h.times.map{gets.chomp}\n\nbuilding_cells = []\nh.times{|y|\n    w.times{|x|\n        building_cells << [x,y] if grid[y][x] == ?B\n    }\n}\n\nadj_cells = []\nbuilding_cells.each{|bx,by|\n    [[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0]].each{|dx,dy|\n        x,y = bx + dx, by + dy\n        adj_cells << [x,y] if x >= 0 && x < w && y >= 0 && y < h && grid[y][x] == ?.\n    }\n}\n\nadj_cells.uniq.select{|sx,sy|\n    queue = [[sx,sy]]\n    visited = {[sx, sy] => true}\n    \n    reachable = false\n    while !queue.empty?\n        x,y = queue.shift\n        (reachable = true; break) if x <= 0 || x >= w-1 || y <= 0 || y >= h-1\n        \n        [[-1,0],[0,-1],[1,0],[0,1]].each{|dx,dy|\n            nx,ny = x + dx, y + dy\n            newpos = [nx,ny]\n            if !visited[newpos] && grid[ny][nx] == ?.\n                visited[newpos] = true\n                queue << newpos\n            end\n        }\n    end\n    reachable\n}.each{|x,y|\n    grid[y][x] = ?z\n}\n\nputs grid",
      "statement": "In the popular real-time strategy game called Starcraft, there are three races: Terran, Protoss, and Zerg. Many Zerg players use a \"cheese\" strategy called the \"zergling rush\", where very early in the game, they produce a couple of their basic combat unit called the \"zergling\", and immediately attack the enemy base.\n\nThe enemy base is represented as a grid, with buildings occupying different shapes. Additionally, there can be some impassable terrain blocking zerglings. Zerglings will surround all enemy buildings they can reach, taking up horizontally, vertically, and diagonally adjacent cells. However they cannot access locations completely blocked off by buildings or terrain. Note that they will only be able to enter horizontal or vertical gaps: if buildings are diagonally adjacent they will block the zerglings.\n\nYour task is to visualize what the base will look like after the zerglings arrive.\n\nNote 1: zerglings enter from all sides (top, left, right, bottom).\nNote 2: if no building can be reached or if there are no buildings at all, the zerglings will not stay (no zerglings should be included in the output).\n\nFor example, a base like:\n\n`...#####\n...#...#\n..B..B.#\n...#...#\n...#####`\nwill become\n\n`...#####\n.zz#...#\n.zB..B.#\n.zz#...#\n...#####`\nZerglings surround the building to the left, but cannot access the building to the right because their path is blocked.",
      "testCases": [
        {
          "title": "Lone building",
          "isTest": true,
          "testIn": "5 5\n.....\n.....\n..B..\n.....\n.....",
          "testOut": ".....\n.zzz.\n.zBz.\n.zzz.\n.....",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "6 5\n......\n......\n..BB..\n......\n......",
          "testOut": "......\n.zzzz.\n.zBBz.\n.zzzz.\n......",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Walled off",
          "isTest": true,
          "testIn": "8 5\n...#####\n...#...#\n..B..B.#\n...#...#\n...#####",
          "testOut": "...#####\n.zz#...#\n.zB..B.#\n.zz#...#\n...#####",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "5 8\n.....\n.....\n.B.B.\n#.#.#\n#...#\n#.B.#\n#...#\n#####",
          "testOut": ".....\nzzzzz\nzBzBz\n#.#.#\n#...#\n#.B.#\n#...#\n#####",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Blocked ramp",
          "isTest": true,
          "testIn": "15 13\n.....#####.....\n....##...##....\n...##.....##...\n..##.......##..\n.##..BBB....##.\n##...BBB.....##\n#.........BBB.#\n##.BBB....BBB.#\n.##BBB...BB..##\n##....BB.BB.##.\n#.....#....##..\n.....###..##...\n....##.####....",
          "testOut": ".....#####.....\n....##...##....\n...##.....##...\n..##.......##..\n.##..BBB....##.\n##...BBB.....##\n#.........BBB.#\n##.BBB....BBB.#\n.##BBB...BB..##\n##zzzzBB.BB.##.\n#....z#....##..\n.....###..##...\n....##.####....",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "14 11\n....#####.....\n...##...##....\n..##.BBB.##...\n.##..BBB..##..\n##.........##.\n#.BB....BB##..\n#.BB....BB#...\n##....BB..##..\n.##....#...##.\n..##..###...#.\n...####.##....",
          "testOut": "....#####.....\n...##...##....\n..##.BBB.##...\n.##..BBB..##..\n##.........##.\n#.BB....BB##..\n#.BB....BB#...\n##....BBzz##..\n.##....#z..##.\n..##..###...#.\n...####.##....",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Misclick",
          "isTest": true,
          "testIn": "14 11\n....#####.....\n...##...##....\n..##.BBB.##...\n.##..BBB..##..\n##.........##.\n#.BB...BB.##..\n#.BB...BB##...\n##........##..\n.##..BB#...##.\n..##..###...#.\n...####.##....",
          "testOut": "....#####.....\n...##...##....\n..##zBBBz##...\n.##.zBBBz.##..\n##zzzzzzzz.##.\n#.BBz.zBBz##..\n#.BBz.zBB##...\n##zzzzzzzz##..\n.##.zBB#...##.\n..##zz###...#.\n...####.##....",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "15 13\n.....#####.....\n....##...##....\n...##.....##...\n..##.......##..\n.##..BBB....##.\n##...BBB.....##\n#.........BBB.#\n##.BBB....BBB.#\n.##BBB...BB..##\n##.....BBBB.##.\n#.....#....##..\n.....###..##...\n....##.####....",
          "testOut": ".....#####.....\n....##...##....\n...##.....##...\n..##zzzzz..##..\n.##.zBBBz...##.\n##..zBBBzzzzz##\n#.zzzzzzzzBBB.#\n##zBBBz.zzBBB.#\n.##BBBzzzBB..##\n##zzzzzBBBB.##.\n#.....#....##..\n.....###..##...\n....##.####....",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Hey, that's cheating!",
          "isTest": true,
          "testIn": "10 8\n...####...\n..##BB##..\n.##.BB.##.\n##......##\n#.BB.BB##.\n##BB..##..\n.##..##...\n..####....",
          "testOut": "...####...\n..##BB##..\n.##.BB.##.\n##......##\n#.BB.BB##.\n##BB..##..\n.##..##...\n..####....",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "10 8\n.#####....\n##...##...\n#.BB..##..\n#.BB..B##.\n##...BB.##\n.##...B##.\n..##..##..\n...####...",
          "testOut": ".#####....\n##...##...\n#.BB..##..\n#.BB..B##.\n##...BB.##\n.##...B##.\n..##..##..\n...####...",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "CG",
          "isTest": true,
          "testIn": "14 9\n..#####.#####.\n.#.....#.....#\n#.............\n#..BBB#..BBB#.\n#..BBB#..##...\n#..BBB#..BBB..\n#.............\n.#.....#.....#\n..#####.#####.",
          "testOut": "..#####.#####.\n.#.....#.....#\n#.zzzzz.zzzzz.\n#.zBBB#.zBBB#.\n#.zBBB#.z##zz.\n#.zBBB#.zBBBz.\n#.zzzzz.zzzzz.\n.#.....#.....#\n..#####.#####.",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 6",
          "isTest": false,
          "testIn": "13 10\n...######....\n..#......#...\n.#.....#..#..\n#....BB....#.\n#...B###....#\n#...B#....BB.\n#....#...B..#\n.#.......BB..\n..#.....#..#.\n...#.........",
          "testOut": "...######....\n..#......#...\n.#..zzz#..#..\n#..zzBBz...#.\n#..zB###.zzz#\n#..zB#..zzBBz\n#..zz#..zBzz#\n.#......zBBz.\n..#.....#zz#.\n...#.........",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Lift off",
          "isTest": true,
          "testIn": "10 8\n.######...\n##....##..\n#......###\n#.........\n#.........\n#......###\n##....##..\n.######...",
          "testOut": ".######...\n##....##..\n#......###\n#.........\n#.........\n#......###\n##....##..\n.######...",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "10 8\n..######..\n.##....##.\n##......##\n#........#\n#........#\n##......##\n.##....##.\n..#....#..",
          "testOut": "..######..\n.##....##.\n##......##\n#........#\n#........#\n##......##\n.##....##.\n..#....#..",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "hard",
      "constraints": "0 < [[W]], [[H]] < 20",
      "stubGenerator": "read W:int H:int\nloop H read ROW:string(W)\nwrite answer",
      "inputDescription": "<<Line 1:>> Two integers, [[W]] and [[H]] corresponding to the width and the height of the grid.\n<<Next [[H]] lines:>> The enemy base in the following format:\n{{.}} = empty space\n{{B}} = building\n{{#}} = impassable terrain",
      "solutionLanguage": "Ruby",
      "outputDescription": "<<[[H]] lines:>> The enemy base after zerglings arrive. Zerglings are represented by {{z}}."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">In the popular real-time strategy game called Starcraft, there are three races: Terran, Protoss, and Zerg. Many Zerg players use a &quot;cheese&quot; strategy called the &quot;zergling rush&quot;, where very early in the game, they produce a couple of their basic combat unit called the &quot;zergling&quot;, and immediately attack the enemy base.<br><br>The enemy base is represented as a grid, with buildings occupying different shapes. Additionally, there can be some impassable terrain blocking zerglings. Zerglings will surround all enemy buildings they can reach, taking up horizontally, vertically, and diagonally adjacent cells. However they cannot access locations completely blocked off by buildings or terrain. Note that they will only be able to enter horizontal or vertical gaps: if buildings are diagonally adjacent they will block the zerglings.<br><br>Your task is to visualize what the base will look like after the zerglings arrive.<br><br>Note 1: zerglings enter from all sides (top, left, right, bottom).<br>Note 2: if no building can be reached or if there are no buildings at all, the zerglings will not stay (no zerglings should be included in the output).<br><br>For example, a base like:<br><br><pre style=\"font-family: monospace\">...#####<br>...#...#<br>..B..B.#<br>...#...#<br>...#####</pre><br>will become<br><br><pre style=\"font-family: monospace\">...#####<br>.zz#...#<br>.zB..B.#<br>.zz#...#<br>...#####</pre><br>Zerglings surround the building to the left, but cannot access the building to the right because their path is blocked.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> Two integers, <var>W</var> and <var>H</var> corresponding to the width and the height of the grid.<br><strong>Next <var>H</var> lines:</strong> The enemy base in the following format:<br><const>.</const> = empty space<br><const>B</const> = building<br><const>#</const> = impassable terrain</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong><var>H</var> lines:</strong> The enemy base after zerglings arrive. Zerglings are represented by <const>z</const>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">0 &lt; <var>W</var>, <var>H</var> &lt; 20</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">5 5\n.....\n.....\n..B..\n.....\n.....</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">.....\n.zzz.\n.zBz.\n.zzz.\n.....</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 292970943267,
  "avatar": 10307803807981,
  "commentCount": 10,
  "upVotes": 8,
  "downVotes": 0,
  "validateAction": {
    "actionId": 42460,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}