{
  "id": 304,
  "activeVersion": 13,
  "score": 11,
  "votableId": 2382987,
  "codingamerId": 819906,
  "views": 1382,
  "commentableId": 2331537,
  "title": "Chess moves on FEN position",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "scrauler",
  "publicHandle": "304b96e76fb3b426f7f954b0957dfaed85e",
  "codingamerHandle": "2be43ac4f3f60cec2eca41a76174a3a3609918",
  "lastVersion": {
    "version": 13,
    "data": {
      "title": "Chess moves on FEN position",
      "solution": "esp = \".\"\r\ntablero = []\r\n\r\ndef get_col(letra):\r\n\treturn ord(letra) - ord(\"a\")\r\n\r\ndef mover(mov):\r\n\t# a7a5\r\n\tini = [get_col(mov[0]), int(mov[1]) - 1]\r\n\tfin = [get_col(mov[2]), int(mov[3]) - 1]\r\n\t\r\n\tantes = tablero[fin[1]][fin[0]]\r\n\ttablero[fin[1]][fin[0]], tablero[ini[1]][ini[0]] = tablero[ini[1]][ini[0]], esp\r\n\t# castling\r\n\tif tablero[fin[1]][fin[0]] in \"Kk\":\r\n\t\tfilaT = str(ini[1]+1)\r\n\t\tif fin[0] == ini[0] + 2:\r\n\t\t\tmover(\"h\"+filaT+\"f\"+filaT)\r\n\t\tif fin[0] == ini[0] - 2:\r\n\t\t\tmover(\"a\"+filaT+\"d\"+filaT)\r\n\t# en passant\r\n\tif tablero[fin[1]][fin[0]] in \"Pp\":\r\n\t    if fin[0] != ini[0] and antes == esp:\r\n\t        tablero[ini[1]][fin[0]] = esp\r\n\t# pawn promotion\r\n\tif len(mov) > 4:\r\n\t    tablero[fin[1]][fin[0]] = mov[4]\r\n\t    \r\n\t\r\n\t\r\ndef fen2board(cad):\r\n\tfor r in cad.split(\"/\"):\r\n\t\ta = \"\"\r\n\t\tfor c in r:\r\n\t\t\tif c.isalpha():\r\n\t\t\t\ta += c\r\n\t\t\telse:\r\n\t\t\t\ta += esp * int(c)\r\n\t\ttablero.append(list(a))\r\n\ttablero.reverse()\r\n\r\ndef board2fen():\r\n\tcad = \"\"\r\n\tfor i in reversed(tablero):\r\n\t\tn = 0\r\n\t\tfor j in i:\r\n\t\t\tnum = n > 0 and str(n) or \"\"\r\n\t\t\tif j != esp:\r\n\t\t\t\tcad += num + j\r\n\t\t\t\tn = 0\r\n\t\t\telse:\r\n\t\t\t\tn += 1\r\n\t\tif n > 0:\r\n\t\t\tcad += str(n)\r\n\t\tcad += \"/\"\r\n\treturn cad[:-1]\r\n\t\r\n\t\r\n# Auto-generated code below aims at helping you parse\r\n# the standard input according to the problem statement.\r\n\r\nb = input()\r\n\r\nfen2board(b)\r\n\r\nn = int(input())\r\nfor i in range(n):\r\n    m = input()\r\n    mover(m)\r\n\r\n# Write an action using print\r\n# To debug: print(\"Debug messages...\", file=sys.stderr)\r\n\r\nprint(board2fen())\t",
      "statement": "<<Make several moves on a chessboard and print the final position as an FEN string.>>\n\n`{{8}} r n b q k b n r\n{{7}} p p p p p p p p\n{{6}} . . . . . . . .\n{{5}} . . . . . . . .\n{{4}} . . . . . . . .\n{{3}} . . . . . . . .\n{{2}} P P P P P P P P\n{{1}} R N B Q K B N R\n  {{a}} {{b c}}{{ d e}}{{ f g}}{{ h}}`\n\nThe above position is represented in FEN by the string:\n\n{{rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR}}\n\nFEN describes a Chess Position with a one-line ASCII string.\nThe piece placement is determined rank-by-rank, starting at rank {{8}} and proceeding down to rank {{1}}.\nEach rank string is separated by the terminal symbol '/' (slash).\nEach rank string scans piece placement from column {{a}} to column {{h}}.\nA decimal digit counts consecutive empty spaces.\nThe pieces are identified by a single letter. (k=king, q=queen, r=rook, b=bishop, n=knight, p=pawn)\nUppercase letters are for white pieces, lowercase letters for black pieces.\n\n\nThe moves you have to make are defined by a string with either 4 or 5 chars, where:\n - The first two chars represent the starting square, \n - The next two chars represent the target square and \n - The last (optional) char represents the piece you get if / when a pawn promotion occurs.\n\n<<Example: \"{{e7e8Q}}\">> - you must remove the pawn on the {{e7}} square and place a white queen on the {{e8}} square.\n\n<<Example: \"{{e1g1}}\">> - you must remove the king on the {{e1}} square and place it on the {{g1}} square. But a king can't move more than {{1}} square unless he is castling, so you must also move the rook on the {{h1}} square to the {{f1}} square in order to complete the castling move.\n\n<<Example: \"{{h5g6}}\">> - you must remove the pawn on the {{h5}} square and place on the {{g6}} square. If there is not a piece on {{g6}} but there is a pawn on {{g5}} then you must remove the pawn on {{g5}} in order to complete the \"en passant\" move.\n\n<<Note:>>\nAll the moves are legal and can be made following standard chess rules.",
      "testCases": [
        {
          "title": "Starting position 1 move",
          "isTest": true,
          "testIn": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR\n1\ne2e4",
          "testOut": "rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR",
          "isValidator": false
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR\n1\nb1a3",
          "testOut": "rnbqkbnr/pppppppp/8/8/8/N7/PPPPPPPP/R1BQKBNR",
          "isValidator": true
        },
        {
          "title": "Starting position several moves",
          "isTest": true,
          "testIn": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR\n3\ne2e4\nc7c5\ng1f3",
          "testOut": "rnbqkbnr/pp1ppppp/8/2p5/4P3/5N2/PPPP1PPP/RNBQKB1R",
          "isValidator": false
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR\n4\ng1f3\ng8f6\nf3g1\nf6g8",
          "testOut": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",
          "isValidator": true
        },
        {
          "title": "Castling",
          "isTest": true,
          "testIn": "r1bqk2r/pppp1ppp/2n2n2/4p3/1bB1P3/2NP1N2/PPP2PPP/R1BQK2R\n2\ne8g8\ne1g1",
          "testOut": "r1bq1rk1/pppp1ppp/2n2n2/4p3/1bB1P3/2NP1N2/PPP2PPP/R1BQ1RK1",
          "isValidator": false
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "r3k2r/ppp1qppp/2np1n2/4p3/1bB1P1b1/2NP1N2/PPPBQPPP/R3K2R\n2\ne1c1\ne8c8",
          "testOut": "2kr3r/ppp1qppp/2np1n2/4p3/1bB1P1b1/2NP1N2/PPPBQPPP/2KR3R",
          "isValidator": true
        },
        {
          "title": "En passant",
          "isTest": true,
          "testIn": "2kr3r/1pp1qppp/2np1n2/p3p2P/1bB1P1b1/2NP1N2/PPPBQPP1/2KR3R\n2\ng7g5\nh5g6",
          "testOut": "2kr3r/1pp1qp1p/2np1nP1/p3p3/1bB1P1b1/2NP1N2/PPPBQPP1/2KR3R",
          "isValidator": false
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "2kr3r/1pp1q2p/2np1np1/4p3/pbB1P1b1/P1NP1N2/1PPBQPP1/2KR3R\n6\na3b4\nc6b4\nc3d5\nb4d5\nb2b4\na4b3",
          "testOut": "2kr3r/1pp1q2p/3p1np1/3np3/2B1P1b1/1p1P1N2/2PBQPP1/2KR3R",
          "isValidator": true
        },
        {
          "title": "Pawn promotion",
          "isTest": true,
          "testIn": "1N1rk2r/4q2p/3p1np1/4p3/2B3b1/3P1N2/2pBQPP1/2KR3R\n2\nc2d1r\nc1d1",
          "testOut": "1N1rk2r/4q2p/3p1np1/4p3/2B3b1/3P1N2/3BQPP1/3K3R",
          "isValidator": false
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "2kr3r/1pp1q2p/3p1np1/3np3/2B1P1b1/1p1P1N2/2PBQPP1/2KR3R\n8\ne4d5\nc7c5\nd5c6\nb3c2\nc6b7\nc8d7\nb7b8N\nd7e8",
          "testOut": "1N1rk2r/4q2p/3p1np1/4p3/2B3b1/3P1N2/2pBQPP1/2KR3R",
          "isValidator": true
        }
      ],
      "constraints": "1 ≤ [[N]] ≤ 100",
      "stubGenerator": "read B:string(256)\r\nread N:int\r\nloop N read M:string(5)\r\nwrite answer",
      "inputDescription": "<<Line 1:>> An FEN string [[B]] describing the initial board position.\n<<Line 2:>> An integer [[N]] for the number of moves to make.\n<<Next [[N]] lines:>> A string [[M]] for the coordinates (and optional promotion piece) of a move.",
      "solutionLanguage": "Python3",
      "outputDescription": "<<Line 1:>> An FEN string describing the final board position."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h1><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h1>\n   <span class=\"question-statement\"><strong>Make several moves on a chessboard and print the final position as an FEN string.</strong><br><br><pre style=\"font-family: monospace\"><const>8</const> r n b q k b n r<br><const>7</const> p p p p p p p p<br><const>6</const> . . . . . . . .<br><const>5</const> . . . . . . . .<br><const>4</const> . . . . . . . .<br><const>3</const> . . . . . . . .<br><const>2</const> P P P P P P P P<br><const>1</const> R N B Q K B N R<br>  <const>a</const> <const>b c</const><const> d e</const><const> f g</const><const> h</const></pre><br><br>The above position is represented in FEN by the string:<br><br><const>rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR</const><br><br>FEN describes a Chess Position with a one-line ASCII string.<br>The piece placement is determined rank-by-rank, starting at rank <const>8</const> and proceeding down to rank <const>1</const>.<br>Each rank string is separated by the terminal symbol '/' (slash).<br>Each rank string scans piece placement from column <const>a</const> to column <const>h</const>.<br>A decimal digit counts consecutive empty spaces.<br>The pieces are identified by a single letter. (k=king, q=queen, r=rook, b=bishop, n=knight, p=pawn)<br>Uppercase letters are for white pieces, lowercase letters for black pieces.<br><br><br>The moves you have to make are defined by a string with either 4 or 5 chars, where:<br> - The first two chars represent the starting square, <br> - The next two chars represent the target square and <br> - The last (optional) char represents the piece you get if / when a pawn promotion occurs.<br><br><strong>Example: &quot;<const>e7e8Q</const>&quot;</strong> - you must remove the pawn on the <const>e7</const> square and place a white queen on the <const>e8</const> square.<br><br><strong>Example: &quot;<const>e1g1</const>&quot;</strong> - you must remove the king on the <const>e1</const> square and place it on the <const>g1</const> square. But a king can't move more than <const>1</const> square unless he is castling, so you must also move the rook on the <const>h1</const> square to the <const>f1</const> square in order to complete the castling move.<br><br><strong>Example: &quot;<const>h5g6</const>&quot;</strong> - you must remove the pawn on the <const>h5</const> square and place on the <const>g6</const> square. If there is not a piece on <const>g6</const> but there is a pawn on <const>g5</const> then you must remove the pawn on <const>g5</const> in order to complete the &quot;en passant&quot; move.<br><br><strong>Note:</strong><br>All the moves are legal and can be made following standard chess rules.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> An FEN string <var>B</var> describing the initial board position.<br><strong>Line 2:</strong> An integer <var>N</var> for the number of moves to make.<br><strong>Next <var>N</var> lines:</strong> A string <var>M</var> for the coordinates (and optional promotion piece) of a move.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> An FEN string describing the final board position.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">1 &le; <var>N</var> &le; 100</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR\n1\ne2e4</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 301105872685,
  "avatar": 1724581872168,
  "commentCount": 10,
  "upVotes": 18,
  "downVotes": 7,
  "validateAction": {
    "actionId": 918,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}