{
  "id": 232,
  "activeVersion": 14,
  "score": 13,
  "votableId": 1981410,
  "codingamerId": 1122412,
  "views": 941,
  "commentableId": 1931081,
  "title": "Prime Transformations",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "TheNinja",
  "publicHandle": "2324b037e19f805ebdaebbe00c60db8ce14",
  "codingamerHandle": "796ed19c638a4cbd9cf6526be9cf56542142211",
  "lastVersion": {
    "version": 14,
    "data": {
      "title": "Prime Transformations",
      "topics": [
        {
          "id": 143,
          "handle": "primes",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Primes",
            "2": "Primes"
          },
          "puzzleCount": 8,
          "parentTopicId": 93
        }
      ],
      "solution": "k={}\nrm=[]\nx=gets.to_i\nc=gets.to_i\nfor i in 0...c\n\n    a,b=gets.split.map &:to_i\n    ka={}\n    kb={}\n    \n    #factorise a\n    i=2\n    while a>1\n        while a%i==0\n            ka[i]=(ka[i]||0)+1\n            a/=i\n        end\n        i+=1\n    end\n    \n    #factorise b\n    i=2\n    while b>1\n        if b%i==0\n            kb[i]=(kb[i]||0)+1\n            b/=i\n        else\n            i+=1\n        end\n    end\n    \n    #map possible primes\n    nk={}\n    for ea in ka.keys\n        for eb in kb.keys\n            if ka[ea]==kb[eb]\n                nk[ea]=(nk[ea]||[])+[eb]\n            end\n        end\n    end\n\n    #append to master list\n    for en in nk.keys\n        if !k[en]\n            k[en]=(nk[en]-rm)\n        else\n            k[en] = k[en] & (nk[en]-rm)\n        end\n        #remove only primes\n        if k[en]&&k[en].size==1\n            rm+=[k[en][0]]\n            for e in k.keys\n                if e!=en\n                    k[e]-=k[en]\n                end\n            end\n        end\n    end\n\nend\n\nn=1\ni=2\nwhile x>1\n    if x%i==0\n        n*=k[i][0]\n        x/=i\n    else\n        i+=1\n    end\nend\np n",
      "statement": "Every integer 2 or greater [[N]] has a unique prime factorisation such that\n[[N]] = [[P1]]^[[Q1]] × [[P2]]^[[Q2]]...\nwhere [[Pi]] are ascending prime numbers and [[Qi]] are positive power indices.\n\nExamples\n30 = (2^1)×(3^1)×(5^1)\n96 = (2^5)× (3^1)\n900 = (2^2)×(3^2)×(5^2)\n\nConsider a transformation that takes all values in a given finite set of primes and maps each prime to another one (it can be the same prime as before, and not necessarily in the initial set, but no two primes map to the same prime).\n\nFor example, take a transformation which has the following mapping:\n2 -> 11\n3 -> 17\n5 -> 2\n\nThen\n4 -> 121, (2^2 -> 11^2)\n9 -> 289,  (3^2 -> 17^2)\n25 -> 4, (5^2 -> 2^2)\n6 -> 187 ((2^1)×(3^1) -> (11^1)×(17^1))\n10 -> 22 ((2^1)×(5^1) -> (11^1)×(2^1))\n\nYour task, given a set of transformed pairs, is to find the transformation and thus apply it to a given integer [[X]].",
      "testCases": [
        {
          "title": "Forward Power",
          "isTest": true,
          "testIn": "16\n1\n2 5",
          "testOut": "625",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Forward Power",
          "isTest": false,
          "testIn": "27\n1\n3 11",
          "testOut": "1331",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Backward Power",
          "isTest": true,
          "testIn": "5\n1\n125 4913",
          "testOut": "17",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Backward Power",
          "isTest": false,
          "testIn": "7\n1\n49 121",
          "testOut": "11",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Factor Deduction",
          "isTest": true,
          "testIn": "11\n3\n2 11\n6 22\n66 374",
          "testOut": "17",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Factor Deduction",
          "isTest": false,
          "testIn": "13\n3\n3 17\n15 34\n195 986",
          "testOut": "29",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Index Deduction",
          "isTest": true,
          "testIn": "5\n1\n90250 38705343",
          "testOut": "29",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Index Deduction",
          "isTest": false,
          "testIn": "3\n1\n25018323 129330799",
          "testOut": "43",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "expert",
      "constraints": "2 ≤ [[Ai]], [[Bi]], [[X]], [[Y]] < 2^63\n2 ≤ [[Pi]] ≤ 100",
      "stubGenerator": "read X:long\nread C:int\nloop C read Ai:long Bi:long\nwrite answer",
      "inputDescription": "<<Line 1>>: [[X]] the integer to transform\n<<Line 2>>: [[C]] the number of clues given about the transformation\n<<Next [[C]] Lines>>: For each line, a pair of integers [[Ai]] and [[Bi]] such that the transformation maps [[Ai]] to [[Bi]]",
      "solutionLanguage": "Ruby",
      "outputDescription": "One line containing [[Y]], the result of the transformation applied to [[X]]."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Every integer 2 or greater <var>N</var> has a unique prime factorisation such that<br><var>N</var> = <var>P1</var>^<var>Q1</var> &times; <var>P2</var>^<var>Q2</var>...<br>where <var>Pi</var> are ascending prime numbers and <var>Qi</var> are positive power indices.<br><br>Examples<br>30 = (2^1)&times;(3^1)&times;(5^1)<br>96 = (2^5)&times; (3^1)<br>900 = (2^2)&times;(3^2)&times;(5^2)<br><br>Consider a transformation that takes all values in a given finite set of primes and maps each prime to another one (it can be the same prime as before, and not necessarily in the initial set, but no two primes map to the same prime).<br><br>For example, take a transformation which has the following mapping:<br>2 -&gt; 11<br>3 -&gt; 17<br>5 -&gt; 2<br><br>Then<br>4 -&gt; 121, (2^2 -&gt; 11^2)<br>9 -&gt; 289,  (3^2 -&gt; 17^2)<br>25 -&gt; 4, (5^2 -&gt; 2^2)<br>6 -&gt; 187 ((2^1)&times;(3^1) -&gt; (11^1)&times;(17^1))<br>10 -&gt; 22 ((2^1)&times;(5^1) -&gt; (11^1)&times;(2^1))<br><br>Your task, given a set of transformed pairs, is to find the transformation and thus apply it to a given integer <var>X</var>.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1</strong>: <var>X</var> the integer to transform<br><strong>Line 2</strong>: <var>C</var> the number of clues given about the transformation<br><strong>Next <var>C</var> Lines</strong>: For each line, a pair of integers <var>Ai</var> and <var>Bi</var> such that the transformation maps <var>Ai</var> to <var>Bi</var></div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">One line containing <var>Y</var>, the result of the transformation applied to <var>X</var>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">2 &le; <var>Ai</var>, <var>Bi</var>, <var>X</var>, <var>Y</var> &lt; 2^63<br>2 &le; <var>Pi</var> &le; 100</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">16\n1\n2 5</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">625</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 298590379982,
  "avatar": 3823739809641,
  "commentCount": 23,
  "upVotes": 15,
  "downVotes": 2,
  "validateAction": {
    "actionId": 1249,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}