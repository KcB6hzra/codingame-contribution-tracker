{
  "id": 4829,
  "activeVersion": 2,
  "score": 8,
  "votableId": 12418638,
  "codingamerId": 1962352,
  "views": 218,
  "commentableId": 12343339,
  "title": "Bit count to limit",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "DPAmar",
  "publicHandle": "482951b3c1e7c0adb69a57ca18f2b2c3ec4c",
  "codingamerHandle": "1aa3b57d313d36f2b421bf8a30a7dfef2532691",
  "lastVersion": {
    "version": 2,
    "autocloseTime": 1582209556018,
    "data": {
      "title": "Bit count to limit",
      "topics": [
        {
          "id": 94,
          "handle": "mathematics",
          "labelMap": {
            "1": "Mathematics",
            "2": "Mathematics"
          },
          "puzzleCount": 16,
          "parentTopicId": 93
        }
      ],
      "solution": "/*\nThe quick and dirty solution\n  - c function to count digit\n  - and a loop \n\nn=+readline();\nc=x=>x&&1+c(x&--x)\nfor(s=0;n;)s+=c(n--)\nprint(s)\n\nHowever, it doesn't work for large numbers : too long\nThe solution below uses some combinatorics results : \n- from 0 to 2^n, there are 2^n numbers, n*2^n digits and half of them are ones ==> n*2^(n-1) 1s\n- A number of form 1[X = N'other bits] uses \n   - N*2^(N'-1) ones to write all the 0[N' bits] integers as per property above\n   - then X+1 numbers are writen with 1[N' bits] ==> X+1 ones used for the first digit\n   - and finally, we count ones needed from 0 to X\n- A number of form 0[X] is more simple to process = just count ones needed from 0 to X\n\nThis gives a logarithmic algorithm: for each bit from right to left, we consider the right part and its size \n  - if current bit is 1, then add size * 2^(size - 1), and add (right part + 1)\n  - if current bit is 0, then do nothing\n*/\nn=+readline();\nres=0\nrightLength=0\nrightPart=0\nwhile(n)\n{\n    if(n&1)\n    {\n        res += rightLength<<(rightLength-1)\n        res += rightPart + 1\n        rightPart |= 1<<rightLength\n    }\n    n>>=1\n    rightLength++    \n}\n\nprint(res);",
      "statement": "The goal is really simple. Given a number [[n]], count how many 1s are used to write all binary integers from 0 to [[n]] (inclusive)\n\nFor example, [[n]] = 5\n0....000...0\n1....001...1\n2....010...1\n3....011...2\n4....100...1\n5....101...2\n\nTotal : 1+1+2+1+2 = 7",
      "testCases": [
        {
          "title": "Simple one",
          "isTest": true,
          "testIn": "5",
          "testOut": "7",
          "isValidator": false
        },
        {
          "title": "Simple one",
          "isTest": false,
          "testIn": "7",
          "testOut": "12",
          "isValidator": true
        },
        {
          "title": "A bit more",
          "isTest": true,
          "testIn": "32",
          "testOut": "81",
          "isValidator": false
        },
        {
          "title": "A bit more",
          "isTest": false,
          "testIn": "72",
          "testOut": "214",
          "isValidator": true
        },
        {
          "title": "And > 100 ?",
          "isTest": true,
          "testIn": "120",
          "testOut": "408",
          "isValidator": false
        },
        {
          "title": "And > 100 ?",
          "isTest": false,
          "testIn": "974",
          "testOut": "4760",
          "isValidator": true
        },
        {
          "title": "Million ?",
          "isTest": true,
          "testIn": "1048576",
          "testOut": "10485761",
          "isValidator": false
        },
        {
          "title": "Million ?",
          "isTest": false,
          "testIn": "1376256",
          "testOut": "13762563",
          "isValidator": true
        },
        {
          "title": "Did you get the trick ?",
          "isTest": true,
          "testIn": "134217728",
          "testOut": "1811939329",
          "isValidator": false
        },
        {
          "title": "Did you get the trick ?",
          "isTest": false,
          "testIn": "208823295",
          "testOut": "2851087360",
          "isValidator": true
        }
      ],
      "difficulty": "medium",
      "constraints": "[[n]] < 2^28\nResult < 2^32",
      "stubGenerator": "read n:int\n\nwrite Number of 1s",
      "inputDescription": "<<Single line: >> An integer [[n]]",
      "solutionLanguage": "Javascript",
      "outputDescription": "<<Single line: >>Number of 1s used to write all binary integers from 0 to [[n]] (inclusive)"
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">The goal is really simple. Given a number <var>n</var>, count how many 1s are used to write all binary integers from 0 to <var>n</var> (inclusive)<br><br>For example, <var>n</var> = 5<br>0....000...0<br>1....001...1<br>2....010...1<br>3....011...2<br>4....100...1<br>5....101...2<br><br>Total : 1+1+2+1+2 = 7</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Single line: </strong> An integer <var>n</var></div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Single line: </strong>Number of 1s used to write all binary integers from 0 to <var>n</var> (inclusive)</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\"><var>n</var> &lt; 2^28<br>Result &lt; 2^32</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">5</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">7</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 190998074555,
  "avatar": 56994389567033,
  "commentCount": 7,
  "upVotes": 8,
  "downVotes": 0,
  "validateAction": {
    "actionId": 422917,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1579733039321,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}