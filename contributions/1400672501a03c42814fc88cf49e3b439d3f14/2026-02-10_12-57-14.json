{
  "id": 140067,
  "activeVersion": 16,
  "score": 6,
  "votableId": 38846113,
  "codingamerId": 1203451,
  "views": 176,
  "commentableId": 38679819,
  "title": "Lines Intersections",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "Bazek",
  "publicHandle": "1400672501a03c42814fc88cf49e3b439d3f14",
  "codingamerHandle": "9e2ff38c769c4f3d1d185bb720c4c3131543021",
  "lastVersion": {
    "version": 16,
    "autocloseTime": 1768954897319,
    "freezeTime": 1766967697319,
    "data": {
      "title": "Lines Intersections",
      "topics": [
        {
          "id": 95,
          "handle": "geometry",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Geometry",
            "2": "Geometry"
          },
          "puzzleCount": 37,
          "parentTopicId": 93
        }
      ],
      "solution": "from typing import List, Optional\nfrom collections import namedtuple\n\nPoint = namedtuple('Point', ['x', 'y'])\nLine = namedtuple('Line', ['p1', 'p2'])\n\n\ndef line_intersection(l1: Line, l2: Line) -> Optional[Point]:\n    # line1: a1*x1 + b1*y1 = c1\n    a1 = l1.p2.y - l1.p1.y\n    b1 = l1.p1.x - l1.p2.x\n    c1 = a1 * l1.p1.x + b1 * l1.p1.y\n    # line2: a2*x2 + b2*y2 = c2\n    a2 = l2.p2.y - l2.p1.y\n    b2 = l2.p1.x - l2.p2.x\n    c2 = a2 * l2.p1.x + b2 * l2.p1.y\n\n    det = a1 * b2 - a2 * b1\n    if det == 0:\n        return None\n\n    return Point((c1 * b2 - c2 * b1) / det, (a1 * c2 - a2 * c1) / det)\n\n\nn = int(input())\nlines: set[Line] = set()\npoints: set[Point] = set()\n\nfor _ in range(n):\n    x1, y1, x2, y2 = map(float, input().split())\n    actual_line = Line(Point(x1, y1), Point(x2, y2))\n    for line in lines:\n        intersection = line_intersection(actual_line, line)\n        if intersection is not None:\n            points.add(intersection)\n    lines.add(actual_line)\n\nprint(len(points))\nfor x, y in sorted(points):\n    if abs(x) < 1e-4:\n        x = 0\n    if abs(y) < 1e-4:\n        y = 0\n    print(f\"{x:.3f}\", f\"{y:.3f}\")\n",
      "statement": "You are given a set of infinite lines in a 2D (x-y) plane.\n\nYour task is to find all the intersection points of these lines.",
      "testCases": [
        {
          "title": "Triangle",
          "isTest": true,
          "testIn": "3\n-6 -5 12 12\n4 -44 9 19\n4 -44 50 19",
          "testOut": "3\n4.000 -44.000\n8.156 8.370\n117.955 112.068",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Triangle Validator",
          "isTest": false,
          "testIn": "3\n-2 4 -12 82\n33 -22 29 19\n42 -41 54 -4",
          "testOut": "3\n14.600 -125.482\n36.506 -57.939\n133.816 -1055.367",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Two intersects",
          "isTest": true,
          "testIn": "2\n4 20 20 4\n0 0 0 50",
          "testOut": "1\n0.000 24.000",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Two intersects Validator",
          "isTest": false,
          "testIn": "2\n4 15 20 14\n0 0 0 50",
          "testOut": "1\n0.000 15.250",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Two parallel",
          "isTest": true,
          "testIn": "2\n1 1 20 20\n16 0 20 4",
          "testOut": "0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Two parallel Validator",
          "isTest": false,
          "testIn": "2\n4 4 24 24\n16 0 20 4",
          "testOut": "0",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Square",
          "isTest": true,
          "testIn": "4\n0 0 4 0\n4 0 4 4\n4 4 0 4\n0 4 0 0",
          "testOut": "4\n0.000 0.000\n0.000 4.000\n4.000 0.000\n4.000 4.000",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Square Validator",
          "isTest": false,
          "testIn": "4\n0 0 6 0\n6 0 6 6\n6 6 0 6\n0 6 0 0",
          "testOut": "4\n0.000 0.000\n0.000 6.000\n6.000 0.000\n6.000 6.000",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Square crossed",
          "isTest": true,
          "testIn": "6\n2 3 12 3\n2 13 12 13\n2 3 2 13\n12 3 12 13\n2 3 12 13\n2 13 12 3",
          "testOut": "5\n2.000 3.000\n2.000 13.000\n7.000 8.000\n12.000 3.000\n12.000 13.000",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Square crossed Validator",
          "isTest": false,
          "testIn": "6\n7 8 17 8\n7 18 17 18\n7 8 7 18\n17 8 17 18\n7 8 17 18\n7 18 17 8",
          "testOut": "5\n7.000 8.000\n7.000 18.000\n12.000 13.000\n17.000 8.000\n17.000 18.000",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "One line",
          "isTest": true,
          "testIn": "1\n45 23 12 -9",
          "testOut": "0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "One line Validator",
          "isTest": false,
          "testIn": "1\n-5 0 10 8",
          "testOut": "0",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Zero",
          "isTest": true,
          "testIn": "0",
          "testOut": "0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Zero Validator",
          "isTest": false,
          "testIn": "0",
          "testOut": "0",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "10 lines",
          "isTest": true,
          "testIn": "10\n0 0 20 20\n0 20 10 40\n100 60 10 20\n0 10 20 10\n0 1 20 21\n0 2 20 22\n0 19 20 -1\n5 0 5 20\n0 11 20 11\n15 0 15 20",
          "testOut": "38\n-20.000 -20.000\n-19.000 -18.000\n-18.000 -16.000\n-12.500 10.000\n-10.250 11.000\n-5.000 10.000\n-4.500 11.000\n-2.857 14.286\n-0.333 19.333\n2.385 16.615\n5.000 5.000\n5.000 6.000\n5.000 7.000\n5.000 10.000\n5.000 11.000\n5.000 14.000\n5.000 17.778\n5.000 30.000\n8.000 10.000\n8.000 11.000\n8.500 10.500\n9.000 10.000\n9.000 11.000\n9.500 9.500\n10.000 10.000\n10.000 11.000\n11.000 11.000\n15.000 4.000\n15.000 10.000\n15.000 11.000\n15.000 15.000\n15.000 16.000\n15.000 17.000\n15.000 22.222\n15.000 50.000\n24.400 26.400\n26.200 27.200\n28.000 28.000",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "10 lines Validator",
          "isTest": false,
          "testIn": "10\n4 0 24 20\n2 25 25 0\n10 0 10 25\n30 15 20 15\n0 1 20 21\n35 2 50 22\n50 59 20 -1\n5 0 5 20\n0 11 21 11\n85 80 15 20",
          "testOut": "40\n-5.500 -52.000\n4.500 11.000\n5.000 -38.000\n5.000 -31.000\n5.000 1.000\n5.000 6.000\n5.000 11.000\n5.000 11.429\n5.000 15.000\n5.000 21.739\n9.167 15.000\n10.000 -31.333\n10.000 -21.000\n10.000 6.000\n10.000 11.000\n10.000 15.000\n10.000 15.714\n10.000 16.304\n10.304 15.974\n11.200 15.000\n12.542 13.542\n14.000 15.000\n14.880 11.000\n14.938 10.938\n15.000 11.000\n19.000 15.000\n22.085 3.169\n26.000 11.000\n28.000 15.000\n29.683 -5.090\n37.000 33.000\n41.750 11.000\n42.000 43.000\n42.125 43.250\n43.000 44.000\n44.750 15.000\n78.000 74.000\n108.800 100.400\n122.000 118.000\n137.000 138.000",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "10 lines with maximum intersections",
          "isTest": true,
          "testIn": "10\n-9 -80 -70 -65\n-80 10 -60 85\n-50 -9 -30 -75\n-40 60 -2 45\n-30 -5 -15 -30\n10 7 30 55\n20 -6 40 -45\n30 95 5 70\n60 -85 8 -60\n70 4 90 25",
          "testOut": "45\n-1166.588 504.706\n-242.222 -598.333\n-153.333 332.000\n-140.556 -217.083\n-118.158 -53.158\n-98.154 -58.077\n-89.091 -24.091\n-86.545 -14.545\n-81.818 -16.818\n-78.000 75.000\n-75.109 73.859\n-72.857 66.429\n-68.652 52.553\n-67.385 57.308\n-64.127 69.524\n-55.581 9.419\n-48.596 127.763\n-45.000 20.000\n-41.801 -36.057\n-38.889 -110.333\n-30.054 -74.823\n-27.544 -83.105\n-24.647 -76.152\n-24.023 -94.724\n-14.906 50.094\n-13.591 -49.619\n-10.847 54.153\n-9.810 -79.801\n-9.344 -39.426\n-7.208 47.056\n0.973 -56.622\n5.337 -63.896\n8.719 -60.345\n11.494 10.586\n19.154 -86.923\n21.902 35.565\n34.167 -33.625\n58.571 123.571\n60.681 -85.327\n67.609 -98.838\n78.707 13.142\n110.953 -109.497\n310.588 -572.647\n849.420 -291.087\n2690.000 2755.000",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "10 lines with maximum intersections Validator",
          "isTest": false,
          "testIn": "10\n-34 87 12 -56\n77 -22 -45 91\n5 18 -72 -60\n-88 -45 33 76\n-50 99 80 -12\n23 45 -60 88\n-70 -30 40 55\n12 -80 95 60\n-25 17 67 -90\n-90 0 10 70",
          "testOut": "45\n-259.257 289.451\n-221.165 245.149\n-106.969 112.333\n-96.542 138.740\n-83.200 -40.200\n-40.298 34.792\n-33.263 84.709\n-31.164 78.185\n-29.187 72.036\n-25.462 17.538\n-21.450 47.985\n-18.684 9.654\n-18.610 66.557\n-15.016 27.984\n-11.494 1.292\n-11.023 15.573\n-8.412 57.111\n-7.674 5.161\n-4.995 59.503\n-4.307 59.985\n-3.402 -8.119\n-1.811 57.854\n3.281 46.281\n7.178 50.178\n9.167 52.167\n14.850 35.566\n17.005 -71.558\n18.763 31.941\n19.807 39.396\n23.233 36.470\n25.430 43.741\n28.726 42.034\n30.937 -48.058\n46.432 59.971\n57.238 -3.696\n61.619 3.695\n66.667 109.667\n71.279 19.988\n136.028 129.203\n159.959 174.971\n165.433 178.803\n167.977 183.093\n208.579 251.579\n535.000 437.500\n2315.000 2358.000",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "10 coincident lines",
          "isTest": true,
          "testIn": "10\n-6 -8 -1 2\n-5 -6 2 8\n0 4 -4 -4\n-10 -16 10 24\n-24 -44 -22 -40\n38 80 39 82\n48 100 -52 -100\n-40 -76 -52 -100\n-1 2 48 100\n0 4 -2 0",
          "testOut": "0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "10 coincident lines Validator",
          "isTest": false,
          "testIn": "10\n-98 -47 2 3\n-92 -44 -90 -43\n8 6 -26 -11\n-20 -8 -18 -7\n-12 -4 -10 -3\n-4 0 -2 1\n0 2 -96 -46\n4 4 6 5\n-28 -12 10 7\n24 14 26 15",
          "testOut": "0",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "All cases",
          "isTest": true,
          "testIn": "10\n-3 0 -3 5\n-3 -8 -3 -9\n-2 2 2 3\n-3 -2 1 -1\n-8 7 12 -1\n-18 11 27 -7\n0 0 0 1\n0 -1 0 -2\n0 0 1 0\n-1 0 -2 0",
          "testOut": "13\n-10.000 0.000\n-3.000 -2.000\n-3.000 0.000\n-3.000 1.750\n-3.000 5.000\n0.000 -1.250\n0.000 0.000\n0.000 2.500\n0.000 3.800\n2.000 3.000\n5.000 0.000\n7.769 0.692\n9.500 0.000",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "All cases Validator",
          "isTest": false,
          "testIn": "10\n7 0 -7 5\n7 -8 7 -9\n8 2 12 3\n7 -2 11 -1\n2 7 22 -1\n-8 11 37 -7\n0 0 0 1\n0 -1 0 -2\n0 0 1 0\n-1 0 -2 0",
          "testOut": "15\n0.000 -3.750\n0.000 0.000\n0.000 2.500\n0.000 7.800\n4.118 1.029\n7.000 -2.000\n7.000 0.000\n7.000 1.750\n7.000 5.000\n10.294 -1.176\n12.000 3.000\n15.000 0.000\n17.769 0.692\n19.500 0.000\n123.667 -41.667",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Star",
          "isTest": true,
          "testIn": "8\n0 1 0 -1\n-1 0 1 0\n2 2 -2 -2\n-2 2 2 -2\n-3 1 3 -1\n-3 -1 3 1\n-1 3 1 -3\n-1 -3 1 3",
          "testOut": "1\n0.000 0.000",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Star Validator",
          "isTest": false,
          "testIn": "8\n0 10 0 -10\n-10 0 10 0\n20 20 -20 -20\n-20 20 20 -20\n-30 10 30 -10\n-30 -10 30 10\n-10 30 10 -30\n-10 -30 10 30",
          "testOut": "1\n0.000 0.000",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "easy",
      "constraints": "0 ≤ [[N]] ≤ 10\n0 ≤ [[K]] ≤ 45\n−100 ≤ [[x1]], [[y1]], [[x2]], [[y2]] ≤ 100\nFor each given line, ([[x1]], [[y1]]) ≠ ([[x2]], [[y2]]).",
      "coverBinaryId": 154764627499651,
      "stubGenerator": "read n:int\nloop n read x1:int y1:int x2:int y2:int\nwrite 0",
      "inputDescription": "<<First line>>: an integer [[N]] — the number of infinite lines\n<<Next [[N]] lines>>: four space-separated integers [[x1]] [[ y1]] [[x2]] [[y2]] describing one infinite line passing through points ([[x1]], [[y1]]) and ([[x2]], [[y2]])",
      "solutionLanguage": "Python3",
      "outputDescription": "<<First line>>: an integer [[K]] — the number of intersection points.\n<<Next [[K]] lines>>: two space-separated real numbers [[x]] [[y]] representing the coordinates of each intersection point.\n\nOutput the points in ascending order, sorted by x-coordinate and then by y-coordinate.\nEach coordinate must be rounded and printed to 3 decimal places.\nWhen multiple lines intersect in the same point, output it only once.\n\n<<NOTES>>:\nIn geometry, two coincident lines have infinite number of intersection points.\nHowever, for the purpose of this puzzle, coincident lines are treated as parallel and no intersection point should be output."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">You are given a set of infinite lines in a 2D (x-y) plane.<br><br>Your task is to find all the intersection points of these lines.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>First line</strong>: an integer <var>N</var> &mdash; the number of infinite lines<br><strong>Next <var>N</var> lines</strong>: four space-separated integers <var>x1</var> <var> y1</var> <var>x2</var> <var>y2</var> describing one infinite line passing through points (<var>x1</var>, <var>y1</var>) and (<var>x2</var>, <var>y2</var>)</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>First line</strong>: an integer <var>K</var> &mdash; the number of intersection points.<br><strong>Next <var>K</var> lines</strong>: two space-separated real numbers <var>x</var> <var>y</var> representing the coordinates of each intersection point.<br><br>Output the points in ascending order, sorted by x-coordinate and then by y-coordinate.<br>Each coordinate must be rounded and printed to 3 decimal places.<br>When multiple lines intersect in the same point, output it only once.<br><br><strong>NOTES</strong>:<br>In geometry, two coincident lines have infinite number of intersection points.<br>However, for the purpose of this puzzle, coincident lines are treated as parallel and no intersection point should be output.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">0 &le; <var>N</var> &le; 10<br>0 &le; <var>K</var> &le; 45<br>&minus;100 &le; <var>x1</var>, <var>y1</var>, <var>x2</var>, <var>y2</var> &le; 100<br>For each given line, (<var>x1</var>, <var>y1</var>) &ne; (<var>x2</var>, <var>y2</var>).</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">3\n-6 -5 12 12\n4 -44 9 19\n4 -44 50 19</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">3\n4.000 -44.000\n8.156 8.370\n117.955 112.068</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 3757896439,
  "avatar": 3673116000941,
  "commentCount": 28,
  "upVotes": 7,
  "downVotes": 1,
  "validateAction": {
    "actionId": 1312273,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1766970337003,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}