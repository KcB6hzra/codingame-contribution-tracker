{
  "id": 6821,
  "activeVersion": 15,
  "score": 10,
  "votableId": 18678785,
  "codingamerId": 3893564,
  "views": 223,
  "commentableId": 18581505,
  "title": "Forgotten Braces",
  "status": "ACCEPTED",
  "type": "CLASHOFCODE",
  "nickname": "Andriamanitra",
  "publicHandle": "682102420fbce0fce95e0ee56095ea2b9924",
  "codingamerHandle": "8931375f2caabaa3c46fc9401a856edf4653983",
  "lastVersion": {
    "version": 15,
    "autocloseTime": 1625494771902,
    "data": {
      "title": "Forgotten Braces",
      "topics": [],
      "fastest": true,
      "reverse": false,
      "shortest": true,
      "solution": "def indentation(line)\n    (0..).find{|i| line[i] != ' '}\nend\n\nn = gets.to_i\ncode = $<.map(&:chomp)\nexit if code.size != n  # makes sure the solution doesn't work if input is wrong size\n\n# Extra line is required for each_cons(2) to iterate over all lines\ncode << \"\"\n\ncode.each_cons(2){|current, following|\n    curr_indent = indentation(current)\n    next_indent = indentation(following)\n    if curr_indent < next_indent\n        puts current + ' {'\n    elsif curr_indent > next_indent\n        puts current\n        puts ' ' * next_indent + '}'\n    else\n        puts current\n    end\n}\n",
      "statement": "You have spent too much time writing Python, which caused you to forget all braces in your code. Luckily, the code is well indented so you can write a simple script to add the missing braces. The level of indentation is defined by the number of leading spaces on the line.\n\nThe logic for adding braces is as follows:\n* If the next line is indented further than the current line, you should add a space and '{' character to the end of the line\n* If the current line is indented further than the next line, you should add a new line with a single '}' character indented at the same level as the following line",
      "testCases": [
        {
          "title": "Example",
          "isTest": true,
          "testIn": "6\na = 2\nb = 3\nif (a < b)\n  a = a + b\nelse\n  a = b",
          "testOut": "a = 2\nb = 3\nif (a < b) {\n  a = a + b\n}\nelse {\n  a = b\n}",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "5\nx = 1\nif (x > y)\n  x += y\nelse\n  y += x",
          "testOut": "x = 1\nif (x > y) {\n  x += y\n}\nelse {\n  y += x\n}",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Hello World in C",
          "isTest": true,
          "testIn": "3\nint main()\n    printf(\"Hello world!\");\n    return 0;",
          "testOut": "int main() {\n    printf(\"Hello world!\");\n    return 0;\n}",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "4\nthis is not\n    valid code\n    but will still\n    work as a validator",
          "testOut": "this is not {\n    valid code\n    but will still\n    work as a validator\n}",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Hello World in Python",
          "isTest": true,
          "testIn": "3\nhello = \"Hello\"\nworld = \"World\"\nprint(f\"{hello} {world}!\")",
          "testOut": "hello = \"Hello\"\nworld = \"World\"\nprint(f\"{hello} {world}!\")",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "4\nthis test\nchecks cases\nwhere no braces\nare required",
          "testOut": "this test\nchecks cases\nwhere no braces\nare required",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Lucas numbers in D",
          "isTest": true,
          "testIn": "16\nimport std;\n\nuint lucas(uint n)\n    uint a = 2;\n    uint b = 1;\n    while (n > 0)\n        swap(a, b);\n        b += a;\n        n -= 1;\n    return a;\n\nvoid main()\n    uint n = readln.chomp.to!uint;\n    foreach (i; 0..n)\n        writeln(lucas(i));\n    writeln(\"Done!\");",
          "testOut": "import std;\n\nuint lucas(uint n) {\n    uint a = 2;\n    uint b = 1;\n    while (n > 0) {\n        swap(a, b);\n        b += a;\n        n -= 1;\n    }\n    return a;\n}\n\nvoid main() {\n    uint n = readln.chomp.to!uint;\n    foreach (i; 0..n) {\n        writeln(lucas(i));\n    }\n    writeln(\"Done!\");\n}",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "14\nimport std;\nint fibo(int n)\n    int a = 0;\n    int b = 1;\n    while (n > 0)\n        swap(a, b);\n        b += a;\n        n -= 1;\n    return a;\nvoid main()\n    int n = readln.chomp.to!int;\n    foreach (i; 0..n)\n        writeln(fibo(i));\n    writeln(\"Done!\");",
          "testOut": "import std;\nint fibo(int n) {\n    int a = 0;\n    int b = 1;\n    while (n > 0) {\n        swap(a, b);\n        b += a;\n        n -= 1;\n    }\n    return a;\n}\nvoid main() {\n    int n = readln.chomp.to!int;\n    foreach (i; 0..n) {\n        writeln(fibo(i));\n    }\n    writeln(\"Done!\");\n}",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Recursive Lucas numbers in D",
          "isTest": true,
          "testIn": "9\nimport std;\n\nuint lucas(uint n)\n if (n < 2) return 2 - n;\n return memoize!lucas(n-2) + memoize!lucas(n-1);\n\nvoid main()\n readln.chomp.to!uint.lucas.writeln;\n// what a nice program!",
          "testOut": "import std;\n\nuint lucas(uint n) {\n if (n < 2) return 2 - n;\n return memoize!lucas(n-2) + memoize!lucas(n-1);\n}\n\nvoid main() {\n readln.chomp.to!uint.lucas.writeln;\n}\n// what a nice program!",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "6\nthis validator\n checks that\n even just\none space\n still counts\nas indentation",
          "testOut": "this validator {\n checks that\n even just\n}\none space {\n still counts\n}\nas indentation",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Rusty",
          "isTest": true,
          "testIn": "38\nuse std::io;\nuse rand;\n\nmacro_rules! parse\n ($x:expr, $t:ident) => ($x.trim().parse::<$t>().unwrap())\n\nfn suffix(n: usize) -> &'static str\n if n%10==1 && n%100!=11\n  return \"st\"\n else if n%10==2 && n%100!=12\n  return \"nd\"\n else if n%10==3 && n%100!=13\n  return \"rd\"\n \"th\"\n\nfn main()\n let mut line = String::new();\n io::stdin().read_line(&mut line);\n let n = parse!(line, i32);\n let mut lines = Vec::new();\n for i in 0..n as usize\n  let mut line = String::new();\n  io::stdin().read_line(&mut line);\n  lines.push(line.trim_matches('\\n').to_string());\n for (ln, line) in lines.iter().enumerate()\n  eprint!(\"<Line{}>\\n{}\\n\", ln, line);\n  if line.len() == 0\n   eprintln!(\"Empty line!\");\n  else\n   for i in 0..line.len()\n    // TODO: improve accuracy\n    if rand::random::<bool>()\n     eprint!(\"{}{} character isn't whitespace!\", i+1, suffix(i+1));\n     break;\n    eprint!(\".\");\n   eprintln!();\n  eprintln!(\"</Line{}>\\n\", ln);\n // end",
          "testOut": "use std::io;\nuse rand;\n\nmacro_rules! parse {\n ($x:expr, $t:ident) => ($x.trim().parse::<$t>().unwrap())\n}\n\nfn suffix(n: usize) -> &'static str {\n if n%10==1 && n%100!=11 {\n  return \"st\"\n }\n else if n%10==2 && n%100!=12 {\n  return \"nd\"\n }\n else if n%10==3 && n%100!=13 {\n  return \"rd\"\n }\n \"th\"\n}\n\nfn main() {\n let mut line = String::new();\n io::stdin().read_line(&mut line);\n let n = parse!(line, i32);\n let mut lines = Vec::new();\n for i in 0..n as usize {\n  let mut line = String::new();\n  io::stdin().read_line(&mut line);\n  lines.push(line.trim_matches('\\n').to_string());\n }\n for (ln, line) in lines.iter().enumerate() {\n  eprint!(\"<Line{}>\\n{}\\n\", ln, line);\n  if line.len() == 0 {\n   eprintln!(\"Empty line!\");\n  }\n  else {\n   for i in 0..line.len() {\n    // TODO: improve accuracy\n    if rand::random::<bool>() {\n     eprint!(\"{}{} character isn't whitespace!\", i+1, suffix(i+1));\n     break;\n    }\n    eprint!(\".\");\n   }\n   eprintln!();\n  }\n  eprintln!(\"</Line{}>\\n\", ln);\n }\n // end\n}",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 6",
          "isTest": false,
          "testIn": "38\nx y z;\nx y;\n\nx z\n x y z\n\nx y z\n x y z\n  x y z\n x y z\n  x y z\n x y z\n  x y z\n x y z\n\nx y z\n x y z\n x y z\n x y z\n x y z\n x y z\n  x y z\n  x y z\n  x y z\n x y z\n  x y z\n  x y z\n   x y z\n  x y z\n   x y z\n    x y z\n    x y z\n     xyz\n     xyz\n    x y z\n   x y z\n  x y z\n x y z",
          "testOut": "x y z;\nx y;\n\nx z {\n x y z\n}\n\nx y z {\n x y z {\n  x y z\n }\n x y z {\n  x y z\n }\n x y z {\n  x y z\n }\n x y z\n}\n\nx y z {\n x y z\n x y z\n x y z\n x y z\n x y z {\n  x y z\n  x y z\n  x y z\n }\n x y z {\n  x y z\n  x y z {\n   x y z\n  }\n  x y z {\n   x y z {\n    x y z\n    x y z {\n     xyz\n     xyz\n    }\n    x y z\n   }\n   x y z\n  }\n  x y z\n }\n x y z\n}",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Is this even a real language?",
          "isTest": true,
          "testIn": "11\n'\n\"\n*\n +\n  -\n   \\\n   |\n   /\n  /\n /\n/",
          "testOut": "'\n\"\n* {\n + {\n  - {\n   \\\n   |\n   /\n  }\n  /\n }\n /\n}\n/",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "10\n\"\n-\n +\n  *\n   \\\n   |\n   /\n  /\n /\n/",
          "testOut": "\"\n- {\n + {\n  * {\n   \\\n   |\n   /\n  }\n  /\n }\n /\n}\n/",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Innovative indentation",
          "isTest": true,
          "testIn": "18\nfoo\n bar\n  baz\n    quz\n       quux\n            corge\n                    grault\n                                 garply\n                                                      // waldo\n                                 ylprag\n                    tluarg\n            egroc\n       xuuq\n    zuq\n  zab\n rab\n// Fibonacci indentation style\n// https://twitter.com/richardwestenra/status/765488378951376896",
          "testOut": "foo {\n bar {\n  baz {\n    quz {\n       quux {\n            corge {\n                    grault {\n                                 garply {\n                                                      // waldo\n                                 }\n                                 ylprag\n                    }\n                    tluarg\n            }\n            egroc\n       }\n       xuuq\n    }\n    zuq\n  }\n  zab\n }\n rab\n}\n// Fibonacci indentation style\n// https://twitter.com/richardwestenra/status/765488378951376896",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 8",
          "isTest": false,
          "testIn": "17\nboo\n bar\n  baz\n    quz\n       quux\n            corge\n                    grault\n                                 garply\n                                                      // waldo\n                                 ylprag\n                    tluarg\n            egroc\n       xuuq\n    zuq\n  zab\n rab\noob",
          "testOut": "boo {\n bar {\n  baz {\n    quz {\n       quux {\n            corge {\n                    grault {\n                                 garply {\n                                                      // waldo\n                                 }\n                                 ylprag\n                    }\n                    tluarg\n            }\n            egroc\n       }\n       xuuq\n    }\n    zuq\n  }\n  zab\n }\n rab\n}\noob",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "constraints": "2 < [[N]] < 100\nEach line of code will be at most 80 characters long\nThe test cases will not include cases where you would need to insert multiple consecutive closing braces on different indentation levels",
      "stubGenerator": "read n:int\nloop n read line:string(128)\nwrite answer",
      "inputDescription": "<<Line 1:>> An integer [[N]] for the number of lines of code\n<<Next [[N]] lines:>> The source code as a string, indented using spaces",
      "solutionLanguage": "Ruby",
      "outputDescription": "The code with the missing braces added to it"
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">You have spent too much time writing Python, which caused you to forget all braces in your code. Luckily, the code is well indented so you can write a simple script to add the missing braces. The level of indentation is defined by the number of leading spaces on the line.<br><br>The logic for adding braces is as follows:<br>* If the next line is indented further than the current line, you should add a space and '{' character to the end of the line<br>* If the current line is indented further than the next line, you should add a new line with a single '}' character indented at the same level as the following line</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> An integer <var>N</var> for the number of lines of code<br><strong>Next <var>N</var> lines:</strong> The source code as a string, indented using spaces</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">The code with the missing braces added to it</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">2 &lt; <var>N</var> &lt; 100<br>Each line of code will be at most 80 characters long<br>The test cases will not include cases where you would need to insert multiple consecutive closing braces on different indentation levels</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">6\na = 2\nb = 3\nif (a &lt; b)\n  a = a + b\nelse\n  a = b</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">a = 2\nb = 3\nif (a &lt; b) {\n  a = a + b\n}\nelse {\n  a = b\n}</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 147147758464,
  "avatar": 46641547586781,
  "commentCount": 14,
  "upVotes": 11,
  "downVotes": 1,
  "validateAction": {
    "actionId": 567260,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1623582696032,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}