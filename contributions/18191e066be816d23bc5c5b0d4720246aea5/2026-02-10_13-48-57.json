{
  "id": 1819,
  "activeVersion": 4,
  "score": 13,
  "votableId": 9484355,
  "codingamerId": 1336464,
  "views": 1222,
  "commentableId": 9417733,
  "title": "The Balanced Centrifuge Problem",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "magaiti",
  "publicHandle": "18191e066be816d23bc5c5b0d4720246aea5",
  "codingamerHandle": "eec8bff1779e6e64b0ce890f0d5f53e64646331",
  "lastVersion": {
    "version": 4,
    "autocloseTime": 1546693930563,
    "data": {
      "title": "The Balanced Centrifuge Problem",
      "topics": [
        {
          "labelMap": {
            "2": "Primes"
          }
        },
        {
          "id": 60,
          "handle": "dynamic-programming",
          "labelMap": {
            "1": "Programmation dynamique",
            "2": "Dynamic programming"
          },
          "pageTitle": "Dynamic programming: exercises and theory",
          "puzzleCount": 6,
          "parentTopicId": 41,
          "contentDetailsId": 85
        }
      ],
      "solution": "#include <iostream>\n#include <vector>\nusing namespace std;\n\n/*\n#include <cmath>\n#include <algorithm>\nconstexpr double PI = 2.0 * acos(0.0);\nbool bruteforce (int n, int k)\n{\n    string s = string((n - k), '0') + string(k, '1');\n    //if(!is_sorted(begin(s), end(s))) throw;\n    do {\n        double x = 0, y = 0, angle = 0, increment = 2.0 * PI / n;\n        for (char ch: s) {\n            if (ch == '1') { x += sin(angle); y += cos(angle); }\n            angle += increment;\n        }\n        if (abs(x) < 1e-8 && abs(y) < 1e-8)\n            return true;\n    }\n    while (next_permutation(begin(s), end(s)));\n    return false;\n}\n*/\n\nconst vector<int>& prime_factors(int n)\n{\n    static int memo = -1;\n    static vector<int> output;\n    if (n == memo)\n        return output;\n    \n    memo = n;\n    output.clear();\n    for (int d = 2; d <= n; ++d)\n        while (n % d == 0) {\n            if (output.empty() || output.back() != d)\n                output.push_back(d);\n            n /= d;\n        }\n    return output;\n}\n\nbool can_be_expressed_as_sum(int N, int K) \n{\n    static vector<bool> R; // R[i] iff i is \"reachable\"\n    static int MemoizedN = -1;\n    \n    if (N != MemoizedN)\n    {\n        auto F = prime_factors(N);\n        R.assign(N+1, false);\n        R[0] = true;\n        for (auto p: F)\n            for (int n = p; n < N+1; ++n)\n                R[n] = R[n] || R[n-p];\n        MemoizedN = N;\n    }\n    return R[K];\n};\n\nbool IswarConjecture (int n, int k) \n{\n    return can_be_expressed_as_sum (n, k)\n        && can_be_expressed_as_sum (n, (n - k));\n}\n\nint main() {\n    int n; cin >> n;\n    int count = 0;\n    //auto t = clock();\n    for (int k = 1; k <= n; k++) {\n        //if (bruteforce(n, k))\n        if (IswarConjecture(n, k))\n            ++count;\n    }\n    //cerr << \"elapsed msec: \" << 1000.0 * (clock() - t) / CLOCKS_PER_SEC << endl;\n    cout << count << endl;\n}",
      "statement": "(Inspired by https://www.youtube.com/watch?v=7DHE8RnsCQ8)\n\nCentrifuge is a piece of equipment that puts multiple test tubes in rotation at very high speeds. It consists of a cylindrical rotor with holes situated evenly along the circumference of the rotor.\nBecause the device is operating at high speeds, the center of mass of all tubes must coincide with the center of the rotor. We assume all tubes have the same mass.\n\nFor the sake of simplicity, we also assume that tubes are point masses, fixed firmly to the rotor. All at the same distance from the center. You may safely assume the (x,y) coordinates of tube {{k}} are (R*sin (a), R*cos (a)), where a = 2*Pi*{{k}}/{{n}};\n\nThe problem is: Given a centrifuge with [[N]] holes and [[K]] tubes, is it possible to balance it?\n\nexample 1: given [[N]] = {{6}} possible values for [[K]] are 2,3,4,6.\n\nexample 2: given [[N]] = {{12}}, it is possible to balance {{5}} tubes: put 3 evenly dispersed (every 4th hole), then find a pair of opposite unoccupied holes and insert remaining 2 tubes there.\n\nexample 3: given [[N]] = {{10}}, it is impossible to balance {{7}} tubes: put 5 evenly dispersed, and there's no opposite unoccupied holes left!",
      "testCases": [
        {
          "title": "Prime",
          "isTest": true,
          "testIn": "7",
          "testOut": "1",
          "isValidator": false
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "13",
          "testOut": "1",
          "isValidator": true
        },
        {
          "title": "Small Composite",
          "isTest": true,
          "testIn": "6",
          "testOut": "4",
          "isValidator": false
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "8",
          "testOut": "4",
          "isValidator": true
        },
        {
          "title": "Medium Composite",
          "isTest": true,
          "testIn": "12",
          "testOut": "10",
          "isValidator": false
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "18",
          "testOut": "16",
          "isValidator": true
        },
        {
          "title": "Two Primes",
          "isTest": true,
          "testIn": "33",
          "testOut": "13",
          "isValidator": false
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "35",
          "testOut": "11",
          "isValidator": true
        },
        {
          "title": "Hard 1",
          "isTest": true,
          "testIn": "2695",
          "testOut": "2679",
          "isValidator": false
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "1911",
          "testOut": "1899",
          "isValidator": true
        },
        {
          "title": "Hard 2",
          "isTest": true,
          "testIn": "12345",
          "testOut": "12337",
          "isValidator": false
        },
        {
          "title": "Validator 6",
          "isTest": false,
          "testIn": "23457",
          "testOut": "23445",
          "isValidator": true
        },
        {
          "title": "Tricky",
          "isTest": true,
          "testIn": "136271",
          "testOut": "135543",
          "isValidator": false
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "169979",
          "testOut": "169011",
          "isValidator": true
        },
        {
          "title": "Power of a Prime",
          "isTest": true,
          "testIn": "131072",
          "testOut": "65536",
          "isValidator": false
        },
        {
          "title": "Validator 8",
          "isTest": false,
          "testIn": "177147",
          "testOut": "59049",
          "isValidator": true
        }
      ],
      "difficulty": "hard",
      "constraints": "{{2}}<=[[N]]<={{200000}}\n{{1}} <= [[K]] <= [[N]]\n{{1}} <= [[M]] <= [[N]]",
      "stubGenerator": "read N:int\nwrite 1\n",
      "inputDescription": "<<Line 1:>> An integer [[N]] for the capacity of the centrifuge.",
      "solutionLanguage": "C++",
      "outputDescription": "<<Line 1:>> An integer [[M]] for the number of different possible values of [[K]]."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">(Inspired by https://www.youtube.com/watch?v=7DHE8RnsCQ8)<br><br>Centrifuge is a piece of equipment that puts multiple test tubes in rotation at very high speeds. It consists of a cylindrical rotor with holes situated evenly along the circumference of the rotor.<br>Because the device is operating at high speeds, the center of mass of all tubes must coincide with the center of the rotor. We assume all tubes have the same mass.<br><br>For the sake of simplicity, we also assume that tubes are point masses, fixed firmly to the rotor. All at the same distance from the center. You may safely assume the (x,y) coordinates of tube <const>k</const> are (R*sin (a), R*cos (a)), where a = 2*Pi*<const>k</const>/<const>n</const>;<br><br>The problem is: Given a centrifuge with <var>N</var> holes and <var>K</var> tubes, is it possible to balance it?<br><br>example 1: given <var>N</var> = <const>6</const> possible values for <var>K</var> are 2,3,4,6.<br><br>example 2: given <var>N</var> = <const>12</const>, it is possible to balance <const>5</const> tubes: put 3 evenly dispersed (every 4th hole), then find a pair of opposite unoccupied holes and insert remaining 2 tubes there.<br><br>example 3: given <var>N</var> = <const>10</const>, it is impossible to balance <const>7</const> tubes: put 5 evenly dispersed, and there's no opposite unoccupied holes left!</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> An integer <var>N</var> for the capacity of the centrifuge.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> An integer <var>M</var> for the number of different possible values of <var>K</var>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\"><const>2</const>&lt;=<var>N</var>&lt;=<const>200000</const><br><const>1</const> &lt;= <var>K</var> &lt;= <var>N</var><br><const>1</const> &lt;= <var>M</var> &lt;= <var>N</var></div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">7</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">1</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 225254908455,
  "avatar": 4034881109815,
  "commentCount": 16,
  "upVotes": 13,
  "downVotes": 0,
  "validateAction": {
    "actionId": 294371,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}