{
  "id": 5927,
  "activeVersion": 30,
  "score": 50,
  "votableId": 16404013,
  "codingamerId": 1280083,
  "views": 746,
  "commentableId": 16316335,
  "title": "Christmas Tree",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "igreactive",
  "publicHandle": "592756aa65fa428b447917758ce58a8d1c23",
  "codingamerHandle": "db9611100e7723a83b6901e7166cbdaf3800821",
  "lastVersion": {
    "version": 30,
    "autocloseTime": 1616347328445,
    "data": {
      "title": "Christmas Tree",
      "topics": [
        {
          "id": 94,
          "handle": "mathematics",
          "labelMap": {
            "1": "Mathematics",
            "2": "Mathematics"
          },
          "puzzleCount": 21,
          "parentTopicId": 93
        }
      ],
      "solution": "import java.util.*;\nimport java.io.*;\nimport java.math.*;\n\nclass Solution {\n\n    public static void main(String args[]) {\n        Scanner in = new Scanner(System.in);\n        long n = in.nextLong();\n        long i = in.nextLong();\n\n        Pair<Long> result = calculateHeight(n, i);\n\n        System.out.println(result.getLeft()+result.getRight());\n    }\n\n    private static Pair<Long> calculateHeight(long numberOfStars, long incrementation) {\n        long maxN = numberOfStars - 2;\n        long n = calculateN(BigInteger.valueOf(numberOfStars - 1), incrementation, 2, maxN);\n        BigInteger checkSum = checkSumForBigInteger(n, incrementation).getRight();\n        return new Pair<Long>(n, BigInteger.valueOf(numberOfStars).subtract(checkSum).longValue());\n    }\n\n    private static long calculateN(BigInteger stars, long r, long minN, long maxN) {\n        long between = calculateBetween(minN, maxN);\n        Pair<BigInteger> checkSumForMin = checkSumForBigInteger(minN, r);\n        if (conditionMet(checkSumForMin, stars, r)) {\n            return minN;\n        }\n        Pair<BigInteger> checkSumForBetween = checkSumForBigInteger(between, r);\n        if (conditionMet(checkSumForBetween, stars, r)) {\n            return between;\n        }\n        Pair<BigInteger> checkSumForMax = checkSumForBigInteger(maxN, r);\n        if (conditionMet(checkSumForMax, stars, r)) {\n            return maxN;\n        }\n        if (stars.compareTo(checkSumForMin.getRight()) > 0 && stars.compareTo(checkSumForBetween.getRight()) < 0) {\n            maxN = between;\n        } else {\n            minN = between;\n        }\n        return calculateN(stars, r, minN, maxN);\n    }\n\n    private static boolean conditionMet(Pair<BigInteger> checkSum, BigInteger stars, long r) {\n        if (stars.compareTo(checkSum.getRight()) == 0) {\n            return true;\n        }\n        BigInteger difference = stars.subtract(checkSum.getRight());\n        BigInteger next = checkSum.getLeft().add(BigInteger.valueOf(r));\n        if (difference.compareTo(BigInteger.ZERO) > 0 && difference.divide(next).compareTo(BigInteger.ONE) > 0) {\n            return false;\n        }\n\n        return difference.compareTo(BigInteger.ZERO) > 0 && difference.compareTo(next) < 0;\n    }\n\n    private static long calculateBetween(long minN, long maxN) {\n        return maxN - (maxN - minN) / 2;\n    }\n\n    private static Pair<BigInteger> checkSumForBigInteger(long n, long r) {\n        BigInteger nMinuxOne = BigInteger.valueOf(n).subtract(BigInteger.ONE);\n        BigInteger an = BigInteger.ONE.add(nMinuxOne.multiply(BigInteger.valueOf(r)));\n        BigInteger onePlusAn = BigInteger.ONE.add(an);\n        BigDecimal onePlusAnDividedByTwo = new BigDecimal(onePlusAn).divide(new BigDecimal(2));\n        BigDecimal checkSum = onePlusAnDividedByTwo.multiply(new BigDecimal(n));\n        return new Pair<BigInteger>(an, checkSum.toBigInteger());\n    }  \n\n    static class Pair<T> {\n        private T left;\n        private T right;\n\n        public Pair(T left, T right) {\n            this.left = left;\n            this.right = right;\n        }\n\n        public T getLeft() {\n            return left;\n        }\n\n        public T getRight() {\n            return right;\n        }\n    }        \n}",
      "statement": "Warning:\n\"Extreme tree..\" testcases might be harder to solve, if language of your choice out of the box do not support numbers bigger than 9223372036854775807. At the moment of writing it I know it's possible to solve it in JVM languages and Python.\n\nHaving [[n]] stars build a Christmas Tree.\nAll stars have to be used.\nTop of the tree begins with 1 star.\nEach row is greater than previous by [[i]] stars.\nOn the bottom of the tree there is at least 1 star which creates root.\nYou need to add as many stars as possible to the top layers, only remaining ones could be used for root.\nYou need to find minimum height [[h]] of Christmas Tree created with these conditions. \n\n\nExample:\n[[n]] = 38\n[[i]] = 2\n\n`     *\n    ***\n   *****\n  *******\n *********\n***********\n     *\n     *`\n\nAnswer:\n[[h]] = 8",
      "testCases": [
        {
          "title": "Example tree",
          "isTest": true,
          "testIn": "38\n2",
          "testOut": "8",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Example tree validator",
          "isTest": false,
          "testIn": "9\n2",
          "testOut": "7",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Really small tree",
          "isTest": true,
          "testIn": "10\n2",
          "testOut": "4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Really small tree validator",
          "isTest": false,
          "testIn": "2\n1",
          "testOut": "2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Tall tree",
          "isTest": true,
          "testIn": "100\n2",
          "testOut": "28",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Tall tree validator",
          "isTest": false,
          "testIn": "115\n3",
          "testOut": "31",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Giant tree",
          "isTest": true,
          "testIn": "2147483647\n3",
          "testOut": "82549",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Giant tree validator",
          "isTest": false,
          "testIn": "2147483647\n50",
          "testOut": "319747",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Fat tree",
          "isTest": true,
          "testIn": "100\n97",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Fat tree validator",
          "isTest": false,
          "testIn": "100\n32",
          "testOut": "4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Extreme tree 1",
          "isTest": true,
          "testIn": "9223372036854775807\n2147483647",
          "testOut": "79622251179820",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Extreme tree validator 1",
          "isTest": false,
          "testIn": "9223372036854775807\n1",
          "testOut": "6442450942",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Tricky tree",
          "isTest": true,
          "testIn": "999999997\n999999994",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Tricky tree validator",
          "isTest": false,
          "testIn": "3\n1",
          "testOut": "3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Extreme tree 2",
          "isTest": true,
          "testIn": "9223372036854775807\n2",
          "testOut": "8965527305",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Extreme tree validator 2",
          "isTest": false,
          "testIn": "9223372036854683125\n2",
          "testOut": "8965434623",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Extreme tree 3",
          "isTest": true,
          "testIn": "9223372036854775679\n5",
          "testOut": "4791279374",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Extreme tree validator 3",
          "isTest": false,
          "testIn": "9223372036854775807\n5",
          "testOut": "4791279502",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Extreme tree 4",
          "isTest": true,
          "testIn": "9223372036854775743\n12",
          "testOut": "11205065451",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Extreme tree validator 4",
          "isTest": false,
          "testIn": "9223372036854775804\n4",
          "testOut": "4294967292",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Extreme tree 5",
          "isTest": true,
          "testIn": "9223372036854775774\n3",
          "testOut": "7485514696",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Extreme tree validator 5",
          "isTest": false,
          "testIn": "9223372036854775551\n6",
          "testOut": "7261237311",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "1 <=  [[i]] < [[n]] < 2^63",
      "stubGenerator": "read n:long\nread i:long\nwrite h",
      "inputDescription": "<<Line 1:>> A long [[n]] available stars to build the Christmas Tree.\n<<Line 1:>> A long [[i]] stars added to next branch comparing to previous one.",
      "solutionLanguage": "Java",
      "outputDescription": "[[h]] height of the Christmas Tree"
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Warning:<br>&quot;Extreme tree..&quot; testcases might be harder to solve, if language of your choice out of the box do not support numbers bigger than 9223372036854775807. At the moment of writing it I know it's possible to solve it in JVM languages and Python.<br><br>Having <var>n</var> stars build a Christmas Tree.<br>All stars have to be used.<br>Top of the tree begins with 1 star.<br>Each row is greater than previous by <var>i</var> stars.<br>On the bottom of the tree there is at least 1 star which creates root.<br>You need to add as many stars as possible to the top layers, only remaining ones could be used for root.<br>You need to find minimum height <var>h</var> of Christmas Tree created with these conditions. <br><br><br>Example:<br><var>n</var> = 38<br><var>i</var> = 2<br><br><pre style=\"font-family: monospace\">     *<br>    ***<br>   *****<br>  *******<br> *********<br>***********<br>     *<br>     *</pre><br><br>Answer:<br><var>h</var> = 8</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> A long <var>n</var> available stars to build the Christmas Tree.<br><strong>Line 1:</strong> A long <var>i</var> stars added to next branch comparing to previous one.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><var>h</var> height of the Christmas Tree</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">1 &lt;=  <var>i</var> &lt; <var>n</var> &lt; 2^63</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">38\n2</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">8</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 154472505476,
  "commentCount": 81,
  "upVotes": 61,
  "downVotes": 11,
  "validateAction": {
    "actionId": 538178,
    "progress": 1,
    "alreadyDone": false
  },
  "denyAction": {
    "actionId": 536206,
    "progress": 0.6666666666666666,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1610841937000,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1611159745815,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "REFUSED",
      "date": 1613754337210,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1613755328445,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1616258143406,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}