{
  "id": 73374,
  "activeVersion": 14,
  "score": 17,
  "votableId": 31171669,
  "codingamerId": 2923506,
  "views": 481,
  "commentableId": 31032257,
  "title": "Mad Knights",
  "status": "ACCEPTED",
  "type": "PUZZLE_MULTI",
  "nickname": "darkhorse64",
  "publicHandle": "733740e18faa8032323ee1973968d79d7bc58",
  "codingamerHandle": "c9ebe76a83b33730956eda0534d6cad86053292",
  "lastVersion": {
    "version": 14,
    "autocloseTime": 1701804795317,
    "data": {
      "title": "Mad Knights",
      "topics": [
        {
          "id": 213,
          "handle": "bitboarding",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Bitboarding",
            "2": "Bitboarding"
          },
          "puzzleCount": 8,
          "parentTopicId": 93
        },
        {
          "id": 92,
          "handle": "MCTS",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Monte Carlo tree search",
            "2": "Monte Carlo tree search"
          },
          "puzzleCount": 20,
          "parentTopicId": 41
        },
        {
          "id": 89,
          "handle": "neural-network",
          "category": "ADVANCED",
          "labelMap": {
            "1": "RÃ©seau de neurones",
            "2": "Neural network"
          },
          "pageTitle": "Neural network: exercises and theory",
          "puzzleCount": 5,
          "parentTopicId": 42,
          "contentDetailsId": 112
        },
        {
          "id": 83,
          "handle": "minimax",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Minimax",
            "2": "Minimax"
          },
          "pageTitle": "Minimax: exercises and theory",
          "puzzleCount": 32,
          "parentTopicId": 42,
          "contentDetailsId": 93
        },
        {
          "id": 232,
          "handle": "heuristic-search",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Heuristic search",
            "2": "Heuristic search"
          },
          "puzzleCount": 3,
          "parentTopicId": 93
        }
      ],
      "refereeMd5": "2923506/a99ef41c4b901d7373fb7c5af87fdbca",
      "testHandle": "1034650c23850a52d258f1d3a2e33baf2b10efa",
      "viewerCode": "var Drawer=function(t){var e={};function r(n){var o;return(e[n]||(o=e[n]={i:n,l:!1,exports:{}},t[n].call(o.exports,o,o.exports,r),o.l=!0,o)).exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){\"use strict\";r.r(e),r.d(e,\"Drawer\",(function(){return ln}));var n={baseUrl:\"https://cdn-games.codingame.com/community/2923506-1696630888211/\",images:{\"forbidden.png\":\"3443e1faa527046692dd84cc71925f225b18f61cdbdc1c6f53a5b20ab9beccc7.png\",\"1.png\":\"fa5d492869932a498a1f8e5d16b680a5b46e2a242345ffe8c0eacf0771048146.png\",\"2.png\":\"0d9e857e2e9029af2d7492e302397396f6977f41941c1e61102858d7c991a01e.png\",\"0.png\":\"12e65374935166f7bd9e85acf18923e7d2f9dabbb4cec9723c62877b097a40d1.png\"},sprites:[],fonts:[]};function o(t,e,r){return t<=e?t+(e-t)*r:e+(t-e)*(1-r)}function i(t,e,r){return Math.min(1,Math.max(0,(r-t)/(e-t)))}function a(t,e,r,n,o){return o=o||0,Math.min(r/(t+o),n/(e+o))}function u(t){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==u(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===u(t)?t:String(t)}(n.key),n)}}var l=[],s=[],f=function(){function t(){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var e,r;return e=t,r=[{key:\"listen\",value:function(t){if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");s.push(t)}},{key:\"push\",value:function(t){l.push(t),s.forEach((function(e){return e(t)}))}}],null&&c(e.prototype,null),r&&c(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function y(t){return(y=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function p(t){var e=d();return function(){var r,n=v(t);r=e?(r=v(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===y(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}function h(t,e,r){return(h=d()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&b(e,r.prototype),e}).apply(null,arguments)}function d(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&b(e,t);var r=p(n);function n(t,e){var o;if(this instanceof n)return(o=r.call(this,\"Invalid color token: there is no player at index \".concat(t,\". Make sure to use getColorToken() if you want the color of a specific player.\"))).playerIdx=t,o.cause=e,o.name=\"InvalidPlayerColorTokenError\",o;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)}(t)}(Error));function g(t){return(g=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function w(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],(e=function(t){return t=function(t,e){if(\"object\"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==g(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===g(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){return r<1?t:e}r={type:Number,lerpMethod:function(t,e,r){return null===e?null:o((t={r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t}).r,(e={r:(16711680&e)>>16,g:(65280&e)>>8,b:255&e}).r,r)<<16|o(t.g,e.g,r)<<8|o(t.b,e.b,r)},convert:function(t,e){var r=-(t+1);try{return t<0?e.players[r].color:t}catch(t){return f.push(new m(r)),16777215}}},e={type:String,lerpMethod:S,convert:E};var x={type:Number,lerpMethod:function(t,e,r,n){for(;e>t+Math.PI;)e-=2*Math.PI;for(;e<t-Math.PI;)e+=2*Math.PI;return(n=void 0!==n&&Math.abs(e-t)>n?e:t+(e-t)*r)%(2*Math.PI)},convert:function(t){return t*Math.PI/180}},P={type:Number,lerpMethod:S},j={type:function(t){return\"1\"===t},lerpMethod:S},R={type:Number,lerpMethod:function(t,e,r){return e<t?e:o(t,e,r)}},T={default:{type:Number,lerpMethod:o},visible:j,rotation:x,skewX:x,skewY:x,fillColor:r,lineColor:r,strokeColor:r,tint:r,animationProgressTime:R,maxWidth:P,mask:P,baseWidth:P,baseHeight:P,image:e,images:e,scaleMode:e,restarted:{type:String,convert:function(t,e,r,n){return t?{date:r.date+n*r.frameDuration}:null},lerpMethod:S},playing:j,duration:P,blendMode:P,loop:j,text:O(O({},e),{},{convert:function(t,e){t=E(t);for(var r=/\\$(\\d)/g,n=r.exec(t),o=\"\",i=0;n;)n[1]<e.players.length&&(o=(o+=t.substring(i,n.index))+e.players[+n[1]].name),i=n.index+n[0].length,n=r.exec(t);return o+t.substring(i)}}),textAlign:O(O({},e),{},{convert:function(t){return{0:\"left\",1:\"center\",2:\"right\"}[t]}}),fontFamily:e,fontWeight:e,children:O(O({},e),{},{convert:function(t){return t?t.split(\",\").map((function(t){return+t})):[]}}),points:O(O({},e),{},{convert:function(t){return t?t.split(\",\").map((function(t){return parseInt(t)})):[]},lerpMethod:function(t,e,r){return t.length===e.length?t.map((function(t,n){return o(t,e[n],r)})):S(t,e,r)}})};function E(t){return(t=t.split(\"\\\\'\").join(\"'\")).includes(\" \")||t.includes(\";\")||t.includes(\"\\n\")?t.slice(1,t.length-1):t}function z(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?z(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],(e=C(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I(t){return(I=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function C(t){return t=function(t,e){if(\"object\"!==I(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==I(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===I(t)?t:String(t)}var F=function(){function t(){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");this.defaultState={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0,zIndex:0,alpha:1,visible:!1,rotation:0,mask:-1},this.states={}}var e,r,n;return e=t,n=[{key:\"createState\",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return k(k({t:t},e),{},{curve:r})}}],(r=[{key:\"init\",value:function(){this.properties=Object.keys(this.defaultState),this.initDisplay(),this.currentState=Object.assign({},this.defaultState),\"object\"===I(this.graphics)&&this.container.addChild(this.graphics)}},{key:\"setHidden\",value:function(t){this.hide=t,this.container.visible=this.currentState.visible&&!this.hide}},{key:\"addState\",value:function(e,r,n){this.states[n]||(this.states[n]=[]);r=t.createState(e,r.values,r.curve);var o=this.states[n].find((function(t){return t.t===e}));o&&0===Object.keys(r.curve).length&&(r.curve=o.curve),o?(M(r)||M(o)||f.push(new Error(\"Different updates for same t \"+e)),Object.assign(o,r)):this.states[n].push(r)}},{key:\"set\",value:function(t,e,r){this.addState(t,e,r)}},{key:\"render\",value:function(t,e,r){var n,o=this.states[e.number],a=(this.container.visible=!1,null),u=1;if(o&&o.length){for(var c=0;c<o.length-1&&o[c].t<t;)c++;if(a=o[c-1],n=o[c],a)u=i(a.t,n.t,t);else{var l=Object.keys(this.states),s=l.indexOf(e.number.toString())-1;for(-1===s&&(s=l.length-1);0<=s&&l[s]>=e.number;)s--;var f=this.states[l[s]]||[];u=!(a=f[f.length-1])&&t>=n.t?(a=n,1):i(0,n.t,t)}}else{for(var y=Object.keys(this.states),p=y.length-1;0<=p&&y[p]>e.number;)p--;null!=(f=this.states[y[p]])?n=a=f[f.length-1]:Object.assign(this.currentState,this.defaultState)}if(a){var h,d={},b=Object.assign({},this.currentState),v=function(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return\"string\"==typeof t?_(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}(this.properties);try{for(v.s();!(h=v.n()).done;){var m=h.value,g=(T[m]||T.default).lerpMethod,w=n.curve[m]||function(t){return t},O=g(a[m],n[m],w(u));O!==this.currentState[m]&&(d[m]=!0,b[m]=O)}}catch(t){v.e(t)}finally{v.f()}this.updateDisplay(b,d,r,e,t),Object.assign(this.currentState,b),this.container.visible=this.container._visible,d.children&&(r.mustResetTree=!0,\"function\"==typeof this.postUpdate)&&r.updatedBuffers.push(this),d.mask&&(r.maskUpdates[this.id]=b.mask),0!==Object.keys(d).length&&this.parent&&this.parent.notifyChange()}}},{key:\"notifyChange\",value:function(){this.parent&&this.parent.notifyChange()}},{key:\"initDisplay\",value:function(){this.container=new PIXI.Container,this.container.zIndex=this.defaultState.zIndex,this.container.id=this.id,this.container._visible=this.defaultState.visible}},{key:\"updateDisplay\",value:function(t,e,r){this.container.zIndex=t.zIndex,this.container.alpha=t.alpha,(e.x||e.y)&&this.container.position.set(t.x*r.toWorldUnits,t.y*r.toWorldUnits),(e.scaleX||e.scaleY)&&this.container.scale.set(t.scaleX||1e-8,t.scaleY||1e-8),this.container.rotation=t.rotation,this.container._visible=t.visible&&!this.hide,this.container.skew.set(t.skewX,t.skewY)}}])&&D(e.prototype,r),n&&D(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function M(t){return Object.keys(t).length===Object.keys(F.createState()).length}function A(t){return(A=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function X(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==A(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===A(t)?t:String(t)}(n.key),n)}}function W(){return(W=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Y(t,e){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(){var t=o,e=F;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Y(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=U(t);r=e?(r=U(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===A(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return t=n.call(this),Object.assign(t.defaultState,{fillColor:o.defaultFillColor(),lineWidth:o.defaultLineWidth(),lineColor:o.defaultLineColor(),fillAlpha:o.defaultFillAlpha(),lineAlpha:o.defaultLineAlpha(),blendMode:PIXI.BLEND_MODES.NORMAL}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultLineWidth\",value:function(){return 0}},{key:\"defaultFillColor\",value:function(){return 16777215}},{key:\"defaultLineColor\",value:function(){return 0}},{key:\"defaultLineAlpha\",value:function(){return 1}},{key:\"defaultFillAlpha\",value:function(){return 1}}],(r=[{key:\"initDisplay\",value:function(){W(U(o.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Graphics,this.graphics.lineStyle(this.defaultState.lineWidth,this.defaultState.lineColor,this.defaultState.lineAlpha),null!==this.defaultState.fillColor&&this.graphics.beginFill(this.defaultState.fillColor,this.defaultState.fillAlpha)}},{key:\"updateDisplay\",value:function(t,e,r){W(U(o.prototype),\"updateDisplay\",this).call(this,t,e,r),this.graphics.blendMode=t.blendMode}}])&&X(t.prototype,r),e&&X(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function L(t){return(L=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==L(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==L(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===L(t)?t:String(t)}(n.key),n)}}function H(){return(H=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function N(t,e){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(){var t=o,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&N(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=G(t);r=e?(r=G(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===L(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return(t=n.call(this)).defaultState.radius=o.defaultRadius(),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultRadius\",value:function(){return 100}}],(r=[{key:\"initDisplay\",value:function(){H(G(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawCircle(0,0,this.defaultState.radius),null!==this.defaultState.fillColor&&this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,r){H(G(o.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.radius||e.lineColor||e.lineWidth||e.fillColor||e.fillAlpha||e.lineAlpha)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor),this.graphics.drawCircle(0,0,t.radius*r.toWorldUnits),null!==t.fillColor)&&this.graphics.endFill()}}])&&K(t.prototype,r),e&&K(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function q(t){return(q=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==q(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===q(t)?t:String(t)}(n.key),n)}}function Q(){return(Q=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Z(t,e){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var et=function(){var t=o,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Z(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tt(t);r=e?(r=tt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===q(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return(t=n.call(this)).defaultState.x2=o.defaultPosition(),t.defaultState.y2=o.defaultPosition(),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultPosition\",value:function(){return 100}}],(r=[{key:\"initDisplay\",value:function(){Q(tt(o.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(t,e,r){Q(tt(o.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.lineWidth||e.lineColor||e.lineAlpha||e.x2||e.y2||e.x||e.y)&&(this.graphics.clear(),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.moveTo(0,0),this.graphics.lineTo(-this.container.x+t.x2*r.toWorldUnits,-this.container.y+t.y2*r.toWorldUnits))}}])&&J(t.prototype,r),e&&J(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function rt(t){return(rt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==rt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==rt(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===rt(t)?t:String(t)}(n.key),n)}}function ot(){return(ot=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=at(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function it(t,e){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ut=function(){var t=o,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&it(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=at(t);r=e?(r=at(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===rt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return t=n.call(this),Object.assign(t.defaultState,{width:o.defaultSideLength(),height:o.defaultSideLength()}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultSideLength\",value:function(){return 100}}],(r=[{key:\"initDisplay\",value:function(){ot(at(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawRect(0,0,this.defaultState.width,this.defaultState.height),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,r){ot(at(o.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.lineWidth||e.lineColor||e.width||e.height||e.lineAlpha||e.fillColor)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawRect(0,0,t.width*r.toWorldUnits,t.height*r.toWorldUnits),null!==t.fillColor)&&this.graphics.endFill()}}])&&nt(t.prototype,r),e&&nt(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function ct(t){return(ct=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==ct(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==ct(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===ct(t)?t:String(t)}(n.key),n)}}function st(){return(st=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function ft(t,e){return(ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pt=function(){var t=o,e=F;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&ft(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yt(t);r=e?(r=yt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===ct(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return t=n.call(this),Object.assign(t.defaultState,{anchorX:o.defaultAnchor(),anchorY:o.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultAnchor\",value:function(){return 0}}],(r=[{key:\"initDisplay\",value:function(){st(yt(o.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(t,e,r){st(yt(o.prototype),\"updateDisplay\",this).call(this,t,e,r),this.graphics.anchor.set(t.anchorX,t.anchorY),this.graphics.blendMode=t.blendMode,this.graphics.tint=t.tint}}])&&lt(t.prototype,r),e&&lt(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function ht(t){return(ht=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function dt(t,e,r){return(dt=bt()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&vt(e,r.prototype),e}).apply(null,arguments)}function bt(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function vt(t,e){return(vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&vt(e,t);var r=function(t){var e=bt();return function(){var r,n=mt(t);r=e?(r=mt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===ht(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e){var o;if(this instanceof n)return(o=r.call(this,'Could not find image: \"'+t+'\". Make sure it is in your assets folder and is spelled correctly.')).image=t,o.cause=e,o.name=\"MissingImageError\",o;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return dt(t,arguments,mt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),vt(r,t)}(t)}(Error));function wt(t){return(wt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==wt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==wt(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===wt(t)?t:String(t)}(n.key),n)}}function St(){return(St=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function xt(t,e){return(xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jt=function(){var t=n,e=pt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&xt(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Pt(t);r=e?(r=Pt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===wt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{image:null,baseWidth:null,baseHeight:null,scaleMode:\"LINEAR\"}),t.missingTextures={},t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"updateDisplay\",value:function(t,e,r){if(St(Pt(n.prototype),\"updateDisplay\",this).call(this,t,e,r),e.image)try{null!==t.image?this.graphics.texture=PIXI.Texture.from(t.image):this.graphics.texture=PIXI.Texture.EMPTY,this.graphics.texture.baseTexture.scaleMode=PIXI.SCALE_MODES[t.scaleMode]}catch(e){this.missingTextures[t.image]||(this.missingTextures[t.image]=!0,f.push(new gt(t.image,e)))}e.baseWidth&&(this.graphics.width=t.baseWidth),e.baseHeight&&(this.graphics.height=t.baseHeight)}}])&&Ot(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function Rt(t){return(Rt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==Rt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Rt(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Rt(t)?t:String(t)}(n.key),n)}}function Et(){return(Et=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function zt(t,e){return(zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _t=function(){var t=n,e=jt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&zt(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=kt(t);r=e?(r=kt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Rt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t=this,e=n;if(t instanceof e)return r.apply(this,arguments);throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Et(kt(n.prototype),\"initDisplay\",this).call(this),null===this.defaultState.image?this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY):this.graphics=PIXI.Sprite.from(this.defaultState.image)}}])&&Tt(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function It(t,e){if(t.width>e)for(;3<t.text.length&&t.width>e;)t.text=t.text.slice(0,-4)+\"...\"}function Dt(t){return(Dt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==Dt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Dt(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Dt(t)?t:String(t)}(n.key),n)}}function Ft(){return(Ft=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=At(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Mt(t,e){return(Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xt=function(){var t=n,e=pt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Mt(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=At(t);r=e?(r=At(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Dt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{text:\"\",textAlign:\"left\",strokeColor:0,strokeThickness:0,fillColor:0,fontSize:26,fontFamily:\"Lato\",fontWeight:\"normal\",maxWidth:0}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Ft(At(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Text(this.defaultState.text,{align:this.defaultState.textAlign,fontSize:this.defaultState.fontSize+\"px\",fontFamily:this.defaultState.fontFamily,fill:this.defaultState.fillColor})}},{key:\"updateDisplay\",value:function(t,e,r){Ft(At(n.prototype),\"updateDisplay\",this).call(this,t,e,r),this.graphics.style.align=t.textAlign,this.graphics.style.stroke=t.strokeColor,this.graphics.style.strokeThickness=t.strokeThickness,this.graphics.style.fill=t.fillColor,this.graphics.style.fontSize=t.fontSize||1,this.graphics.style.fontFamily=t.fontFamily,this.graphics.style.fontWeight=t.fontWeight,(e.text||e.strokeThickness||e.fontSize||e.fontFamily||e.fontWeight||e.maxWidth||e.maxWidth)&&(this.graphics.text=t.text,t.maxWidth)&&It(this.graphics,t.maxWidth)}}])&&Ct(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function Wt(t){return(Wt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Yt(t,e,r){return(Yt=Ut()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&Bt(e,r.prototype),e}).apply(null,arguments)}function Ut(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Bt(t,e){return(Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kt=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Bt(e,t);var r=function(t){var e=Ut();return function(){var r,n=Lt(t);r=e?(r=Lt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Wt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e){var o;if(this instanceof n)return(o=r.call(this,'Could not find font: \"'+t+'\". Make sure it is in your assets folder and is spelled correctly.')).font=t,o.cause=e,o.name=\"MissingBitmapFontError\",o;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Yt(t,arguments,Lt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Bt(r,t)}(t)}(Error));function Ht(t){return(Ht=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==Ht(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Ht(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Ht(t)?t:String(t)}(n.key),n)}}function Gt(){return(Gt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$t(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Vt(t,e){return(Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qt=function(){var t=n,e=F;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Vt(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$t(t);r=e?(r=$t(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Ht(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{text:\"\",textAlign:\"left\",fontSize:26,fontFamily:null,anchorX:pt.defaultAnchor(),anchorY:pt.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215,maxWidth:0}),t.missingFonts={},t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Gt($t(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(t,e,r){Gt($t(n.prototype),\"updateDisplay\",this).call(this,t,e,r),null!==t.fontFamily?PIXI.BitmapFont.available[t.fontFamily]?(0===this.graphics.children.length?(this.displayed=new PIXI.BitmapText(\"\",{fontSize:t.fontSize||1,fontName:t.fontFamily}),this.graphics.addChild(this.displayed)):(this.displayed.fontName=t.fontFamily,this.displayed.fontSize=t.fontSize||1),this.displayed.anchor.set(t.anchorX,t.anchorY),this.displayed.blendMode=t.blendMode,this.displayed.tint=t.tint,this.displayed.align=t.textAlign,(e.text||e.maxWidth||e.fontSize||e.fontFamily)&&(this.displayed.text=t.text,t.maxWidth)&&It(this.displayed,t.maxWidth)):(this.missingFonts[t.fontFamily]||(this.missingFonts[t.fontFamily]=!0,f.push(new Kt(t.fontFamily))),this.graphics.removeChildren()):this.graphics.removeChildren()}}])&&Nt(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function Jt(t){return(Jt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==Jt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Jt(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Jt(t)?t:String(t)}(n.key),n)}}function Zt(){return(Zt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ee(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function te(t,e){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var re=function(){var t=n,e=F;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&te(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ee(t);r=e?(r=ee(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Jt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{children:[]}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Zt(ee(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container,this.graphics.sortableChildren=!0}},{key:\"updateDisplay\",value:function(t,e,r){Zt(ee(n.prototype),\"updateDisplay\",this).call(this,t,e,r)}},{key:\"childrenContainer\",get:function(){return this.graphics}}])&&Qt(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function ne(t){return(ne=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function oe(t,e){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ae=function(){var t=n,e=re;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&oe(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ie(t);r=e?(r=ie(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===ne(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t=this,e=n;if(t instanceof e)return r.apply(this,arguments);throw new TypeError(\"Cannot call a class as a function\")}return t=n,Object.defineProperty(t,\"prototype\",{writable:!1}),t}(),ue=null,ce=[];function le(t){return(le=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==le(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==le(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===le(t)?t:String(t)}(n.key),n)}}function fe(){return(fe=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pe(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function ye(t,e){return(ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var he=function(){var t=n,e=re;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&ye(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=pe(t);r=e?(r=pe(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===le(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t=this,e=n;if(t instanceof e)return r.apply(this,arguments);throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){fe(pe(n.prototype),\"initDisplay\",this).call(this),this.buffer=new PIXI.Container,this.buffer.sortableChildren=!0,this.gameTexture=null,this.graphics=new PIXI.Sprite,this.needsRender=!0}},{key:\"postUpdate\",value:function(){var t,e;this.needsRender&&(e=this.buffer.getBounds().width,t=this.buffer.getBounds().height,(null==this.gameTexture||this.gameTexture.width<e||this.gameTexture.height<t)&&(e=Math.min(Math.max(e,512),4096),t=Math.min(Math.max(t,512),4096),this.gameTexture=PIXI.RenderTexture.create(e,t),e=this.gameTexture,ce.push(e),this.graphics.texture=this.gameTexture),ue.render(this.buffer,this.gameTexture),this.needsRender=!1)}},{key:\"childrenContainer\",get:function(){return this.buffer}},{key:\"notifyChange\",value:function(){this.needsRender=!0,this.parent&&this.parent.notifyChange()}}])&&se(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function de(t){return(de=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function be(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?be(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],(e=ge(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,ge(n.key),n)}}function ge(t){return t=function(t,e){if(\"object\"!==de(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==de(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===de(t)?t:String(t)}function we(){return(we=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Se(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Oe(t,e){return(Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Se(t){return(Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xe=function(){var t=n,e=pt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Oe(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Se(t);r=e?(r=Se(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===de(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{images:\"\",loop:!1,duration:1e3,playing:!0,restarted:null,animationProgress:0,date:0}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){we(Se(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY)}},{key:\"addState\",value:function(t,e,r,o){we(Se(n.prototype),\"addState\",this).call(this,t,e,r),e=this.states[r].find((function(e){return e.t===t})),r=o.date+o.frameDuration*t,e.date=r}},{key:\"updateDisplay\",value:function(t,e,r,o,i){if(we(Se(n.prototype),\"updateDisplay\",this).call(this,t,e,r),t.images){if(e=t.images.split(\",\"),0<=t.animationProgress){r=o.date+o.frameDuration*i,o=ve(ve({},t),{},{date:r}),this.computeAnimationProgressTime(t,o),i=Math.floor(e.length*o.animationProgress),r=t.loop?e[i%e.length]:e[i]||e[e.length-1];try{this.graphics.texture=PIXI.Texture.from(r)}catch(t){f.push(new gt(r,t))}}}else this.graphics.texture=PIXI.Texture.EMPTY}},{key:\"computeAnimationProgressTime\",value:function(t,e){e.restarted&&e.restarted.date===e.date?e.animationProgress=0:(e.animationProgress=t.animationProgress,t.playing&&(e.animationProgress+=(e.date-t.date)/t.duration))}}])&&me(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function Pe(t){return(Pe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==Pe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Pe(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Pe(t)?t:String(t)}(n.key),n)}}function Re(){return(Re=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ee(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Te(t,e){return(Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ze=function(){var t=o,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Te(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ee(t);r=e?(r=Ee(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Pe(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return t=n.call(this),Object.assign(t.defaultState,{width:o.defaultSideLength(),height:o.defaultSideLength(),radius:o.defaultRadius()}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultSideLength\",value:function(){return 100}},{key:\"defaultRadius\",value:function(){return 20}}],(r=[{key:\"initDisplay\",value:function(){Re(Ee(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawRoundedRect(0,0,this.defaultState.width,this.defaultState.height,this.defaultState.radius),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,r){Re(Ee(o.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.lineWidth||e.lineColor||e.lineAlpha||e.fillColor||e.radius||e.height||e.width)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawRoundedRect(0,0,t.width*r.toWorldUnits,t.height*r.toWorldUnits,t.radius*r.toWorldUnits),null!==t.fillColor)&&this.graphics.endFill()}}])&&je(t.prototype,r),e&&je(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function ke(t){return(ke=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==ke(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==ke(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===ke(t)?t:String(t)}(n.key),n)}}function Ie(){return(Ie=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ce(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function De(t,e){return(De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fe=function(){var t=n,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&De(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ce(t);r=e?(r=Ce(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===ke(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{points:[]}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Ie(Ce(n.prototype),\"initDisplay\",this).call(this),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,r){Ie(Ce(n.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.lineWidth||e.lineColor||e.lineAlpha||e.fillColor||e.points)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawPolygon(t.points.map((function(t){return t*r.toWorldUnits}))),null!==t.fillColor)&&this.graphics.endFill()}}])&&_e(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function Me(t){return(Me=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==Me(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Me(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Me(t)?t:String(t)}(n.key),n)}}function Xe(){return(Xe=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ye(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function We(t,e){return(We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ue=function(){var t=n,e=jt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&We(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ye(t);r=e?(r=Ye(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Me(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{tileX:0,tileY:0,tileScaleX:1,tileScaleY:1}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Xe(Ye(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.TilingSprite(PIXI.Texture.EMPTY)}},{key:\"updateDisplay\",value:function(t,e,r){Xe(Ye(n.prototype),\"updateDisplay\",this).call(this,t,e,r),this.graphics.tilePosition.x=t.tileX,this.graphics.tilePosition.y=t.tileY,this.graphics.tileScale.x=t.tileScaleX,this.graphics.tileScale.y=t.tileScaleY}}])&&Ae(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function Be(t){return(Be=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Le(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==Be(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Be(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Be(t)?t:String(t)}(n.key),n)}}var Ke=function(){function t(){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var e,r;return e=t,r=[{key:\"create\",value:function(t){var e={C:V,R:ut,L:et,S:_t,T:Xt,X:qt,G:ae,B:he,A:xe,K:ze,P:Fe,D:Ue}[t];if(e)return new e;throw new Error(\"Exception: entity type not found: \"+t)}}],null&&Le(e.prototype,null),r&&Le(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function He(t){var e=1.70158,r=0,n=1;return 0===t?0:1==(t/=1)?1:(r=r||.3,e=n<Math.abs(1)?(n=1,r/4):r/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((+t-e)*(2*Math.PI)/r)+1)}function Ne(t){return t<.5?2*t*t:(4-2*t)*t-1}function Ge(t){return Math.pow(t,3)}function Ve(t){return 1+Math.pow(t-1,3)}function $e(t){return($e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Je(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function Qe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==$e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==$e(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===$e(t)?t:String(t)}(n.key),n)}}function Ze(t,e,r){e&&Qe(t.prototype,e),r&&Qe(t,r),Object.defineProperty(t,\"prototype\",{writable:!1})}var tr={r:\"rotation\",R:\"radius\",X:\"x2\",Y:\"y2\",w:\"width\",h:\"height\",t:\"tint\",f:\"fillColor\",F:\"fillAlpha\",c:\"lineColor\",W:\"lineWidth\",A:\"lineAlpha\",a:\"alpha\",i:\"image\",S:\"strokeThickness\",sc:\"strokeColor\",ff:\"fontFamily\",s:\"fontSize\",fw:\"fontWeight\",T:\"text\",ta:\"textAlign\",ch:\"children\",sx:\"scaleX\",sy:\"scaleY\",ax:\"anchorX\",ay:\"anchorY\",kx:\"skewX\",ky:\"skewY\",v:\"visible\",z:\"zIndex\",b:\"blendMode\",I:\"images\",rs:\"restarted\",p:\"playing\",l:\"loop\",d:\"duration\",bw:\"baseWidth\",bh:\"baseHeight\",ps:\"points\",tx:\"tileX\",ty:\"tileY\",tsx:\"tileScaleX\",tsy:\"tileScaleY\",sm:\"scaleMode\"};x=function(){function t(e,r){Je(this,t),this.id=++r.instanceCount,this.type=e[0]}return Ze(t,[{key:\"apply\",value:function(t){var e=Ke.create(this.type);e.id=this.id,t.set(this.id,e)}}]),t}(),r=function(){function t(e,r){for(var o=(e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){var r;if(t)return\"string\"==typeof t?qe(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qe(t,e):void 0}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}(e,8))[0],i=e[1],a=e[2],u=e[3],c=e[4],l=e[5],s=e[6],f=(e=e[7],Je(this,t),this.loader=new PIXI.Loader,\"0\"===a&&(a=PIXI.utils.TextureCache[i].width),\"0\"===u&&(u=PIXI.utils.TextureCache[i].height),0<e?e:s),y={frames:{},meta:{image:(n.baseUrl||\"\")+n.images[i]}},p=0;p<s;p++)y.frames[1<s?o+p:o]={frame:{x:a*l+p%f*a,y:u*c+Math.floor(p/f)*u,w:a,h:u},sourceSize:{w:a,h:u},rotated:!1,trimmed:!1};e=\"data:text/json;charset=UTF-8,\"+JSON.stringify(y),PIXI.utils.TextureCache[e+\"_image\"]||this.loader.add(e,{crossOrigin:!0})}return Ze(t,[{key:\"apply\",value:function(){var t=this;if(0<Object.keys(this.loader.resources).length)return new Promise((function(e){t.loader.load(),t.loader.onComplete.add(e)}))}}]),t}();function er(t){return(er=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function rr(t){return function(t){if(Array.isArray(t))return nr(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(t)||function(t,e){var r;if(t)return\"string\"==typeof t?nr(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nr(t,e):void 0}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==er(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==er(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===er(t)?t:String(t)}(n.key),n)}}var ir={C:x,U:function(){function t(e,r,n){Je(this,t),this.id=+e[0],this.t=+e[1],this.params={},this.curve={};for(var o=2;o<e.length;){var i=tr[e[o]]||e[o],a=(u=T[i]||T.default).type(e[o+1]),u=(\"function\"==typeof u.convert&&(a=u.convert(a,r,n,this.t)),t.curves[e[o+2]]);this.params[i]=a,o+=2,u&&(this.curve[i]=u,o+=1)}}return Ze(t,[{key:\"apply\",value:function(t,e){(t=t.get(this.id)).addState(this.t,{values:this.params,curve:this.curve},e.number,e),t.stateAdded=!0}}],[{key:\"curves\",get:function(){return{_:function(t){return t<1?0:1},\"â«\":Ne,\"ð\":Ge,\"ð\":Ve,\"~\":He,\"Î\":function(t){return 1}}}}]),t}(),L:r};function ar(t,e){for(var r=[],n=\"\",o=0,i=\"\",a=!1;o<t.length;){var u=t[o++];u===e?a?n+=u:(r.push(n),n=\"\"):\"'\"===u&&\"\\\\\"!==i?(a=!a,n+=u):\"\\\\\"===i?n+=\"'\"===u?\"\\\\'\":\"\\\\\"+u:\"\\\\\"!==u&&(n+=u),i=u}return r.push(n),r}var ur=function(){function t(){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var e,r;return e=t,r=[{key:\"parse\",value:function(t,e,r){var n,o=[],i=ar(t,\"\\n\");for(n in i){var a=ir[i[n][0]];if(!a)throw new Error(\"Unrecognised command : \"+i[n][0]);o=[].concat(rr(o),rr(function(t,e,r,n){e=ar(e,\";\");var o=[];return e.forEach((function(e){return o.push(new t(ar(e,\" \"),r,n))})),o}(a,i[n].slice(1),e,r)))}return o}}],null&&or(e.prototype,null),r&&or(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),t}(),cr=1920;function lr(t){return(lr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function yr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fr(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],(e=hr(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,hr(n.key),n)}}function hr(t){return t=function(t,e){if(\"object\"!==lr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==lr(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===lr(t)?t:String(t)}var dr={};R=function(){function t(e){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");this.entities=new Map,this.frames=[],this.loadingAssets=0,this.extrapolationMap={},this.globalData={toWorldUnits:1,mustResetTree:!0,maskUpdates:{},updatedBuffers:[],players:[],instanceCount:0},dr.entities=this.entities}var e,r,n;return e=t,n=[{key:\"name\",get:function(){return\"entitymodule\"}}],(r=[{key:\"handleFrameData\",value:function(t,e){var r=this;return(e=(e&&(e=ur.parse(e,this.globalData,t))&&e.forEach((function(e){(e=e.apply(r.entities,t))&&(r.loadingAssets++,e.then((function(){r.loadingAssets--})))})),yr({},t))).previous=this.frames[this.frames.length-1]||e,this.extrapolate(e),e!==e.previous&&(e.previous.next=e),this.frames.push(e),e}},{key:\"lastElementOf\",value:function(t){return t[t.length-1]}},{key:\"extrapolate\",value:function(t){var e=this,r=t.number,n=t.previous.number;this.entities.forEach((function(o){var i,a;o.stateAdded&&(o.stateAdded=!1,o.states[r]||(o.states[r]=[]),e.extrapolationMap[o.id]||(e.extrapolationMap[o.id]=yr({},o.defaultState)),(i=o.states[r]).sort((function(t,e){return t.t-e.t})),i.length&&1===e.lastElementOf(i).t||o.addState(1,{},r,t),a=e.extrapolationMap[o.id],o.states[n]&&n!==r&&(a=o.states[n][o.states[n].length-1]),o.states[r]=i.map((function(t){return t=e.extrapolationMap[o.id]=yr(yr({},e.extrapolationMap[o.id]),t),\"function\"==typeof o.computeAnimationProgressTime&&o.computeAnimationProgressTime(a,t),a=t})))}))}},{key:\"reinitScene\",value:function(t,e){this.globalData.toPixel=cr/e.width*e.oversampling,this.globalData.mustResetTree=!0,(dr.container=this.container=t).sortableChildren=!0,this.entities.forEach((function(t){t.init()}))}},{key:\"stillLoading\",value:function(){return 0<this.loadingAssets}},{key:\"updateScene\",value:function(t,e,r){var n=this;if(!this.stillLoading()){for(var o in this.entities.forEach((function(t){return t.render(r,e,n.globalData)})),this.globalData.mustResetTree&&(this.reconstructTree(),this.globalData.mustResetTree=!1),this.globalData.maskUpdates){var i=this.entities.get(+o);o=this.globalData.maskUpdates[o];i.container.mask=-1===o?null:this.entities.get(o).graphics}var a,u=function(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return\"string\"==typeof t?sr(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sr(t,e):void 0}(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}(this.globalData.updatedBuffers);try{for(u.s();!(a=u.n()).done;)a.value.postUpdate()}catch(t){u.e(t)}finally{u.f()}this.globalData.maskUpdates={}}}},{key:\"reconstructTree\",value:function(){var t=this;this.container.removeChildren(),this.entities.forEach((function(e){e instanceof re&&(e.childrenContainer.removeChildren(),e.currentState.children.forEach((function(r){r=t.entities.get(r),e.childrenContainer.addChild(r.container),r.parent=e})),e.notifyChange())})),this.entities.forEach((function(e){e.container.parent||t.container.addChild(e.container)}))}},{key:\"handleGlobalData\",value:function(t,e){this.globalData.players=t,t=e.width,e=e.height,this.globalData.toWorldUnits=a(t,e,cr,1080),dr.toWorldUnits=this.globalData.toWorldUnits,dr.hasOwnProperty(\"coeff\")||Object.defineProperty(dr,\"coeff\",{get:function(){var t='The \"coeff\" property of GraphicEntityModule\\'s API is deprecated, please use \"toWorldUnits\" instead',e=(new Error).stack;return console.groupCollapsed?(console.groupCollapsed(\"%cDeprecation Warning: %c%s\",\"color:#614108;background:#fffbe6\",\"font-weight:normal;color:#614108;background:#fffbe6\",t),console.warn(e),console.groupEnd()):console.warn(\"Deprecation Warning: \",t),dr.toWorldUnits}})}}])&&pr(e.prototype,r),n&&pr(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function br(t){return(br=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function vr(t,e,r){return(vr=mr()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&gr(e,r.prototype),e}).apply(null,arguments)}function mr(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function gr(t,e){return(gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wr(t){return(wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Or=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&gr(e,t);var r=function(t){var e=mr();return function(){var r,n=wr(t);r=e?(r=wr(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===br(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e){var o;if(this instanceof n)return(o=r.call(this,'Could not find toggle: \"'+t+'\". Make sure it is set up correctly in your config.js.')).toggle=t,o.cause=e,o.name=\"MissingToggleError\",o;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return vr(t,arguments,wr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),gr(r,t)}(t)}(Error));function Sr(t){return(Sr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function xr(t,e,r){return(xr=Pr()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&jr(e,r.prototype),e}).apply(null,arguments)}function Pr(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function jr(t,e){return(jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tr=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&jr(e,t);var r=function(t){var e=Pr();return function(){var r,n=Rr(t);r=e?(r=Rr(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Sr(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e,o){if(this instanceof n)return(e=r.call(this,\"(\"+e.keys.toString()+\") have the same value '\"+e.value+\"' in toggle \\\"\"+t+'\". Avoid those duplicates in your config.js.')).toggle=t,e.cause=o,e.name=\"DuplicateToggleValueError\",e;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return xr(t,arguments,Rr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),jr(r,t)}(t)}(Error));function Er(t){return(Er=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function zr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function kr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zr(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],(e=Cr(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _r(t,e){var r;if(t)return\"string\"==typeof t?Ir(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ir(t,e):void 0}function Ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,Cr(n.key),n)}}function Cr(t){return t=function(t,e){if(\"object\"!==Er(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Er(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Er(t)?t:String(t)}var Fr=function(){function t(e){var r,n=this;if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");for(r in this.previousFrame={},this.missingToggles={},t.refreshContent=function(){if(n.currentFrame)for(var e in n.currentFrame.registered){var r=dr.entities.get(parseInt(e)),o=(e=n.currentFrame.registered[e],t.toggles[e.name]);null!=o||n.missingToggles[e.name]||(f.push(new Or(e.name)),n.missingToggles[e.name]=!0),r.setHidden(o!==e.state)}},Fr.optionValues){var o,i=function(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=_r(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}(Fr.optionValues[r]);try{for(i.s();!(o=i.n()).done;){var a=o.value;1<a.keys.length&&f.push(new Tr(r,a))}}catch(e){i.e(e)}finally{i.f()}}}var e,r,n;return e=t,n=[{key:\"refreshContent\",value:function(){}},{key:\"defineToggle\",value:function(e){var r,n=e;for(r in Fr.optionValues[n.toggle]=[],n.values)!function(){var t=n.values[r],e=Fr.optionValues[n.toggle].find((function(e){return e.value===t}));e||Fr.optionValues[n.toggle].push(e={keys:[],value:t}),e.keys.push(r)}();return t.toggles[e.toggle]=e.default,e.get=function(){return t.toggles[e.toggle]},e.set=function(r){t.toggles[e.toggle]=r,t.refreshContent()},e}},{key:\"name\",get:function(){return\"toggles\"}}],(r=[{key:\"updateScene\",value:function(e,r,n){this.currentFrame=r,this.currentProgress=n,t.refreshContent()}},{key:\"handleFrameData\",value:function(t,e){var r={};return e&&Object.entries(e).forEach((function(t){var e=(t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||_r(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}(t,2))[0];t[1].match(/\\d+./g).forEach((function(t){var n=t.slice(0,-1);t=\"+\"===t.slice(-1);r[n]={name:e,state:t}}))})),e={registered:kr(kr({},this.previousFrame.registered),r),number:t.number},this.previousFrame=e}},{key:\"reinitScene\",value:function(e,r){t.refreshContent()}}])&&Dr(e.prototype,r),n&&Dr(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function Mr(t){return(Mr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Ar(t,e,r){return(Ar=Xr()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&Wr(e,r.prototype),e}).apply(null,arguments)}function Xr(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Wr(t,e){return(Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yr(t){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Fr.toggles={},Fr.optionValues={};var Ur=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Wr(e,t);var r=function(t){var e=Xr();return function(){var r,n=Yr(t);r=e?(r=Yr(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Mr(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e){var o;if(this instanceof n)return(o=r.call(this,'Could not find image: \"'+t+'\". Make sure it is in your assets folder and is spelled correctly.')).image=t,o.cause=e,o.name=\"MissingImageError\",o;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Ar(t,arguments,Yr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Wr(r,t)}(t)}(Error));function Br(t){return(Br=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Lr(t){return function(t){if(Array.isArray(t))return Kr(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(t)||function(t,e){var r;if(t)return\"string\"==typeof t?Kr(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kr(t,e):void 0}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return t=function(t,e){if(\"object\"!==Br(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==Br(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===Br(t)?t:String(t)}(n.key),n)}}var Nr=[R,Fr,function(){function t(e){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");this.states=[],this.scores=[],this.globalData={},this.atEnd=!1}var e,r,n;return e=t,n=[{key:\"name\",get:function(){return\"endScreen\"}}],(r=[{key:\"updateScene\",value:function(t,e,r){e.scores&&1===r?this.atEnd=!0:this.atEnd=!1}},{key:\"handleFrameData\",value:function(t,e){var r=null,n=null,o=null;e&&(r=e[0],n=e[1],o=e[2]),e={number:t.number,scores:r,spriteName:n,displayedText:o};return r&&(this.scores=r),n&&(this.spriteName=n),o&&(this.displayedText=o),this.states.push(e),e}},{key:\"reinitScene\",value:function(t,e){this.container=t,this.endLayer=this.createEndScene(this),this.atEnd&&this.initEndScene(),this.container.addChild(this.endLayer)}},{key:\"animateScene\",value:function(t){t=Math.min(32,t),this.atEnd?this.animationEnded||this.renderEndScene(t):(0<this.endTime&&this.destroyEndScene(),this.endTime=0)}},{key:\"destroyEndScene\",value:function(){this.animationEnded=!1,this.endLayer.visible=!1}},{key:\"initEndScene\",value:function(){this.animationEnded=!1,this.endLayer.visible=!0}},{key:\"renderEndScene\",value:function(t){0===this.endTime&&this.initEndScene();for(var e=i(0,400,this.endTime),r=(e=(this.endLayer.backgroundRanking.alpha=.9*e,i(400,1e3,this.endTime)),this.endLayer.titleRanking.scale.x=this.endLayer.titleRanking.scale.y=.001+o(10,.8,e),this.endLayer.titleRanking.visible=!!e,0);r<this.finishers.length;++r){var n=i(1e3+300*r,1e3+300*r+300,this.endTime);this.finishers[r].alpha=n}this.endTime+=t,1e4<=this.endTime&&(this.animationEnded=!0)}},{key:\"handleGlobalData\",value:function(t,e){this.globalData={players:t,playerCount:t.length}}},{key:\"fitTextInWidth\",value:function(t,e){for(var r=t.text;t.width>e;)r=r.slice(0,-1),t.text=r+\"...\"}},{key:\"generateText\",value:function(t,e,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return(t=new PIXI.Text(t,{fontSize:Math.round(e/1.2)+\"px\",fontFamily:\"Lato\",fontWeight:\"bold\",fill:n})).lineHeight=Math.round(e/1.2),\"right\"===r?t.anchor.x=1:\"center\"===r&&(t.anchor.x=.5),null!==o&&this.fitTextInWidth(t,o),t}},{key:\"createFinisher\",value:function(t){var e,r=new PIXI.Container,n=new PIXI.Container,o=((o=((e=((e=((e=(n.y=0,n.x=0,new PIXI.Graphics)).beginFill(16777215),e.alpha=.1,e.drawRect(0,0,240,120),n.addChild(e),new PIXI.Graphics)).lineStyle(1,16777215),e.alpha=.5,e.drawRect(0,0,120,120),n.addChild(e),new PIXI.Sprite(t.player.avatar))).width=e.height=120,this.generateText(t.rank.toString(),76,\"center\",t.player.color))).anchor.y=.5,o.position.x=160,o.position.y=56,n.addChild(o),\"TH\"),i=(o=((o=((o=(t.rank<4&&(o=[\"ST\",\"ND\",\"RD\"][t.rank-1]),this.generateText(o.toString(),34,\"left\",t.player.color))).position.x=184,o.position.y=32,n.addChild(o),new PIXI.Container)).addChild(e),n.addChild(o),e=this.globalData.playerCount<=4?1500:500,this.generateText(t.player.name.toUpperCase(),50,\"left\",t.player.color,e)),t.text||(0<=t.score?t.score.toString()+\" points\":\"-\"));i=this.generateText(i,64,\"left\",t.player.color,e);return o.x=330,o.y=-4,i.x=330,i.y=50,r.addChild(n),r.addChild(o),r.addChild(i),r}},{key:\"createEndScene\",value:function(){var t=new PIXI.Container,e=new PIXI.Graphics,r=(e.beginFill(0,.85),e.drawRect(0,0,cr,1080),e.endFill(),t.backgroundRanking=e,this.spriteName);(r=PIXI.utils.TextureCache[r]?PIXI.Sprite.from(r):(f.push(new Ur(r)),new PIXI.Sprite(PIXI.Texture.EMPTY))).anchor.x=r.anchor.y=.5,(t.titleRanking=r).position.x=960,r.position.y=230;for(var n=[],o=0;o<this.globalData.playerCount;++o)n.push({score:this.scores[o],text:this.displayedText?this.displayedText[o]:null,player:this.globalData.players[o],rank:0});n.sort((function(t,e){return e.score-t.score})),this.finishers=[];var i,a=new PIXI.Container;for(o=0;o<n.length;++o)n[o].rank=n.filter((function(t){return t.score>n[o].score})).length+1,i=this.createFinisher(n[o]),a.addChild(i),this.finishers.push(i);if(this.finishers.length<=4){var u=Math.max.apply(Math,Lr(this.finishers.map((function(t){return t.width}))));for(o=0;o<this.finishers.length;++o)this.finishers[o].position.x=(cr-u)/2,this.finishers[o].position.y=150*o}else{var c=Math.ceil(this.finishers.length/2),l=Math.max.apply(Math,Lr(this.finishers.slice(0,c).map((function(t){return t.width}))));for(o=0;o<this.finishers.length;++o)this.finishers[o].position.x=o<c?960-(l+50):1010,this.finishers[o].position.y=o%c*150}return a.y=400,t.addChild(e),t.addChild(r),t.addChild(a),t.visible=!1,t}}])&&Hr(e.prototype,r),n&&Hr(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),t}()],Gr=[Fr.defineToggle({toggle:\"debugToggle\",title:\"DEBUG\",values:{ON:!0,OFF:!1},default:!0})],Vr=[\"#ff1d5c\",\"#6ac371\",\"#22a1e4\",\"#ff8f16\",\"#9975e2\",\"#3ac5ca\",\"#de6ddf\",\"#ff0000\"],$r={views:['KEY_FRAME 0\\n{\"global\":{\"entitymodule\":{\"width\":1920,\"height\":1080}},\"frame\":{\"duration\":1800,\"entitymodule\":\"CR;S;T;T;R;S;T;R;S;T;R;S;T;R;S;T;R;S;T;R;S;T;R;S;T;R;S;T;R;S;R;S;R;S;R;S;R;S;R;S;R;S;R;S;T;R;S;R;S;R;S;R;S;R;S;R;S;R;S;R;S;T;R;S;R;S;R;S;R;S;R;S;R;S;R;S;R;S;T;R;S;R;S;R;S;R;S;R;S;R;S;R;S;R;S;T;R;S;R;S;R;S;R;S;R;S;R;S;R;S;R;S;T;R;S;R;S;R;S;R;S;R;S;R;S;R;S;R;S;T;R;S;R;S;R;S;R;S;R;S;R;S;R;S;L;L;L;L;L;L;L;L;L;L;L;L;L;L;L;L;L;L;R;R;R;R;S;S;S;K;T;S;S;T;T;K;T;S;S;T;T;K;T;S;S;T;T\\\\nU5 0.4 f 11572851 v 1 w 120 x 600 y 880 z 1 h 120;109 0.4 f 13812392 v 1 w 120 x 1320 y 280 z 1 h 120;122 0.4 f 11572851 v 1 w 120 x 1080 y 160 z 1 h 120;75 0.4 f 13812392 v 1 w 120 x 1320 y 520 z 1 h 120;135 0.4 f 13812392 v 1 w 120 x 840 y 40 z 1 h 120;52 0.4 f 13812392 v 1 w 120 x 960 y 640 z 1 h 120;99 0.4 f 11572851 v 1 w 120 x 720 y 280 z 1 h 120;33 0.4 f 13812392 v 1 w 120 x 840 y 760 z 1 h 120;97 0.4 f 13812392 v 1 w 120 x 600 y 280 z 1 h 120;84 0.4 f 11572851 v 1 w 120 x 840 y 400 z 1 h 120;35 0.4 f 11572851 v 1 w 120 x 960 y 760 z 1 h 120;60 0.4 f 11572851 v 1 w 120 x 480 y 520 z 1 h 120;23 0.4 f 11572851 v 1 w 120 x 1320 y 880 z 1 h 120;46 0.4 f 11572851 v 1 w 120 x 600 y 640 z 1 h 120;26 0.4 f 11572851 v 1 w 120 x 480 y 760 z 1 h 120;37 0.4 f 13812392 v 1 w 120 x 1080 y 760 z 1 h 120;80 0.4 f 11572851 v 1 w 120 x 600 y 400 z 1 h 120;54 0.4 f 11572851 v 1 w 120 x 1080 y 640 z 1 h 120;86 0.4 f 13812392 v 1 w 120 x 960 y 400 z 1 h 120;111 0.4 f 13812392 v 1 w 120 x 480 y 160 z 1 h 120;1 0.4 f 13812392 v 1 w 120 x 480 y 880 z 1 h 120;168 0.4 bw 100 i 1.png v 1 x 850 y 650 bh 100;120 0.4 f 13812392 v 1 w 120 x 960 y 160 z 1 h 120;128 0.4 f 11572851 v 1 w 120 x 480 y 40 z 1 h 120;63 0.4 f 13812392 v 1 w 120 x 600 y 520 z 1 h 120;126 0.4 f 11572851 v 1 w 120 x 1320 y 160 z 1 h 120;169 0.4 bw 100 i 2.png v 1 x 970 y 530 bh 100;31 0.4 f 11572851 v 1 w 120 x 720 y 760 z 1 h 120;124 0.4 f 13812392 v 1 w 120 x 1200 y 160 z 1 h 120;82 0.4 f 13812392 v 1 w 120 x 720 y 400 z 1 h 120;29 0.4 f 13812392 v 1 w 120 x 600 y 760 z 1 h 120;77 0.4 f 13812392 v 1 w 120 x 480 y 400 z 1 h 120;141 0.4 f 11572851 v 1 w 120 x 1200 y 40 z 1 h 120;167 0.4 bw 100 i 0.png v 1 x 1090 y 290 bh 100;107 0.4 f 11572851 v 1 w 120 x 1200 y 280 z 1 h 120;137 0.4 f 11572851 v 1 w 120 x 960 y 40 z 1 h 120;41 0.4 f 13812392 v 1 w 120 x 1320 y 760 z 1 h 120;65 0.4 f 11572851 v 1 w 120 x 720 y 520 z 1 h 120;17 0.4 f 11572851 v 1 w 120 x 1080 y 880 z 1 h 120;133 0.4 f 11572851 v 1 w 120 x 720 y 40 z 1 h 120;11 0.4 f 11572851 v 1 w 120 x 840 y 880 z 1 h 120;88 0.4 f 11572851 v 1 w 120 x 1080 y 400 z 1 h 120;92 0.4 f 11572851 v 1 w 120 x 1320 y 400 z 1 h 120;143 0.4 f 13812392 v 1 w 120 x 1320 y 40 z 1 h 120;118 0.4 f 11572851 v 1 w 120 x 840 y 160 z 1 h 120;139 0.4 f 13812392 v 1 w 120 x 1080 y 40 z 1 h 120;71 0.4 f 13812392 v 1 w 120 x 1080 y 520 z 1 h 120;48 0.4 f 13812392 v 1 w 120 x 720 y 640 z 1 h 120;50 0.4 f 11572851 v 1 w 120 x 840 y 640 z 1 h 120;69 0.4 f 11572851 v 1 w 120 x 960 y 520 z 1 h 120;105 0.4 f 13812392 v 1 w 120 x 1080 y 280 z 1 h 120;43 0.4 f 13812392 v 1 w 120 x 480 y 640 z 1 h 120;114 0.4 f 11572851 v 1 w 120 x 600 y 160 z 1 h 120;67 0.4 f 13812392 v 1 w 120 x 840 y 520 z 1 h 120;103 0.4 f 11572851 v 1 w 120 x 960 y 280 z 1 h 120;14 0.4 f 13812392 v 1 w 120 x 960 y 880 z 1 h 120;90 0.4 f 13812392 v 1 w 120 x 1200 y 400 z 1 h 120;116 0.4 f 13812392 v 1 w 120 x 720 y 160 z 1 h 120;39 0.4 f 11572851 v 1 w 120 x 1200 y 760 z 1 h 120;73 0.4 f 11572851 v 1 w 120 x 1200 y 520 z 1 h 120;101 0.4 f 13812392 v 1 w 120 x 840 y 280 z 1 h 120;8 0.4 f 13812392 v 1 w 120 x 720 y 880 z 1 h 120;20 0.4 f 13812392 v 1 w 120 x 1200 y 880 z 1 h 120;58 0.4 f 11572851 v 1 w 120 x 1320 y 640 z 1 h 120;94 0.4 f 11572851 v 1 w 120 x 480 y 280 z 1 h 120;131 0.4 f 13812392 v 1 w 120 x 600 y 40 z 1 h 120;56 0.4 f 13812392 v 1 w 120 x 1200 y 640 z 1 h 120;168 0.8 z 3;169 0.8 z 3;167 0.8 z 3;76 1 bw 60 i forbidden.png v 0 x 1350 y 550 bh 60 z 2;106 1 bw 60 i forbidden.png v 0 x 1110 y 310 bh 60 z 2;18 1 bw 60 i forbidden.png v 0 x 1110 y 910 bh 60 z 2;121 1 bw 60 i forbidden.png v 0 x 990 y 190 bh 60 z 2;85 1 bw 60 i forbidden.png v 0 x 870 y 430 bh 60 z 2;89 1 bw 60 i forbidden.png v 0 x 1110 y 430 bh 60 z 2;178 1 bw 100 i $1 v 1 ax 0.5 x 200 y 660 bh 100;129 1 bw 60 i forbidden.png v 0 x 510 y 70 bh 60 z 2;148 1 f 0 v 1 x 480 y 400 Y 400 X 1440 W 3 z 3;165 1 f 7829367 v 1 w 120 x -120 Î y -120 F 0.75 h 120 z 2;70 1 bw 60 i forbidden.png v 0 x 990 y 550 bh 60 z 2;175 1 f 16777215 v 1 ax 0.5 x 200 y 450 s 36 T ;32 1 bw 60 i forbidden.png v 0 x 750 y 790 bh 60 z 2;187 1 f 16777215 v 1 ax 0.5 x 1720 y 710 s 36 T ;61 1 bw 60 i forbidden.png v 0 x 510 y 550 bh 60 z 2;74 1 bw 60 i forbidden.png v 0 x 1230 y 550 bh 60 z 2;140 1 bw 60 i forbidden.png v 0 x 1110 y 70 bh 60 z 2;163 1 f 8355711 w 1920 v 1 h 1080;170 1 f 16777215 v 1 a 0.15 w 300 x 50 y 50 W 4 h 460;98 1 bw 60 i forbidden.png v 0 x 630 y 310 bh 60 z 2;3 1 f 16711422 v 1 ff Verdana x 420 y 920 s 40 T 1 z 1;186 1 f 16777215 v 1 ax 0.5 x 1720 y 650 s 40 T ;142 1 bw 60 i forbidden.png v 0 x 1230 y 70 bh 60 z 2;184 1 bw 100 i $2 v 1 ax 0.5 x 1720 y 400 bh 100;27 1 bw 60 i forbidden.png v 0 x 510 y 790 bh 60 z 2;95 1 bw 60 i forbidden.png v 0 x 510 y 310 bh 60 z 2;176 1 f 16777215 v 1 a 0.15 w 300 x 50 y 570 W 4 h 460;173 1 bw 100 i 0.png v 1 x 150 y 270 bh 100;164 1 f 7829367 v 1 w 120 x -120 Î y -120 F 0.75 h 120 z 2;166 1 f 16711680 v 1 w 120 x -120 Î y -120 F 0.45 h 120 z 2;30 1 bw 60 i forbidden.png v 0 x 630 y 790 bh 60 z 2;104 1 bw 60 i forbidden.png v 0 x 990 y 310 bh 60 z 2;123 1 bw 60 i forbidden.png v 0 x 1110 y 190 bh 60 z 2;2 1 bw 60 i forbidden.png v 0 x 510 y 910 bh 60 z 2;149 1 f 0 v 1 x 480 y 520 Y 520 X 1440 W 3 z 3;147 1 f 0 v 1 x 480 y 280 Y 280 X 1440 W 3 z 3;159 1 f 0 v 1 x 1080 y 40 Y 1000 X 1080 W 3 z 3;181 1 f 16777215 v 1 ax 0.5 x 200 y 970 s 36 T ;62 1 f 16711422 v 1 ff Verdana x 420 y 560 s 40 T 4 z 1;19 1 f 16711422 v 1 ff Verdana x 1130 y 1010 s 40 T f z 1;130 1 f 16711422 v 1 ff Verdana x 420 y 80 s 40 T 8 z 1;158 1 f 0 v 1 x 960 y 40 Y 1000 X 960 W 3 z 3;87 1 bw 60 i forbidden.png v 0 x 990 y 430 bh 60 z 2;79 1 f 16711422 v 1 ff Verdana x 420 y 440 s 40 T 5 z 1;134 1 bw 60 i forbidden.png v 0 x 750 y 70 bh 60 z 2;146 1 f 0 v 1 x 480 y 160 Y 160 X 1440 W 3 z 3;21 1 bw 60 i forbidden.png v 0 x 1230 y 910 bh 60 z 2;55 1 bw 60 i forbidden.png v 0 x 1110 y 670 bh 60 z 2;153 1 f 0 v 1 x 480 y 1000 Y 1000 X 1440 W 3 z 3;28 1 f 16711422 v 1 ff Verdana x 420 y 800 s 40 T 2 z 1;53 1 bw 60 i forbidden.png v 0 x 990 y 670 bh 60 z 2;117 1 bw 60 i forbidden.png v 0 x 750 y 190 bh 60 z 2;40 1 bw 60 i forbidden.png v 0 x 1230 y 790 bh 60 z 2;9 1 bw 60 i forbidden.png v 0 x 750 y 910 bh 60 z 2;13 1 f 16711422 v 1 ff Verdana x 890 y 1010 s 40 T d z 1;150 1 f 0 v 1 x 480 y 640 Y 640 X 1440 W 3 z 3;171 1 f 16777215 v 1 ax 0.5 x 200 y 60 s 42 T $0;15 1 bw 60 i forbidden.png v 0 x 990 y 910 bh 60 z 2;78 1 bw 60 i forbidden.png v 0 x 510 y 430 bh 60 z 2;34 1 bw 60 i forbidden.png v 0 x 870 y 790 bh 60 z 2;57 1 bw 60 i forbidden.png v 0 x 1230 y 670 bh 60 z 2;161 1 f 0 v 1 x 1320 y 40 Y 1000 X 1320 W 3 z 3;66 1 bw 60 i forbidden.png v 0 x 750 y 550 bh 60 z 2;42 1 bw 60 i forbidden.png v 0 x 1350 y 790 bh 60 z 2;162 1 f 0 v 1 x 1440 y 40 Y 1000 X 1440 W 3 z 3;108 1 bw 60 i forbidden.png v 0 x 1230 y 310 bh 60 z 2;125 1 bw 60 i forbidden.png v 0 x 1230 y 190 bh 60 z 2;51 1 bw 60 i forbidden.png v 0 x 870 y 670 bh 60 z 2;172 1 bw 100 i $0 v 1 ax 0.5 x 200 y 140 bh 100;72 1 bw 60 i forbidden.png v 0 x 1110 y 550 bh 60 z 2;45 1 f 16711422 v 1 ff Verdana x 420 y 680 s 40 T 3 z 1;22 1 f 16711422 v 1 ff Verdana x 1250 y 1010 s 40 T g z 1;24 1 bw 60 i forbidden.png v 0 x 1350 y 910 bh 60 z 2;132 1 bw 60 i forbidden.png v 0 x 630 y 70 bh 60 z 2;49 1 bw 60 i forbidden.png v 0 x 750 y 670 bh 60 z 2;102 1 bw 60 i forbidden.png v 0 x 870 y 310 bh 60 z 2;115 1 bw 60 i forbidden.png v 0 x 630 y 190 bh 60 z 2;180 1 f 16777215 v 1 ax 0.5 x 200 y 910 s 40 T ;25 1 f 16711422 v 1 ff Verdana x 1370 y 1010 s 40 T h z 1;185 1 bw 100 i 2.png v 1 x 1670 y 530 bh 100;145 1 f 0 v 1 x 480 y 40 Y 40 X 1440 W 3 z 3;127 1 bw 60 i forbidden.png v 0 x 1350 y 190 bh 60 z 2;174 1 f 16777215 v 1 ax 0.5 x 200 y 390 s 40 T ;16 1 f 16711422 v 1 ff Verdana x 1010 y 1010 s 40 T e z 1;4 1 f 16711422 v 1 ff Verdana x 530 y 1010 s 40 T a z 1;156 1 f 0 v 1 x 720 y 40 Y 1000 X 720 W 3 z 3;12 1 bw 60 i forbidden.png v 0 x 870 y 910 bh 60 z 2;136 1 bw 60 i forbidden.png v 0 x 870 y 70 bh 60 z 2;96 1 f 16711422 v 1 ff Verdana x 420 y 320 s 40 T 6 z 1;64 1 bw 60 i forbidden.png v 0 x 630 y 550 bh 60 z 2;157 1 f 0 v 1 x 840 y 40 Y 1000 X 840 W 3 z 3;183 1 f 16777215 v 1 ax 0.5 x 1720 y 320 s 42 T $2;10 1 f 16711422 v 1 ff Verdana x 770 y 1010 s 40 T c z 1;36 1 bw 60 i forbidden.png v 0 x 990 y 790 bh 60 z 2;81 1 bw 60 i forbidden.png v 0 x 630 y 430 bh 60 z 2;182 1 f 16777215 v 1 a 0.15 w 300 x 1570 y 310 W 4 h 460;119 1 bw 60 i forbidden.png v 0 x 870 y 190 bh 60 z 2;152 1 f 0 v 1 x 480 y 880 Y 880 X 1440 W 3 z 3;112 1 bw 60 i forbidden.png v 0 x 510 y 190 bh 60 z 2;38 1 bw 60 i forbidden.png v 0 x 1110 y 790 bh 60 z 2;179 1 bw 100 i 1.png v 1 x 150 y 790 bh 100;154 1 f 0 v 1 x 480 y 40 Y 1000 X 480 W 3 z 3;68 1 bw 60 i forbidden.png v 0 x 870 y 550 bh 60 z 2;7 1 f 16711422 v 1 ff Verdana x 650 y 1010 s 40 T b z 1;144 1 bw 60 i forbidden.png v 0 x 1350 y 70 bh 60 z 2;91 1 bw 60 i forbidden.png v 0 x 1230 y 430 bh 60 z 2;177 1 f 16777215 v 1 ax 0.5 x 200 y 580 s 42 T $1;155 1 f 0 v 1 x 600 y 40 Y 1000 X 600 W 3 z 3;83 1 bw 60 i forbidden.png v 0 x 750 y 430 bh 60 z 2;47 1 bw 60 i forbidden.png v 0 x 630 y 670 bh 60 z 2;160 1 f 0 v 1 x 1200 y 40 Y 1000 X 1200 W 3 z 3;113 1 f 16711422 v 1 ff Verdana x 420 y 200 s 40 T 7 z 1;138 1 bw 60 i forbidden.png v 0 x 990 y 70 bh 60 z 2;44 1 bw 60 i forbidden.png v 0 x 510 y 670 bh 60 z 2;100 1 bw 60 i forbidden.png v 0 x 750 y 310 bh 60 z 2;110 1 bw 60 i forbidden.png v 0 x 1350 y 310 bh 60 z 2;6 1 bw 60 i forbidden.png v 0 x 630 y 910 bh 60 z 2;59 1 bw 60 i forbidden.png v 0 x 1350 y 670 bh 60 z 2;93 1 bw 60 i forbidden.png v 0 x 1350 y 430 bh 60 z 2;151 1 f 0 v 1 x 480 y 760 Y 760 X 1440 W 3 z 3\",\"toggles\":{\"debugToggle\":\"164+165+166+\"}}}\\n','KEY_FRAME 1\\n{\"duration\":956,\"entitymodule\":\"U174 0 T h7;175 0;167 0 z 4;106 1 v 1;165 1 x 1320 Î y 160 Î;164 1 x 1080 Î y 280 Î;167 1 x 1330 y 170 z 3\"}\\n','KEY_FRAME 2\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T c1;168 1 x 730 y 890 z 3;165 1 x 720 Î y 880 Î;164 1 x 840 Î y 640 Î;51 1 v 1\"}\\n','KEY_FRAME 3\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T g3;165 1 x 1200 Î y 640 Î;70 1 v 1;164 1 x 960 Î y 520 Î;169 1 x 1210 y 650 z 3\"}\\n','KEY_FRAME 4\\n{\"entitymodule\":\"U174 0 T f8;175 0;167 0 z 4;127 1 v 1;165 1 x 1080 Î y 40 Î;164 1 x 1320 Î y 160 Î;167 1 x 1090 y 50 z 3\"}\\n','KEY_FRAME 5\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T b3;168 1 x 610 y 650 z 3;165 1 x 600 Î y 640 Î;164 1 x 720 Î y 880 Î;9 1 v 1\"}\\n','KEY_FRAME 6\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T e2;57 1 v 1;165 1 x 960 Î y 760 Î;164 1 x 1200 Î y 640 Î;169 1 x 970 y 770 z 3\"}\\n','KEY_FRAME 7\\n{\"entitymodule\":\"U174 0 T e6;175 0;167 0 z 4;165 1 y 280 Î;140 1 v 1;164 1 x 1080 Î y 40 Î;167 1 x 970 y 290 z 3\"}\\n','KEY_FRAME 8\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T d2;47 1 v 1;168 1 x 850 y 770 z 3;165 1 x 840 Î y 760 Î;164 1 x 600 Î y 640 Î\"}\\n','KEY_FRAME 9\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T d4;165 1 y 520 Î;164 1 x 960 Î y 760 Î;169 1 x 850 y 530 z 3;36 1 v 1\"}\\n','KEY_FRAME 10\\n{\"entitymodule\":\"U174 0 T c5;175 0;167 0 z 4;165 1 x 720 Î y 400 Î;164 1 y 280 Î;104 1 v 1;167 1 x 730 y 410 z 3\"}\\n','KEY_FRAME 11\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T f3;168 1 x 1090 y 650 z 3;165 1 x 1080 Î y 640 Î;164 1 x 840 Î y 760 Î;34 1 v 1\"}\\n','KEY_FRAME 12\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T c6;165 1 x 720 Î y 280 Î;164 1 y 520 Î;68 1 v 1;169 1 x 730 y 290 z 3\"}\\n','KEY_FRAME 13\\n{\"entitymodule\":\"U174 0 T b7;175 0;167 0 z 4;165 1 x 600 Î y 160 Î;164 1 x 720 Î y 400 Î;83 1 v 1;167 1 x 610 y 170 z 3\"}\\n','KEY_FRAME 14\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T e1;55 1 v 1;168 1 x 970 y 890 z 3;165 1 x 960 Î y 880 Î;164 1 x 1080 Î y 640 Î\"}\\n','KEY_FRAME 15\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T a7;165 1 x 480 Î y 160 Î;164 1 x 720 Î y 280 Î;100 1 v 1;169 1 x 490 y 170 z 3\"}\\n','KEY_FRAME 16\\n{\"entitymodule\":\"U174 0 T a5;175 0;167 0 z 4;165 1 y 400 Î;164 1 x 600 Î y 160 Î;115 1 v 1;167 1 x 490 y 410 z 3\"}\\n','KEY_FRAME 17\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T g2;168 1 x 1210 y 770 z 3;165 1 x 1200 Î y 760 Î;164 1 x 960 Î y 880 Î;15 1 v 1\"}\\n','KEY_FRAME 18\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T c8;165 1 x 720 Î y 40 Î;164 1 x 480 Î y 160 Î;112 1 v 1;169 1 x 730 y 50 z 3\"}\\n','KEY_FRAME 19\\n{\"entitymodule\":\"U174 0 T c4;175 0;167 0 z 4;165 1 y 520 Î;164 1 y 400 Î;167 1 x 730 y 530 z 3;78 1 v 1\"}\\n','KEY_FRAME 20\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T f4;168 1 x 1090 y 530 z 3;165 1 x 1080 Î;164 1 x 1200 Î y 760 Î;40 1 v 1\"}\\n','KEY_FRAME 21\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T b6;165 1 x 600 Î y 280 Î;164 1 x 720 Î y 40 Î;134 1 v 1;169 1 x 610 y 290 z 3\"}\\n','KEY_FRAME 22\\n{\"entitymodule\":\"U174 0 T b2;175 0;167 0 z 4;66 1 v 1;165 1 y 760 Î;164 1 y 520 Î;167 1 x 610 y 770 z 3\"}\\n','KEY_FRAME 23\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T h5;168 1 x 1330 y 410 z 3;165 1 x 1320 Î y 400 Î;164 1 x 1080 Î;72 1 v 1\"}\\n','KEY_FRAME 24\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T a4;165 1 x 480 Î y 520 Î;164 1 x 600 Î y 280 Î;98 1 v 1;169 1 x 490 y 530 z 3\"}\\n','KEY_FRAME 25\\n{\"entitymodule\":\"U174 0 T d1;175 0;167 0 z 4;165 1 x 840 Î y 880 Î;164 1 y 760 Î;30 1 v 1;167 1 x 850 y 890 z 3\"}\\n','KEY_FRAME 26\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T g7;168 1 x 1210 y 170 z 3;165 1 x 1200 Î y 160 Î;164 1 x 1320 Î y 400 Î;93 1 v 1\"}\\n','KEY_FRAME 27\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T c3;61 1 v 1;165 1 x 720 Î y 640 Î;164 1 x 480 Î y 520 Î;169 1 x 730 y 650 z 3\"}\\n','KEY_FRAME 28\\n{\"entitymodule\":\"U174 0 T e3;175 0;167 0 z 4;12 1 v 1;165 1 x 960 Î;164 1 x 840 Î y 880 Î;167 1 x 970 y 650 z 3\"}\\n','KEY_FRAME 29\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T e8;168 1 x 970 y 50 z 3;165 1 y 40 Î;164 1 x 1200 Î y 160 Î;125 1 v 1\"}\\n','KEY_FRAME 30\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T b5;165 1 x 600 Î y 400 Î;164 1 x 720 Î y 640 Î;49 1 v 1;169 1 x 610 y 410 z 3\"}\\n','KEY_FRAME 31\\n{\"entitymodule\":\"U174 0 T g4;175 0;167 0 z 4;165 1 x 1200 Î y 520 Î;53 1 v 1;164 1 x 960 Î;167 1 x 1210 y 530 z 3\"}\\n','KEY_FRAME 32\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T c7;168 1 x 730 y 170 z 3;165 1 x 720 Î y 160 Î;164 1 y 40 Î;138 1 v 1\"}\\n','KEY_FRAME 33\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T d6;165 1 x 840 Î y 280 Î;164 1 x 600 Î y 400 Î;169 1 x 850 y 290 z 3;81 1 v 1\"}\\n','KEY_FRAME 34\\n{\"entitymodule\":\"U174 0 T h2;175 0;167 0 z 4;74 1 v 1;165 1 x 1320 Î y 760 Î;164 1 x 1200 Î y 520 Î;167 1 x 1330 y 770 z 3\"}\\n','KEY_FRAME 35\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T d5;168 1 x 850 y 410 z 3;165 1 x 840 Î y 400 Î;117 1 v 1;164 1 x 720 Î y 160 Î\"}\\n','KEY_FRAME 36\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T f7;165 1 x 1080 Î y 160 Î;164 1 x 840 Î y 280 Î;169 1 x 1090 y 170 z 3;102 1 v 1\"}\\n','KEY_FRAME 37\\n{\"entitymodule\":\"U174 0 T f1;175 0;167 0 z 4;165 1 y 880 Î;164 1 x 1320 Î y 760 Î;42 1 v 1;167 1 x 1090 y 890 z 3\"}\\n','KEY_FRAME 38\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T e7;168 1 x 970 y 170 z 3;165 1 x 960 Î y 160 Î;164 1 x 840 Î y 400 Î;85 1 v 1\"}\\n','KEY_FRAME 39\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T h8;165 1 x 1320 Î y 40 Î;164 1 x 1080 Î y 160 Î;169 1 x 1330 y 50 z 3;123 1 v 1\"}\\n','KEY_FRAME 40\\n{\"entitymodule\":\"\"}\\n','KEY_FRAME 41\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T f5;168 1 x 1090 y 410 z 3;165 1 x 1080 Î y 400 Î;121 1 v 1;164 1 x 960 Î\"}\\n','KEY_FRAME 42\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T g6;165 1 x 1200 Î y 280 Î;164 1 x 1320 Î y 40 Î;169 1 x 1210 y 290 z 3;144 1 v 1\"}\\n','KEY_FRAME 43\\n{\"entitymodule\":\"U181 0;168 0 z 4;180 0 T h4;168 1 x 1330 y 530 z 3;165 1 x 1320 Î y 520 Î;164 1 x 1080 Î y 400 Î;89 1 v 1\"}\\n','KEY_FRAME 44\\n{\"entitymodule\":\"U187 0;169 0 z 4;186 0 T e5;165 1 x 960 Î y 400 Î;164 1 x 1200 Î y 280 Î;108 1 v 1;169 1 x 970 y 410 z 3\"}\\n','KEY_FRAME 45\\n{\"entitymodule\":\"\"}\\n','KEY_FRAME 46\\n{\"entitymodule\":\"\",\"endScreen\":[[0,1,2],\"logo.png\",null]}\\n'],agents:[{index:0,name:\"Player 0\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085734516701&format=viewer_avatar\",agentId:0},{index:1,name:\"Player 1\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085846089817&format=viewer_avatar\",agentId:1},{index:2,name:\"Player 2\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085713250612&format=viewer_avatar\",agentId:2}]};function qr(t){return(qr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Jr(t,e,r){return(Jr=Qr()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&Zr(e,r.prototype),e}).apply(null,arguments)}function Qr(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Zr(t,e){return(Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var en=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Zr(e,t);var r=function(t){var e=Qr();return function(){var r,n=tn(t);r=e?(r=tn(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===qr(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e){if(this instanceof n)return(t=r.call(this,'<Error in module \"'+t+'\">')).cause=e,t.name=\"ModuleError\",t;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Jr(t,arguments,tn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Zr(r,t)}(t)}(Error));function rn(t){return(rn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function nn(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function on(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],(e=cn(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function an(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function un(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,cn(n.key),n)}}function cn(t){return t=function(t,e){if(\"object\"!==rn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if(\"object\"!==rn(r=r.call(t,e)))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(t,\"string\"),\"symbol\"===rn(t)?t:String(t)}var ln=function(){function t(e){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");var r;PIXI.settings.STRICT_TEXTURE_CACHE=!0,this.toDestroy=[],this.stepByStepAnimateSpeed=null,(e=e||$r)?(r=e.views,e=e.agents,this.demo={playerCount:e.length,logo:\"logo.png\",overlayAlpha:.2,agents:e,frames:r},this.demo.agents.forEach((function(e){e.color=t.playerColors[e.index]}))):this.demo=void 0}var e,r,o;return e=t,o=[{key:\"requirements\",get:function(){return{PIXI:\"PIXI6\"}}},{key:\"VERSION\",get:function(){return 2}},{key:\"WIDTH\",get:function(){return cr}},{key:\"HEIGHT\",get:function(){return 1080}},{key:\"getGameRatio\",value:function(){return t.WIDTH/t.HEIGHT}},{key:\"playerColors\",get:function(){return Vr}},{key:\"SDK_GAME\",get:function(){return!0}},{key:\"RenderTimeout\",get:function(){return\"localhost\"===window.location.hostname?1/0:2e4}}],(r=[{key:\"getDefaultOverSampling\",value:function(){return 2}},{key:\"handleModuleError\",value:function(t,e){f.push(new en(t,e)),console.error(e),f.push({message:'<Module \"'.concat(t,'\" disabled>\\n')}),delete this.modules[t]}},{key:\"instantiateModules\",value:function(){this.modules={};var t,e=function(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return\"string\"==typeof t?an(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?an(t,e):void 0}(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}(Nr);try{for(e.s();!(t=e.n()).done;){var r=t.value;try{this.modules[r.moduleName||r.name]=new r(n)}catch(t){this.handleModuleError(r.moduleName||r.name,t)}}}catch(t){e.e(t)}finally{e.f()}}},{key:\"destroy\",value:function(){this.alreadyLoaded&&(this.renderer.destroy(),this.endCallback=null),this.destroyed=!0}},{key:\"destroyScene\",value:function(t){for(var e=0,r=ce.length;e<r;++e)ce[e].destroy(!0);ce=[]}},{key:\"getGameName\",value:function(){return\"Mad Knights\"}},{key:\"canSwapPlayers\",value:function(){return!1}},{key:\"addErrorListener\",value:function(t){f.listen(t)}},{key:\"getResources\",value:function(){return Object.assign({baseUrl:\"\",images:{},spines:{},sprites:[],fonts:[],others:[]},n)}},{key:\"getOptions\",value:function(){return Gr?Gr.map((function(t){return on({},t)})):[]}},{key:\"setDebug\",value:function(e){this.asyncRenderingTime=t.RenderTimeout}},{key:\"initPreload\",value:function(t,e,r,n,o){t.canvasWidth=n,t.canvasHeight=o,t.loaderProgress=new PIXI.Text(\"100\",{fontSize:.117*o||30,fontFamily:\"Lato\",fontWeight:\"900\",fill:\"white\",align:\"center\"}),t.loaderProgress.anchor.y=1,t.loaderProgress.anchor.x=1.3,t.progress=t.realProgress=r,t.loaderProgress.position.y=o,t.progressBar=new PIXI.Graphics,e.addChild(t.progressBar),e.addChild(t.loaderProgress)}},{key:\"preload\",value:function(t,e,r,n,o,i){t.progress=r}},{key:\"renderPreloadScene\",value:function(t,e){return e=Math.pow(.998,e),t.realProgress=e*t.realProgress+(1-e)*t.progress,t.loaderProgress.text=(100*t.realProgress).toFixed(0),t.loaderProgress.position.x=t.realProgress*t.canvasWidth,t.progressBar.clear(),t.progressBar.beginFill(0,1),t.progressBar.drawRect(0,0,t.canvasWidth*t.realProgress+1,t.canvasHeight),t.progressBar.endFill(),t.progressBar.beginFill(4146246,1),t.progressBar.drawRect(t.canvasWidth*t.realProgress,0,t.canvasWidth,t.canvasHeight),t.progressBar.endFill(),!0}},{key:\"initDefaultScene\",value:function(e,r,n,o){var i=new PIXI.Container;if(e.drawer=this,e.time=0,this.demo){if(this.demo.logo)try{(u=PIXI.Sprite.from(this.demo.logo)).position.set(t.WIDTH/2,t.HEIGHT/2),u.anchor.set(.5),u.baseScale=a(u.texture.width,u.texture.height,2*t.WIDTH/3,t.HEIGHT/2,0),i.addChild(u),e.logo=u}catch(r){f.push({cause:r,message:'Missing \"logo.png\" to complete replay.'}),e.logo=new PIXI.Container,e.logo.baseScale=1,i.addChild(e.logo),e.missingLogo=!0}var u=new PIXI.Graphics,c=(e.missingLogo||(u.beginFill(0,this.demo.overlayAlpha||0),u.drawRect(0,0,t.WIDTH+20,t.HEIGHT+20),u.endFill(),u.x-=10,u.y-=10),new PIXI.Container);try{this.initDefaultFrames(this.demo.playerCount,this.demo.frames,this.demo.agents),this.preconstructScene(this.scope,r,this.initWidth,this.initHeight),this.initScene(this.scope,c,this.frames,!0),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)}catch(r){f.push({cause:r,message:\"Cannot load demo, you might want to reset the demo\"})}e.demo=c,e.demotime=0,this.currentFrame=-1,r.addChild(c),r.addChild(u),r.addChild(i)}e.updateTime=0,e.frameTime=0}},{key:\"initDefaultFrames\",value:function(e,r,n){var o=this;(n=(this.instantiateModules(),this.playerInfo=n.map((function(t,e){return{name:t.name||\"Anonymous\",color:t.color?o.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:t.avatarTexture}})),this.instantiateModules(),this._frames=r.map((function(t){var e,r=(t=t.split(\"\\n\"))[0].split(\" \");try{e=JSON.parse(t.slice(1).join(\"\\n\"))}catch(t){e={}}return on(on({},e),{},{key:\"KEY_FRAME\"===r[0]})})).filter((function(t){return t.key})),this.parseGlobalData(this._frames[0].global),this.playerCount=e,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,this._frames[0].frame)).key=this._frames[0].key,this.frames.push(this.parseFrame(n,this.frames));for(var i=1;i<this._frames.length;++i)this.frames.push(this.parseFrame(this._frames[i],this.frames));this.asyncRenderingTime=t.RenderTimeout}},{key:\"renderDefaultScene\",value:function(t,e){if(e=Math.min(80,e),void 0===this.demo)return!1;this.currentFrame=this.currentFrameTemp||0,t.frameTime+=e,t.updateTime+=e,t.demotime+=e/1e3;var r=Math.max(0,Math.min(1,(t.demotime-1)/.5));t.logo&&(t.logo.alpha=r,t.logo.scale.x=t.logo.scale.y=(3-2*r)*t.logo.baseScale),!t.missingLogo&&1.5<t.demotime&&t.demotime<=2.2?(r=15*Math.max(0,1-(t.demotime-1.5)/.7),t.demo.x=(2*Math.random()-1)*r,t.demo.y=(2*Math.random()-1)*r):t.demo.x=t.demo.y=0,r=this.getFrameDuration(this.currentFrame);return 30<=t.updateTime&&(t.updateTime-=30,0===this.currentFrame?this.progress=1:this.progress=i(0,r,t.frameTime),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)),t.frameTime>=r&&(t.frameTime-=r,this.currentFrame=(this.currentFrame+1)%this.frames.length),this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],e,!0),this.currentFrameTemp=this.currentFrame,this.currentFrame=-1,!0}},{key:\"endDefaultScene\",value:function(t,e){return!0}},{key:\"parseGlobalData\",value:function(t){for(var e in this.modules){var r=this.modules[e];\"function\"==typeof r.handleGlobalData&&r.handleGlobalData(this.playerInfo,t[e])}}},{key:\"parseFrame\",value:function(t,e){var r,n={data:{},frameInfo:{number:e.length}};if(n.previous=e[e.length-1]||n,n!==n.previous&&(n.previous.next=n),!t.key)return n.previous;for(r in t.duration&&(this.currentFrameDuration=t.duration),n.frameInfo.frameDuration=this.currentFrameDuration,n===n.previous?(n.frameInfo.date=0,n.frameInfo.frameDuration=0):n.frameInfo.date=n.previous.frameInfo.date+n.previous.frameInfo.frameDuration,this.modules){var o=this.modules[r];\"function\"==typeof o.handleFrameData&&(n.data[r]=o.handleFrameData(n.frameInfo,t[r]))}return n}},{key:\"preconstructScene\",value:function(e,r,n,o){e.canvasHeight=o,e.canvasWidth=n,e.time=0,e.endTime=0,e.playerInfo=this.playerInfo,r.scale.x=n/t.WIDTH,r.scale.y=o/t.HEIGHT}},{key:\"initScene\",value:function(t,e,r){for(var n in this.modules){var o=this.modules[n],i=new PIXI.Container;try{o.reinitScene(i,{width:t.canvasWidth,height:t.canvasHeight,oversampling:this.oversampling})}catch(t){this.handleModuleError(n,t)}e.addChild(i)}}},{key:\"updateScene\",value:function(t,e,r,n,o,i,a,u,c){var l,s=r[n];if(!c&&this.stepByStepAnimateSpeed){if(this.checkSteppedToNextFrame(t,s,o))return void this.startAsynchronousAnimation(t,s);if(this.checkSteppedToPreviousFrame(t,s,o))return void this.startAsynchronousAnimation(t,t.currentFrame,!0);t.targetProgress=null}for(l in t.currentFrame=s,t.currentProgress=o,t.reason=a,this.modules){var f=this.modules[l];if(s.data.hasOwnProperty(l))try{f.updateScene(s.previous.data[l],s.data[l],o,i)}catch(t){this.handleModuleError(l,t)}}}},{key:\"startAsynchronousAnimation\",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t.targetProgress=r?0:1,r||1!==t.currentProgress||(t.currentProgress=0),t.currentFrame=e,t.reverseAsynchronousAnimation=r}},{key:\"checkStepped\",value:function(t,e,r){return t.currentFrame&&0===this.speed&&1===r}},{key:\"checkSteppedToNextFrame\",value:function(t,e,r){return this.checkStepped(t,e,r)&&(t.currentFrame===e.previous&&t.currentFrame!==e||t.currentFrame===e&&t.currentProgress!==r)}},{key:\"checkSteppedToPreviousFrame\",value:function(t,e,r){return this.checkStepped(t,e,r)&&t.currentFrame.previous===e&&t.currentFrame!==e}},{key:\"initEndScene\",value:function(t,e){t.endSceneViewed=!1}},{key:\"destroyEndScene\",value:function(t){}},{key:\"renderEndScene\",value:function(t,e,r){0===t.endTime&&this.initEndScene(t,r),t.endTime+=e,void 0<=t.endTime&&!t.endSceneViewed&&(this.endCallback&&this.endCallback(),t.endSceneViewed=!0)}},{key:\"renderScene\",value:function(t,e,r,n,o,i,a,u){var c,l;for(l in u=Math.min(80,u),this.debugMode||n!==r.length-1||1!==o?(0<t.endTime&&this.destroyEndScene(t),t.endTime=0):this.renderEndScene(t,u,\"Win\"!==a),this.stepByStepAnimateSpeed&&this.isAsynchronousAnimationOngoing(t)&&(n=this.currentFrame,t.reverseAsynchronousAnimation&&n++,r=u/200*this.getFrameSpeed(n)*this.stepByStepAnimateSpeed,t.reverseAsynchronousAnimation?(c=t.currentProgress-r)<=0&&(n=this.currentFrame,t.targetProgress=c=1):(c=t.currentProgress+r,c=Math.min(t.targetProgress,c)),this.updateScene(this.scope,this.question,this.frames,n,c,this.speed,this.reasons[n],!1,!0)),this.modules){var s=this.modules[l];if(\"function\"==typeof s.animateScene)try{s.animateScene(u)}catch(t){this.handleModuleError(l,t)}}return!0}},{key:\"isAsynchronousAnimationOngoing\",value:function(t){return null!=t.targetProgress&&t.currentProgress!==t.targetProgress}},{key:\"getFrameSpeed\",value:function(t){return 500/this.getFrameDuration(t)}},{key:\"getFrameDuration\",value:function(t){return this.frames&&this.frames[t]&&this.frames[t].frameInfo.frameDuration||1e3}},{key:\"enableAsyncRendering\",value:function(e){this.asyncRendering=e,this.asyncRenderingTime=t.RenderTimeout}},{key:\"purge\",value:function(){this.scope={},this.changed=!0,this.container.interactiveChildren=!1,this.container.destroy({texture:!1,children:!0}),delete this.container,this.container=new PIXI.Container}},{key:\"reinitScene\",value:function(){1<=this.loaded&&(this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.preconstructScene(this.scope,this.container,this.initWidth,this.initHeight),this.initScene(this.scope,this.container,this.frames),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame]),this.changed=!0)}},{key:\"reinitDefaultScene\",value:function(){1<=this.loaded&&(this.intro=!0,this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initDefaultScene(this.scope,this.container,this.initWidth,this.initHeight),this.changed=!0)}},{key:\"reinitLoadingScene\",value:function(){this.loaded<1&&(this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initPreload(this.scope,this.container,this.loaded,this.initWidth,this.initHeight))}},{key:\"reinit\",value:function(t){1<=this.loaded&&!this.loading?0<=this.currentFrame&&!this.intro?this.reinitScene():this.intro&&!t||this.reinitDefaultScene():this.reinitLoadingScene()}},{key:\"animate\",value:function(t){var e;this.destroyed||(this.lastRenderTime||(this.lastRenderTime=t),e=t-this.lastRenderTime,this.asynchronousStep&&(e=this.asynchronousStep),this.onBeforeRender&&this.onBeforeRender(),this.loading||(this.loaded<1?this.changed|=this.renderPreloadScene(this.scope,e):(this.changed||this.asyncRendering&&0<this.asyncRenderingTime||this.isAsynchronousAnimationOngoing(this.scope))&&(this.currentFrame<0?this.changed|=this.renderDefaultScene(this.scope,e):this.intro?(this.changed=!0,this.endDefaultScene(this.scope,e)&&(this.intro=!1,this.reinit(!0))):this.changed|=this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame],e)),this.changed&&(this.renderer.render(this.container),this.changed=!1)),this.onAfterRender&&this.onAfterRender(),this.lastRenderTime=t,this.destroyed||requestAnimationFrame(this.animate.bind(this)),this.asyncRenderingTime-=e)}},{key:\"_initFrames\",value:function(t,e){this.instantiateModules(),this._frames=e.map((function(t){var e,r=t[0].split(\" \");try{e=JSON.parse(t.slice(1).join(\"\\n\"))}catch(t){e={}}return on(on({},e),{},{key:\"KEY_FRAME\"===r[0]})})),this.parseGlobalData(this._frames[0].global),this.playerCount=t,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,(e=this._frames[0].frame).key=this._frames[0].key,this.frames.push(this.parseFrame(e,this.frames));for(var r=1;r<this._frames.length;++r)this.frames.push(this.parseFrame(this._frames[r],this.frames))}},{key:\"isTurnBasedGame\",value:function(){return!1}},{key:\"initFrames\",value:function(t,e){function r(){n._initFrames(e.length,t),n.loading=!1,n.reinit(!1),i=!0}this.playerInfo&&this.playerInfo.forEach((function(t){t.avatar&&t.avatar.destroy(!0)}));var n=this,o=new PIXI.Loader(window.location.origin),i=(this.playerInfo=e.map((function(t,e){var r={name:t.name||\"Anonymous\",color:t.color?n.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:null};return null!=t.avatar&&o.add(\"avatar\"+e,t.avatar,{loadType:2,crossOrigin:!0},(function(t){r.avatar=t.texture,PIXI.Texture.addToCache(t.texture,\"$\"+r.index)})),r})),!(this.loading=!0));o.onComplete.add(r),o.onError.add((function(t){console.warn(t),i||r()})),o.load()}},{key:\"update\",value:function(e,r,n){0<=this.currentFrame&&(this.asyncRenderingTime=t.RenderTimeout,this.changed=!0,this.speed=n,this.currentFrame=e,this.progress=r,1<=this.loaded)&&!this.intro&&this.updateScene(this.scope,this.question,this.frames,e,r,this.speed,this.reasons[this.currentFrame])}},{key:\"parseColor\",value:function(t){if(Array.isArray(t)){for(var e=[],r=0;r<t.length;++r)e.push(this.parseColor(t[r]));return e}return parseInt(t.substring(1),16)}},{key:\"init\",value:function(e,r,n,o,i,a,u){function c(){0<=s.currentFrame&&(s.changed=!0)}var l,s=this,y=(window.PIXI=t.PIXI||window.PIXI,this.oversampling=i||1,this.canvas=$(e),this.canvas.off(\"mousemove\"),this.canvas.off(\"wheel\"),this.canvas.bind(\"wheel\",c),this.canvas.mousemove(c),o&&(this.colors=this.parseColor(o)),\"ide\"===u&&(this.debugModeSetByUser||(this.debugMode=!0),f.listen((function(t){return console.error(t.cause||t)}))),this.asyncRendering=!0,this.asyncRenderingTime=0,this.destroyed=!1,this.asynchronousStep=null,this);if(this.initWidth=0|r,this.initHeight=0|n,this.endCallback=a||this.endCallback,this.alreadyLoaded)this.changed=!0,this.renderer.resize(this.initWidth,this.initHeight),this.reinit(!0);else{this.alreadyLoaded=!0,this.question=null,this.scope=null,this.currentFrame=-1,this.loaded=0,this.container=new PIXI.Container;var p,h=this.getResources(),d=(this.renderer=this.createRenderer(this.initWidth,this.initHeight,e),i=this.renderer,ue=i,new PIXI.Loader(h.baseUrl));for(l in h.images)d.add(l,h.images[l],{crossOrigin:!0});for(p=0;p<h.sprites.length;++p)d.add(h.sprites[p],{crossOrigin:!0});for(p=0;p<h.fonts.length;++p)d.add(h.fonts[p],{crossOrigin:!0});for(l in h.spines)d.add(l,h.spines[l],{crossOrigin:!0});for(p=0;p<h.others.length;++p)d.add(h.others[p],{crossOrigin:!0});this.demo&&this.demo.agents.forEach((function(t){d.add(\"avatar\"+t.index,t.avatar,{loadType:2,crossOrigin:!0},(function(e){t.avatarTexture=e.texture,PIXI.Texture.addToCache(e.texture,\"$\"+t.index)}))})),y.scope={},o=function(t,e){requestAnimationFrame(y.animate.bind(y)),y.initPreload(y.scope,y.container,y.loaded=0,y.initWidth,y.initHeight)},d.onStart.add(o),d.onProgress.add((function(t,e){t.progress<100&&y.preload(y.scope,y.container,y.loaded=t.progress/100,y.initWidth,y.initHeight,e)})),u=function(){for(var t in h.spines)h.spines.hasOwnProperty(t)&&(PIXI.AnimCache[t]=PIXI.AnimCache[h.baseUrl+h.spines[t]]);y.loaded=1,y.reinit(!0),y.changed=!0},d.onComplete.add(u),d.onError.add((function(t){console.warn(t)})),Object.keys(d.resources).length?d.load():(o(),u())}}},{key:\"createRenderer\",value:function(t,e,r){return PIXI.autoDetectRenderer({width:t,height:e,view:r,clearBeforeRender:!0,preserveDrawingBuffer:!1})}},{key:\"isReady\",value:function(){return 1<=this.loaded}}])&&un(e.prototype,r),o&&un(e,o),Object.defineProperty(e,\"prototype\",{writable:!1}),t}()}]).Drawer;",
      "levelParams": {
        "0": {
          "aiCode": "//\r\n// Mad Knights bot\r\n//\r\n\r\n// 64 bits bitboarding\r\n//\r\n// ........\r\n// ........\r\n// ........\r\n// ........\r\n// ........\r\n// ........\r\n// ........\r\n// ........\r\n// ^\r\n// |\r\n// lsb\r\n\r\n#include <iostream>\r\n#include <string>\r\n#include <vector>\r\n#include <algorithm>\r\n\r\nusing namespace std;\r\n\r\nstatic inline int popcount(uint64_t bits) noexcept\r\n{\r\n\treturn __builtin_popcountll(bits);\r\n}\r\n\r\nstatic inline uint32_t poplsb(uint64_t& bits) noexcept\r\n{\r\n\tauto index = __builtin_ctzll(bits);\r\n\tbits &= bits - 1;\r\n\treturn index;\r\n}\r\n\r\nconst string squares[65] = {\r\n\t\"a1\", \"b1\", \"c1\", \"d1\", \"e1\", \"f1\", \"g1\", \"h1\",\r\n\t\"a2\", \"b2\", \"c2\", \"d2\", \"e2\", \"f2\", \"g2\", \"h2\",\r\n\t\"a3\", \"b3\", \"c3\", \"d3\", \"e3\", \"f3\", \"g3\", \"h3\",\r\n\t\"a4\", \"b4\", \"c4\", \"d4\", \"e4\", \"f4\", \"g4\", \"h4\",\r\n\t\"a5\", \"b5\", \"c5\", \"d5\", \"e5\", \"f5\", \"g5\", \"h5\",\r\n\t\"a6\", \"b6\", \"c6\", \"d6\", \"e6\", \"f6\", \"g6\", \"h6\",\r\n\t\"a7\", \"b7\", \"c7\", \"d7\", \"e7\", \"f7\", \"g7\", \"h7\",\r\n\t\"a8\", \"b8\", \"c8\", \"d8\", \"e8\", \"f8\", \"g8\", \"h8\",\r\n\t\"None\"\r\n};\r\n\r\nclass Board\r\n{\r\npublic:\r\n\tuint64_t free = 0xffffffffffffffff;\r\n\tuint32_t knights[3];\r\n\tstatic uint64_t knightMoves[64];\r\n\r\n\tBoard() {}\r\n\r\n\tuint64_t getMoves(unsigned int player) const noexcept\r\n\t{\r\n\t\treturn getKnightMoves(knights[player]);\r\n\t}\r\n\r\n\tuint64_t getKnightMoves(unsigned int cell) const noexcept\r\n\t{\r\n\t\treturn free & knightMoves[cell];\r\n\t}\r\n};\r\n\r\nuint64_t Board::knightMoves[64] = {\r\n\t0x20400, 0x50800, 0xa1100, 0x142200,\r\n\t0x284400, 0x508800, 0xa01000, 0x402000,\r\n\t0x2040004, 0x5080008, 0xa110011, 0x14220022,\r\n\t0x28440044, 0x50880088, 0xa0100010, 0x40200020,\r\n\t0x204000402, 0x508000805, 0xa1100110a, 0x1422002214,\r\n\t0x2844004428, 0x5088008850, 0xa0100010a0, 0x4020002040,\r\n\t0x20400040200, 0x50800080500, 0xa1100110a00, 0x142200221400,\r\n\t0x284400442800, 0x508800885000, 0xa0100010a000, 0x402000204000,\r\n\t0x2040004020000, 0x5080008050000, 0xa1100110a0000, 0x14220022140000,\r\n\t0x28440044280000, 0x50880088500000, 0xa0100010a00000, 0x40200020400000,\r\n\t0x204000402000000, 0x508000805000000, 0xa1100110a000000, 0x1422002214000000,\r\n\t0x2844004428000000, 0x5088008850000000, 0xa0100010a0000000, 0x4020002040000000,\r\n\t0x400040200000000, 0x800080500000000, 0x1100110a00000000, 0x2200221400000000,\r\n\t0x4400442800000000, 0x8800885000000000, 0x100010a000000000, 0x2000204000000000,\r\n\t0x4020000000000, 0x8050000000000, 0x110a0000000000, 0x22140000000000,\r\n\t0x44280000000000, 0x0088500000000000, 0x0010a00000000000, 0x20400000000000\r\n};\r\n\r\nclass Game\r\n{\r\npublic:\r\n\tBoard board;\r\n\tstatic uint32_t me;\r\n\r\n\tuint64_t getMoves() const noexcept\r\n\t{\r\n\t\treturn board.getMoves(me);\r\n\t}\r\n};\r\n\r\nuint32_t Game::me;\r\n\r\n//\r\n// Move your knight and block your opponent!\r\n//\r\n\r\nclass Agent\r\n{\r\npublic:\r\n\tvoid start();\r\n\tvoid read();\r\n\tvoid think();\r\n\tvoid write();\r\nprivate:\r\n\tGame game;\r\n\tuint32_t bestMove;\r\n};\r\n\r\n//#define DEBUG\r\n\r\nvoid Agent::start()\r\n{\r\n\tstring color; // current color of your pieces (\"w\" or \"b\")\r\n\tcin >> color; cin.ignore();\r\n#ifdef DEBUG\r\n\tcerr << color << endl;\r\n#endif\r\n\tGame::me = string(\"rgb\").find(color[0]);\r\n}\r\n\r\nvoid Agent::read()\r\n{\r\n    for (int i = 0; i < 3; i++)\r\n\t{\r\n        string player; // player color\r\n        int status; // 0: player has left the game, 1: player is alive\r\n        string last_move; // last move played (\"null\" if no move has been played)\r\n        cin >> player >> status >> last_move; cin.ignore();\r\n#ifdef DEBUG\r\n\t\tcerr << player <<  ' ' << status << ' ' <<  last_move << endl;\r\n#endif\r\n    }\r\n\r\n\tfor (int i = 0; i < 8; i++)\r\n\t{\r\n\t\tstring line; // horizontal row\r\n\t\tcin >> line; cin.ignore();\r\n#ifdef DEBUG\r\n\t\tcerr << line << endl;\r\n#endif\r\n\t\tfor (int j = 0; j < 8; j++)\r\n\t\t{\r\n\t\t\tuint32_t cell = 8 * (7 - i) + j;\r\n\t\t\tswitch (line[j])\r\n\t\t\t{\r\n\t\t\tcase '.':\r\n\t\t\t\tgame.board.free |= 1ULL << cell;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'r':\r\n\t\t\t\tgame.board.free &= ~(1ULL << cell);\r\n\t\t\t\tgame.board.knights[0] = cell;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'g':\r\n\t\t\t\tgame.board.free &= ~(1ULL << cell);\r\n\t\t\t\tgame.board.knights[1] = cell;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'b':\r\n\t\t\t\tgame.board.free &= ~(1ULL << cell);\r\n\t\t\t\tgame.board.knights[2] = cell;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tcase '#':\r\n\t\t\t\tgame.board.free &= ~(1ULL << cell);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tint validActionCount;\r\n\tcin >> validActionCount; cin.ignore();\r\n#ifdef DEBUG\r\n\tcerr << validActionCount << endl;\r\n#endif\r\n\tfor (int i = 0; i < validActionCount; i++)\r\n\t{\r\n\t\tstring move; // a legal move\r\n\t\tcin >> move; cin.ignore();\r\n#ifdef DEBUG\r\n\t\tcerr << move << endl;\r\n#endif\r\n\t}\r\n}\r\n\r\nvoid Agent::think()\r\n{\r\n\tuint64_t moves = game.getMoves();\r\n\r\n\tint bestScore = -1;\r\n\r\n\twhile(moves)\r\n\t{\r\n\t\tuint32_t move = poplsb(moves);\r\n\r\n\t\tuint64_t nextMoves = game.board.getKnightMoves(move);\r\n\t\tint score = 0;\r\n\t\twhile(nextMoves)\r\n\t\t{\r\n\t\t\tscore += popcount(game.board.getKnightMoves(poplsb(nextMoves)));\r\n\t\t}\r\n\r\n\t\tif (score > bestScore)\r\n\t\t{\r\n\t\t\tbestScore = score;\r\n\t\t\tbestMove = move;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvoid Agent::write()\r\n{\r\n\tcout << squares[bestMove] << endl;\r\n}\r\n\r\nint main()\r\n{\r\n\tAgent agent;\r\n\r\n\tagent.start();\r\n\t// game loop\r\n\twhile (1)\r\n\t{\r\n\t\tagent.read();\r\n\t\tagent.think();\r\n\t\tagent.write();\r\n\t}\r\n}",
          "testCases": [],
          "maxPlayers": 3,
          "minPlayers": 3,
          "statements": {
            "1": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n  <div class=\"statement-body\">\n    <!-- GOAL -->\n    <div class=\"statement-section statement-goal\">\n      <h1>\n        <span class=\"icon icon-goal\">&nbsp;</span>\n        <span>PrÃ©sentation du jeu</span>\n      </h1>\n      <div class=\"statement-goal-content\">\n        <p>Ce jeu est une adaptation du jeu de plateau <a href=\"https://github.com/udacity/cd0349-adversarial-search\">Knight Isolation</a> crÃ©Ã© par Udacity.</p>\n        <p>Le code source est accessible <a href=\"https://github.com/darkhorse64/CG_MadKnights\">ici</a>.</p>\n      </div>\n    </div>\n    <!-- RULES -->\n    <div class=\"statement-section statement-rules\">\n      <h1>\n          <span class=\"icon icon-rules\">&nbsp;</span>\n          <span>RÃ¨gles</span>\n      </h1>\n      <div class=\"statement-rules-content\">\n          <p>Le jeu se dÃ©roule sur un Ã©chiquier de 8x8 cases avec trois joueurs: Rouge, Vert , Bleu. Chaque joueur dispose d'une unique piÃ¨ce: un Cavalier (une des piÃ¨ces du jeu d'Echecs). Le but du jeu est d'\"isoler\" le Cavalier adverse.</p>\n          <p>Quand un Cavalier occupe une case, celle-ci devient indisponible pour le reste de la partie. Les cases libres accessibles directement par un Cavalier sont des \"libertÃ©s\". Un joueur dont la piÃ¨ce n'a plus de libertÃ©s pendant son tour quitte la partie. Le dernier joueur Ã  bouger gagne donc la partie.</p>          \n         <p>La position initiale des piÃ¨ces est alÃ©atoire mais les bords de l'Ã©chiquier sont exclus pour avoir des parties plus Ã©quilibrÃ©es.</p>\n          <strong>Comment jouer: </strong>\n          <p></p>\n          Rouge commence la partie, puis Vert, puis Bleu. Chaque joueur bouge sa piÃ¨ce Ã  son tour sur une case disponible, en respectant les rÃ¨gles de dÃ©placement d'un Cavalier aux Echecs.\n          <p>La partie est terminÃ©e lorsqu'il ne reste qu'un seul joueur.</p> \n          <strong>Fin d'un tour de jeu: </strong>\n          <ul>\n            <li>Le robot doit communiquer les coordonnÃ©es de la destination de son Cavalier. Les coordonnÃ©es sont exprimÃ©es en notation Ã©chiquÃ©enne, par exemple <const>e3</const>.</li>\n          </ul>\n          <strong>En cas de coup erronÃ© d'un joueur: </strong><br>\n          <ul>\n              <li>Si la position d'arrivÃ©e est en dehors du plateau,</li>\n              <li>Si la case d'arrivÃ©e n'est pas disponible,</li>\n              <li>Si la case d'arrivÃ©e n'est pas accessible par un mouvement de Cavalier,</li>\n          </ul>\n          <p>le joueur quitte la partie.</p>\n    </div>\n  </div>\n\n  <!-- EXPERT RULES -->\n  <div class=\"statement-section statement-expertrules\">\n    <h1>\n      <span class=\"icon icon-expertrules\">&nbsp;</span>\n      <span>RÃ¨gles pour les experts</span>\n    </h1>\n    <div class=\"statement-expert-rules-content\">\n      <li>Le jeu est dÃ©libÃ©rÃ©ment trÃ¨s simple pour que vous puissiez vous concentrer sur les algorithmes de recherche.</li>\n    </div>\n  </div>\n  \n  <!-- Victory conditions -->\n  <div class=\"statement-victory-conditions\">\n      <div class=\"icon victory\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Conditions de victoire</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Etre le dernier Ã  bouger.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- Lose conditions -->\n  <div class=\"statement-lose-conditions\">\n      <div class=\"icon lose\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Conditions de dÃ©faite</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Ne plus avoir de coups disponibles.</li>\n                  <li>Ne pas rÃ©pondre dans le temps imparti.</li>\n                  <li>Envoyer une sortie non conforme ou illÃ©gale.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- PROTOCOL -->\n  <div class=\"statement-section statement-protocol\">\n      <h1>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>EntrÃ©es/sorties du jeu</span>\n  </h1>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">EntrÃ©es initiales</div>\n      <div class=\"text\">\n          <span class=\"statement-lineno\">Une ligne: <var>color</var></span>: la couleur de votre piece (<const>r</const>: rouge, <const>g</const>:vert, <const>b</const>:bleu).\n      </div>\n    </div>\n\n    <div class=\"blk\">\n      <div class=\"title\">EntrÃ©es pour chaque tour de jeu</div>\n      <div class=\"text\">\n        <span class=\"statement-lineno\"><const>3</const> premiÃ¨res lignes</span>: <var>player</var>: la couleur du joueur (<const>r</const>, <const>g</const> or <const>b</const>), <var>status</var>: <const>0</const> (le joueur a perdu), <const>1</const> (le joueur est actif), <var>lastMove</var>: le dernier coup jouÃ© ou <const>null</const> si le joueur n'a pas encore jouÃ©.\n        <br>\n        <span class=\"statement-lineno\"><const>8</const> lignes suivantes</span>: <var>line</var>: une chaÃ®ne de caractÃ¨res reprÃ©sentant une ligne du plateau, de haut en bas. (<const>.</const>: disponible, <const>#</const>: indisponible, <const>r</const>: rouge, <const>g</const>: vert, <const>b</const>: bleu).\n        <br>\n         <span class=\"statement-lineno\">Ligne suivante</span>: <var>moveCount</var>: le nombre de coups lÃ©gaux pour ce tour.\n        </br>\n        <br>\n          <span class=\"statement-lineno\"><var>moveCount</var> lignes suivantes</span>: <var>move</var>: une chaÃ®ne de caractÃ¨res reprÃ©sentant un coup lÃ©gal.\n        </br>      \n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Sorties</div>\n      <div class=\"text\">\n         <span class=\"statement-lineno\">Une seule ligne</span> contenant les coordonnÃ©es d'arrivÃ©e du Cavalier, par exemple <const>e3</const>.<br>\n          <ul>\n              <li>Vous pouvez afficher un (court) message dans le cartouche de votre joueur en ajoutant un espace aprÃ¨s le coup suivi du texte de votre message, par exemple <const>e3 message</const>.</li>\n              <li>Vous pouvez jouer un coup alÃ©atoirement (choisi parmi les coups disponibles) en Ã©crivant <const>random</const> Ã  la place de votre coup.</li>\n          </ul>\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Contraintes</div>\n        Le temps de rÃ©ponse au premier tour est â¤\n        <const>1000</const> ms.\n        <br>Le temps de rÃ©ponse pour les tours suivants est â¤\n        <const>100</const> ms.\n      </div>\n  </div>\n</div>",
            "2": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n  <div class=\"statement-body\">\n    <!-- GOAL -->\n    <div class=\"statement-section statement-goal\">\n      <h1>\n        <span class=\"icon icon-goal\">&nbsp;</span>\n        <span>The Game</span>\n      </h1>\n      <div class=\"statement-goal-content\">\n        <p>This game is strongly inspired from <a href=\"https://github.com/udacity/cd0349-adversarial-search\">Knight Isolation</a>, a Udacity model game.</p>\n        <p>Click <a href=\"https://github.com/darkhorse64/CG_MadKnights\">here</a> for the referee.</p>\n      </div>\n    </div>\n    <!-- RULES -->\n    <div class=\"statement-section statement-rules\">\n      <h1>\n          <span class=\"icon icon-rules\">&nbsp;</span>\n          <span>Rules</span>\n      </h1>\n      <div class=\"statement-rules-content\">\n          <p>The game is played on a 8x8 chess board with three players: Red, Green, Blue. Each player has one single piece: a knight. The goal of the game is to \"isolate\" the opponent knights.</p>\n          <p>Whenever a knight occupies a square, that square becomes unavailable for the remainder of the game. An open square available for a knight to move into is called a \"liberty\". A player with no remaining liberties for their piece during their turn leaves the game. Therefore, the last player to move wins the game.</p>          \n         <p>The initial positions of the pieces are random but borders are excluded to ensure equal chances for all players.</p>\n\n          <strong>How to play: </strong>\n          <p></p>\n          <p>Red starts the game, then Green, then Blue. Each player alternate taking turns moving their knight to an available square. Knights can move to any open square that is 2-rows and 1-column or 2-columns and 1-row away from their current position on the board.</p>\n          <p>The game ends when only one player remains.</p>\n          <strong>Ending a turn: </strong>\n          <ul>\n            <li>A bot must output the destination coordinates of its piece. Coordinates are expressed in chess notation e.g. <const>e3</const></li>\n          </ul>\n          <strong>Wrong output: </strong><br>\n          <ul>\n              <li>If the destination square is outside of the board,</li>\n              <li>If the destination square is not available,</li>\n              <li>If the move is not a knight move,</li>\n          </ul>\n          <p>the player leaves the game.</p>\n    </div>\n  </div>\n\n  <!-- EXPERT RULES -->\n  <div class=\"statement-section statement-expertrules\">\n    <h1>\n      <span class=\"icon icon-expertrules\">&nbsp;</span>\n      <span>Expert Rules</span>\n    </h1>\n    <div class=\"statement-expert-rules-content\">\n      <li>The game has been deliberately designed to be simple. Focus on search algorithms !</li>\n    </div>\n  </div>\n  \n  <!-- Victory conditions -->\n  <div class=\"statement-victory-conditions\">\n      <div class=\"icon victory\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Victory Conditions</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>Be the last to move.</li>\n              </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- Lose conditions -->\n  <div class=\"statement-lose-conditions\">\n      <div class=\"icon lose\"></div>\n      <div class=\"blk\">\n          <div class=\"title\">Loss Conditions</div>\n          <div class=\"text\">\n              <ul style=\"padding-bottom: 0;\">\n                  <li>You cannot move your knight.</li>\n                  <li>You do not respond in time.</li>\n                  <li>You output an unrecognized command or an illegal move.</li>\n             </ul>\n          </div>\n      </div>\n  </div>\n\n  <!-- PROTOCOL -->\n  <div class=\"statement-section statement-protocol\">\n      <h1>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Game Input/Output</span>\n  </h1>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Initial input</div>\n      <div class=\"text\">\n          <span class=\"statement-lineno\">One line</span>: <var>color</var></span>: your piece color (<const>r</const>: red, <const>g</const>: green or <const>b</const>: blue).\n      </div>\n    </div>\n\n    <div class=\"blk\">\n      <div class=\"title\">Input for one game turn</div>\n      <div class=\"text\">\n        <span class=\"statement-lineno\">First <const>3</const> lines</span>: <var>player</var>: player color (<const>r</const>, <const>g</const> or <const>b</const>), <var>status</var>: <const>0</const> (player has lost), <const>1</const> (player is alive), <var>lastMove</var>: last move played or <const>null</const>if the player has not yet moved.\n        <br>\n        <span class=\"statement-lineno\">Next <const>8</const> lines</span>: <var>line</var>: a string of characters representing one horizontal row of the grid, top to bottom. (<const>.</const>: open, <const>#</const>: blocked, <const>r</const>: red, <const>g</const>: green, <const>b</const>: blue).\n        <br>\n         <span class=\"statement-lineno\">Next line: <var>moveCount</var></span>: the number of legal moves for this turn.\n        </br>\n        <br>\n          <span class=\"statement-lineno\">Next <var>moveCount</var> lines</span>: <var>move</var>: a string of characters representing a legal move.\n        </br>      \n          </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"text\">\n         <span class=\"statement-lineno\">A single line</span> containing the coordinates where you want to move to, e.g. <const>e3</const>.<br>\n          <ul>\n              <li>You can display a (short) comment in the viewer by adding a space after the move and writing its content, e.g. <const>e3 message</const>.</li>\n              <li>You can play a random move (chosen amongst all legal moves) by outputting <const>random</const> instead of specific coordinates.</li>\n          </ul>\n        <br>\n      </div>\n    </div>\n\n    <!-- Protocol block -->\n    <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n        Response time first turn is â¤\n        <const>1000</const> ms.\n        <br>Response time per turn is â¤\n        <const>100</const> ms.\n      </div>\n  </div>\n</div>"
          },
          "questionType": "multi",
          "stubGenerator": "read color:word(1)\n\ngameloop\nloop 3 read player:word(1) status:int lastMove:word(4) \nloop 8 read line:word(8)\nread moveCount:int\nloop moveCount read move:word(4)\nwrite random\n\nSTATEMENT\nMove your knight and block your opponent!\n\nINPUT\nplayerCount: the number of players (always 3)\ncolor: your piece color (\"r\", \"g\" or \"b\")\nplayer: player color\nstatus: 0: player has left the game, 1: player is alive\nlastMove: last move played (\"null\" if no move has been played)\nline: horizontal row\nmoveCount: number of legal moves\nmove: a legal move\n\nOUTPUT\ne.g. e3 (move piece to e3) or random",
          "welcomePopups": {},
          "aiCodeExtension": "cpp",
          "criteriaLanguageMap": {}
        }
      },
      "coverBinaryId": 112753301561451,
      "directoryPrefix": "community/2923506-1696630888211",
      "allowSourceDownload": false
    },
    "draft": false,
    "readyForModeration": true
  },
  "validatedFor": 71343331818,
  "avatar": 23496414257567,
  "commentCount": 27,
  "upVotes": 17,
  "downVotes": 0,
  "validateAction": {
    "actionId": 879818,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1699385749983,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}