{
  "id": 4529,
  "activeVersion": 26,
  "score": 1,
  "votableId": 11307901,
  "codingamerId": 270881,
  "views": 425,
  "commentableId": 11235298,
  "title": "Windmill problem",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "Maurice_Moss",
  "publicHandle": "4529c6cbb067baf823a8bed9b2c9b59efa45",
  "codingamerHandle": "de015f1a510d60cdcd0551896a34c709188072",
  "lastVersion": {
    "version": 26,
    "autocloseTime": 1569257715097,
    "data": {
      "title": "Windmill problem",
      "topics": [
        {
          "labelMap": {
            "2": "angle"
          }
        },
        {
          "labelMap": {
            "2": "rotation"
          }
        },
        {
          "id": 65,
          "handle": "memoization",
          "labelMap": {
            "1": "Mémoïsation",
            "2": "Memoization"
          },
          "pageTitle": "Memoization: exercises and theory",
          "puzzleCount": 7,
          "parentTopicId": 41,
          "contentDetailsId": 76
        },
        {
          "labelMap": {
            "2": "windmill"
          }
        }
      ],
      "solution": "import sys\nimport math\n\nclass Point:\n    def __init__(self, x, y, index):\n        self.x = x\n        self.y = y\n        self.n = 0\n        self.pivot = False\n        self.index = index\n\n    def __repr__(self):\n        return f\"Pts({self.x}, {self.y}) = {self.n}\"\n\n    def set_pivot(self):\n        for pts in listed_points:\n            pts.pivot = False\n        self.pivot = True\n        self.n += 1\n\nk = int(input())\nn = int(input())\npivot_number = int(input())\nlisted_points = []\nfor i in range(k):\n    x, y = [int(j) for j in input().split()]\n    listed_points.append(Point(x, y, i))\n\n \nalpha = 0                                # angle of the line \"l\"\n\nprev_pivot = listed_points[pivot_number] # require to save the previous pivot to not select it again after a change\n\npivot = listed_points[pivot_number]\npivot.set_pivot()\n\nmemo = []                                # stores (previous_pivot, pivot, rotation) which is required for memoization\nskip_memo = False                        # once we use the memo, we should not go thru it for the last remaining steps\n\nloop = 1\nwhile loop <= n:\n    closest_pts = None\n    shift_angle = 10\n    for pts in listed_points:\n        if not pts.pivot and pts != prev_pivot:\n            if pts.x == pivot.x:\n                alpha_2 = math.pi / 2\n            else:\n                alpha_2 = math.atan((pts.y - pivot.y) / (pts.x - pivot.x))\n            theta = alpha_2 - alpha\n\n            if theta > 0:              # to get direct angle\n                theta = math.pi - theta\n            else:\n                theta = -theta\n\n            if theta < shift_angle:        # we store the next pivot and also the angle of the future line \"l\"\n                shift_angle = theta\n                next_angle = alpha_2\n                closest_pts = pts\n    loop += 1\n\n    prev_pivot = pivot                     # swap pivots\n    pivot = closest_pts\n    pivot.set_pivot()\n\n    # memoization\n    if not (prev_pivot, pivot) in memo:\n        memo.append((prev_pivot, pivot))\n    elif not skip_memo:\n        prev_index = memo.index((prev_pivot, pivot))\n        loop_freq = loop - prev_index - 2    # -2 is because the loops starts at 1, and the index at 0\n        remaining_steps = n - loop\n        turn = remaining_steps // loop_freq\n        n = loop + (remaining_steps % loop_freq)\n        for pprivot, cpivot in memo[prev_index:]:  # increase each points by the number of loops skipped with memoization\n            cpivot.n += turn\n        skip_memo = True\n\n    alpha = next_angle\n\nprint(pivot.index)\nfor pts in listed_points:\n    print(pts.n)",
      "statement": "<<Windmill Process>> --------------------------------------------------------------------------------------------------------------------------\n\nGiven a finite plane {{S}} having <<at least>> three points. The windmill process can be define as follow:\n\n- Start with a line [[ℓ]] going through a point [[P]] ∈ {{S}}\n- Rotate [[ℓ]] <<clockwise>> around the pivot [[P]]  until the line hits another point [[Q]] of {{S}}.\n- The point [[Q]] now takes over as the new pivot.\n\nThis process continues until there is [[N]] changes of pivot.\n\n<<Objectives>> --------------------------------------------------------------------------------------------------------------------------\n\nGiven :\n - all points of {{S}}  (there will never be three collinear points in {{S}})\n - the starting pivot [[P]]\n - the number [[N]] of pivot changes\n\nYour objective is to make a simulation of this process. You should output :\n- The index of the pivot\n- For each point, the number of times it has been a pivot\n\n<<Definition of  {{S}}>> --------------------------------------------------------------------------------------------------------------------------\n\n{{S}} is a plane of 800 x 600\nPosition (X, Y) = (0, 0) is at the bottom left of {{S}}\nThe line [[ℓ]] will always start horizontally\nThe line [[ℓ]] will never starts aligned with another point\nAll point coordinates are integers.\n\n<<Example>> --------------------------------------------------------------------------------------------------------------------------\n\nLet's assume we have [[K]]={{3}} points (x, y) at:\n - #0: (200,200)\n - #1: (400,300)\n - #2: (400,100)\nand [[N]] == {{3}}\n\nThe starting point [[P]] is #1 so the line starts horizontally at 400, 300. \nThe line turns Clockwise by 90 degrees and hits the point 2. It becomes the new pivot (1st time).\nThe line continues to turn and hits the point 0 after around 120 degrees. It becomes the new pivot  (1st time).\nThe line turns again around 120 degrees and hits point 1 which becomes the pivot  (2nd time). \n\nAs a result after 3 changes of pivot the result is :\n\n1\n1\n2\n1\n\nThe first 1 is for the pivot index and the rest is the number of time each point was a pivot.\n\n<<Extra Information>> --------------------------------------------------------------------------------------------------------------------------\n\nThis puzzle has been <<inspired>> from a problem proposed during the international mathematical olympiad in 2011 (https://artofproblemsolving.com/wiki/index.php?title=2011_IMO_Problems/Problem_2) and there is a nice explanation of this problem in one video of 3Blue1Brown (https://www.youtube.com/watch?v=M64HUIJFTZM)",
      "testCases": [
        {
          "title": "Example",
          "isTest": true,
          "testIn": "3\n3\n1\n200 200\n400 300\n400 100",
          "testOut": "1\n1\n2\n1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Example",
          "isTest": false,
          "testIn": "3\n3\n0\n200 200\n400 300\n400 100",
          "testOut": "0\n2\n1\n1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Parallelogram",
          "isTest": true,
          "testIn": "4\n10\n0\n200 200\n400 190\n400 100\n200 90",
          "testOut": "2\n3\n3\n3\n2",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Parallelogram",
          "isTest": false,
          "testIn": "4\n11\n3\n200 200\n400 190\n400 100\n200 90",
          "testOut": "2\n3\n3\n3\n3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "10 Random Points",
          "isTest": true,
          "testIn": "10\n30\n5\n654 114\n25 281\n250 228\n142 104\n692 558\n89 432\n32 30\n95 223\n238 517\n616 27",
          "testOut": "7\n4\n2\n0\n5\n3\n3\n3\n4\n3\n4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "10 Random Points",
          "isTest": false,
          "testIn": "10\n37\n0\n654 114\n25 281\n250 228\n142 104\n692 558\n89 432\n32 30\n95 223\n238 517\n616 27",
          "testOut": "0\n4\n4\n3\n4\n3\n3\n3\n8\n3\n3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Large",
          "isTest": true,
          "testIn": "30\n1000\n2\n57 93\n86 369\n173 315\n257 217\n621 36\n595 162\n441 402\n740 521\n380 557\n455 514\n274 36\n28 372\n476 326\n389 433\n538 168\n573 181\n241 236\n24 180\n332 177\n139 522\n522 368\n526 573\n186 456\n424 537\n781 372\n607 362\n370 456\n165 409\n732 472\n670 543",
          "testOut": "20\n27\n28\n28\n41\n28\n28\n14\n27\n28\n42\n27\n28\n65\n70\n28\n28\n40\n27\n27\n28\n67\n27\n42\n28\n27\n27\n42\n28\n27\n27",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Large",
          "isTest": false,
          "testIn": "30\n1000\n5\n243 557\n133 378\n618 485\n640 594\n67 13\n480 265\n564 239\n196 481\n553 562\n487 406\n654 154\n237 155\n535 399\n759 15\n687 65\n163 43\n308 31\n275 484\n609 396\n731 437\n404 590\n455 137\n374 99\n36 139\n506 222\n264 446\n797 308\n431 519\n395 587\n359 546",
          "testOut": "9\n25\n26\n25\n25\n25\n114\n25\n26\n25\n112\n37\n38\n49\n25\n25\n25\n25\n25\n25\n25\n25\n25\n25\n25\n25\n26\n24\n49\n25\n25",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Infinite Loop",
          "isTest": true,
          "testIn": "30\n1234\n15\n241 310\n105 405\n490 158\n92 68\n20 411\n562 296\n783 60\n227 532\n549 368\n283 176\n108 268\n219 26\n656 266\n278 198\n168 317\n296 381\n88 345\n687 397\n518 254\n182 253\n484 286\n91 560\n307 7\n298 586\n721 319\n783 520\n199 423\n433 295\n441 462\n165 238",
          "testOut": "13\n0\n35\n54\n35\n36\n36\n36\n35\n36\n35\n35\n35\n36\n36\n86\n105\n35\n35\n36\n70\n90\n35\n35\n35\n36\n35\n35\n0\n35\n52",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Infinite Loop",
          "isTest": false,
          "testIn": "30\n1230\n24\n241 310\n105 405\n490 158\n92 68\n20 411\n562 296\n783 60\n227 532\n549 368\n283 176\n108 268\n219 26\n656 266\n278 198\n168 317\n296 381\n88 345\n687 397\n518 254\n182 253\n484 286\n91 560\n307 7\n298 586\n721 319\n783 520\n199 423\n433 295\n441 462\n165 238",
          "testOut": "29\n160\n33\n33\n33\n33\n33\n33\n33\n66\n33\n32\n33\n33\n33\n32\n33\n33\n33\n33\n48\n49\n33\n33\n33\n33\n33\n33\n85\n33\n33",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Smarter approach required",
          "isTest": true,
          "testIn": "30\n123456789\n15\n241 310\n105 405\n490 158\n92 68\n20 411\n562 296\n783 60\n227 532\n549 368\n283 176\n108 268\n219 26\n656 266\n278 198\n168 317\n296 381\n88 345\n687 397\n518 254\n182 253\n484 286\n91 560\n307 7\n298 586\n721 319\n783 520\n199 423\n433 295\n441 462\n165 238",
          "testOut": "5\n0\n3527337\n5291005\n3527337\n3527337\n3527338\n3527337\n3527337\n3527338\n3527337\n3527336\n3527337\n3527337\n3527336\n8818340\n10582011\n3527336\n3527337\n3527337\n7054672\n8818345\n3527337\n3527337\n3527337\n3527337\n3527337\n3527337\n0\n3527337\n5291004",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Smarter approach required",
          "isTest": false,
          "testIn": "30\n234567891\n15\n241 310\n105 405\n490 158\n92 68\n20 411\n562 296\n783 60\n227 532\n549 368\n283 176\n108 268\n219 26\n656 266\n278 198\n168 317\n296 381\n88 345\n687 397\n518 254\n182 253\n484 286\n91 560\n307 7\n298 586\n721 319\n783 520\n199 423\n433 295\n441 462\n165 238",
          "testOut": "15\n0\n6701940\n10052910\n6701940\n6701940\n6701940\n6701940\n6701940\n6701940\n6701940\n6701939\n6701940\n6701940\n6701940\n16754849\n20105818\n6701939\n6701939\n6701940\n13403880\n16754850\n6701940\n6701940\n6701940\n6701940\n6701939\n6701940\n0\n6701939\n10052910",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Convex Hull",
          "isTest": true,
          "testIn": "30\n1000\n0\n137 582\n782 64\n261 120\n507 460\n483 388\n214 96\n499 29\n399 443\n622 2\n712 456\n272 234\n605 104\n325 31\n22 26\n665 554\n9 390\n702 221\n432 29\n540 227\n782 448\n507 566\n238 353\n236 224\n779 470\n296 22\n426 569\n657 102\n190 303\n123 340\n738 512",
          "testOut": "0\n101\n100\n0\n0\n0\n0\n0\n0\n100\n0\n0\n0\n0\n100\n100\n100\n0\n0\n0\n100\n100\n0\n0\n100\n0\n0\n0\n0\n0\n100",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Convex Hull",
          "isTest": false,
          "testIn": "30\n990\n8\n137 582\n782 64\n261 120\n507 460\n483 388\n214 96\n499 29\n399 443\n622 2\n712 456\n272 234\n605 104\n325 31\n22 26\n665 554\n9 390\n702 221\n432 29\n540 227\n782 448\n507 566\n238 353\n236 224\n779 470\n296 22\n426 569\n657 102\n190 303\n123 340\n738 512",
          "testOut": "8\n99\n99\n0\n0\n0\n0\n0\n0\n100\n0\n0\n0\n0\n99\n99\n99\n0\n0\n0\n99\n99\n0\n0\n99\n0\n0\n0\n0\n0\n99",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "2 < [[K]] ≤ 30\n0 < [[N]] ≤ 10^12\n0 ≤ [[X]] ≤ 800\n0 ≤ [[Y]] ≤ 600\n\nThe line [[ℓ]] will never starts aligned with another point",
      "coverBinaryId": 33038285050508,
      "stubGenerator": "read K:int\nread N:int\nread P:int\nloop K read x:int y:int\nwrite K+1 lines of answer",
      "inputDescription": "<<Line 1:>> Number of points on {{S}}, called [[K]]\n<<Line 2:>> Number of pivot changes, called [[N]]\n<<Line 3:>> Index [[P]] of the starting pivot (<<0-indexed>>)\n<<Next [[K]] lines:>> Two integers for the position of each point [[X]], [[Y]]",
      "solutionLanguage": "Python3",
      "outputDescription": "<<Line 1:>> The index of the current pivot\n<<[[K]] lines:>> One integer for the number of times each point was a pivot"
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\"><strong>Windmill Process</strong> --------------------------------------------------------------------------------------------------------------------------<br><br>Given a finite plane <const>S</const> having <strong>at least</strong> three points. The windmill process can be define as follow:<br><br>- Start with a line <var>ℓ</var> going through a point <var>P</var> &isin; <const>S</const><br>- Rotate <var>ℓ</var> <strong>clockwise</strong> around the pivot <var>P</var>  until the line hits another point <var>Q</var> of <const>S</const>.<br>- The point <var>Q</var> now takes over as the new pivot.<br><br>This process continues until there is <var>N</var> changes of pivot.<br><br><strong>Objectives</strong> --------------------------------------------------------------------------------------------------------------------------<br><br>Given :<br> - all points of <const>S</const>  (there will never be three collinear points in <const>S</const>)<br> - the starting pivot <var>P</var><br> - the number <var>N</var> of pivot changes<br><br>Your objective is to make a simulation of this process. You should output :<br>- The index of the pivot<br>- For each point, the number of times it has been a pivot<br><br><strong>Definition of  <const>S</const></strong> --------------------------------------------------------------------------------------------------------------------------<br><br><const>S</const> is a plane of 800 x 600<br>Position (X, Y) = (0, 0) is at the bottom left of <const>S</const><br>The line <var>ℓ</var> will always start horizontally<br>The line <var>ℓ</var> will never starts aligned with another point<br>All point coordinates are integers.<br><br><strong>Example</strong> --------------------------------------------------------------------------------------------------------------------------<br><br>Let's assume we have <var>K</var>=<const>3</const> points (x, y) at:<br> - #0: (200,200)<br> - #1: (400,300)<br> - #2: (400,100)<br>and <var>N</var> == <const>3</const><br><br>The starting point <var>P</var> is #1 so the line starts horizontally at 400, 300. <br>The line turns Clockwise by 90 degrees and hits the point 2. It becomes the new pivot (1st time).<br>The line continues to turn and hits the point 0 after around 120 degrees. It becomes the new pivot  (1st time).<br>The line turns again around 120 degrees and hits point 1 which becomes the pivot  (2nd time). <br><br>As a result after 3 changes of pivot the result is :<br><br>1<br>1<br>2<br>1<br><br>The first 1 is for the pivot index and the rest is the number of time each point was a pivot.<br><br><strong>Extra Information</strong> --------------------------------------------------------------------------------------------------------------------------<br><br>This puzzle has been <strong>inspired</strong> from a problem proposed during the international mathematical olympiad in 2011 (https://artofproblemsolving.com/wiki/index.php?title=2011_IMO_Problems/Problem_2) and there is a nice explanation of this problem in one video of 3Blue1Brown (https://www.youtube.com/watch?v=M64HUIJFTZM)</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> Number of points on <const>S</const>, called <var>K</var><br><strong>Line 2:</strong> Number of pivot changes, called <var>N</var><br><strong>Line 3:</strong> Index <var>P</var> of the starting pivot (<strong>0-indexed</strong>)<br><strong>Next <var>K</var> lines:</strong> Two integers for the position of each point <var>X</var>, <var>Y</var></div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> The index of the current pivot<br><strong><var>K</var> lines:</strong> One integer for the number of times each point was a pivot</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">2 &lt; <var>K</var> &le; 30<br>0 &lt; <var>N</var> &le; 10^12<br>0 &le; <var>X</var> &le; 800<br>0 &le; <var>Y</var> &le; 600<br><br>The line <var>ℓ</var> will never starts aligned with another point</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">3\n3\n1\n200 200\n400 300\n400 100</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">1\n1\n2\n1</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 201975323089,
  "avatar": 30069480173944,
  "commentCount": 28,
  "upVotes": 4,
  "downVotes": 3,
  "validateAction": {
    "actionId": 375607,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}