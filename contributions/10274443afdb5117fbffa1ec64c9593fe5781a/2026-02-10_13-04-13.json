{
  "id": 102744,
  "activeVersion": 43,
  "score": 9,
  "votableId": 34681271,
  "codingamerId": 5864862,
  "views": 302,
  "commentableId": 34529151,
  "title": "The G Note",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "pepper_",
  "publicHandle": "10274443afdb5117fbffa1ec64c9593fe5781a",
  "codingamerHandle": "634fa7fef0cfde34c82d8d74ab307f9c2684685",
  "lastVersion": {
    "version": 43,
    "autocloseTime": 1728386002877,
    "freezeTime": 1726398802877,
    "data": {
      "title": "The G Note",
      "topics": [
        {
          "id": 65,
          "handle": "memoization",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Mémoïsation",
            "2": "Memoization"
          },
          "pageTitle": "Memoization: exercises and theory",
          "puzzleCount": 17,
          "parentTopicId": 41,
          "contentDetailsId": 76
        },
        {
          "id": 71,
          "handle": "recursion",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Récursion",
            "2": "Recursion"
          },
          "pageTitle": "Recursion: exercises and theory",
          "puzzleCount": 42,
          "parentTopicId": 41,
          "contentDetailsId": 77
        },
        {
          "id": 47,
          "handle": "arrays",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Tableaux",
            "2": "Arrays"
          },
          "pageTitle": "Arrays: exercises and theory",
          "puzzleCount": 40,
          "parentTopicId": 40,
          "contentDetailsId": 78
        },
        {
          "id": 148,
          "handle": "polynomials",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Polynomials",
            "2": "Polynomials"
          },
          "puzzleCount": 3,
          "parentTopicId": 93
        },
        {
          "id": 94,
          "handle": "mathematics",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Mathematics",
            "2": "Mathematics"
          },
          "puzzleCount": 64,
          "parentTopicId": 93
        }
      ],
      "solution": "# The G Note - Episode 1\nfrom fractions import Fraction as R\nfrom math import comb\n\nm = {}\ndef bernoulli(n):\n    if n in m: return m[n]\n    if n == 0: b = R(1, 1)\n    elif n == 1: b = R(-1, 2)\n    elif n % 2 == 1: b = R(0, 1)\n    else: b = R(-sum(comb(n+1, k) * bernoulli(k) for k in range(n)), n+1)\n    m[n] = b\n    return b\n\ndef Bernoulli(n): return [comb(n, k) * bernoulli(n-k) for k in range(n+1)]\ndef poly_scale(a, r): return [r * m for m in a]\ndef Faulhaber(p): return [R(0, 1)] + poly_scale(Bernoulli(p+1)[1:], R(1, p+1))\ndef horner(a, x): return 0 if not a else a[0] + x * horner(a[1:], x)\ndef faulhaber(p, n): return horner(Faulhaber(p), n+1)\ndef quick_S(n): return faulhaber(n, n**n)\nprint(quick_S(int(input())) % 2**53)",
      "statement": "This puzzle is related to Ada Lovelace's G Note.\n\nCompute [[S_N]] = (0^[[N]] + 1^[[N]] + 2^[[N]] + ... + ([[N]]^[[N]])^[[N]]) mod [[M]] with [[M]] = 2^53.\n\n<<Examples>>\n\nS_2 = (0^2 + 1^2 + 2^2 + 3^2 + 4^2) mod 2^53 = 30\nS_4 = (0^4 + 1^4 + 2^4 + ... + 256^4) mod 2^53 = 222055401600\nS_5 = 155369480450947265625 mod 2^53 = 4300505919894617\n\n<<Note>>\n\nFor [[N]]=513, (513^513)^513 is an integer on the order of 1E713210.\nIt might be worth considering avoiding actually computing it.",
      "testCases": [
        {
          "title": "V",
          "isTest": true,
          "testIn": "5",
          "testOut": "4300505919894617",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Valid 1",
          "isTest": false,
          "testIn": "3",
          "testOut": "142884",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "IX",
          "isTest": true,
          "testIn": "9",
          "testOut": "278875348016921",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Valid 2",
          "isTest": false,
          "testIn": "7",
          "testOut": "1720381744784560",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "XVII",
          "isTest": true,
          "testIn": "17",
          "testOut": "4590197360490065",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Valid 3",
          "isTest": false,
          "testIn": "15",
          "testOut": "1741980720507072",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "XXXIII",
          "isTest": true,
          "testIn": "33",
          "testOut": "101102831249697",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Valid 4",
          "isTest": false,
          "testIn": "31",
          "testOut": "2223436289069824",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "LXV",
          "isTest": true,
          "testIn": "65",
          "testOut": "3656750326424641",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Valid 5",
          "isTest": false,
          "testIn": "63",
          "testOut": "7381304645569536",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "CXXIX",
          "isTest": true,
          "testIn": "129",
          "testOut": "8918553443471489",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Valid 6",
          "isTest": false,
          "testIn": "127",
          "testOut": "4671247773282304",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "CCLVII",
          "isTest": true,
          "testIn": "257",
          "testOut": "1803640633442561",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Valid 7",
          "isTest": false,
          "testIn": "255",
          "testOut": "7570571115937792",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "DXIII",
          "isTest": true,
          "testIn": "513",
          "testOut": "6558717756113409",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Valid 8",
          "isTest": false,
          "testIn": "511",
          "testOut": "5221963298701312",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "0 ≤ [[N]] ≤ 513",
      "coverBinaryId": 127677483899302,
      "stubGenerator": "read N:int\nwrite answer",
      "inputDescription": "An integer [[N]].",
      "solutionLanguage": "Python3",
      "outputDescription": "The integer [[S_N]] (mod 2^53)."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">This puzzle is related to Ada Lovelace's G Note.<br><br>Compute <var>S_N</var> = (0^<var>N</var> + 1^<var>N</var> + 2^<var>N</var> + ... + (<var>N</var>^<var>N</var>)^<var>N</var>) mod <var>M</var> with <var>M</var> = 2^53.<br><br><strong>Examples</strong><br><br>S_2 = (0^2 + 1^2 + 2^2 + 3^2 + 4^2) mod 2^53 = 30<br>S_4 = (0^4 + 1^4 + 2^4 + ... + 256^4) mod 2^53 = 222055401600<br>S_5 = 155369480450947265625 mod 2^53 = 4300505919894617<br><br><strong>Note</strong><br><br>For <var>N</var>=513, (513^513)^513 is an integer on the order of 1E713210.<br>It might be worth considering avoiding actually computing it.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\">An integer <var>N</var>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">The integer <var>S_N</var> (mod 2^53).</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">0 &le; <var>N</var> &le; 513</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">5</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">4300505919894617</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 42694324763,
  "avatar": 116301729350428,
  "commentCount": 25,
  "upVotes": 13,
  "downVotes": 4,
  "validateAction": {
    "actionId": 1010531,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1728034327231,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}