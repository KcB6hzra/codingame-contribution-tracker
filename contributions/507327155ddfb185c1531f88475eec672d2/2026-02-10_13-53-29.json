{
  "id": 507,
  "activeVersion": 20,
  "score": 1,
  "votableId": 4002445,
  "codingamerId": 522088,
  "views": 169,
  "commentableId": 3947100,
  "title": "Hit the road",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "mouton5000",
  "publicHandle": "507327155ddfb185c1531f88475eec672d2",
  "codingamerHandle": "53b30107f3d9f68d3d1a95e98ce51c7e880225",
  "lastVersion": {
    "version": 20,
    "data": {
      "title": "Hit the road",
      "topics": [],
      "solution": "import sys\nimport math\n\nfrom collections import defaultdict\n\nsucc = defaultdict(list) # Successors of each node\ndurations = {} # Duration da of each arc a\nwindows = {} # Time window bi,ei of each node i\n\n\nn, m, ntw = [int(i) for i in input().split()]\ns, t = [int(i) for i in input().split()]\n\nfor i in range(ntw):\n    v, b, e = [int(j) for j in input().split()]\n    windows[v] = (b,e)\nfor i in range(m):\n    u, v, d = [int(j) for j in input().split()]\n    succ[u].append(v)\n    durations[(u,v)] = d\n\n\nvalidReach = defaultdict(list) # j in validReach[i] iff we can reach node i at time j and bi <= j <= ei\nvalidReach[s].append(0) # At first we can go from s to s at time 0\n\nif t in windows:\n    maxEnd = windows[t][1] # after that time, impossible to reach t in time\nelse:\n    maxEnd = float('inf')\n\nwhile True:\n    \n    # If we can reach t between bt and et, we are done\n    if len(validReach[t]) != 0:\n        print('true')\n        break\n    \n    # Check if we found something new.\n    nothingNew = True\n\n    # validReach[k][l] is True iff validReach[i][j] is True for some predecessor i of k and if bk + l = bi + j + d(i,k)\n    \n    for i in range(n):\n        for j in validReach[i]:\n            for k in succ[i]:    \n                #try:\n                #    bk,ek = windows[k]\n                #except KeyError:\n                #    bk,ek = 0, math.inf\n                # Do not know why but previous lines raise a KeyError...j\n                if k in windows:\n                    bk,ek = windows[k]\n                else:\n                    bk,ek = 0, maxEnd\n                time = j + durations[(i,k)]\n                \n                # Can we reach k from i?\n                if bk <= time <= ek and not time in validReach[k]:\n                    validReach[k].append(time)\n                    nothingNew = False # if so, and if we could not reach k before, there is somethink new\n\n    # We will never get to t\n    if nothingNew:\n        print('false')\n        break",
      "statement": "A driver is on a road network with [[n]] junctions and [[m]] roads with two specific positions [[s]] and [[t]]. \nEach junction of the network can be associated with a time window [[[b,e]]] : the driver can go through that intersection only between times [[b]] and [[e]]. Every other junction is free : the driver can cross it at any time. Each road is associated with a duration: the time a car needs to drive through that road. <<The roads are directed : the car cannot go through a road backwards.>>\n\nYour goal is to decide if a driver can go from [[s]] to [[t]] such that, for each junction associated with a time window [[[b,e]]], the moment [[r]] when the driver reaches that junction belongs to its window : b <= r <= e. If the junction has no time window, the driver can reach it at any time.\n\nThe driver starts in [[s]] at time {{0}}.\n<<The driver cannot wait. Once he reaches a junction, he must go though an outgoing road of that junction.>>\nThe time windows are always closed intervals.\n\nHere is an example where <, >, ^ and v represent roads (and the directions).\n\n`s > u > w > t` \n`v   ^   v   ^` \n`x > y > z > r`\n\nThe time window on x, u and y is {{[1,2]}}.\nThe time window on w, z and r is {{[3,5]}}.\nThe time window on t is {{[1,7]}}.\nThe duration on each arc is {{1}}.\n\n\nIt is possible to go from s to t with that path.\n\n`s           t` \n`v           ^` \n`x > y > z > r`\n\nThe driver would be in x at time 1, y at time 2, z at time 3, r at time 4 and t at time 5. Each time fits within the specified time window.\n\nIn this example with the same time windows and same durations :\n\n`s > u > w > t` \n`v   ^   v   ^` \n`x > y   z > r`\n\nYou cannot go from s to t, because you must go through w in order to reach t and  it is not possible to be in w between time 3 and 5 and in u between time 1 and 2:\n- either the driver goes from s to u and arrives at w at time 2;\n- or it uses the path s x y u w and arrives at u at time 3.",
      "testCases": [
        {
          "title": "Example 1",
          "isTest": true,
          "testIn": "8 10 8\n0 3\n0 0 0\n1 1 2\n2 3 5\n3 1 7\n4 1 2\n5 1 2\n6 3 5\n7 3 5\n0 1 1\n0 4 1\n1 2 1\n2 3 1\n2 6 1\n4 5 1\n5 1 1\n5 6 1\n6 7 1\n7 3 1",
          "testOut": "true",
          "isValidator": false
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "7 8 7\n0 4\n0 0 10\n5 0 10\n1 0 10\n6 0 10\n2 10 20\n3 20 30\n4 30 40\n0 2 4\n0 5 3\n1 6 2\n2 3 10\n3 4 1\n4 0 1\n5 1 1\n6 0 3",
          "testOut": "false",
          "isValidator": true
        },
        {
          "title": "Example 2",
          "isTest": true,
          "testIn": "8 9 8\n0 3\n0 0 0\n1 1 2\n2 3 5\n3 1 7\n4 1 2\n5 1 2\n6 3 5\n7 3 5\n0 1 1\n0 4 1\n1 2 1\n2 3 1\n2 6 1\n4 5 1\n5 1 1\n6 7 1\n7 3 1",
          "testOut": "false",
          "isValidator": false
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "9 13 9\n6 4\n0 1 2\n1 0 2\n2 3 6\n3 2 3\n4 7 10\n5 2 6\n6 0 0\n7 5 9\n8 3 8\n0 2 2\n0 8 3\n1 2 1\n1 5 3\n2 3 3\n2 5 2\n3 0 1\n5 4 1\n5 7 2\n6 1 1\n6 3 2\n7 8 1\n8 4 2",
          "testOut": "true",
          "isValidator": true
        },
        {
          "title": "Half turn",
          "isTest": true,
          "testIn": "6 9 6\n0 5\n0 0 0\n1 1 10\n2 6 9\n3 6 11\n4 7 10\n5 10 14\n0 1 1\n0 2 3\n1 2 1\n1 3 5\n2 4 1\n3 1 1\n3 5 3\n4 3 1\n4 5 6",
          "testOut": "true",
          "isValidator": false
        },
        {
          "title": "Half turn",
          "isTest": false,
          "testIn": "7 14 7\n0 5\n0 0 0\n1 0 4\n2 10 13\n3 4 20\n4 11 13\n5 25 25\n6 4 18\n0 1 1\n0 2 2\n1 3 2\n1 6 3\n2 4 2\n2 6 6\n3 5 5\n3 6 3\n4 3 12\n4 6 4\n6 1 1\n6 2 3\n6 3 2\n6 4 4",
          "testOut": "true",
          "isValidator": true
        },
        {
          "title": "No time windows everywhere",
          "isTest": true,
          "testIn": "6 7 4\n0 5\n0 0 9\n2 6 9\n3 3 7\n5 13 16\n0 1 1\n1 2 2\n1 4 2\n2 5 7\n3 0 1\n4 3 2\n5 4 2",
          "testOut": "true",
          "isValidator": false
        },
        {
          "title": "No time windows everywhere",
          "isTest": false,
          "testIn": "6 7 3\n0 3\n0 0 0\n3 16 18\n5 6 10\n0 1 1\n1 4 3\n2 1 2\n3 0 7\n4 3 3\n4 5 4\n5 2 1",
          "testOut": "true",
          "isValidator": true
        },
        {
          "title": "Unreachable",
          "isTest": true,
          "testIn": "2 0 0\n0 1",
          "testOut": "false",
          "isValidator": false
        },
        {
          "title": "Unreachable",
          "isTest": false,
          "testIn": "3 1 1\n0 2\n0 0 0\n0 1 1",
          "testOut": "false",
          "isValidator": true
        },
        {
          "title": "Example 3",
          "isTest": true,
          "testIn": "6 20 6\n1 2\n1 0 0\n2 8 11\n3 8 16\n4 4 11\n5 4 9\n0 5 13\n1 2 2\n1 3 8\n1 5 5\n2 1 10\n2 3 6\n2 5 3\n2 0 6\n3 1 2\n3 4 3\n3 0 6\n4 3 4\n4 5 6\n4 0 2\n5 2 4\n5 3 5\n5 4 5\n5 0 4\n0 2 2\n0 4 10\n0 5 4",
          "testOut": "true",
          "isValidator": false
        },
        {
          "title": "Example 3",
          "isTest": false,
          "testIn": "10 20 10\n1 9\n1 0 0\n2 8 17\n3 10 13\n4 6 15\n5 2 8\n6 5 13\n7 4 10\n8 7 12\n9 4 14\n0 8 16\n1 3 2\n1 5 6\n2 5 8\n3 5 9\n3 8 8\n3 0 2\n4 1 8\n4 5 7\n4 9 7\n5 3 8\n5 6 6\n5 7 3\n5 8 8\n5 0 3\n6 2 9\n7 9 3\n7 0 5\n8 1 8\n9 6 10\n0 7 7",
          "testOut": "true",
          "isValidator": true
        },
        {
          "title": "Example 4",
          "isTest": true,
          "testIn": "6 15 3\n1 2\n3 6 12\n2 9 9\n0 3 8\n1 3 5\n1 4 1\n1 5 8\n2 3 2\n2 5 4\n3 2 1\n3 5 4\n4 2 3\n4 3 5\n4 5 6\n5 1 7\n5 2 4\n5 0 3\n0 2 5\n0 3 5",
          "testOut": "false",
          "isValidator": false
        },
        {
          "title": "Example 4",
          "isTest": false,
          "testIn": "6 16 3\n0 5\n1 4 5\n5 4 9\n0 0 0\n1 2 1\n1 3 2\n1 5 6\n1 0 8\n2 1 4\n2 4 6\n2 5 9\n2 0 3\n3 2 5\n3 5 4\n3 0 4\n4 1 9\n5 1 2\n5 2 10\n5 4 9\n0 5 3",
          "testOut": "false",
          "isValidator": true
        }
      ],
      "difficulty": "hard",
      "constraints": "1 <= [[n]] <= 10\n1 <= [[m]] <= 20\n0 <= [[e]] - [[b]] < 10\n0 <= [[e]], [[b]] <= 50\n0 <= [[d]] <= 25",
      "stubGenerator": "read n:int m:int ntw:int\nread s:int t:int\nloop ntw read v:int b:int e:int\nloop m read u:int v:int d:int\nwrite true",
      "inputDescription": "<<Line 1 :>> Three integers [[n]], [[m]] and [[ntw]] the number of junctions and roads in the network and the number of junctions with a time window. The junctions are numbered from 0 to [[n-1]].\n<<Line 2 :>> Two integers [[s]] and [[t]], the origin  and the destination of the driver\n<<[[ntw]] next lines :>> three integers [[v]], [[b]] and [[e]], a junction v, the beginning and the end of the time window of that junction.\n<<[[m]] next lines :>> three integers [[u]], [[v]] and [[d]], the origin, the destination and the duration of each arc.",
      "solutionLanguage": "Python3",
      "outputDescription": "<<Line 1 :>> print {{true}} if there is a path from [[s]] to [[t]] satisfying the time windows constraints. Otherwise, print {{false}}."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">A driver is on a road network with <var>n</var> junctions and <var>m</var> roads with two specific positions <var>s</var> and <var>t</var>. <br>Each junction of the network can be associated with a time window <var>[b,e]</var> : the driver can go through that intersection only between times <var>b</var> and <var>e</var>. Every other junction is free : the driver can cross it at any time. Each road is associated with a duration: the time a car needs to drive through that road. <strong>The roads are directed : the car cannot go through a road backwards.</strong><br><br>Your goal is to decide if a driver can go from <var>s</var> to <var>t</var> such that, for each junction associated with a time window <var>[b,e]</var>, the moment <var>r</var> when the driver reaches that junction belongs to its window : b &lt;= r &lt;= e. If the junction has no time window, the driver can reach it at any time.<br><br>The driver starts in <var>s</var> at time <const>0</const>.<br><strong>The driver cannot wait. Once he reaches a junction, he must go though an outgoing road of that junction.</strong><br>The time windows are always closed intervals.<br><br>Here is an example where &lt;, &gt;, ^ and v represent roads (and the directions).<br><br><pre style=\"font-family: monospace\">s &gt; u &gt; w &gt; t</pre> <br><pre style=\"font-family: monospace\">v   ^   v   ^</pre> <br><pre style=\"font-family: monospace\">x &gt; y &gt; z &gt; r</pre><br><br>The time window on x, u and y is <const>[1,2]</const>.<br>The time window on w, z and r is <const>[3,5]</const>.<br>The time window on t is <const>[1,7]</const>.<br>The duration on each arc is <const>1</const>.<br><br><br>It is possible to go from s to t with that path.<br><br><pre style=\"font-family: monospace\">s           t</pre> <br><pre style=\"font-family: monospace\">v           ^</pre> <br><pre style=\"font-family: monospace\">x &gt; y &gt; z &gt; r</pre><br><br>The driver would be in x at time 1, y at time 2, z at time 3, r at time 4 and t at time 5. Each time fits within the specified time window.<br><br>In this example with the same time windows and same durations :<br><br><pre style=\"font-family: monospace\">s &gt; u &gt; w &gt; t</pre> <br><pre style=\"font-family: monospace\">v   ^   v   ^</pre> <br><pre style=\"font-family: monospace\">x &gt; y   z &gt; r</pre><br><br>You cannot go from s to t, because you must go through w in order to reach t and  it is not possible to be in w between time 3 and 5 and in u between time 1 and 2:<br>- either the driver goes from s to u and arrives at w at time 2;<br>- or it uses the path s x y u w and arrives at u at time 3.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1 :</strong> Three integers <var>n</var>, <var>m</var> and <var>ntw</var> the number of junctions and roads in the network and the number of junctions with a time window. The junctions are numbered from 0 to <var>n-1</var>.<br><strong>Line 2 :</strong> Two integers <var>s</var> and <var>t</var>, the origin  and the destination of the driver<br><strong><var>ntw</var> next lines :</strong> three integers <var>v</var>, <var>b</var> and <var>e</var>, a junction v, the beginning and the end of the time window of that junction.<br><strong><var>m</var> next lines :</strong> three integers <var>u</var>, <var>v</var> and <var>d</var>, the origin, the destination and the duration of each arc.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1 :</strong> print <const>true</const> if there is a path from <var>s</var> to <var>t</var> satisfying the time windows constraints. Otherwise, print <const>false</const>.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">1 &lt;= <var>n</var> &lt;= 10<br>1 &lt;= <var>m</var> &lt;= 20<br>0 &lt;= <var>e</var> - <var>b</var> &lt; 10<br>0 &lt;= <var>e</var>, <var>b</var> &lt;= 50<br>0 &lt;= <var>d</var> &lt;= 25</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">8 10 8\n0 3\n0 0 0\n1 1 2\n2 3 5\n3 1 7\n4 1 2\n5 1 2\n6 3 5\n7 3 5\n0 1 1\n0 4 1\n1 2 1\n2 3 1\n2 6 1\n4 5 1\n5 1 1\n5 6 1\n6 7 1\n7 3 1</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">true</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 286651638213,
  "avatar": 8063098456757,
  "commentCount": 8,
  "upVotes": 2,
  "downVotes": 1,
  "validateAction": {
    "actionId": 71892,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}