{
  "id": 11103,
  "activeVersion": 12,
  "score": 44,
  "votableId": 22504558,
  "codingamerId": 484004,
  "views": 1462,
  "commentableId": 22392785,
  "title": "Legends of Code & Magic: Constructed",
  "status": "ACCEPTED",
  "type": "PUZZLE_MULTI",
  "nickname": "aCat",
  "publicHandle": "11103db118e4111aaadd2a9eb64f2a21d1f75",
  "codingamerHandle": "b528dd3b279d7578674a1129305918e0400484",
  "lastVersion": {
    "version": 12,
    "autocloseTime": 1652856869506,
    "data": {
      "title": "Legends of Code & Magic: Constructed",
      "topics": [
        {
          "id": 133,
          "handle": "card-games",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Jeu de carte",
            "2": "Card games"
          },
          "pageTitle": "Card games",
          "puzzleCount": 1,
          "parentTopicId": 107
        }
      ],
      "refereeMd5": "484004/8dfbcfa4473035e0359a65f2bd7728d8",
      "testHandle": "91983909e545c8369f4d57cc14132829d23262",
      "viewerCode": "var Drawer=function(t){var e={};function r(n){var o;return(e[n]||(o=e[n]={i:n,l:!1,exports:{}},t[n].call(o.exports,o,o.exports,r),o.l=!0,o)).exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){\"use strict\";r.r(e),r.d(e,\"Drawer\",(function(){return Cr}));var n={baseUrl:\"https://cdn-games.codingame.com/community/484004-1647629398073/\",images:{\"ward.png\":\"83a9edd31e993e6bb31691a70c7c7eaeb2b00337371640257ffbeb75566c692a.png\",\"atlas.png\":\"4ae0eeeb6763501602d78f69c4005f3108ed6e89330d0acbbf9c00025ab33404.png\",\"logo.png\":\"d9a2893e70cbc21340eefb365861edc588170fc813a3867470cecfaec6b7f437.png\",\"Area_lane1.png\":\"06cf4fea5cdfe1c202e66e8ff26ea9f63bc62d5c5539dbf658a42892192dd0df.png\",\"Area_lane2.png\":\"d32ab8401b07400c5920c950097cdfb70bb008cc54ce4ae724d1fb813d87ecf2.png\",\"separator.png\":\"bcad01608825bfe14dd5d1565d2786c41b5cfed5abda5116fc248b169620bc71.png\",\"board.jpg\":\"fe81583852d0fa18337b4b07f5462a512f69225f01670a1de96d5f47f2d1bd80.jpg\",\"newturn.png\":\"7582b0e6021d6ebcd8ed227a02c397c96feb8049236825cfacb3cdd124bf5cd2.png\",\"Area_lane0.png\":\"55f5eff8e7ae9f3b5a854d883e22ab1384a6cb6eef82329cb49528687ea74c9c.png\",\"spritesheet.png\":\"df304d0df44604b5cff260125e5091395d2a5a3de63ac187d825b654107f65af.png\",\"card_backgrounds.png\":\"7afb3fd7c54686d5834d7119f7ca2b9b5533bfbe64311bee9afd6501637d7f2c.png\"},sprites:[\"9895869feafd9116b46e390e718b80ce0438d0417b86a8ea3b2f5ea2a428cb5e.json\",\"3ed97bf2303c4948323c9ce3c0125515e2e3cdc359425b200779353c4200940a.json\"],fonts:[]};function o(t,e,r){return t<=e?t+(e-t)*r:e+(t-e)*(1-r)}function i(t,e,r){return Math.min(1,Math.max(0,(r-t)/(e-t)))}function a(t,e,r,n,o){return o=o||0,Math.min(r/(t+o),n/(e+o))}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=[],s=[],l=function(){function t(){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var e,r;return e=t,r=[{key:\"listen\",value:function(t){if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");s.push(t)}},{key:\"push\",value:function(t){u.push(t),s.forEach((function(e){return e(t)}))}}],null&&c(e.prototype,null),r&&c(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function f(t){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function p(t){var e=y();return function(){var r,n=b(t);r=e?(r=b(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===f(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}function h(t,e,r){return(h=y()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&d(e,r.prototype),e}).apply(null,arguments)}function y(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&d(e,t);var r=p(n);function n(t,e){var o;if(this instanceof n)return(o=r.call(this,\"Invalid color token: there is no player at index \".concat(t,\". Make sure to use getColorToken() if you want the color of a specific player.\"))).playerIdx=t,o.cause=e,o.name=\"InvalidPlayerColorTokenError\",o;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,b(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,t)}(t)}(Error));function g(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return r<1?t:e}r={type:Number,lerpMethod:function(t,e,r){return null===e?null:o((t={r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t}).r,(e={r:(16711680&e)>>16,g:(65280&e)>>8,b:255&e}).r,r)<<16|o(t.g,e.g,r)<<8|o(t.b,e.b,r)},convert:function(t,e){var r=-(t+1);try{return t<0?e.players[r].color:t}catch(t){return l.push(new m(r)),16777215}}},e={type:String,lerpMethod:O,convert:x};var w={type:Number,lerpMethod:function(t,e,r,n){for(;e>t+Math.PI;)e-=2*Math.PI;for(;e<t-Math.PI;)e+=2*Math.PI;return(n=void 0!==n&&Math.abs(e-t)>n?e:t+(e-t)*r)%(2*Math.PI)},convert:function(t){return t*Math.PI/180}},P={type:Number,lerpMethod:O},j={type:function(t){return\"1\"===t},lerpMethod:O},S={type:Number,lerpMethod:function(t,e,r){return e<t?e:o(t,e,r)}},k={default:{type:Number,lerpMethod:o},visible:j,rotation:w,skewX:w,skewY:w,fillColor:r,lineColor:r,strokeColor:r,tint:r,animationProgressTime:S,maxWidth:P,mask:P,baseWidth:P,baseHeight:P,image:e,images:e,scaleMode:e,restarted:{type:String,convert:function(t,e,r,n){return t?{date:r.date+n*r.frameDuration}:null},lerpMethod:O},playing:j,duration:P,blendMode:P,loop:j,text:v(v({},e),{},{convert:function(t,e){t=x(t);for(var r=/\\$(\\d)/g,n=r.exec(t),o=\"\",i=0;n;)n[1]<e.players.length&&(o=(o+=t.substring(i,n.index))+e.players[+n[1]].name),i=n.index+n[0].length,n=r.exec(t);return o+t.substring(i)}}),textAlign:v(v({},e),{},{convert:function(t){return{0:\"left\",1:\"center\",2:\"right\"}[t]}}),fontFamily:e,fontWeight:e,children:v(v({},e),{},{convert:function(t){return t?t.split(\",\").map((function(t){return+t})):[]}}),points:v(v({},e),{},{convert:function(t){return t?t.split(\",\").map((function(t){return parseInt(t)})):[]},lerpMethod:function(t,e,r){return t.length===e.length?t.map((function(t,n){return o(t,e[n],r)})):O(t,e,r)}})};function x(t){return(t=t.split(\"\\\\'\").join(\"'\")).includes(\" \")||t.includes(\";\")||t.includes(\"\\n\")?t.slice(1,t.length-1):t}function R(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D(t){return(D=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _=function(){function t(){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");this.defaultState={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0,zIndex:0,alpha:1,visible:!1,rotation:0,mask:-1},this.states={}}var e,r,n;return e=t,n=[{key:\"createState\",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return T(T({t:t},e),{},{curve:r})}}],(r=[{key:\"init\",value:function(){this.properties=Object.keys(this.defaultState),this.initDisplay(),this.currentState=Object.assign({},this.defaultState),\"object\"===D(this.graphics)&&this.container.addChild(this.graphics)}},{key:\"setHidden\",value:function(t){this.hide=t,this.container.visible=this.currentState.visible&&!this.hide}},{key:\"addState\",value:function(e,r,n){this.states[n]||(this.states[n]=[]);r=t.createState(e,r.values,r.curve);var o=this.states[n].find((function(t){return t.t===e}));o&&0===Object.keys(r.curve).length&&(r.curve=o.curve),o?(C(r)||C(o)||l.push(new Error(\"Different updates for same t \"+e)),Object.assign(o,r)):this.states[n].push(r)}},{key:\"set\",value:function(t,e,r){this.addState(t,e,r)}},{key:\"render\",value:function(t,e,r){var n,o=this.states[e.number],a=(this.container.visible=!1,null),c=1;if(o&&o.length){for(var u=0;u<o.length-1&&o[u].t<t;)u++;if(a=o[u-1],n=o[u],a)c=i(a.t,n.t,t);else{var s=Object.keys(this.states),l=s.indexOf(e.number.toString())-1;for(-1===l&&(l=s.length-1);0<=l&&s[l]>=e.number;)l--;var f=this.states[s[l]]||[];c=!(a=f[f.length-1])&&t>=n.t?(a=n,1):i(0,n.t,t)}}else{for(var p=Object.keys(this.states),h=p.length-1;0<=h&&p[h]>e.number;)h--;null!=(f=this.states[p[h]])?n=a=f[f.length-1]:Object.assign(this.currentState,this.defaultState)}if(a){var y,d={},b=Object.assign({},this.currentState),m=function(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return\"string\"==typeof t?I(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(t,e):void 0}(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}(this.properties);try{for(m.s();!(y=m.n()).done;){var g=y.value,v=(k[g]||k.default).lerpMethod,O=n.curve[g]||function(t){return t},w=v(a[g],n[g],O(c));w!==this.currentState[g]&&(d[g]=!0,b[g]=w)}}catch(t){m.e(t)}finally{m.f()}this.updateDisplay(b,d,r,e,t),Object.assign(this.currentState,b),this.container.visible=this.container._visible,d.children&&(r.mustResetTree=!0,\"function\"==typeof this.postUpdate)&&r.updatedBuffers.push(this),d.zIndex&&(r.mustResort=!0),d.mask&&(r.maskUpdates[this.id]=b.mask),0!==Object.keys(d).length&&this.parent&&this.parent.notifyChange()}}},{key:\"notifyChange\",value:function(){this.parent&&this.parent.notifyChange()}},{key:\"initDisplay\",value:function(){this.container=new PIXI.Container,this.container.zIndex=this.defaultState.zIndex,this.container.id=this.id,this.container._visible=this.defaultState.visible}},{key:\"updateDisplay\",value:function(t,e,r){this.container.zIndex=t.zIndex,this.container.alpha=t.alpha,(e.x||e.y)&&this.container.position.set(t.x*r.toWorldUnits,t.y*r.toWorldUnits),(e.scaleX||e.scaleY)&&this.container.scale.set(t.scaleX||1e-8,t.scaleY||1e-8),this.container.rotation=t.rotation,this.container._visible=t.visible&&!this.hide,this.container.skew.set(t.skewX,t.skewY)}}])&&E(e.prototype,r),n&&E(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function C(t){return Object.keys(t).length===Object.keys(_.createState()).length}function F(t){return(F=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function M(){return(M=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=W(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function X(t,e){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(){var t=o,e=_;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&X(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=W(t);r=e?(r=W(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===F(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return t=n.call(this),Object.assign(t.defaultState,{fillColor:o.defaultFillColor(),lineWidth:o.defaultLineWidth(),lineColor:o.defaultLineColor(),fillAlpha:o.defaultFillAlpha(),lineAlpha:o.defaultLineAlpha(),blendMode:PIXI.BLEND_MODES.NORMAL}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultLineWidth\",value:function(){return 0}},{key:\"defaultFillColor\",value:function(){return 16777215}},{key:\"defaultLineColor\",value:function(){return 0}},{key:\"defaultLineAlpha\",value:function(){return 1}},{key:\"defaultFillAlpha\",value:function(){return 1}}],(r=[{key:\"initDisplay\",value:function(){M(W(o.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Graphics,this.graphics.lineStyle(this.defaultState.lineWidth,this.defaultState.lineColor,this.defaultState.lineAlpha),null!==this.defaultState.fillColor&&this.graphics.beginFill(this.defaultState.fillColor,this.defaultState.fillAlpha)}},{key:\"updateDisplay\",value:function(t,e,r){M(W(o.prototype),\"updateDisplay\",this).call(this,t,e,r),this.graphics.blendMode=t.blendMode}}])&&A(t.prototype,r),e&&A(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function L(t){return(L=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function U(){return(U=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function G(t,e){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(){var t=o,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&G(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=z(t);r=e?(r=z(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===L(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return(t=n.call(this)).defaultState.radius=o.defaultRadius(),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultRadius\",value:function(){return 100}}],(r=[{key:\"initDisplay\",value:function(){U(z(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawCircle(0,0,this.defaultState.radius),null!==this.defaultState.fillColor&&this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,r){U(z(o.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.radius||e.lineColor||e.lineWidth||e.fillColor||e.fillAlpha||e.lineAlpha)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor),this.graphics.drawCircle(0,0,t.radius*r.toWorldUnits),null!==t.fillColor)&&this.graphics.endFill()}}])&&H(t.prototype,r),e&&H(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function Y(t){return(Y=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function V(){return(V=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function K(t,e){return(K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Q=function(){var t=o,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&K(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=J(t);r=e?(r=J(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Y(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return(t=n.call(this)).defaultState.x2=o.defaultPosition(),t.defaultState.y2=o.defaultPosition(),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultPosition\",value:function(){return 100}}],(r=[{key:\"initDisplay\",value:function(){V(J(o.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(t,e,r){V(J(o.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.lineWidth||e.lineColor||e.lineAlpha||e.x2||e.y2||e.x||e.y)&&(this.graphics.clear(),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.moveTo(0,0),this.graphics.lineTo(-this.container.x+t.x2*r.toWorldUnits,-this.container.y+t.y2*r.toWorldUnits))}}])&&q(t.prototype,r),e&&q(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function Z(t){return(Z=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function et(){return(et=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function rt(t,e){return(rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(){var t=o,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&rt(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=nt(t);r=e?(r=nt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Z(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return t=n.call(this),Object.assign(t.defaultState,{width:o.defaultSideLength(),height:o.defaultSideLength()}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultSideLength\",value:function(){return 100}}],(r=[{key:\"initDisplay\",value:function(){et(nt(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawRect(0,0,this.defaultState.width,this.defaultState.height),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,r){et(nt(o.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.lineWidth||e.lineColor||e.width||e.height||e.lineAlpha||e.fillColor)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawRect(0,0,t.width*r.toWorldUnits,t.height*r.toWorldUnits),null!==t.fillColor)&&this.graphics.endFill()}}])&&tt(t.prototype,r),e&&tt(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function it(t){return(it=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ct(){return(ct=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=st(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function ut(t,e){return(ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lt=function(){var t=o,e=_;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&ut(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=st(t);r=e?(r=st(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===it(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return t=n.call(this),Object.assign(t.defaultState,{anchorX:o.defaultAnchor(),anchorY:o.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultAnchor\",value:function(){return 0}}],(r=[{key:\"initDisplay\",value:function(){ct(st(o.prototype),\"initDisplay\",this).call(this)}},{key:\"updateDisplay\",value:function(t,e,r){ct(st(o.prototype),\"updateDisplay\",this).call(this,t,e,r),this.graphics.anchor.set(t.anchorX,t.anchorY),this.graphics.blendMode=t.blendMode,this.graphics.tint=t.tint}}])&&at(t.prototype,r),e&&at(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function ft(t){return(ft=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function pt(t,e,r){return(pt=ht()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&yt(e,r.prototype),e}).apply(null,arguments)}function ht(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function yt(t,e){return(yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bt=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&yt(e,t);var r=function(t){var e=ht();return function(){var r,n=dt(t);r=e?(r=dt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===ft(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e){var o;if(this instanceof n)return(o=r.call(this,'Could not find image: \"'+t+'\". Make sure it is in your assets folder and is spelled correctly.')).image=t,o.cause=e,o.name=\"MissingImageError\",o;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return pt(t,arguments,dt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),yt(r,t)}(t)}(Error));function mt(t){return(mt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vt(){return(vt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Ot(t,e){return(Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pt=function(){var t=n,e=lt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Ot(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wt(t);r=e?(r=wt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===mt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{image:null,baseWidth:null,baseHeight:null,scaleMode:\"LINEAR\"}),t.missingTextures={},t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"updateDisplay\",value:function(t,e,r){if(vt(wt(n.prototype),\"updateDisplay\",this).call(this,t,e,r),e.image)try{null!==t.image?this.graphics.texture=PIXI.Texture.fromFrame(t.image):this.graphics.texture=PIXI.Texture.EMPTY,this.graphics.texture.baseTexture.scaleMode=PIXI.SCALE_MODES[t.scaleMode]}catch(e){this.missingTextures[t.image]||(this.missingTextures[t.image]=!0,l.push(new bt(t.image,e)))}e.baseWidth&&(this.graphics.width=t.baseWidth),e.baseHeight&&(this.graphics.height=t.baseHeight)}}])&&gt(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function jt(t){return(jt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kt(){return(kt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function xt(t,e){return(xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tt=function(){var t=n,e=Pt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&xt(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Rt(t);r=e?(r=Rt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===jt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t=this,e=n;if(t instanceof e)return r.apply(this,arguments);throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){kt(Rt(n.prototype),\"initDisplay\",this).call(this),null===this.defaultState.image?this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY):this.graphics=PIXI.Sprite.fromFrame(this.defaultState.image)}}])&&St(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function It(t,e){if(t.width>e)for(;3<t.text.length&&t.width>e;)t.text=t.text.slice(0,-4)+\"...\"}function Dt(t){return(Dt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _t(){return(_t=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ft(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Ct(t,e){return(Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var At=function(){var t=n,e=lt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Ct(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ft(t);r=e?(r=Ft(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Dt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{text:\"\",textAlign:\"left\",strokeColor:0,strokeThickness:0,fillColor:0,fontSize:26,fontFamily:\"Lato\",fontWeight:\"normal\",maxWidth:0}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){_t(Ft(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Text(this.defaultState.text,{align:this.defaultState.textAlign,fontSize:this.defaultState.fontSize+\"px\",fontFamily:this.defaultState.fontFamily,fill:this.defaultState.fillColor})}},{key:\"updateDisplay\",value:function(t,e,r){_t(Ft(n.prototype),\"updateDisplay\",this).call(this,t,e,r),this.graphics.style.align=t.textAlign,this.graphics.style.stroke=t.strokeColor,this.graphics.style.strokeThickness=t.strokeThickness,this.graphics.style.fill=t.fillColor,this.graphics.style.fontSize=t.fontSize||1,this.graphics.style.fontFamily=t.fontFamily,this.graphics.style.fontWeight=t.fontWeight,(e.text||e.strokeThickness||e.fontSize||e.fontFamily||e.fontWeight||e.maxWidth||e.maxWidth)&&(this.graphics.text=t.text,t.maxWidth)&&It(this.graphics,t.maxWidth)}}])&&Et(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function Mt(t){return(Mt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Xt(t,e,r){return(Xt=Wt()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&Bt(e,r.prototype),e}).apply(null,arguments)}function Wt(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Bt(t,e){return(Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ht=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Bt(e,t);var r=function(t){var e=Wt();return function(){var r,n=Lt(t);r=e?(r=Lt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Mt(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e){var o;if(this instanceof n)return(o=r.call(this,'Could not find font: \"'+t+'\". Make sure it is in your assets folder and is spelled correctly.')).font=t,o.cause=e,o.name=\"MissingBitmapFontError\",o;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Xt(t,arguments,Lt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Bt(r,t)}(t)}(Error));function Ut(t){return(Ut=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zt(){return(zt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Nt(t,e){return(Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qt=function(){var t=n,e=_;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Nt(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Yt(t);r=e?(r=Yt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Ut(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{text:\"\",textAlign:\"left\",fontSize:26,fontFamily:null,anchorX:lt.defaultAnchor(),anchorY:lt.defaultAnchor(),blendMode:PIXI.BLEND_MODES.NORMAL,tint:16777215,maxWidth:0}),t.missingFonts={},t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){zt(Yt(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(t,e,r){zt(Yt(n.prototype),\"updateDisplay\",this).call(this,t,e,r),null!==t.fontFamily?PIXI.extras.BitmapText.fonts[t.fontFamily]?(0===this.graphics.children.length?(this.displayed=new PIXI.extras.BitmapText(\"\",{font:{size:t.fontSize||1,name:t.fontFamily}}),this.graphics.addChild(this.displayed)):this.displayed.font={size:t.fontSize||1,name:t.fontFamily},this.displayed.anchor.set(t.anchorX,t.anchorY),this.displayed.blendMode=t.blendMode,this.displayed.tint=t.tint,this.displayed.align=t.textAlign,(e.text||e.maxWidth||e.fontSize||e.fontFamily)&&(this.displayed.text=t.text,t.maxWidth)&&It(this.displayed,t.maxWidth)):(this.missingFonts[t.fontFamily]||(this.missingFonts[t.fontFamily]=!0,l.push(new Ht(t.fontFamily))),this.graphics.removeChildren()):this.graphics.removeChildren()}}])&&Gt(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function $t(t){return($t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kt(){return(Kt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qt(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Jt(t,e){return(Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt=function(){var t=n,e=_;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Jt(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qt(t);r=e?(r=Qt(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===$t(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{children:[]}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Kt(Qt(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Container}},{key:\"updateDisplay\",value:function(t,e,r){Kt(Qt(n.prototype),\"updateDisplay\",this).call(this,t,e,r)}},{key:\"childrenContainer\",get:function(){return this.graphics}}])&&Vt(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function te(t){return(te=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function ee(t,e){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ne=function(){var t=n,e=Zt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&ee(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=re(t);r=e?(r=re(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===te(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t=this,e=n;if(t instanceof e)return r.apply(this,arguments);throw new TypeError(\"Cannot call a class as a function\")}return t=n,Object.defineProperty(t,\"prototype\",{writable:!1}),t}(),oe=null,ie=[];function ae(t){return(ae=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ue(){return(ue=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=le(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function se(t,e){return(se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fe=function(){var t=n,e=Zt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&se(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=le(t);r=e?(r=le(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===ae(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t=this,e=n;if(t instanceof e)return r.apply(this,arguments);throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){ue(le(n.prototype),\"initDisplay\",this).call(this),this.buffer=new PIXI.Container,this.gameTexture=null,this.graphics=new PIXI.Sprite,this.needsRender=!0}},{key:\"postUpdate\",value:function(){var t,e;this.needsRender&&(e=this.buffer.getBounds().width,t=this.buffer.getBounds().height,(null==this.gameTexture||this.gameTexture.width<e||this.gameTexture.height<t)&&(e=Math.min(Math.max(e,512),4096),t=Math.min(Math.max(t,512),4096),this.gameTexture=PIXI.RenderTexture.create(e,t),e=this.gameTexture,ie.push(e),this.graphics.texture=this.gameTexture),oe.render(this.buffer,this.gameTexture),this.needsRender=!1)}},{key:\"childrenContainer\",get:function(){return this.buffer}},{key:\"notifyChange\",value:function(){this.needsRender=!0,this.parent&&this.parent.notifyChange()}}])&&ce(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function pe(t){return(pe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function he(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function ye(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?he(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function de(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function be(){return(be=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ge(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function me(t,e){return(me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ve=function(){var t=n,e=lt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&me(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ge(t);r=e?(r=ge(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===pe(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{images:\"\",loop:!1,duration:1e3,playing:!0,restarted:null,animationProgress:0,date:0}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){be(ge(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.Sprite(PIXI.Texture.EMPTY)}},{key:\"addState\",value:function(t,e,r,o){be(ge(n.prototype),\"addState\",this).call(this,t,e,r),e=this.states[r].find((function(e){return e.t===t})),r=o.date+o.frameDuration*t,e.date=r}},{key:\"updateDisplay\",value:function(t,e,r,o,i){if(be(ge(n.prototype),\"updateDisplay\",this).call(this,t,e,r),t.images){if(e=t.images.split(\",\"),0<=t.animationProgress){r=o.date+o.frameDuration*i,o=ye(ye({},t),{},{date:r}),this.computeAnimationProgressTime(t,o),i=Math.floor(e.length*o.animationProgress),r=t.loop?e[i%e.length]:e[i]||e[e.length-1];try{this.graphics.texture=PIXI.Texture.fromFrame(r)}catch(t){l.push(new bt(r,t))}}}else this.graphics.texture=PIXI.Texture.EMPTY}},{key:\"computeAnimationProgressTime\",value:function(t,e){e.restarted&&e.restarted.date===e.date?e.animationProgress=0:(e.animationProgress=t.animationProgress,t.playing&&(e.animationProgress+=(e.date-t.date)/t.duration))}}])&&de(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function Oe(t){return(Oe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function we(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pe(){return(Pe=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Se(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function je(t,e){return(je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Se(t){return(Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ke=function(){var t=o,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&je(t,e);var r,n=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Se(t);r=e?(r=Se(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===Oe(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(o);function o(){var t;if(this instanceof o)return t=n.call(this),Object.assign(t.defaultState,{width:o.defaultSideLength(),height:o.defaultSideLength(),radius:o.defaultRadius()}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,e=[{key:\"defaultSideLength\",value:function(){return 100}},{key:\"defaultRadius\",value:function(){return 20}}],(r=[{key:\"initDisplay\",value:function(){Pe(Se(o.prototype),\"initDisplay\",this).call(this),this.graphics.drawRoundedRect(0,0,this.defaultState.width,this.defaultState.height,this.defaultState.radius),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,r){Pe(Se(o.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.lineWidth||e.lineColor||e.lineAlpha||e.fillColor||e.radius||e.height||e.width)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawRoundedRect(0,0,t.width*r.toWorldUnits,t.height*r.toWorldUnits,t.radius*r.toWorldUnits),null!==t.fillColor)&&this.graphics.endFill()}}])&&we(t.prototype,r),e&&we(t,e),Object.defineProperty(t,\"prototype\",{writable:!1}),o}();function xe(t){return(xe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Te(){return(Te=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=De(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Ie(t,e){return(Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function De(t){return(De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ee=function(){var t=n,e=B;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Ie(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=De(t);r=e?(r=De(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===xe(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{points:[]}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Te(De(n.prototype),\"initDisplay\",this).call(this),this.graphics.endFill()}},{key:\"updateDisplay\",value:function(t,e,r){Te(De(n.prototype),\"updateDisplay\",this).call(this,t,e,r),(e.lineWidth||e.lineColor||e.lineAlpha||e.fillColor||e.points)&&(this.graphics.clear(),null!==t.fillColor&&this.graphics.beginFill(t.fillColor,t.fillAlpha),this.graphics.lineStyle(t.lineWidth,t.lineColor,t.lineAlpha),this.graphics.drawPolygon(t.points.map((function(t){return t*r.toWorldUnits}))),null!==t.fillColor)&&this.graphics.endFill()}}])&&Re(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function _e(t){return(_e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fe(){return(Fe=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Me(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(this,arguments)}function Ae(t,e){return(Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xe=function(){var t=n,e=Pt;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Ae(t,e);var r=function(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Me(t);r=e?(r=Me(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===_e(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(){var t;if(this instanceof n)return t=r.call(this),Object.assign(t.defaultState,{tileX:0,tileY:0,tileScaleX:1,tileScaleY:1}),t;throw new TypeError(\"Cannot call a class as a function\")}return t=n,(e=[{key:\"initDisplay\",value:function(){Fe(Me(n.prototype),\"initDisplay\",this).call(this),this.graphics=new PIXI.extras.TilingSprite(PIXI.Texture.EMPTY)}},{key:\"updateDisplay\",value:function(t,e,r){Fe(Me(n.prototype),\"updateDisplay\",this).call(this,t,e,r),this.graphics.tilePosition.x=t.tileX,this.graphics.tilePosition.y=t.tileY,this.graphics.tileScale.x=t.tileScaleX,this.graphics.tileScale.y=t.tileScaleY}}])&&Ce(t.prototype,e),Object.defineProperty(t,\"prototype\",{writable:!1}),n}();function We(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Be=function(){function t(){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var e,r;return e=t,r=[{key:\"create\",value:function(t){var e={C:N,R:ot,L:Q,S:Tt,T:At,X:qt,G:ne,B:fe,A:ve,K:ke,P:Ee,D:Xe}[t];if(e)return new e;throw new Error(\"Exception: entity type not found: \"+t)}}],null&&We(e.prototype,null),r&&We(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function Le(t){var e=1.70158,r=0,n=1;return 0===t?0:1==(t/=1)?1:(r=r||.3,e=n<Math.abs(1)?(n=1,r/4):r/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((+t-e)*(2*Math.PI)/r)+1)}function He(t){return t<.5?2*t*t:(4-2*t)*t-1}function Ue(t){return Math.pow(t,3)}function Ge(t){return 1+Math.pow(t-1,3)}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ne(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function Ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qe(t,e,r){e&&Ye(t.prototype,e),r&&Ye(t,r),Object.defineProperty(t,\"prototype\",{writable:!1})}var $e={r:\"rotation\",R:\"radius\",X:\"x2\",Y:\"y2\",w:\"width\",h:\"height\",t:\"tint\",f:\"fillColor\",F:\"fillAlpha\",c:\"lineColor\",W:\"lineWidth\",A:\"lineAlpha\",a:\"alpha\",i:\"image\",S:\"strokeThickness\",sc:\"strokeColor\",ff:\"fontFamily\",s:\"fontSize\",fw:\"fontWeight\",T:\"text\",ta:\"textAlign\",ch:\"children\",sx:\"scaleX\",sy:\"scaleY\",ax:\"anchorX\",ay:\"anchorY\",kx:\"skewX\",ky:\"skewY\",v:\"visible\",z:\"zIndex\",b:\"blendMode\",I:\"images\",rs:\"restarted\",p:\"playing\",l:\"loop\",d:\"duration\",bw:\"baseWidth\",bh:\"baseHeight\",ps:\"points\",tx:\"tileX\",ty:\"tileY\",tsx:\"tileScaleX\",tsy:\"tileScaleY\",sm:\"scaleMode\"};w=function(){function t(e,r){Ne(this,t),this.id=++r.instanceCount,this.type=e[0]}return qe(t,[{key:\"apply\",value:function(t){var e=Be.create(this.type);e.id=this.id,t.set(this.id,e)}}]),t}(),r=function(){function t(e,r){for(var o=(e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return\"string\"==typeof t?ze(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(t,e):void 0}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}(e,8))[0],i=e[1],a=e[2],c=e[3],u=e[4],s=e[5],l=e[6],f=(e=e[7],Ne(this,t),this.loader=new PIXI.loaders.Loader,\"0\"===a&&(a=PIXI.utils.TextureCache[i].width),\"0\"===c&&(c=PIXI.utils.TextureCache[i].height),0<e?e:l),p={frames:{},meta:{image:(n.baseUrl||\"\")+n.images[i]}},h=0;h<l;h++)p.frames[1<l?o+h:o]={frame:{x:a*s+h%f*a,y:c*u+Math.floor(h/f)*c,w:a,h:c},sourceSize:{w:a,h:c},rotated:!1,trimmed:!1};e=\"data:text/json;charset=UTF-8,\"+JSON.stringify(p),PIXI.utils.TextureCache[e+\"_image\"]||this.loader.add(e,{crossOrigin:!0})}return qe(t,[{key:\"apply\",value:function(){var t=this;if(0<Object.keys(this.loader.resources).length)return new Promise((function(e){t.loader.load(),t.loader.on(\"complete\",e)}))}}]),t}();function Ve(t){return function(t){if(Array.isArray(t))return Ke(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(t)||function(t,e){var r;if(t)return\"string\"==typeof t?Ke(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(t,e):void 0}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qe={C:w,U:function(){function t(e,r,n){Ne(this,t),this.id=+e[0],this.t=+e[1],this.params={},this.curve={};for(var o=2;o<e.length;){var i=$e[e[o]]||e[o],a=(c=k[i]||k.default).type(e[o+1]),c=(\"function\"==typeof c.convert&&(a=c.convert(a,r,n,this.t)),t.curves[e[o+2]]);this.params[i]=a,o+=2,c&&(this.curve[i]=c,o+=1)}}return qe(t,[{key:\"apply\",value:function(t,e){(t=t.get(this.id)).addState(this.t,{values:this.params,curve:this.curve},e.number,e),t.stateAdded=!0}}],[{key:\"curves\",get:function(){return{_:function(t){return t<1?0:1},\"\":He,\"\":Ue,\"\":Ge,\"~\":Le,\"\":function(t){return 1}}}}]),t}(),L:r};function Ze(t,e){for(var r=[],n=\"\",o=0,i=\"\",a=!1;o<t.length;){var c=t[o++];c===e?a?n+=c:(r.push(n),n=\"\"):\"'\"===c&&\"\\\\\"!==i?(a=!a,n+=c):\"\\\\\"===i?n+=\"'\"===c?\"\\\\'\":\"\\\\\"+c:\"\\\\\"!==c&&(n+=c),i=c}return r.push(n),r}var tr=function(){function t(){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var e,r;return e=t,r=[{key:\"parse\",value:function(t,e,r){var n,o=[],i=Ze(t,\"\\n\");for(n in i){var a=Qe[i[n][0]];if(!a)throw new Error(\"Unrecognised command : \"+i[n][0]);o=[].concat(Ve(o),Ve(function(t,e,r,n){e=Ze(e,\";\");var o=[];return e.forEach((function(e){return o.push(new t(Ze(e,\" \"),r,n))})),o}(a,i[n].slice(1),e,r)))}return o}}],null&&Je(e.prototype,null),r&&Je(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),t}(),er=1920,rr=1080;function nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function or(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function ir(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var cr={};S=function(){function t(e){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");this.entities=new Map,this.frames=[],this.loadingAssets=0,this.extrapolationMap={},this.globalData={toWorldUnits:1,mustResetTree:!0,mustResort:!0,maskUpdates:{},updatedBuffers:[],players:[],instanceCount:0},cr.entities=this.entities}var e,r,n;return e=t,n=[{key:\"name\",get:function(){return\"entitymodule\"}}],(r=[{key:\"handleFrameData\",value:function(t,e){var r=this;return(e=(e&&(e=tr.parse(e,this.globalData,t))&&e.forEach((function(e){(e=e.apply(r.entities,t))&&(r.loadingAssets++,e.then((function(){r.loadingAssets--})))})),ir({},t))).previous=this.frames[this.frames.length-1]||e,this.extrapolate(e),e!==e.previous&&(e.previous.next=e),this.frames.push(e),e}},{key:\"lastElementOf\",value:function(t){return t[t.length-1]}},{key:\"extrapolate\",value:function(t){var e=this,r=t.number,n=t.previous.number;this.entities.forEach((function(o){var i,a;o.stateAdded&&(o.stateAdded=!1,o.states[r]||(o.states[r]=[]),e.extrapolationMap[o.id]||(e.extrapolationMap[o.id]=ir({},o.defaultState)),(i=o.states[r]).sort((function(t,e){return t.t-e.t})),i.length&&1===e.lastElementOf(i).t||o.addState(1,{},r,t),a=e.extrapolationMap[o.id],o.states[n]&&n!==r&&(a=o.states[n][o.states[n].length-1]),o.states[r]=i.map((function(t){return t=e.extrapolationMap[o.id]=ir(ir({},e.extrapolationMap[o.id]),t),\"function\"==typeof o.computeAnimationProgressTime&&o.computeAnimationProgressTime(a,t),a=t})))}))}},{key:\"reinitScene\",value:function(t,e){this.globalData.toPixel=er/e.width*e.oversampling,this.globalData.mustResetTree=!0,cr.container=this.container=t,this.entities.forEach((function(t){t.init()}))}},{key:\"sortChildren\",value:function(t){t.children.sort((function(t,e){return t.zIndex===e.zIndex?t.id-e.id:t.zIndex-e.zIndex}))}},{key:\"stillLoading\",value:function(){return 0<this.loadingAssets}},{key:\"updateScene\",value:function(t,e,r){var n=this;if(!this.stillLoading()){for(var o in this.entities.forEach((function(t){return t.render(r,e,n.globalData)})),this.globalData.mustResetTree&&(this.reconstructTree(),this.globalData.mustResetTree=!1,this.globalData.mustResort=!0),this.globalData.mustResort&&(this.resortTree(),this.globalData.mustResort=!1),this.globalData.maskUpdates){var i=this.entities.get(+o);o=this.globalData.maskUpdates[o];i.container.mask=-1===o?null:this.entities.get(o).graphics}var a,c=function(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return\"string\"==typeof t?nr(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nr(t,e):void 0}(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}(this.globalData.updatedBuffers);try{for(c.s();!(a=c.n()).done;)a.value.postUpdate()}catch(t){c.e(t)}finally{c.f()}this.globalData.maskUpdates={}}}},{key:\"resortTree\",value:function(){var t=this;this.entities.forEach((function(e){e instanceof Zt&&t.sortChildren(e.childrenContainer)})),this.sortChildren(this.container)}},{key:\"reconstructTree\",value:function(){var t=this;this.container.removeChildren(),this.entities.forEach((function(e){e instanceof Zt&&(e.childrenContainer.removeChildren(),e.currentState.children.forEach((function(r){r=t.entities.get(r),e.childrenContainer.addChild(r.container),r.parent=e})))})),this.entities.forEach((function(e){e.container.parent||t.container.addChild(e.container)}))}},{key:\"handleGlobalData\",value:function(t,e){this.globalData.players=t,t=e.width,e=e.height,this.globalData.toWorldUnits=a(t,e,er,rr),cr.toWorldUnits=this.globalData.toWorldUnits,cr.hasOwnProperty(\"coeff\")||Object.defineProperty(cr,\"coeff\",{get:function(){var t='The \"coeff\" property of GraphicEntityModule\\'s API is deprecated, please use \"toWorldUnits\" instead',e=(new Error).stack;return console.groupCollapsed?(console.groupCollapsed(\"%cDeprecation Warning: %c%s\",\"color:#614108;background:#fffbe6\",\"font-weight:normal;color:#614108;background:#fffbe6\",t),console.warn(e),console.groupEnd()):console.warn(\"Deprecation Warning: \",t),cr.toWorldUnits}})}}])&&ar(e.prototype,r),n&&ar(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),t}();function ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function lr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sr(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pr(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=hr(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function hr(t,e){var r;if(t)return\"string\"==typeof t?yr(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yr(t,e):void 0}function yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dr(t,e){return(t=t.states[e])&&t.length?t[t.length-1]:null}function br(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return\"string\"==typeof t?mr(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mr(t,e):void 0}(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}P=function(){function t(e){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");this.states=[],this.globalData={},(window.module=this).atEnd=!1}var e,r,n;return e=t,n=[{key:\"name\",get:function(){return\"endScreen\"}}],(r=[{key:\"atLeastOnePixel\",value:function(t){return 0<t&&t<this.toPixel?this.toPixel:t}},{key:\"updateScene\",value:function(t,e,r){e.scores&&1===r?this.atEnd=!0:this.atEnd=!1}},{key:\"handleFrameData\",value:function(t,e){return t={number:t.number,scores:e},e&&(this.scores=e),this.states.push(t),t}},{key:\"reinitScene\",value:function(t,e){this.toDestroy=[],this.container=t,this.endLayer=this.createEndScene(this),this.container.addChild(this.endLayer),this.toPixel=er/e.width*e.oversampling}},{key:\"animateScene\",value:function(t){t=Math.min(32,t),this.atEnd?this.animationEnded||this.renderEndScene(t):(0<this.endTime&&this.destroyEndScene(),this.endTime=0)}},{key:\"destroyEndScene\",value:function(){this.animationEnded=!1,this.endLayer.visible=!1}},{key:\"initEndScene\",value:function(){this.animationEnded=!1,this.endLayer.visible=!0}},{key:\"renderEndScene\",value:function(t){0===this.endTime&&this.initEndScene();for(var e=i(0,400,this.endTime),r=(e=(this.endLayer.backgroundRanking.alpha=.9*e,i(400,1e3,this.endTime)),this.endLayer.titleRanking.scale.x=this.endLayer.titleRanking.scale.y=.001+o(10,.8,e),this.endLayer.titleRanking.visible=!!e,0);r<this.finishers.length;++r){var n=i(1e3+300*r,1e3+300*r+300,this.endTime);this.finishers[r].alpha=n}this.endTime+=t,1e4<=this.endTime&&(this.animationEnded=!0)}},{key:\"handleGlobalData\",value:function(t,e){this.globalData={players:t,playerCount:t.length}}},{key:\"generateText\",value:function(t,e,r,n,o){var i;return o?((i=new PIXI.Text(t,{fontSize:Math.round(e/1.2)+\"px\",fontFamily:\"Lato\",fontWeight:\"bold\",fill:n})).lineHeight=Math.round(e/1.2),this.toDestroy.push(i)):(i=new PIXI.extras.BitmapText(t,{font:e+\"px 04b\",tint:n})).lineHeight=e,\"right\"===r?i.anchor.x=1:\"center\"===r&&(i.anchor.x=.5),i}},{key:\"createFinisher\",value:function(t){var e=new PIXI.Container,r=new PIXI.Container,n=((o=((o=((o=((n=((n=((n=(r.y=0,r.x=0,new PIXI.Graphics)).beginFill(16777215),n.alpha=.1,n.drawRect(0,0,240,120),r.addChild(n),new PIXI.Graphics)).lineStyle(this.atLeastOnePixel(1),16777215),n.alpha=.5,n.drawRect(0,0,120,120),r.addChild(n),new PIXI.Sprite(t.player.avatar))).width=n.height=120,this.generateText(t.rank.toString(),76,\"center\",t.player.color,!0))).anchor.y=.5,o.position.x=160,o.position.y=56,r.addChild(o),this.generateText(1===t.rank?\"ST\":\"ND\".toString(),34,\"left\",t.player.color,!0))).position.x=184,o.position.y=32,r.addChild(o),new PIXI.Container)).addChild(n),r.addChild(o),this.generateText(t.player.name.toUpperCase(),50,\"left\",t.player.color,!0)),o=this.generateText(1===t.rank?\"Victory\":\"Defeat\",64,\"left\",t.player.color,!0);return n.x=330,n.y=-4,o.x=330,o.y=50,e.addChild(r),e.addChild(n),e.addChild(o),e}},{key:\"createEndScene\",value:function(){for(var t=new PIXI.Container,e=new PIXI.Graphics,r=(e.beginFill(0,.85),e.drawRect(0,0,er,rr),e.endFill(),t.backgroundRanking=e,PIXI.Sprite.fromFrame(\"logo.png\")),n=(r.anchor.x=r.anchor.y=.5,(t.titleRanking=r).position.x=960,r.position.y=230,[]),o=0;o<this.globalData.playerCount;++o)n.push({score:this.scores[o],player:this.globalData.players[o],rank:0});n.sort((function(t,e){return e.score-t.score})),this.finishers=[];var i,a=new PIXI.Container,c=1;for(o=0;o<n.length;++o)0<o&&n[o-1].score!==n[o].score&&c++,n[o].rank=c,i=this.createFinisher(n[o]),a.addChild(i),this.finishers.push(i);for(o=0;o<this.finishers.length;++o)this.finishers[o].position.x=(er-this.finishers[0].width)/2,this.finishers[o].position.y=150*o;return a.y=500,t.addChild(e),t.addChild(r),t.addChild(a),t.visible=!1,t}}])&&ur(e.prototype,r),n&&ur(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),t}(),j=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")})(this,t),this.interactive={},this.previousFrame={registrations:{},extra:{}},this.lastProgress=1,this.lastFrame=0}return function(t,e,r){e&&fr(t.prototype,e),r&&fr(t,r),Object.defineProperty(t,\"prototype\",{writable:!1})}(t,[{key:\"updateScene\",value:function(t,e,r){this.currentFrame=e,this.currentProgress=r}},{key:\"handleFrameData\",value:function(t,e){var r=this,n=(e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||hr(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}(e,2))[0],o=(e=e[1],lr({},n));e=lr(lr({},this.previousFrame.extraText),e),Object.keys(n).forEach((function(t){r.interactive[t]=!0})),n={registered:o,extraText:e,number:t.number};return this.previousFrame=n}},{key:\"reinitScene\",value:function(t,e){var r,n,o,i=this;this.tooltip=this.initTooltip(),cr.entities.forEach((function(t){var e,r,n,o;i.interactive[t.id]&&(t.container.interactive=!0,t.container.mouseover=(n=t.id,o=i.tooltip,function(){o.inside[n]=!0}),t.container.mouseout=(e=t.id,r=i.tooltip,function(){delete r.inside[e]}))})),(this.container=t).interactive=!0,t.mousemove=(r=this.tooltip,n=t,o=this,function(t){if(r){t=t.data.getLocalPosition(n);var e,i=(r.x=t.x,r.y=t.y,t.x,t.y,[]),a=pr(Object.keys(r.inside).map((function(t){return+t})));try{for(a.s();!(e=a.n()).done;){var c,u,s=e.value;r.inside[s]&&((u=(c=cr.entities.get(s))&&dr(c,o.currentFrame.number))&&0!==u.alpha&&u.visible?i.push(s):delete r.inside[s])}}catch(t){a.e(t)}finally{a.f()}if(i.length){var l,f=[],p=pr(i);try{for(p.s();!(l=p.n()).done;){var h,y,d=l.value;null!==dr(cr.entities.get(d),o.currentFrame.number)&&(h=void 0,o.currentFrame.registered[d],r.visible=!0,(y=o.currentFrame.extraText[d])&&y.length&&(h=y),f.push(h))}}catch(t){p.e(t)}finally{p.f()}r.label.text=f.join(\"\\n\\n\")}else r.visible=!1;r.background.width=r.label.width+20,r.background.height=r.label.height+20,r.pivot.x=-30,r.pivot.y=-50,r.y-r.pivot.y+r.height>rr&&(r.pivot.y=10+r.height,r.y-=r.y-r.pivot.y+r.height-rr),r.x-r.pivot.x+r.width>er&&(r.pivot.x=r.width)}}),t.addChild(this.tooltip)}},{key:\"generateText\",value:function(t,e,r,n){return(t=new PIXI.Text(t,{fontSize:Math.round(e/1.2)+\"px\",fontFamily:\"monospace\",fontWeight:\"bold\",fill:r})).lineHeight=Math.round(e/1.2),\"right\"===n?t.anchor.x=1:\"center\"===n&&(t.anchor.x=.5),t}},{key:\"initTooltip\",value:function(){var t=new PIXI.Container,e=t.background=new PIXI.Graphics,r=t.label=this.generateText(\"\",36,16777215,\"left\");return e.beginFill(0,.7),e.drawRect(0,0,200,185),e.endFill(),e.x=-10,e.y=-10,t.visible=!1,t.inside={},t.addChild(e),t.addChild(r),t.interactiveChildren=!1,t}},{key:\"animateScene\",value:function(t){}},{key:\"handleGlobalData\",value:function(t,e){}}],[{key:\"name\",get:function(){return\"tooltips\"}}]),t}(),Error;var Or={showDamage:!0,showCurve:!1},wr=[S,P,j,function(){function t(e){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");this.wards=[],this.time=0,this.impacts=[],this.mustShrinkNickname=!0,this.nicknameIds=[]}var e,r,n;return e=t,n=[{key:\"name\",get:function(){return\"fx\"}}],(r=[{key:\"updateScene\",value:function(t,e,r){var n=this;this.wards=[],this.impacts=[],cr.entities.forEach((function(t){\"ward.png\"===t.currentState.image&&0<t.currentState.alpha&&t.currentState.visible&&n.wards.push(t),(\"impact.png\"===t.currentState.image||\"heal.png\"===t.currentState.image)&&0<t.currentState.alpha&&t.currentState.visible&&n.impacts.push(t)})),this.mustShrinkNickname&&(this.mustShrinkNickname=!1,this.nicknameIds.forEach((function(t){var e;(t=cr.entities.get(t)).currentState.text&&\"\"!==t.currentState.text?450<t.graphics.width&&(e=a(t.graphics.width,t.graphics.height,450,60),t.graphics.scale.set(e)):n.mustShrinkNickname=!0})))}},{key:\"handleFrameData\",value:function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gr(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t)}},{key:\"reinitScene\",value:function(t,e){this.mustShrinkNickname=!0}},{key:\"animateScene\",value:function(t){this.time+=t;var e,r=br(this.wards);try{for(r.s();!(e=r.n()).done;){var n=e.value,a=(n.graphics.anchor.set(.5),n.graphics.position.set(105,130),o(.85,1,i(-1,1,Math.cos(this.time/600))));n.graphics.scale.set(210*a/n.graphics.texture.width,260*a/n.graphics.texture.height)}}catch(t){r.e(t)}finally{r.f()}var c,u=br(this.impacts);try{for(u.s();!(c=u.n()).done;)c.value.container.parent.visible=Or.showDamage}catch(t){u.e(t)}finally{u.f()}}},{key:\"handleGlobalData\",value:function(t,e){this.nicknameIds=e||[]}}])&&vr(e.prototype,r),n&&vr(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),t}()],Pr=[{title:\"SHOW LIFE CHANGE INFO\",get:function(){return Or.showDamage},set:function(t){Or.showDamage=t},values:{ON:!0,OFF:!1}}];function jr(t){return(jr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Sr(t,e,r){return(Sr=kr()?Reflect.construct.bind():function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&xr(e,r.prototype),e}).apply(null,arguments)}function kr(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function xr(t,e){return(xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tr=function(t){var e=n;if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&xr(e,t);var r=function(t){var e=kr();return function(){var r,n=Rr(t);r=e?(r=Rr(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&(\"object\"===jr(r)||\"function\"==typeof r))return r;if(void 0!==r)throw new TypeError(\"Derived constructors may only return object or undefined\");if(void 0!==n)return n;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}}(n);function n(t,e){if(this instanceof n)return(t=r.call(this,'<Error in module \"'+t+'\">')).cause=e,t.name=\"ModuleError\",t;throw new TypeError(\"Cannot call a class as a function\")}return e=n,Object.defineProperty(e,\"prototype\",{writable:!1}),e}(function(t){var e=\"function\"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Sr(t,arguments,Rr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),xr(r,t)}(t)}(Error));function Ir(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Dr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ir(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e=e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Er(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Cr=function(){function t(e){if(!(this instanceof t))throw new TypeError(\"Cannot call a class as a function\");var r;this.toDestroy=[],this.stepByStepAnimateSpeed=null,(e=e||null)?(r=e.views,e=e.agents,this.demo={playerCount:e.length,logo:\"logo.png\",overlayAlpha:.2,agents:e,frames:r},this.demo.agents.forEach((function(e){e.color=t.playerColors[e.index]}))):this.demo=void 0}var e,r,o;return e=t,o=[{key:\"requirements\",get:function(){return{PIXI:\"PIXI4\"}}},{key:\"VERSION\",get:function(){return 2}},{key:\"WIDTH\",get:function(){return er}},{key:\"HEIGHT\",get:function(){return rr}},{key:\"getGameRatio\",value:function(){return t.WIDTH/t.HEIGHT}},{key:\"playerColors\",get:function(){return[\"#ff1d5c\",\"#22a1e4\",\"#ff8f16\",\"#6ac371\",\"#9975e2\",\"#3ac5ca\",\"#de6ddf\",\"#ff0000\"]}},{key:\"SDK_GAME\",get:function(){return!0}},{key:\"RenderTimeout\",get:function(){return\"localhost\"===window.location.hostname?1/0:2e4}}],(r=[{key:\"getDefaultOverSampling\",value:function(){return 2}},{key:\"handleModuleError\",value:function(t,e){l.push(new Tr(t,e)),console.error(e),l.push({message:'<Module \"'.concat(t,'\" disabled>\\n')}),delete this.modules[t]}},{key:\"instantiateModules\",value:function(){this.modules={};var t,e=function(t,e){var r,n,o,i,a=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return\"string\"==typeof t?Er(t,e):\"Map\"===(r=\"Object\"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Er(t,e):void 0}(t))||e&&t&&\"number\"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}(wr);try{for(e.s();!(t=e.n()).done;){var r=t.value;try{this.modules[r.name]=new r(n)}catch(t){this.handleModuleError(r.name,t)}}}catch(t){e.e(t)}finally{e.f()}}},{key:\"destroy\",value:function(){this.alreadyLoaded&&(this.renderer.destroy(),this.endCallback=null),this.destroyed=!0}},{key:\"destroyScene\",value:function(t){for(var e=0,r=ie.length;e<r;++e)ie[e].destroy(!0);ie=[]}},{key:\"getGameName\",value:function(){return\"LegendsOfCodeAndMagic\"}},{key:\"canSwapPlayers\",value:function(){return!1}},{key:\"addErrorListener\",value:function(t){l.listen(t)}},{key:\"getResources\",value:function(){return Object.assign({baseUrl:\"\",images:{},spines:{},sprites:[],fonts:[],others:[]},n)}},{key:\"getOptions\",value:function(){return Pr?Pr.map((function(t){return Dr({},t)})):[]}},{key:\"setDebug\",value:function(e){this.asyncRenderingTime=t.RenderTimeout}},{key:\"initPreload\",value:function(t,e,r,n,o){t.canvasWidth=n,t.canvasHeight=o,t.loaderProgress=new PIXI.Text(\"100\",{fontSize:.117*o||30,fontFamily:\"Lato\",fontWeight:\"900\",fill:\"white\",align:\"center\"}),t.loaderProgress.anchor.y=1,t.loaderProgress.anchor.x=1.3,t.progress=t.realProgress=r,t.loaderProgress.position.y=o,t.progressBar=new PIXI.Graphics,e.addChild(t.progressBar),e.addChild(t.loaderProgress)}},{key:\"preload\",value:function(t,e,r,n,o,i){t.progress=r}},{key:\"renderPreloadScene\",value:function(t,e){return e=Math.pow(.998,e),t.realProgress=e*t.realProgress+(1-e)*t.progress,t.loaderProgress.text=(100*t.realProgress).toFixed(0),t.loaderProgress.position.x=t.realProgress*t.canvasWidth,t.progressBar.clear(),t.progressBar.beginFill(0,1),t.progressBar.drawRect(0,0,t.canvasWidth*t.realProgress+1,t.canvasHeight),t.progressBar.endFill(),t.progressBar.beginFill(4146246,1),t.progressBar.drawRect(t.canvasWidth*t.realProgress,0,t.canvasWidth,t.canvasHeight),t.progressBar.endFill(),!0}},{key:\"initDefaultScene\",value:function(e,r,n,o){var i=new PIXI.Container;if(e.drawer=this,e.time=0,this.demo){if(this.demo.logo)try{(c=PIXI.Sprite.fromFrame(this.demo.logo)).position.set(t.WIDTH/2,t.HEIGHT/2),c.anchor.set(.5),c.baseScale=a(c.texture.width,c.texture.height,2*t.WIDTH/3,t.HEIGHT/2,0),i.addChild(c),e.logo=c}catch(r){l.push({cause:r,message:'Missing \"logo.png\" to complete replay.'}),e.logo=new PIXI.Container,e.logo.baseScale=1,i.addChild(e.logo),e.missingLogo=!0}var c=new PIXI.Graphics,u=(e.missingLogo||(c.beginFill(0,this.demo.overlayAlpha||0),c.drawRect(0,0,t.WIDTH+20,t.HEIGHT+20),c.endFill(),c.x-=10,c.y-=10),new PIXI.Container);try{this.initDefaultFrames(this.demo.playerCount,this.demo.frames,this.demo.agents),this.preconstructScene(this.scope,r,this.initWidth,this.initHeight),this.initScene(this.scope,u,this.frames,!0),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)}catch(r){l.push({cause:r,message:\"Cannot load demo, you might want to reset the demo\"})}e.demo=u,e.demotime=0,this.currentFrame=-1,r.addChild(u),r.addChild(c),r.addChild(i)}e.updateTime=0,e.frameTime=0}},{key:\"initDefaultFrames\",value:function(e,r,n){var o=this;(n=(this.instantiateModules(),this.playerInfo=n.map((function(t,e){return{name:t.name||\"Anonymous\",color:t.color?o.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:t.avatarTexture}})),this.instantiateModules(),this._frames=r.map((function(t){var e,r=(t=t.split(\"\\n\"))[0].split(\" \");try{e=JSON.parse(t.slice(1).join(\"\\n\"))}catch(t){e={}}return Dr(Dr({},e),{},{key:\"KEY_FRAME\"===r[0]})})).filter((function(t){return t.key})),this.parseGlobalData(this._frames[0].global),this.playerCount=e,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,this._frames[0].frame)).key=this._frames[0].key,this.frames.push(this.parseFrame(n,this.frames));for(var i=1;i<this._frames.length;++i)this.frames.push(this.parseFrame(this._frames[i],this.frames));this.asyncRenderingTime=t.RenderTimeout}},{key:\"renderDefaultScene\",value:function(t,e){if(e=Math.min(80,e),void 0===this.demo)return!1;this.currentFrame=this.currentFrameTemp||0,t.frameTime+=e,t.updateTime+=e,t.demotime+=e/1e3;var r=Math.max(0,Math.min(1,(t.demotime-1)/.5));t.logo&&(t.logo.alpha=r,t.logo.scale.x=t.logo.scale.y=(3-2*r)*t.logo.baseScale),!t.missingLogo&&1.5<t.demotime&&t.demotime<=2.2?(r=15*Math.max(0,1-(t.demotime-1.5)/.7),t.demo.x=(2*Math.random()-1)*r,t.demo.y=(2*Math.random()-1)*r):t.demo.x=t.demo.y=0,r=this.getFrameDuration(this.currentFrame);return 30<=t.updateTime&&(t.updateTime-=30,0===this.currentFrame?this.progress=1:this.progress=i(0,r,t.frameTime),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)),t.frameTime>=r&&(t.frameTime-=r,this.currentFrame=(this.currentFrame+1)%this.frames.length),this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],e,!0),this.currentFrameTemp=this.currentFrame,this.currentFrame=-1,!0}},{key:\"endDefaultScene\",value:function(t,e){return!0}},{key:\"parseGlobalData\",value:function(t){for(var e in this.modules){var r=this.modules[e];\"function\"==typeof r.handleGlobalData&&r.handleGlobalData(this.playerInfo,t[e])}}},{key:\"parseFrame\",value:function(t,e){var r,n={data:{},frameInfo:{number:e.length}};if(n.previous=e[e.length-1]||n,n!==n.previous&&(n.previous.next=n),!t.key)return n.previous;for(r in t.duration&&(this.currentFrameDuration=t.duration),n.frameInfo.frameDuration=this.currentFrameDuration,n===n.previous?(n.frameInfo.date=0,n.frameInfo.frameDuration=0):n.frameInfo.date=n.previous.frameInfo.date+n.previous.frameInfo.frameDuration,this.modules){var o=this.modules[r];\"function\"==typeof o.handleFrameData&&(n.data[r]=o.handleFrameData(n.frameInfo,t[r]))}return n}},{key:\"preconstructScene\",value:function(e,r,n,o){e.canvasHeight=o,e.canvasWidth=n,e.time=0,e.endTime=0,e.playerInfo=this.playerInfo,r.scale.x=n/t.WIDTH,r.scale.y=o/t.HEIGHT}},{key:\"initScene\",value:function(t,e,r){for(var n in this.modules){var o=this.modules[n],i=new PIXI.Container;try{o.reinitScene(i,{width:t.canvasWidth,height:t.canvasHeight,oversampling:this.oversampling})}catch(t){this.handleModuleError(n,t)}e.addChild(i)}}},{key:\"updateScene\",value:function(t,e,r,n,o,i,a,c,u){var s,l=r[n];if(!u&&this.stepByStepAnimateSpeed){if(this.checkSteppedToNextFrame(t,l,o))return void this.startAsynchronousAnimation(t,l);if(this.checkSteppedToPreviousFrame(t,l,o))return void this.startAsynchronousAnimation(t,t.currentFrame,!0);t.targetProgress=null}for(s in t.currentFrame=l,t.currentProgress=o,t.reason=a,this.modules){var f=this.modules[s];if(l.data.hasOwnProperty(s))try{f.updateScene(l.previous.data[s],l.data[s],o,i)}catch(t){this.handleModuleError(s,t)}}}},{key:\"startAsynchronousAnimation\",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t.targetProgress=r?0:1,r||1!==t.currentProgress||(t.currentProgress=0),t.currentFrame=e,t.reverseAsynchronousAnimation=r}},{key:\"checkStepped\",value:function(t,e,r){return t.currentFrame&&0===this.speed&&1===r}},{key:\"checkSteppedToNextFrame\",value:function(t,e,r){return this.checkStepped(t,e,r)&&(t.currentFrame===e.previous&&t.currentFrame!==e||t.currentFrame===e&&t.currentProgress!==r)}},{key:\"checkSteppedToPreviousFrame\",value:function(t,e,r){return this.checkStepped(t,e,r)&&t.currentFrame.previous===e&&t.currentFrame!==e}},{key:\"initEndScene\",value:function(t,e){t.endSceneViewed=!1}},{key:\"destroyEndScene\",value:function(t){}},{key:\"renderEndScene\",value:function(t,e,r){0===t.endTime&&this.initEndScene(t,r),t.endTime+=e,void 0<=t.endTime&&!t.endSceneViewed&&(this.endCallback&&this.endCallback(),t.endSceneViewed=!0)}},{key:\"renderScene\",value:function(t,e,r,n,o,i,a,c){var u,s;for(s in c=Math.min(80,c),this.debugMode||n!==r.length-1||1!==o?(0<t.endTime&&this.destroyEndScene(t),t.endTime=0):this.renderEndScene(t,c,\"Win\"!==a),this.stepByStepAnimateSpeed&&this.isAsynchronousAnimationOngoing(t)&&(n=this.currentFrame,t.reverseAsynchronousAnimation&&n++,r=c/200*this.getFrameSpeed(n)*this.stepByStepAnimateSpeed,t.reverseAsynchronousAnimation?(u=t.currentProgress-r)<=0&&(n=this.currentFrame,t.targetProgress=u=1):(u=t.currentProgress+r,u=Math.min(t.targetProgress,u)),this.updateScene(this.scope,this.question,this.frames,n,u,this.speed,this.reasons[n],!1,!0)),this.modules){var l=this.modules[s];if(\"function\"==typeof l.animateScene)try{l.animateScene(c)}catch(t){this.handleModuleError(s,t)}}return!0}},{key:\"isAsynchronousAnimationOngoing\",value:function(t){return null!=t.targetProgress&&t.currentProgress!==t.targetProgress}},{key:\"getFrameSpeed\",value:function(t){return 500/this.getFrameDuration(t)}},{key:\"getFrameDuration\",value:function(t){return this.frames&&this.frames[t]&&this.frames[t].frameInfo.frameDuration||1e3}},{key:\"enableAsyncRendering\",value:function(e){this.asyncRendering=e,this.asyncRenderingTime=t.RenderTimeout}},{key:\"purge\",value:function(){this.scope={},this.changed=!0,this.container.interactiveChildren=!1,this.container.destroy({texture:!1,children:!0}),delete this.container,this.container=new PIXI.Container}},{key:\"reinitScene\",value:function(){1<=this.loaded&&(this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.preconstructScene(this.scope,this.container,this.initWidth,this.initHeight),this.initScene(this.scope,this.container,this.frames),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame]),this.changed=!0)}},{key:\"reinitDefaultScene\",value:function(){1<=this.loaded&&(this.intro=!0,this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initDefaultScene(this.scope,this.container,this.initWidth,this.initHeight),this.changed=!0)}},{key:\"reinitLoadingScene\",value:function(){this.loaded<1&&(this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initPreload(this.scope,this.container,this.loaded,this.initWidth,this.initHeight))}},{key:\"reinit\",value:function(t){1<=this.loaded&&!this.loading?0<=this.currentFrame&&!this.intro?this.reinitScene():this.intro&&!t||this.reinitDefaultScene():this.reinitLoadingScene()}},{key:\"animate\",value:function(t){var e;this.destroyed||(this.lastRenderTime||(this.lastRenderTime=t),e=t-this.lastRenderTime,this.asynchronousStep&&(e=this.asynchronousStep),this.onBeforeRender&&this.onBeforeRender(),this.loading||(this.loaded<1?this.changed|=this.renderPreloadScene(this.scope,e):(this.changed||this.asyncRendering&&0<this.asyncRenderingTime||this.isAsynchronousAnimationOngoing(this.scope))&&(this.currentFrame<0?this.changed|=this.renderDefaultScene(this.scope,e):this.intro?(this.changed=!0,this.endDefaultScene(this.scope,e)&&(this.intro=!1,this.reinit(!0))):this.changed|=this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame],e)),this.changed&&(this.renderer.render(this.container),this.changed=!1)),this.onAfterRender&&this.onAfterRender(),this.lastRenderTime=t,this.destroyed||requestAnimationFrame(this.animate.bind(this)),this.asyncRenderingTime-=e)}},{key:\"_initFrames\",value:function(t,e){this.instantiateModules(),this._frames=e.map((function(t){var e,r=t[0].split(\" \");try{e=JSON.parse(t.slice(1).join(\"\\n\"))}catch(t){e={}}return Dr(Dr({},e),{},{key:\"KEY_FRAME\"===r[0]})})),this.parseGlobalData(this._frames[0].global),this.playerCount=t,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,(e=this._frames[0].frame).key=this._frames[0].key,this.frames.push(this.parseFrame(e,this.frames));for(var r=1;r<this._frames.length;++r)this.frames.push(this.parseFrame(this._frames[r],this.frames))}},{key:\"isTurnBasedGame\",value:function(){return!1}},{key:\"initFrames\",value:function(t,e){function r(){n._initFrames(e.length,t),n.loading=!1,n.reinit(!1),i=!0}this.playerInfo&&this.playerInfo.forEach((function(t){t.avatar&&t.avatar.destroy(!0)}));var n=this,o=new PIXI.loaders.Loader(window.location.origin),i=(this.playerInfo=e.map((function(t,e){var r={name:t.name||\"Anonymous\",color:t.color?n.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:null};return null!=t.avatar&&o.add(\"avatar\"+e,t.avatar,{loadType:2,crossOrigin:!0},(function(t){r.avatar=t.texture,PIXI.Texture.addToCache(t.texture,\"$\"+r.index)})),r})),!(this.loading=!0));o.on(\"complete\",r),o.on(\"error\",(function(t){console.warn(t),i||r()})),o.load()}},{key:\"update\",value:function(e,r,n){0<=this.currentFrame&&(this.asyncRenderingTime=t.RenderTimeout,this.changed=!0,this.speed=n,this.currentFrame=e,this.progress=r,1<=this.loaded)&&!this.intro&&this.updateScene(this.scope,this.question,this.frames,e,r,this.speed,this.reasons[this.currentFrame])}},{key:\"parseColor\",value:function(t){if(Array.isArray(t)){for(var e=[],r=0;r<t.length;++r)e.push(this.parseColor(t[r]));return e}return parseInt(t.substring(1),16)}},{key:\"init\",value:function(e,r,n,o,i,a,c){function u(){0<=f.currentFrame&&(f.changed=!0)}var s,f=this,p=(window.PIXI=t.PIXI||window.PIXI,this.oversampling=i||1,this.canvas=$(e),this.canvas.off(\"mousemove\"),this.canvas.off(\"wheel\"),this.canvas.bind(\"wheel\",u),this.canvas.mousemove(u),o&&(this.colors=this.parseColor(o)),\"ide\"===c&&(this.debugModeSetByUser||(this.debugMode=!0),l.listen((function(t){return console.error(t.cause||t)}))),this.asyncRendering=!0,this.asyncRenderingTime=0,this.destroyed=!1,this.asynchronousStep=null,this);if(this.initWidth=0|r,this.initHeight=0|n,this.endCallback=a||this.endCallback,this.alreadyLoaded)this.changed=!0,this.renderer.resize(this.initWidth,this.initHeight),this.reinit(!0);else{this.alreadyLoaded=!0,this.question=null,this.scope=null,this.currentFrame=-1,this.loaded=0,this.container=new PIXI.Container;var h,y=this.getResources(),d=(this.renderer=this.createRenderer(this.initWidth,this.initHeight,e),i=this.renderer,oe=i,new PIXI.loaders.Loader(y.baseUrl));for(s in y.images)d.add(s,y.images[s],{crossOrigin:!0});for(h=0;h<y.sprites.length;++h)d.add(y.sprites[h],{crossOrigin:!0});for(h=0;h<y.fonts.length;++h)d.add(y.fonts[h],{crossOrigin:!0});for(s in y.spines)d.add(s,y.spines[s],{crossOrigin:!0});for(h=0;h<y.others.length;++h)d.add(y.others[h],{crossOrigin:!0});this.demo&&this.demo.agents.forEach((function(t){d.add(\"avatar\"+t.index,t.avatar,{loadType:2,crossOrigin:!0},(function(e){t.avatarTexture=e.texture,PIXI.Texture.addToCache(e.texture,\"$\"+t.index)}))})),p.scope={},o=function(t,e){requestAnimationFrame(p.animate.bind(p)),p.initPreload(p.scope,p.container,p.loaded=0,p.initWidth,p.initHeight)},d.on(\"start\",o),d.on(\"progress\",(function(t,e){t.progress<100&&p.preload(p.scope,p.container,p.loaded=t.progress/100,p.initWidth,p.initHeight,e)})),c=function(){for(var t in y.images)y.images.hasOwnProperty(t)&&d.resources[t].texture&&PIXI.Texture.addToCache(d.resources[t].texture,t);for(t in y.spines)y.spines.hasOwnProperty(t)&&(PIXI.AnimCache[t]=PIXI.AnimCache[y.baseUrl+y.spines[t]]);p.loaded=1,p.reinit(!0),p.changed=!0},d.on(\"complete\",c),d.on(\"error\",(function(t){console.warn(t)})),Object.keys(d.resources).length?d.load():(o(),c())}}},{key:\"createRenderer\",value:function(t,e,r){return PIXI.autoDetectRenderer(t,e,{view:r,clearBeforeRender:!0,preserveDrawingBuffer:!1})}},{key:\"isReady\",value:function(){return 1<=this.loaded}}])&&_r(e.prototype,r),o&&_r(e,o),Object.defineProperty(e,\"prototype\",{writable:!1}),t}()}]).Drawer;",
      "levelParams": {
        "0": {
          "aiCode": "import java.util.*;\n\n/**\n * AI description\n * Construction phase:\n * - pick random card\n * Game phase:\n * - while there are onboard friendly creatures and inhand green items with cost less then current mana\n *      use random green item to a random friendly creature\n * - each creature attacks one randomly chosen available target\n * - if there are guards - target is chosen among them, otherwise it is any opponent creature or -1\n * - while there are inhand creatures with cost less then current mana summons random such creature\n * - while there are inhand red/blue items with cost less then current mana choose randomly one of them\n *      you can choose red item only if there are enemy creatures onboard - then use it on a random such creature\n *      for blue items there is 50% probability you hit face, otherwise like red items\n */\nclass Player {\n    private static class SimplifiedState {\n        public HashMap<Integer, Integer> IdToCostMap = new HashMap<>();\n        public ArrayList<Integer> HandCardsBaseIds = new ArrayList<>();\n        public ArrayList<Integer> HandCreaturesIds = new ArrayList<>();\n        public ArrayList<Integer> HandGreenItemsIds = new ArrayList<>();\n        public ArrayList<Integer> HandRedItemsIds = new ArrayList<>();\n        public ArrayList<Integer> HandBlueItemsIds = new ArrayList<>();\n        public ArrayList<Integer> CanAttackIds = new ArrayList<>();\n        public ArrayList<Integer> GuardTargetIds = new ArrayList<>();\n        public ArrayList<Integer> NonGuardTargetIds = new ArrayList<>();\n        public ArrayList<Integer> FriendlyIds = new ArrayList<>();\n        public ArrayList<Integer> TargetCreaturesIds = new ArrayList<>();\n        public HashMap<Integer, Integer> AnyCreatureToLane = new HashMap<>();\n\n        public int Mana;\n\n        SimplifiedState(Scanner scanner) { // Warning: System.err.println from the class goes to Main error channel, and are not cached by the codingame\n            NonGuardTargetIds.add(-1);\n\n            int playerHealth = scanner.nextInt();\n            Mana = scanner.nextInt();\n            int playerDeck = scanner.nextInt();\n            int playerDraw = scanner.nextInt();\n            int oppHealth = scanner.nextInt();\n            int oppMana = scanner.nextInt();\n            int oppDeck = scanner.nextInt();\n            int oppDraw = scanner.nextInt();\n            //System.err.format(\"my deck: %d, opp deck: %d\\n\", playerDeck, oppDeck);\n            //System.err.format(\"my draw: %d, opp draw: %d\\n\", playerDraw, oppDraw);\n            int opponentHand = scanner.nextInt();\n            int opponentActions = scanner.nextInt();\n            //System.err.format(\"oppA - \" + opponentActions + \"\\n\");\n            if (scanner.hasNextLine())\n                scanner.nextLine();\n            for (int i = 0; i < opponentActions; i++) {\n                String cardNumberAndAction = scanner.nextLine();\n                //System.err.format(\"OPPACTION: %s\\n\", cardNumberAndAction);\n            }\n            int cardCount = scanner.nextInt();\n            for (int i = 0; i < cardCount; i++) {\n                int cardName = scanner.nextInt();\n                int instanceId = scanner.nextInt();\n                int location = scanner.nextInt();\n                int type = scanner.nextInt();\n                int cost = scanner.nextInt();\n                int attack = scanner.nextInt();\n                int defense = scanner.nextInt();\n                String abilities = scanner.next();\n                int myHealthChange = scanner.nextInt();\n                int opponentHealthChange = scanner.nextInt();\n                int cardDraw = scanner.nextInt();\n                int area = scanner.nextInt();\n                int lane = scanner.nextInt();\n                //System.err.format(\"CARD %d (#%d) // lane=%d\\n\", instanceId, cardName, lane);\n\n                if (location == 0) { // hand\n                    IdToCostMap.put(instanceId, cost);\n                    HandCardsBaseIds.add(cardName);\n                    if (type == 0) // card is creature\n                        HandCreaturesIds.add(instanceId);\n                    else if (type == 1) // card is a green item\n                        HandGreenItemsIds.add(instanceId);\n                    else if (type == 2) // card is a red item\n                        HandRedItemsIds.add(instanceId);\n                    else if (type == 3) // card is a blue item\n                        HandBlueItemsIds.add(instanceId);\n                }\n                if (location == 1) { // board\n                    AnyCreatureToLane.put(instanceId, lane);\n                    FriendlyIds.add(instanceId);\n                    CanAttackIds.add(instanceId);\n                }\n                if (location == -1) { // opponent board\n                    AnyCreatureToLane.put(instanceId, lane);\n                    TargetCreaturesIds.add(instanceId);\n                    if (abilities.charAt(3) == 'G')\n                        GuardTargetIds.add(instanceId);\n                    else\n                        NonGuardTargetIds.add(instanceId);\n                }\n            }\n        }\n    }\n\n    private static String constructionPhase(Random random, Scanner scanner) {\n        SimplifiedState constructionState = new SimplifiedState(scanner);\n\n        int candidates = constructionState.HandCreaturesIds.size() + constructionState.HandGreenItemsIds.size() +\n                constructionState.HandRedItemsIds.size() + constructionState.HandBlueItemsIds.size();\n        int[] countTimesChosen = new int[candidates];\n        for (int i = 0; i < 30; i++) {\n            int c;\n            do {\n                c = random.nextInt(candidates);\n            } while (countTimesChosen[c] >= 2);\n            countTimesChosen[c]++;\n        }\n\n        List<String> commands = new ArrayList<>();\n        for (int c = 0; c < candidates; c++)\n            for (int i = 0; i < countTimesChosen[c]; i++)\n                commands.add(\"CHOOSE \" + constructionState.HandCardsBaseIds.get(c));\n        return String.join(\" ; \", commands);\n    }\n\n    public static void main(String[] args) {\n        Random random = new Random();\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(constructionPhase(random, scanner));\n\n        while (true) {\n            SimplifiedState state = new SimplifiedState(scanner);\n            StringBuilder sb = new StringBuilder();\n            sb.append(\"; \");\n            boolean fullbonus = state.Mana == 13;\n\n            // green items phase\n            while (true) {\n                state.HandGreenItemsIds.removeIf(c -> state.IdToCostMap.get(c) > state.Mana);\n                System.err.println(String.format(\"GreenItems phase: %d items can be used on %d creatures.\", state.HandGreenItemsIds.size(), state.FriendlyIds.size()));\n                if (state.HandGreenItemsIds.isEmpty() || state.FriendlyIds.isEmpty())\n                    break;\n\n                Integer id = state.HandGreenItemsIds.get(random.nextInt(state.HandGreenItemsIds.size()));\n                state.HandGreenItemsIds.remove(id);\n                state.Mana -= state.IdToCostMap.get(id);\n                int idt = state.FriendlyIds.get(random.nextInt(state.FriendlyIds.size()));\n                sb.append(String.format(\"USE %d %d; \", id, idt));\n            }\n\n            // attack phase\n            List<Integer> targets = state.GuardTargetIds.isEmpty() ? state.NonGuardTargetIds : state.GuardTargetIds;\n            System.err.println(String.format(\"Attack phase: %d creatures can attack %d targets.\", state.CanAttackIds.size(), targets.size()));\n            while (!state.CanAttackIds.isEmpty()) {\n                Integer ida = state.CanAttackIds.get(random.nextInt(state.CanAttackIds.size()));\n                state.CanAttackIds.remove(ida);\n\n                int idt = targets.get(random.nextInt(targets.size()));\n                sb.append(String.format(\"ATTACK %d %d att; \", ida, idt));\n            }\n\n            // summon phase\n            while (true) {\n                state.HandCreaturesIds.removeIf(c -> state.IdToCostMap.get(c) > state.Mana);\n                System.err.println(String.format(\"Summon phase: %d creatures can be summoned with mana limit %d.\", state.HandCreaturesIds.size(), state.Mana));\n                if (state.HandCreaturesIds.isEmpty())\n                    break;\n\n                Integer id = state.HandCreaturesIds.get(random.nextInt(state.HandCreaturesIds.size()));\n                state.HandCreaturesIds.remove(id);\n                state.Mana -= state.IdToCostMap.get(id);\n                sb.append(String.format(\"SUMMON %d %d; \", id, random.nextInt(2)));\n            }\n\n            // red/blue items phase\n            while (true) {\n                state.HandRedItemsIds.removeIf(c -> state.IdToCostMap.get(c) > state.Mana);\n                state.HandBlueItemsIds.removeIf(c -> state.IdToCostMap.get(c) > state.Mana);\n                System.err.println(String.format(\"RedBlueItems phase: %d red items and %d blue items can be used on %d creatures (+player).\", state.HandRedItemsIds.size(), state.HandBlueItemsIds.size(), state.TargetCreaturesIds.size()));\n\n                if (state.TargetCreaturesIds.size() == 0)\n                    state.HandRedItemsIds.clear();\n\n                if (state.HandRedItemsIds.isEmpty() && state.HandBlueItemsIds.isEmpty())\n                    break;\n\n                int num = random.nextInt(state.HandRedItemsIds.size() + state.HandBlueItemsIds.size());\n                if (num < state.HandRedItemsIds.size()) { // red item use\n                    Integer id = state.HandRedItemsIds.get(num);\n                    state.HandRedItemsIds.remove(id);\n                    state.Mana -= state.IdToCostMap.get(id);\n                    int idt = state.TargetCreaturesIds.get(random.nextInt(state.TargetCreaturesIds.size()));\n                    sb.append(String.format(\"USE %d %d use; \", id, idt));\n                } else { // blue item use\n                    Integer id = state.HandBlueItemsIds.get(num - state.HandRedItemsIds.size());\n                    state.HandBlueItemsIds.remove(id);\n                    state.Mana -= state.IdToCostMap.get(id);\n                    int idt = -1;\n                    if (random.nextInt(2) < 1 && state.TargetCreaturesIds.size() > 0) // 50% to creature target\n                        idt = state.TargetCreaturesIds.get(random.nextInt(state.TargetCreaturesIds.size()));\n                    sb.append(String.format(\"USE %d %d; \", id, idt));\n                }\n            }\n\n            //if (fullbonus)\n            System.out.println(sb.toString());\n            //else\n            //  System.out.println(\";\");\n        }\n    }\n}\n",
          "testCases": [],
          "maxPlayers": 2,
          "minPlayers": 2,
          "statements": {
            "1": "<div class=\"statement-body\">\n  <div style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:20px;margin-right:15px;margin-left:15px;margin-bottom:10px;text-align:left\">\n      <p style=\"text-align:center;font-weight:700;margin-bottom:6px\">\n        Constructed mode version\n      </p>\n      <span class=\"statement-league-alert-content\">\n        In this version, we further extend <a href=\"https://www.codingame.com/multiplayer/bot-programming/legends-of-code-magic\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LOCM 1.0</a> and <a href=\"https://www.codingame.com/contribute/view/162759566f5a132f64b4de78ed637a2f309a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LOCM 1.2</a> by completely revamping the way players are building decks.\n        <br>\n        <br>\n        Instead of choosing one card from each of 30 sets, now a new, bigger set of <const>120</const> cards is generated every game. And player gets to freely build his deck out of the presented cards.\n        <br>\n        <br>\n        Additionally, <const>Area</const> effect has been added.\n      </span>\n  </div>\n      \n  <div class=\"statement-section statement-goal\">\n    <h2>\n      <span class=\"icon icon-goal\">&nbsp;</span>\n      <span>The Goal</span>\n    </h2>\n    <div class=\"statement-goal-content\">\n      Construct a deck of cards, battle an opponent with those cards and reduce their Health Points (HP) from 30 to 0. \n    </div>\n  </div>\n\n\n  <div class=\"statement-section statement-rules\">\n    <h2>\n      <span class=\"icon icon-rules\">&nbsp;</span>\n      <span>Rules</span>\n    </h2>\n    <div class=\"statement-rules-content\"> \n      This game is a two-player card game which is played in two phases: the <const>Constructed</const> phase and the <const>Battle</const> phase.\n        <ul style=\"padding-bottom:0\">\n          <li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              During the <const>Constructed</const> phase, both players must create a deck of <const>30</const> cards.\n            </span>\n          </li><li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              Once the <const>Constructed</const> phase is over, both decks are shuffled.\n            </span>\n          </li><li>\n            During the <const>Battle</const>, the board is divided in two parts: each player plays cards from their hand on their side of the board.\n          </li><li>\n            Each player starts with <const>30</const> HP. Some cards can increase this number.\n          </li><li>\n            To reduce the health points of an opponent, the player must make use of cards to deal <strong>damage</strong>.\n          </li>\n        </ul>\n\n      <h2 style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); margin-top:30px\">\n        <span class=\"icon icon-example\">&nbsp;</span>\n        <span>Constructed Phase</span>\n      </h2>\n      <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding-bottom:0\">\n        <li>\n          Each player is presented with <const>120</const> cards. From them, each player chooses <const>30</const> cards for their deck.\n        </li><li>\n          Each card can be chosen by each of the players up to <const>2</const> times. Players will receive copies of that card, each with its own <var>instanceId</var>.\n        </li><li>\n          By default, the <action>PASS</action> command will pick the first still available card.\n        </li>\n      </ul>\n\n\n      <h2 style=\"margin-top:30px\">\n        <span class=\"icon icon-example\">&nbsp;</span>\n        <span>Battle Phase</span>\n      </h2>\n      <br><strong>Card Draw</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          First player starts with <const>4</const> cards in hand whereas the second player starts with <const>5</const>.\n        </li><li>\n          Each turn, the active player draws one additional card from their deck.\n        </li><li>\n          Some cards can make players draw additional cards at the beginning of the next turn when played.\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            Player draws an additional card for every <const>5</const> HP lost due to opponent dealing damage to player in last round.\n          </span>\n        </li>\n      </ul>\n\n      <br><strong>Mana</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          Mana is necessary to play cards from the hand.\n        </li><li>\n          The first player starts with <const>1 max mana</const>, the second with <const>2 max mana</const>.\n        </li><li>\n          Each player can spend as much mana per turn as they have max mana.\n        </li><li>\n          The second player receives his <const>+1 max mana bonus</const> until he spends all his mana during a turn.\n        </li><li>\n          Each turn, the active player is granted one additional max mana, unless they already have <const>12</const> max mana (<const>13</const> for the second player who didn't spend his bonus).\n        </li>\n      </ul>\n\n      <h2 style=\"margin-top:30px\">\n        <span class=\"icon icon-example\">&nbsp;</span>\n        <span>Card Types</span>\n      </h2>\n        There are two different types of cards: <const>Creatures</const> and <const>Items</const>.\n      <br>\n      <br>\n      <strong>Creatures</strong><br>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          Placing a creature card from the hand to the board is called <b>summoning</b>.<br>\n          A player summons <const>creatures</const> to their side of the board by paying their cost in <strong>mana</strong>.\n          They are used to attack the opponent and also serve as a defense against the creatures of the opposing player.\n        </li><li>\n          Creatures have a cost in mana, attack points and defense points.\n          Some creatures start with certain abilities.\n        </li><li>\n          By default, creatures can't attack the turn they are summoned. They can attack once per turn only.\n        </li><li>\n          When a creature attacks another one, they both deal <strong>damage</strong> equals to their attack to the defense of the other creature. When a creature attacks the opponent, it deals <strong>damage</strong> equals to its attack to the HP of the opponent.\n        </li><li> \n          Creatures are removed from play when their defense reaches <const>0</const> or less.\n        </li><li>\n          Creatures can have an effect on the player's health, the opponent's health or the card draw of the player when played.\n        </li><li>\n          Creatures can be placed on one of two lanes. Creatures on different lanes can not interact with each other.\n        </li><li>\n          Creatures can have different abilities:\n          <ul style=\"padding-top:0;padding-bottom:0\">\n            <li>\n              <const>Breakthrough</const>: Creatures with Breakthrough can deal extra <strong>damage</strong> to the opponent when they attack enemy creatures. If their attack <strong>damage</strong> is greater than the defending creature's defense, the excess <strong>damage</strong> is dealt to the opponent.\n            </li><li>\n              <const>Charge</const>: Creatures with Charge can attack the turn they are summoned.\n            </li><li>\n              <const>Drain</const>: Creatures with Drain heal the player of the amount of the <strong>damage</strong> they deal (when attacking only).\n            </li><li style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n              <const>Guard</const>: Enemy creatures from the same lane must attack creatures with Guard first.\n            </li><li>\n              <const>Lethal</const>: Creatures with Lethal kill the creatures they deal <strong>damage</strong> to.\n            </li><li>\n              <const>Ward</const>: Creatures with Ward ignore once the next <strong>damage</strong> they would receive from any source. The \"shield\" given by the Ward ability is then lost.\n          </ul>\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            Single card with <const>Area</const> effect can summon multiple copies with single summon:\n          </span>\n          <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding-top:0;padding-bottom:0\">\n            <li>\n              <const>Target</const>: During summoning a single copy of that creature is created.\n            </li><li>\n              <const>Lane1</const>: During summoning creature is cloned, and additional copy appears on the <strong>same</strong> lane (if there is free space).\n            </li><li>\n              <const>Lane2</const>: During summoning creature is cloned, and additional copy appears on the <strong>other</strong> lane (if there is free space).\n            </li>\n          </ul>\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            Effects of <var>myHealthChange</var>, <var>opponentHealthChange</var> and <var>cardDraw</var> are applied for every clone of creature summoned. \n          </span>\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            The main summon gets ID of the original card, while additional copies are given IDs following ID of the original card. For example, if the player uses the command \"SUMMON 5 1\" on a card with <const>Lane2</const> effect, the game will summon the creature with ID 5 on lane 1 and the creature with ID 6 on lane 0.\n          </span>\n        </li>\n      </ul>\n\n\n      <div>\n        <strong>Items</strong><br>\n        <br>\n        <ul style=\"padding-top:0;padding-bottom:0\">\n          <li>\n            When played, <const>items</const> have an immediate and permanent effect on the board or on the players. They are then removed from play.\n          </li><li>\n            Items have a cost in mana and one or multiple effects out of the following:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                Permanent modifier of a creature's attack and/or defense characteristics. Example: +0/+2 or -1/-1.\n              </li><li>\n                The addition or removal of one or more abilities to one creature.\n              </li><li>\n                Additional card draw the next turn they're played.\n              </li><li>\n                Health gain for the player or health loss for the opponent.\n              </li>\n            </ul>\n          </li><li>\n            There are three types of <const>items</const>:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                <const>Green items</const> should target the active player's creatures. They have a positive effect on them.\n              </li><li>\n                <const>Red items</const> should target the opponent's creatures. They have a negative effect on them.\n              </li><li>\n                <const>Blue items</const> can be played with the \"no creature\" target identifier (<const>-1</const>) to give the active player a positive effect or cause <strong>damage</strong> to the opponent, depending on the card. Blue items with negative defense points can also target enemy creatures.\n              </li>\n            </ul>\n          </li><li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              Items with <const>Area</const> effect have effect on multiple creatures:\n            </span>\n            <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding-bottom:0\">\n              <li>\n                <const>Target</const>: affects only target creature.\n              </li><li>\n                <const>Lane1</const>: affects all creatures on the same lane and side of board as the original target.\n              </li><li>\n                <const>Lane2</const>: affects all creatures on all lanes and same side of the board as the original target.\n              </li>\n            </ul>\n          </li><li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              Effects of <var>myHealthChange</var>, <var>opponentHealthChange</var> and <var>cardDraw</var> are applied for every creature affected by item. \n            </span>\n          </li>\n        </ul>\n      </div>\n      <h2 style=\"margin-top:30px\">\n          <span class=\"icon icon-example\">&nbsp;</span>\n          <span>Gameplay</span>\n      </h2>\n      <br><strong>Possible Actions</strong>\n      <ul style=\"padding-bottom:0\">\n        <li style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n          <action>SUMMON id lane</action> to summon the creature <const>id</const> from your hand to the lane <const>lane</const> (0 - left, 1 - right).\n        </li><li>\n          <action>ATTACK id1 id2</action> to attack creature <const>id2</const> with creature <const>id1</const> <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\"> that has to be on the same lane</span>.\n        </li><li>\n          <action>ATTACK id -1</action> to attack the opponent directly with creature <const>id</const>.\n        </li><li>\n          <action>USE id1 id2</action> to use item <const>id1</const> on creature <const>id2</const>.\n        </li><li>\n          <action>USE id -1</action> to use item <const>id</const>.\n        </li><li>\n          <action>PASS</action> to do nothing this turn.\n        </li>\n      </ul>\n      A player can do any number of valid actions during one turn. Actions must be separated by a semi-colon <action>;</action>.<br>\n      <br>\n      <strong>Game End</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          The game is over once any player reaches <const>0</const> or less HP.\n        </li>\n      </ul>\n\n    </div>\n  </div>\n          \n  <div class=\"statement-victory-conditions\">\n    <div class=\"icon victory\"></div>\n    <div class=\"blk\">\n      <div class=\"title\">Victory Conditions</div>\n      <div class=\"text\">\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Reduce your opponent Health Points (HP) from <const>30</const> to <const>0</const> or less.\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n          \n  <div class=\"statement-lose-conditions\">\n    <div class=\"icon lose\"></div>\n    <div class=\"blk\">\n      <div class=\"title\">Loss Conditions</div>\n      <div class=\"text\">\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Your HP gets reduced to <const>0</const> or less.\n          </li><li>\n            You do not respond in time or output an unrecognized command.\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <br>\n      \n  <div class=\"statement-section statement-expertrules\">\n    <h2>\n      <span class=\"icon icon-expertrules\">&nbsp;</span>\n      <span>Advanced Details</span>\n    </h2>\n    <div class=\"statement-expert-rules-content\">\n      <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n        You can see the game's source code on <a href=\"https://github.com/acatai/Strategy-Card-Game-AI-Competition\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/acatai/Strategy-Card-Game-AI-Competition</a>.\n      </span>\n      <br>\n      <br>\n      <strong>Constraints</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          If a player already has the maximum number of <const>8</const> cards in hand and must draw, the draw is cancelled.\n        </li><li>\n          <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n            If a player already has the maximum number of <const>3</const> creatures on a lane and tries summoning a new one on this lane, the summoning action is cancelled.\n          </span>\n        </li><li>\n          If a player tries to attack an untargetable target (wrong instance id or presence of other defensive creatures with Guard) with one of his creatures, the attack action is cancelled.\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            Once a player has played over <const>50</const> turns, they will take <const>10</const> damage each passing turn.\n          </span>\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            When player has empty deck and has to draw a card, then that player is dealt <const>10</const> damage.\n          </span>\n        </li>\n      </ul>\n      <strong>Abilities special cases</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          Giving an ability to a creature with that same ability has no effect.\n        </li><li>\n          Attacking a creature with Ward with a creature with Lethal does not kill the creature (since no <strong>damage</strong> is dealt to the creature).\n        </li><li>\n          Attacking a creature with Ward with a creature with Breakthrough never deals excess <strong>damage</strong> to the opponent (since no <strong>damage</strong> is dealt to the creature).\n        </li><li>\n          Attacking a creature with Ward with a creature with Drain does no heal the player (since no <strong>damage</strong> is dealt to the creature).\n        </li>\n      </ul>\n\n      <strong>Changes from <a href=\"https://www.codingame.com/contribute/view/162759566f5a132f64b4de78ed637a2f309a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">1.2 version</a></strong>\n      <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding-bottom:0\">\n        <li>\n          Replaced <const>Draw</const> phase with <const>Constructed</const> phase.\n        </li><li>\n          New ability <const>Area</const> has been added. It allows creatures to summon two copies at once, and items to affect several targets at once.\n        </li><li>\n          Runes have been completely removed.\n        </li><li>\n          Player gets to draw additional card for every <const>5</const> health lost in previous round.\n        </li><li>\n          Response time for Constructed round has been extended to <const>4000</const> ms.\n        </li>\n      </ul>\n\n      <strong>Changes from <a href=\"https://www.codingame.com/multiplayer/bot-programming/legends-of-code-magic\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">1.0 version</a></strong>\n      <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding-bottom:0\">\n        <li>\n          Creatures can now be placed on <const>two</const> lanes.\n        </li><li>\n          Number of creatures per lane has been limited to <const>3</const>.\n        </li><li>\n          Creature can only attack creature, if it is on the same lane.\n        </li><li>\n          <const>Guard</const> works only for creatures on the same lane.\n        </li><li>\n          Response time per Battle round has been extended to <const>200</const> ms.\n        </li><li>\n          All the changes from 1.2.\n        </li>\n      </ul>\n    </div>\n  </div>\n      \n  <div class=\"statement-section statement-protocol\">\n    <h2>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Game Input</span>\n    </h2>\n\n    <div class=\"blk\">\n      <div class=\"title\">Input for one game turn</div>\n      <div class=\"text\">\n        <span class=\"statement-lineno\">First 2 lines</span>: for each player, <var>playerHealth</var>, <var>playerMana</var>, <var>playerDeck</var> and <var>playerDraw</var>:\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Integer <var>playerHealth</var>: the remaining HP of the player.\n          </li><li>\n            Integer <var>playerMana</var>: the current maximum mana of the player.\n          </li><li>\n            Integer <var>playerDeck</var>: the number of cards in the player's deck.\n          </li><li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              ---- NO RUNES ---\n            </span>\n          </li><li>\n            Integer <var>playerDraw</var>:\n            the additional number of drawn cards - this turn draw for the player, next turn draw (without reward for damage received) for the opponent.\n          </li>\n        </ul>\n        The player's input comes first, the opponent's input comes second.<br>\n        <br>\n        During the Constructed phase, <var>playerMana</var> is always <const>0</const>.<br>\n        <br>\n\n        <span class=\"statement-lineno\">Next line</span>:\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Integer <var>opponentHand</var>, the total number of cards in the opponent's hand. These cards are hidden until they're played.\n          </li><li>\n            Integer <var>opponentActions</var>, the number of actions performed by the opponent during his last turn.\n          </li>\n        </ul>\n        <span class=\"statement-lineno\">Next <var>opponentActions</var> lines</span>: for each opponent's action, string <var>cardNumberAndAction</var> containing the <var>cardNumber</var> of the played card, followed by a space, followed by the action associated with this card (see <strong>Possible Actions</strong> section).<br>\n        <br>\n\n        <span class=\"statement-lineno\">Next line</span>: Integer <var>cardCount</var>: during the Battle phase, the total number of cards on the board and in the player's hand. During the Constructed phase, always <const>120</const>.\n        <br>\n        <br>\n\n        <span class=\"statement-lineno\">Next <var>cardCount</var> lines</span>: for each card, <var>cardNumber</var>, <var>instanceId</var>, <var>location</var>, <var>cardType</var>, <var>cost</var>, <var>attack</var>, <var>defense</var>, <var>abilities</var>, <var>myHealthChange</var>, <var>opponentHealthChange</var>, <var>cardDraw</var>, <var>area</var> and <var>lane</var>:\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Integer <var>cardNumber</var>: the identifier of a card.\n          </li><li>\n            Integer <var>instanceId</var>: the identifier representing the instance of the card (there can be multiple instances of the same card in a game).\n          </li><li>\n            Integer <var>location</var>, during the Battle phase: \n            <ul style=\"padding-bottom:0;padding-top:0;margin-bottom:10px\">\n              <li>\n                <const>0</const>: in the player's hand\n              </li><li>\n                <const>1</const>: on the player's side of the board\n              </li><li>\n                <const>-1</const>: on the opponent's side of the board\n              </li>\n            </ul>\n            Always <const>0</const> during the Constructed phase.\n          </li><li>\n            Integer <var>cardType</var>: \n            <ul style=\"padding-bottom:0;padding-top:0\">\n              <li>\n                <const>0</const>: Creature\n              </li><li>\n                <const>1</const>: Green item\n              </li><li>\n                <const>2</const>: Red item\n              </li><li>\n                <const>3</const>: Blue item\n              </li></ul>\n          </li><li>\n            Integer <var>cost</var>: the mana cost of the card,\n          </li><li> \n            Integer <var>attack</var>:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                Creature: its attack points\n              </li><li>\n                Item: its attack modifier\n              </li>\n            </ul>\n          </li><li> \n            Integer <var>defense</var>:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                Creature: its defense points\n              </li><li>\n                Item: its defense modifier. Negative values mean this causes damage.\n              </li>\n            </ul>\n          </li><li>\n            String <var>abilities</var> of size <const>6</const>: the abilities of a card. Each letter representing an ability (<const>B</const> for Breakthrough, <const>C</const> for Charge and <const>G</const> for Guard, <const>D</const> for Drain, <const>L</const> for Lethal and <const>W</const> for Ward).\n          </li><li>\n            Integer <var>myHealthChange</var>:\n            the health change for the player.\n          </li><li>\n            Integer <var>opponentHealthChange</var>:\n            the health change for the opponent.\n          </li><li>\n            Integer <var>cardDraw</var>:\n            the additional number of cards drawn next turn for the player.\n          </li><li>\n\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              Integer <var>area</var>:\n            </span>\n              <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding-bottom:0;padding-top:0\">\n                <li>\n                  <const>0</const>: Target\n                </li><li>\n                  <const>1</const>: Lane1\n                </li><li>\n                  <const>2</const>: Lane2\n                </li>\n              </ul>\n          </li><li style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n            Integer <var>lane</var>:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                Creature on board: 0 - left, 1 - right\n              </li><li>\n                Other: -1\n              </li>\n            </ul>\n          </li>\n        </ul>          \n      </div>\n    </div>\n    \n    <div class=\"blk\">\n      <div class=\"title\">\n        <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding:2px\">\n          Output for only game turn of the Constructed phase\n        </span>\n      </div>\n      <div class=\"text\">\n        <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding:2px\">\n          Series of <const>30</const> actions separated by semi-colon <action>;</action>:\n        </span>\n        <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding-bottom:0\">\n          <li>\n            <action>CHOOSE id</action> where <var>id</var> is id of chosen card.\n          </li><li>\n            <action>PASS</action> to do nothing (fills rest of the deck with subsequent available cards).\n          </li>\n        </ul>\n      </div>\n      <div class=\"title\">Output for one game turn of the Battle phase</div>\n      <div class=\"text\">\n        The available actions are:\n        <ul style=\"padding-bottom:0\">\n          <li>\n            <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n              <action>SUMMON <var>id</var> <var>lane</var></action> to summon the <const>creature</const> of instanceId <var>id</var> from the player's hand to the lane <var>lane</var> (0 - left, 1 - right).\n            </span>\n          </li><li>\n            <action>ATTACK <var>idAttacker</var> <var>idTarget</var></action> to attack an opposing creature or opposing player of instanceId <var>idTarget</var> with a creature on the board of instanceId <var>idAttacker</var>.<br>\n            <var>idTarget</var> can be the \"no-creature\" identifier <action>-1</action>. It is used to attack the opponent directly.\n          </li><li>\n            <action>USE <var>idCard</var> <var>idTarget</var></action> to use an <const>item</const> of instanceId <var>idCard</var> on a creature of instanceId <var>idTarget</var> or without a target with the \"no-creature\" identifier <action>-1</action>.\n          </li><li>\n            <action>PASS</action> to do nothing. \n          </li>\n        </ul>\n        Players may use several actions by using a semi-colon <action>;</action>. \n        <br>\n        Players may append text to each of their actions, it will be displayed in the viewer. <br> <br>\n        Example: <action>SUMMON 3 1;ATTACK 4 5 yolo; ATTACK 8 -1 no fear</action>.\n      </div>\n    </div>\n          \n    <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"text\">\n        <const>0</const>  <var>cost</var>  <const>12</const><br>\n        <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n          <const>0</const>  <b>creatures on each lane of the board (per player)</b>  <const>3</const><br>\n        </span>\n        <const>0</const>  <b>cards in hand</b>  <const>8</const><br>\n        <br>\n\n        <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n          Response time for the Constructed turn  <const>4000</const>ms<br>\n        </span>\n        Response time for the first Battle turn  <const>1000</const>ms<br>\n        <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n          Response time per turn  <const>200</const>ms<br>\n        </span>\n      </div>\n    </div>\n  </div>\n\n  <div style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );\n                    padding: 2px;\">\n    <p style=\"text-align:center\"><b>Acknowledgments</b></p>\n    <p>\n      Created as a part of the master's thesis <i><b>Developing New Track for Strategy Card Game AI Competition: Constructed Mode</b>, University of Wrocaw, 2022</i>\n      by <i><b>Krzysztof Bednarek</b></i> (<a target=\"_blank\" href=\"https://www.codingame.com/profile/db2e3f0916f9b0e74f4ae3971b2e6df0835705\">@Krzybe</a>).\n    </p>\n    <p>\n      Supervised by <i><b>Jakub Kowalski</b></i> (<a target=\"_blank\" href=\"https://www.codingame.com/profile/b528dd3b279d7578674a1129305918e0400484\">@aCat</a>)\n      and (informally) <i><b>Radosaw Miernik</b></i> (<a target=\"_blank\" href=\"https://www.codingame.com/profile/2b872a07bc65786f280864cadc2f635c0763881\">@radekmie</a>).\n    </p>\n    <p>\n      Part of the <b><i><a target=\"_blank\" href=\"https://legendsofcodeandmagic.com/\">Strategy Card Game AI Competition</a></i></b>\n      supported by <b><a target=\"_blank\" href=\"https://cis.ieee.org/\">IEEE CIS</a></b>.\n    </p>\n  </div>\n</div>",
            "2": "<div class=\"statement-body\">\n  <div style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:20px;margin-right:15px;margin-left:15px;margin-bottom:10px;text-align:left\">\n      <p style=\"text-align:center;font-weight:700;margin-bottom:6px\">\n        Constructed mode version\n      </p>\n      <span class=\"statement-league-alert-content\">\n        In this version, we further extend <a href=\"https://www.codingame.com/multiplayer/bot-programming/legends-of-code-magic\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LOCM 1.0</a> and <a href=\"https://www.codingame.com/contribute/view/162759566f5a132f64b4de78ed637a2f309a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LOCM 1.2</a> by completely revamping the way players are building decks.\n        <br>\n        <br>\n        Instead of choosing one card from each of 30 sets, now a new, bigger set of <const>120</const> cards is generated every game. And player gets to freely build his deck out of the presented cards.\n        <br>\n        <br>\n        Additionally, <const>Area</const> effect has been added.\n      </span>\n  </div>\n      \n  <div class=\"statement-section statement-goal\">\n    <h2>\n      <span class=\"icon icon-goal\">&nbsp;</span>\n      <span>The Goal</span>\n    </h2>\n    <div class=\"statement-goal-content\">\n      Construct a deck of cards, battle an opponent with those cards and reduce their Health Points (HP) from 30 to 0. \n    </div>\n  </div>\n\n\n  <div class=\"statement-section statement-rules\">\n    <h2>\n      <span class=\"icon icon-rules\">&nbsp;</span>\n      <span>Rules</span>\n    </h2>\n    <div class=\"statement-rules-content\"> \n      This game is a two-player card game which is played in two phases: the <const>Constructed</const> phase and the <const>Battle</const> phase.\n        <ul style=\"padding-bottom:0\">\n          <li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              During the <const>Constructed</const> phase, both players must create a deck of <const>30</const> cards.\n            </span>\n          </li><li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              Once the <const>Constructed</const> phase is over, both decks are shuffled.\n            </span>\n          </li><li>\n            During the <const>Battle</const>, the board is divided in two parts: each player plays cards from their hand on their side of the board.\n          </li><li>\n            Each player starts with <const>30</const> HP. Some cards can increase this number.\n          </li><li>\n            To reduce the health points of an opponent, the player must make use of cards to deal <strong>damage</strong>.\n          </li>\n        </ul>\n\n      <h2 style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); margin-top:30px\">\n        <span class=\"icon icon-example\">&nbsp;</span>\n        <span>Constructed Phase</span>\n      </h2>\n      <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding-bottom:0\">\n        <li>\n          Each player is presented with <const>120</const> cards. From them, each player chooses <const>30</const> cards for their deck.\n        </li><li>\n          Each card can be chosen by each of the players up to <const>2</const> times. Players will receive copies of that card, each with its own <var>instanceId</var>.\n        </li><li>\n          By default, the <action>PASS</action> command will pick the first still available card.\n        </li>\n      </ul>\n\n\n      <h2 style=\"margin-top:30px\">\n        <span class=\"icon icon-example\">&nbsp;</span>\n        <span>Battle Phase</span>\n      </h2>\n      <br><strong>Card Draw</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          First player starts with <const>4</const> cards in hand whereas the second player starts with <const>5</const>.\n        </li><li>\n          Each turn, the active player draws one additional card from their deck.\n        </li><li>\n          Some cards can make players draw additional cards at the beginning of the next turn when played.\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            Player draws an additional card for every <const>5</const> HP lost due to opponent dealing damage to player in last round.\n          </span>\n        </li>\n      </ul>\n\n      <br><strong>Mana</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          Mana is necessary to play cards from the hand.\n        </li><li>\n          The first player starts with <const>1 max mana</const>, the second with <const>2 max mana</const>.\n        </li><li>\n          Each player can spend as much mana per turn as they have max mana.\n        </li><li>\n          The second player receives his <const>+1 max mana bonus</const> until he spends all his mana during a turn.\n        </li><li>\n          Each turn, the active player is granted one additional max mana, unless they already have <const>12</const> max mana (<const>13</const> for the second player who didn't spend his bonus).\n        </li>\n      </ul>\n\n      <h2 style=\"margin-top:30px\">\n        <span class=\"icon icon-example\">&nbsp;</span>\n        <span>Card Types</span>\n      </h2>\n        There are two different types of cards: <const>Creatures</const> and <const>Items</const>.\n      <br>\n      <br>\n      <strong>Creatures</strong><br>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          Placing a creature card from the hand to the board is called <b>summoning</b>.<br>\n          A player summons <const>creatures</const> to their side of the board by paying their cost in <strong>mana</strong>.\n          They are used to attack the opponent and also serve as a defense against the creatures of the opposing player.\n        </li><li>\n          Creatures have a cost in mana, attack points and defense points.\n          Some creatures start with certain abilities.\n        </li><li>\n          By default, creatures can't attack the turn they are summoned. They can attack once per turn only.\n        </li><li>\n          When a creature attacks another one, they both deal <strong>damage</strong> equals to their attack to the defense of the other creature. When a creature attacks the opponent, it deals <strong>damage</strong> equals to its attack to the HP of the opponent.\n        </li><li> \n          Creatures are removed from play when their defense reaches <const>0</const> or less.\n        </li><li>\n          Creatures can have an effect on the player's health, the opponent's health or the card draw of the player when played.\n        </li><li>\n          Creatures can be placed on one of two lanes. Creatures on different lanes can not interact with each other.\n        </li><li>\n          Creatures can have different abilities:\n          <ul style=\"padding-top:0;padding-bottom:0\">\n            <li>\n              <const>Breakthrough</const>: Creatures with Breakthrough can deal extra <strong>damage</strong> to the opponent when they attack enemy creatures. If their attack <strong>damage</strong> is greater than the defending creature's defense, the excess <strong>damage</strong> is dealt to the opponent.\n            </li><li>\n              <const>Charge</const>: Creatures with Charge can attack the turn they are summoned.\n            </li><li>\n              <const>Drain</const>: Creatures with Drain heal the player of the amount of the <strong>damage</strong> they deal (when attacking only).\n            </li><li style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n              <const>Guard</const>: Enemy creatures from the same lane must attack creatures with Guard first.\n            </li><li>\n              <const>Lethal</const>: Creatures with Lethal kill the creatures they deal <strong>damage</strong> to.\n            </li><li>\n              <const>Ward</const>: Creatures with Ward ignore once the next <strong>damage</strong> they would receive from any source. The \"shield\" given by the Ward ability is then lost.\n          </ul>\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            Single card with <const>Area</const> effect can summon multiple copies with single summon:\n          </span>\n          <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding-top:0;padding-bottom:0\">\n            <li>\n              <const>Target</const>: During summoning a single copy of that creature is created.\n            </li><li>\n              <const>Lane1</const>: During summoning creature is cloned, and additional copy appears on the <strong>same</strong> lane (if there is free space).\n            </li><li>\n              <const>Lane2</const>: During summoning creature is cloned, and additional copy appears on the <strong>other</strong> lane (if there is free space).\n            </li>\n          </ul>\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            Effects of <var>myHealthChange</var>, <var>opponentHealthChange</var> and <var>cardDraw</var> are applied for every clone of creature summoned. \n          </span>\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            The main summon gets ID of the original card, while additional copies are given IDs following ID of the original card. For example, if the player uses the command \"SUMMON 5 1\" on a card with <const>Lane2</const> effect, the game will summon the creature with ID 5 on lane 1 and the creature with ID 6 on lane 0.\n          </span>\n        </li>\n      </ul>\n\n\n      <div>\n        <strong>Items</strong><br>\n        <br>\n        <ul style=\"padding-top:0;padding-bottom:0\">\n          <li>\n            When played, <const>items</const> have an immediate and permanent effect on the board or on the players. They are then removed from play.\n          </li><li>\n            Items have a cost in mana and one or multiple effects out of the following:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                Permanent modifier of a creature's attack and/or defense characteristics. Example: +0/+2 or -1/-1.\n              </li><li>\n                The addition or removal of one or more abilities to one creature.\n              </li><li>\n                Additional card draw the next turn they're played.\n              </li><li>\n                Health gain for the player or health loss for the opponent.\n              </li>\n            </ul>\n          </li><li>\n            There are three types of <const>items</const>:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                <const>Green items</const> should target the active player's creatures. They have a positive effect on them.\n              </li><li>\n                <const>Red items</const> should target the opponent's creatures. They have a negative effect on them.\n              </li><li>\n                <const>Blue items</const> can be played with the \"no creature\" target identifier (<const>-1</const>) to give the active player a positive effect or cause <strong>damage</strong> to the opponent, depending on the card. Blue items with negative defense points can also target enemy creatures.\n              </li>\n            </ul>\n          </li><li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              Items with <const>Area</const> effect have effect on multiple creatures:\n            </span>\n            <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding-bottom:0\">\n              <li>\n                <const>Target</const>: affects only target creature.\n              </li><li>\n                <const>Lane1</const>: affects all creatures on the same lane and side of board as the original target.\n              </li><li>\n                <const>Lane2</const>: affects all creatures on all lanes and same side of the board as the original target.\n              </li>\n            </ul>\n          </li><li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              Effects of <var>myHealthChange</var>, <var>opponentHealthChange</var> and <var>cardDraw</var> are applied for every creature affected by item. \n            </span>\n          </li>\n        </ul>\n      </div>\n      <h2 style=\"margin-top:30px\">\n          <span class=\"icon icon-example\">&nbsp;</span>\n          <span>Gameplay</span>\n      </h2>\n      <br><strong>Possible Actions</strong>\n      <ul style=\"padding-bottom:0\">\n        <li style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n          <action>SUMMON id lane</action> to summon the creature <const>id</const> from your hand to the lane <const>lane</const> (0 - left, 1 - right).\n        </li><li>\n          <action>ATTACK id1 id2</action> to attack creature <const>id2</const> with creature <const>id1</const> <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\"> that has to be on the same lane</span>.\n        </li><li>\n          <action>ATTACK id -1</action> to attack the opponent directly with creature <const>id</const>.\n        </li><li>\n          <action>USE id1 id2</action> to use item <const>id1</const> on creature <const>id2</const>.\n        </li><li>\n          <action>USE id -1</action> to use item <const>id</const>.\n        </li><li>\n          <action>PASS</action> to do nothing this turn.\n        </li>\n      </ul>\n      A player can do any number of valid actions during one turn. Actions must be separated by a semi-colon <action>;</action>.<br>\n      <br>\n      <strong>Game End</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          The game is over once any player reaches <const>0</const> or less HP.\n        </li>\n      </ul>\n\n    </div>\n  </div>\n          \n  <div class=\"statement-victory-conditions\">\n    <div class=\"icon victory\"></div>\n    <div class=\"blk\">\n      <div class=\"title\">Victory Conditions</div>\n      <div class=\"text\">\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Reduce your opponent Health Points (HP) from <const>30</const> to <const>0</const> or less.\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n          \n  <div class=\"statement-lose-conditions\">\n    <div class=\"icon lose\"></div>\n    <div class=\"blk\">\n      <div class=\"title\">Loss Conditions</div>\n      <div class=\"text\">\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Your HP gets reduced to <const>0</const> or less.\n          </li><li>\n            You do not respond in time or output an unrecognized command.\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <br>\n      \n  <div class=\"statement-section statement-expertrules\">\n    <h2>\n      <span class=\"icon icon-expertrules\">&nbsp;</span>\n      <span>Advanced Details</span>\n    </h2>\n    <div class=\"statement-expert-rules-content\">\n      <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n        You can see the game's source code on <a href=\"https://github.com/acatai/Strategy-Card-Game-AI-Competition\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/acatai/Strategy-Card-Game-AI-Competition</a>.\n      </span>\n      <br>\n      <br>\n      <strong>Constraints</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          If a player already has the maximum number of <const>8</const> cards in hand and must draw, the draw is cancelled.\n        </li><li>\n          <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n            If a player already has the maximum number of <const>3</const> creatures on a lane and tries summoning a new one on this lane, the summoning action is cancelled.\n          </span>\n        </li><li>\n          If a player tries to attack an untargetable target (wrong instance id or presence of other defensive creatures with Guard) with one of his creatures, the attack action is cancelled.\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            Once a player has played over <const>50</const> turns, they will take <const>10</const> damage each passing turn.\n          </span>\n        </li><li>\n          <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n            When player has empty deck and has to draw a card, then that player is dealt <const>10</const> damage.\n          </span>\n        </li>\n      </ul>\n      <strong>Abilities special cases</strong>\n      <ul style=\"padding-bottom:0\">\n        <li>\n          Giving an ability to a creature with that same ability has no effect.\n        </li><li>\n          Attacking a creature with Ward with a creature with Lethal does not kill the creature (since no <strong>damage</strong> is dealt to the creature).\n        </li><li>\n          Attacking a creature with Ward with a creature with Breakthrough never deals excess <strong>damage</strong> to the opponent (since no <strong>damage</strong> is dealt to the creature).\n        </li><li>\n          Attacking a creature with Ward with a creature with Drain does no heal the player (since no <strong>damage</strong> is dealt to the creature).\n        </li>\n      </ul>\n\n      <strong>Changes from <a href=\"https://www.codingame.com/contribute/view/162759566f5a132f64b4de78ed637a2f309a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">1.2 version</a></strong>\n      <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding-bottom:0\">\n        <li>\n          Replaced <const>Draw</const> phase with <const>Constructed</const> phase.\n        </li><li>\n          New ability <const>Area</const> has been added. It allows creatures to summon two copies at once, and items to affect several targets at once.\n        </li><li>\n          Runes have been completely removed.\n        </li><li>\n          Player gets to draw additional card for every <const>5</const> health lost in previous round.\n        </li><li>\n          Response time for Constructed round has been extended to <const>4000</const> ms.\n        </li>\n      </ul>\n\n      <strong>Changes from <a href=\"https://www.codingame.com/multiplayer/bot-programming/legends-of-code-magic\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">1.0 version</a></strong>\n      <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding-bottom:0\">\n        <li>\n          Creatures can now be placed on <const>two</const> lanes.\n        </li><li>\n          Number of creatures per lane has been limited to <const>3</const>.\n        </li><li>\n          Creature can only attack creature, if it is on the same lane.\n        </li><li>\n          <const>Guard</const> works only for creatures on the same lane.\n        </li><li>\n          Response time per Battle round has been extended to <const>200</const> ms.\n        </li><li>\n          All the changes from 1.2.\n        </li>\n      </ul>\n    </div>\n  </div>\n      \n  <div class=\"statement-section statement-protocol\">\n    <h2>\n      <span class=\"icon icon-protocol\">&nbsp;</span>\n      <span>Game Input</span>\n    </h2>\n\n    <div class=\"blk\">\n      <div class=\"title\">Input for one game turn</div>\n      <div class=\"text\">\n        <span class=\"statement-lineno\">First 2 lines</span>: for each player, <var>playerHealth</var>, <var>playerMana</var>, <var>playerDeck</var> and <var>playerDraw</var>:\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Integer <var>playerHealth</var>: the remaining HP of the player.\n          </li><li>\n            Integer <var>playerMana</var>: the current maximum mana of the player.\n          </li><li>\n            Integer <var>playerDeck</var>: the number of cards in the player's deck.\n          </li><li>\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              ---- NO RUNES ---\n            </span>\n          </li><li>\n            Integer <var>playerDraw</var>:\n            the additional number of drawn cards - this turn draw for the player, next turn draw (without reward for damage received) for the opponent.\n          </li>\n        </ul>\n        The player's input comes first, the opponent's input comes second.<br>\n        <br>\n        During the Constructed phase, <var>playerMana</var> is always <const>0</const>.<br>\n        <br>\n\n        <span class=\"statement-lineno\">Next line</span>:\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Integer <var>opponentHand</var>, the total number of cards in the opponent's hand. These cards are hidden until they're played.\n          </li><li>\n            Integer <var>opponentActions</var>, the number of actions performed by the opponent during his last turn.\n          </li>\n        </ul>\n        <span class=\"statement-lineno\">Next <var>opponentActions</var> lines</span>: for each opponent's action, string <var>cardNumberAndAction</var> containing the <var>cardNumber</var> of the played card, followed by a space, followed by the action associated with this card (see <strong>Possible Actions</strong> section).<br>\n        <br>\n\n        <span class=\"statement-lineno\">Next line</span>: Integer <var>cardCount</var>: during the Battle phase, the total number of cards on the board and in the player's hand. During the Constructed phase, always <const>120</const>.\n        <br>\n        <br>\n\n        <span class=\"statement-lineno\">Next <var>cardCount</var> lines</span>: for each card, <var>cardNumber</var>, <var>instanceId</var>, <var>location</var>, <var>cardType</var>, <var>cost</var>, <var>attack</var>, <var>defense</var>, <var>abilities</var>, <var>myHealthChange</var>, <var>opponentHealthChange</var>, <var>cardDraw</var>, <var>area</var> and <var>lane</var>:\n        <ul style=\"padding-bottom:0\">\n          <li>\n            Integer <var>cardNumber</var>: the identifier of a card.\n          </li><li>\n            Integer <var>instanceId</var>: the identifier representing the instance of the card (there can be multiple instances of the same card in a game).\n          </li><li>\n            Integer <var>location</var>, during the Battle phase: \n            <ul style=\"padding-bottom:0;padding-top:0;margin-bottom:10px\">\n              <li>\n                <const>0</const>: in the player's hand\n              </li><li>\n                <const>1</const>: on the player's side of the board\n              </li><li>\n                <const>-1</const>: on the opponent's side of the board\n              </li>\n            </ul>\n            Always <const>0</const> during the Constructed phase.\n          </li><li>\n            Integer <var>cardType</var>: \n            <ul style=\"padding-bottom:0;padding-top:0\">\n              <li>\n                <const>0</const>: Creature\n              </li><li>\n                <const>1</const>: Green item\n              </li><li>\n                <const>2</const>: Red item\n              </li><li>\n                <const>3</const>: Blue item\n              </li></ul>\n          </li><li>\n            Integer <var>cost</var>: the mana cost of the card,\n          </li><li> \n            Integer <var>attack</var>:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                Creature: its attack points\n              </li><li>\n                Item: its attack modifier\n              </li>\n            </ul>\n          </li><li> \n            Integer <var>defense</var>:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                Creature: its defense points\n              </li><li>\n                Item: its defense modifier. Negative values mean this causes damage.\n              </li>\n            </ul>\n          </li><li>\n            String <var>abilities</var> of size <const>6</const>: the abilities of a card. Each letter representing an ability (<const>B</const> for Breakthrough, <const>C</const> for Charge and <const>G</const> for Guard, <const>D</const> for Drain, <const>L</const> for Lethal and <const>W</const> for Ward).\n          </li><li>\n            Integer <var>myHealthChange</var>:\n            the health change for the player.\n          </li><li>\n            Integer <var>opponentHealthChange</var>:\n            the health change for the opponent.\n          </li><li>\n            Integer <var>cardDraw</var>:\n            the additional number of cards drawn next turn for the player.\n          </li><li>\n\n            <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n              Integer <var>area</var>:\n            </span>\n              <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding-bottom:0;padding-top:0\">\n                <li>\n                  <const>0</const>: Target\n                </li><li>\n                  <const>1</const>: Lane1\n                </li><li>\n                  <const>2</const>: Lane2\n                </li>\n              </ul>\n          </li><li style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n            Integer <var>lane</var>:\n            <ul style=\"padding-bottom:0\">\n              <li>\n                Creature on board: 0 - left, 1 - right\n              </li><li>\n                Other: -1\n              </li>\n            </ul>\n          </li>\n        </ul>          \n      </div>\n    </div>\n    \n    <div class=\"blk\">\n      <div class=\"title\">\n        <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding:2px\">\n          Output for only game turn of the Constructed phase\n        </span>\n      </div>\n      <div class=\"text\">\n        <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding:2px\">\n          Series of <const>30</const> actions separated by semi-colon <action>;</action>:\n        </span>\n        <ul style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 ); padding-bottom:0\">\n          <li>\n            <action>CHOOSE id</action> where <var>id</var> is id of chosen card.\n          </li><li>\n            <action>PASS</action> to do nothing (fills rest of the deck with subsequent available cards).\n          </li>\n        </ul>\n      </div>\n      <div class=\"title\">Output for one game turn of the Battle phase</div>\n      <div class=\"text\">\n        The available actions are:\n        <ul style=\"padding-bottom:0\">\n          <li>\n            <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n              <action>SUMMON <var>id</var> <var>lane</var></action> to summon the <const>creature</const> of instanceId <var>id</var> from the player's hand to the lane <var>lane</var> (0 - left, 1 - right).\n            </span>\n          </li><li>\n            <action>ATTACK <var>idAttacker</var> <var>idTarget</var></action> to attack an opposing creature or opposing player of instanceId <var>idTarget</var> with a creature on the board of instanceId <var>idAttacker</var>.<br>\n            <var>idTarget</var> can be the \"no-creature\" identifier <action>-1</action>. It is used to attack the opponent directly.\n          </li><li>\n            <action>USE <var>idCard</var> <var>idTarget</var></action> to use an <const>item</const> of instanceId <var>idCard</var> on a creature of instanceId <var>idTarget</var> or without a target with the \"no-creature\" identifier <action>-1</action>.\n          </li><li>\n            <action>PASS</action> to do nothing. \n          </li>\n        </ul>\n        Players may use several actions by using a semi-colon <action>;</action>. \n        <br>\n        Players may append text to each of their actions, it will be displayed in the viewer. <br> <br>\n        Example: <action>SUMMON 3 1;ATTACK 4 5 yolo; ATTACK 8 -1 no fear</action>.\n      </div>\n    </div>\n          \n    <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"text\">\n        <const>0</const>  <var>cost</var>  <const>12</const><br>\n        <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n          <const>0</const>  <b>creatures on each lane of the board (per player)</b>  <const>3</const><br>\n        </span>\n        <const>0</const>  <b>cards in hand</b>  <const>8</const><br>\n        <br>\n\n        <span style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );padding:2px\">\n          Response time for the Constructed turn  <const>4000</const>ms<br>\n        </span>\n        Response time for the first Battle turn  <const>1000</const>ms<br>\n        <span style=\"color:#7cc576;background-color:rgba( 124 , 197 , 118 , 0.1 );padding:2px\">\n          Response time per turn  <const>200</const>ms<br>\n        </span>\n      </div>\n    </div>\n  </div>\n\n  <div style=\"color:#7c76c5;background-color:rgba(124 , 118 , 197 , 0.1 );\n                    padding: 2px;\">\n    <p style=\"text-align:center\"><b>Acknowledgments</b></p>\n    <p>\n      Created as a part of the master's thesis <i><b>Developing New Track for Strategy Card Game AI Competition: Constructed Mode</b>, University of Wrocaw, 2022</i>\n      by <i><b>Krzysztof Bednarek</b></i> (<a target=\"_blank\" href=\"https://www.codingame.com/profile/db2e3f0916f9b0e74f4ae3971b2e6df0835705\">@Krzybe</a>).\n    </p>\n    <p>\n      Supervised by <i><b>Jakub Kowalski</b></i> (<a target=\"_blank\" href=\"https://www.codingame.com/profile/b528dd3b279d7578674a1129305918e0400484\">@aCat</a>)\n      and (informally) <i><b>Radosaw Miernik</b></i> (<a target=\"_blank\" href=\"https://www.codingame.com/profile/2b872a07bc65786f280864cadc2f635c0763881\">@radekmie</a>).\n    </p>\n    <p>\n      Part of the <b><i><a target=\"_blank\" href=\"https://legendsofcodeandmagic.com/\">Strategy Card Game AI Competition</a></i></b>\n      supported by <b><a target=\"_blank\" href=\"https://cis.ieee.org/\">IEEE CIS</a></b>.\n    </p>\n  </div>\n</div>"
          },
          "questionType": "multi",
          "stubGenerator": "gameloop\nloop 2\n   read playerHealth:int playerMana:int playerDeck:int playerDraw:int\nread opponentHand:int opponentActions:int\nloop opponentActions\n    read cardNumberAndAction:string(20)\nread cardCount:int\nloop cardCount\n   read cardNumber:int instanceId:int location:int cardType:int cost:int attack:int defense:int abilities:word(6) myHealthChange:int opponentHealthChange:int cardDraw:int area:int lane:int\nwrite PASS",
          "welcomePopups": {},
          "aiCodeExtension": "java",
          "criteriaLanguageMap": {}
        }
      },
      "coverBinaryId": 80411862908910,
      "directoryPrefix": "community/484004-1647629398073",
      "allowSourceDownload": true,
      "originalArchiveBinaryId": 93065166200097
    },
    "draft": false,
    "readyForModeration": true
  },
  "validatedFor": 117896833678,
  "avatar": 4210501575817,
  "commentCount": 31,
  "upVotes": 44,
  "downVotes": 0,
  "validateAction": {
    "actionId": 663580,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1650233137001,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1650264869506,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1652833117269,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}