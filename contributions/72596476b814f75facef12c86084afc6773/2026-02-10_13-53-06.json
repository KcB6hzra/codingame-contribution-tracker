{
  "id": 725,
  "activeVersion": 14,
  "score": 3,
  "votableId": 5133731,
  "codingamerId": 1100752,
  "views": 169,
  "commentableId": 5076146,
  "title": "Turing machine",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "ValNykol",
  "publicHandle": "72596476b814f75facef12c86084afc6773",
  "codingamerHandle": "512fb043c43498b9bc7605da47190de72570011",
  "lastVersion": {
    "version": 14,
    "data": {
      "title": "Turing machine",
      "topics": [],
      "solution": "s,t,x = gets.split.map &:to_i\nstart = gets.chomp\nn = gets.to_i\nstates = {}\nn.times{\n    state, actions = gets.chomp.split(?:)\n    actions = actions.split(?;).map{|a|\n        w,m,nxt = a.split\n        [w.to_i,m,nxt]\n    }\n    \n    states[state] = actions\n}\n\ntape = [0] * t\npos = x\nstate = start\nops = 0\n\nwhile true\n    action = states[state][tape[pos]]\n    tape[pos] = action[0]\n    pos += action[1] == ?L ? -1 : 1\n    state = action[2]\n    ops += 1\n    \n    break if state == \"HALT\"\n    break if pos < 0 || pos >= t\nend\n\nputs ops\nputs pos\nputs tape*\"\"",
      "statement": "A Turing machine is an abstract machine that manipulates symbols on a strip of tape according to a table of rules. It was invented by Alan Turing in 1936, and, despite its simplicity, can simulate any computer algorithm.\nA Turing machine consists of the following elements:\n1. A <<tape>> divided into cells, one next to the other. Each cell contains a symbol from some finite alphabet. In the mathematical model, the tape is infinitely long, but we will restrict it to some fixed size. The symbols are represented by integers.\n2. A <<head>> that can read and write symbols on the tape and move left and right one cell at a time.\n3. A <<state register>> that stores the state of the Turing machine, one of finitely many. One of these states is the special start state with which the state register is initialized.\n4. A finite <<table>> of instructions that, given the state the machine is currently in and the symbol it is reading on the tape, tells the machine to do the following in sequence:\n  - Either erase or write a symbol, then\n  - Move the head left or right, and then\n  - Go to a specified state\n\nThe alphabet consists of [[S]] symbols: 0, 1, ... , [[S]]-1. The tape is initially filled with 0s.\nThe tape has [[T]] cells. Its initial position is [[X]], with 0 being the left edge.\nThere are [[N]] states. Each state has [[S]] actions, one for each symbol. An action is represented by:\n[[W]] [[M]] [[NEXT]]\nwhere [[W]] is the symbol the machine will write, [[M]] is the direction the head will move ({{L}} and {{R}} for left and right, respectively), and [[NEXT]] is the state the machine will go to. [[NEXT]] can be {{HALT}}, in which case the machine will stop the simulation upon performing this action.\nThe action the machine will perform depends on the symbol it is currently reading. For example, if the current symbol is 0, it will perform the first action associated with the current state, if it's 1 - the second action, etc.\nThe machine will start in the state [[START]] (provided in the input).\n\nYour task is to simulate the machine until it halts or goes out of bounds of the tape, and output the number of actions it has performed, the position of the head after the last move (or {{-1}} if it went out of bounds to the left, [[T]] (the number of cells on the tape, not letter 'T') if to the right), as well as the contents of the tape after the simulation.",
      "testCases": [
        {
          "title": "Simple",
          "isTest": true,
          "testIn": "2 4 0\nA\n2\nA:1 R B;1 R HALT\nB:1 L A;1 R B",
          "testOut": "3\n1\n1100",
          "isValidator": false
        },
        {
          "title": "Simple",
          "isTest": false,
          "testIn": "2 5 3\nZ\n2\nY:1 R Z;1 L Y\nZ:1 L Y;1 R HALT",
          "testOut": "3\n4\n00110",
          "isValidator": true
        },
        {
          "title": "Busy beaver",
          "isTest": true,
          "testIn": "2 10 3\nS1\n3\nS1:1 R S2;1 R HALT\nS2:0 R S3;1 R S2\nS3:1 L S3;1 L S1",
          "testOut": "14\n5\n0011111100",
          "isValidator": false
        },
        {
          "title": "Busy beaver",
          "isTest": false,
          "testIn": "2 18 12\nS4\n4\nS1:1 R S1;0 R S4\nS2:1 R HALT;1 L S1\nS3:1 L S4;0 L S2\nS4:1 R S3;1 L S3",
          "testOut": "107\n3\n001011111111111100",
          "isValidator": true
        },
        {
          "title": "Out of bounds right",
          "isTest": true,
          "testIn": "3 20 0\nb\n4\nb:1 R c;0 R b;0 R b\nc:0 R e;0 R c;0 R c\ne:2 R f;0 R e;0 R e\nf:0 R b;0 R f;0 R f",
          "testOut": "20\n20\n10201020102010201020",
          "isValidator": false
        },
        {
          "title": "Out of bounds right",
          "isTest": false,
          "testIn": "2 15 0\nb\n2\nb:1 R c;0 R b\nc:0 R b;0 R c",
          "testOut": "15\n15\n101010101010101",
          "isValidator": true
        },
        {
          "title": "Out of bounds left",
          "isTest": true,
          "testIn": "4 30 25\nTuring\n5\nTuring:1 L was;1 L was;0 L a;0 L a\nwas:2 R a;2 L a;2 L a;2 R a\na:2 R smart;3 L Turing;3 R Turing;3 R Turing\nsmart:0 L guy;1 L guy;2 L guy;3 L guy\nguy:3 R Turing;2 R Turing;1 R Turing;0 R Turing",
          "testOut": "88\n-1\n033013301330133013301330130000",
          "isValidator": false
        },
        {
          "title": "Out of bounds left",
          "isTest": false,
          "testIn": "3 20 17\ndo\n3\ndo:1 L some;1 L thing;1 L some\nsome:2 L thing;1 L thing;2 R do\nthing:0 R some;2 L do;2 L do",
          "testOut": "50\n-1\n21212121212121212100",
          "isValidator": true
        },
        {
          "title": "Busy beaver + copy",
          "isTest": true,
          "testIn": "2 20 3\nbb1\n9\nbb1:1 R bb2;1 L bb4\nbb2:0 R bb3;1 R bb2\nbb3:1 L bb3;1 L bb1\nbb4:1 R bb1;1 L copy1\ncopy1:0 R HALT;0 R copy2\ncopy2:0 R copy3;1 R copy2\ncopy3:1 L copy4;1 R copy3\ncopy4:0 L copy5;1 L copy4\ncopy5:1 R copy1;1 L copy5",
          "testOut": "106\n9\n00111111011111100000",
          "isValidator": false
        },
        {
          "title": "Busy beaver + copy",
          "isTest": false,
          "testIn": "2 33 12\nbb1\n10\nbb1:1 R bb2;1 L bb2\nbb2:1 L bb1;0 L bb3\nbb3:1 R bb5;1 L bb4\nbb4:1 R bb4;0 R bb1\nbb5:1 L copy1;1 L bb5\ncopy1:0 R HALT;0 R copy2\ncopy2:0 R copy3;1 R copy2\ncopy3:1 L copy4;1 R copy3\ncopy4:0 L copy5;1 L copy4\ncopy5:1 R copy1;1 L copy5",
          "testOut": "543\n17\n001111111111111101111111111111100",
          "isValidator": true
        }
      ],
      "difficulty": "hard",
      "constraints": "[[S]] ≤ 5\n0 ≤ [[X]] < [[T]] ≤ 500\n[[N]] ≤ 100",
      "stubGenerator": "read S:int T:int X:int\nread START:string(20)\nread N:int\nloop N read STATEACTIONS:string(1024)\nwrite answer",
      "inputDescription": "<<Line 1:>> [[S]] [[T]] [[X]] - space separated integers - number of symbols, tape length, and the initial position of the head.\n<<Line 2:>> [[START]] - the initial state the machine is in.\n<<Line 3:>> [[N]] - number of states.\n<<Next [[N]] lines:>> [[STATE]]: [[ACTIONS]] - the name of the state and [[S]] actions separated by semicolon. An action has the format [[W]] [[M]] [[NEXT]] - symbol to write, direction to move, and state to go to.",
      "solutionLanguage": "Ruby",
      "outputDescription": "<<Line 1:>> The number of actions the machine has performed before halting.\n<<Line 2:>> The position of the head after the last move.\n<<Line 3:>> [[T]] characters representing the tape after the simulation."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">A Turing machine is an abstract machine that manipulates symbols on a strip of tape according to a table of rules. It was invented by Alan Turing in 1936, and, despite its simplicity, can simulate any computer algorithm.<br>A Turing machine consists of the following elements:<br>1. A <strong>tape</strong> divided into cells, one next to the other. Each cell contains a symbol from some finite alphabet. In the mathematical model, the tape is infinitely long, but we will restrict it to some fixed size. The symbols are represented by integers.<br>2. A <strong>head</strong> that can read and write symbols on the tape and move left and right one cell at a time.<br>3. A <strong>state register</strong> that stores the state of the Turing machine, one of finitely many. One of these states is the special start state with which the state register is initialized.<br>4. A finite <strong>table</strong> of instructions that, given the state the machine is currently in and the symbol it is reading on the tape, tells the machine to do the following in sequence:<br>  - Either erase or write a symbol, then<br>  - Move the head left or right, and then<br>  - Go to a specified state<br><br>The alphabet consists of <var>S</var> symbols: 0, 1, ... , <var>S</var>-1. The tape is initially filled with 0s.<br>The tape has <var>T</var> cells. Its initial position is <var>X</var>, with 0 being the left edge.<br>There are <var>N</var> states. Each state has <var>S</var> actions, one for each symbol. An action is represented by:<br><var>W</var> <var>M</var> <var>NEXT</var><br>where <var>W</var> is the symbol the machine will write, <var>M</var> is the direction the head will move (<const>L</const> and <const>R</const> for left and right, respectively), and <var>NEXT</var> is the state the machine will go to. <var>NEXT</var> can be <const>HALT</const>, in which case the machine will stop the simulation upon performing this action.<br>The action the machine will perform depends on the symbol it is currently reading. For example, if the current symbol is 0, it will perform the first action associated with the current state, if it's 1 - the second action, etc.<br>The machine will start in the state <var>START</var> (provided in the input).<br><br>Your task is to simulate the machine until it halts or goes out of bounds of the tape, and output the number of actions it has performed, the position of the head after the last move (or <const>-1</const> if it went out of bounds to the left, <var>T</var> (the number of cells on the tape, not letter 'T') if to the right), as well as the contents of the tape after the simulation.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> <var>S</var> <var>T</var> <var>X</var> - space separated integers - number of symbols, tape length, and the initial position of the head.<br><strong>Line 2:</strong> <var>START</var> - the initial state the machine is in.<br><strong>Line 3:</strong> <var>N</var> - number of states.<br><strong>Next <var>N</var> lines:</strong> <var>STATE</var>: <var>ACTIONS</var> - the name of the state and <var>S</var> actions separated by semicolon. An action has the format <var>W</var> <var>M</var> <var>NEXT</var> - symbol to write, direction to move, and state to go to.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> The number of actions the machine has performed before halting.<br><strong>Line 2:</strong> The position of the head after the last move.<br><strong>Line 3:</strong> <var>T</var> characters representing the tape after the simulation.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\"><var>S</var> &le; 5<br>0 &le; <var>X</var> &lt; <var>T</var> &le; 500<br><var>N</var> &le; 100</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">2 4 0\nA\n2\nA:1 R B;1 R HALT\nB:1 L A;1 R B</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">3\n1\n1100</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 280451183624,
  "avatar": 10307803807981,
  "commentCount": 8,
  "upVotes": 3,
  "downVotes": 0,
  "validateAction": {
    "actionId": 99779,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}