{
  "id": 72417,
  "activeVersion": 10,
  "score": 5,
  "votableId": 31050644,
  "codingamerId": 2781726,
  "views": 126,
  "commentableId": 30911649,
  "title": "Risk odds calculator",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "June1664",
  "publicHandle": "724177fee0855ed1e4b328c98ec9c492c70b6",
  "codingamerHandle": "f71a366e51aeb93dcd93f81b1e4c2ed36271872",
  "lastVersion": {
    "version": 10,
    "autocloseTime": 1698509615587,
    "data": {
      "title": "Risk odds calculator",
      "topics": [
        {
          "id": 110,
          "handle": "probability",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Probability",
            "2": "Probability"
          },
          "puzzleCount": 5,
          "parentTopicId": 93
        },
        {
          "labelMap": {
            "2": "Markov chains"
          }
        }
      ],
      "solution": "import java.util.Scanner;\n\nclass Solution {\n    public static void main(String args[]) {\n        Scanner in = new Scanner(System.in);\n        int attack = in.nextInt();\n        int defense = in.nextInt();\n        \n        // Single fight odds \n        int win11 = 0, win12 = 0, win21 = 0, win22 = 0, draw22 = 0, win31 = 0, win32 = 0, draw32 = 0;\n        for (int a1 = 1; a1 <= 6; a1++) for (int a2 = 1; a2 <= 6; a2++) for (int a3 = 1; a3 <= 6; a3++) for (int d1 = 1; d1 <= 6; d1++) for (int d2 = 1; d2 <= 6; d2++) {\n        \tint aaa1, aaa2, aa1, aa2, dd1, dd2;\n        \tif (a1 >= a2 && a2 >= a3) { aaa1 = a1; aaa2 = a2; }\n        \telse if (a1 >= a3 && a3 >= a2) { aaa1 = a1; aaa2 = a3; }\n        \telse if (a2 >= a1 && a1 >= a3) { aaa1 = a2; aaa2 = a1; }\n        \telse if (a2 >= a3 && a3 >= a1) { aaa1 = a2; aaa2 = a3; }\n        \telse if (a3 >= a1 && a1 >= a2) { aaa1 = a3; aaa2 = a1; }\n        \telse { aaa1 = a3; aaa2 = a2; }\n        \tif (a1 >= a2) { aa1 = a1; aa2 = a2; } else { aa1 = a2; aa2 = a1; } \n        \tif (d1 >= d2) { dd1 = d1; dd2 = d2; } else { dd1 = d2; dd2 = d1; } \n\n        \tif (a1 > d1) win11++;\n        \tif (a1 > dd1) win12++;\n        \tif (aa1 > d1) win21++;\n        \tif (aa1 > dd1 && aa2 > dd2) win22++;\n        \tif (aa1 > dd1 ^ aa2 > dd2) draw22++;\n        \tif (aaa1 > d1) win31++;\n        \tif (aaa1 > dd1 && aaa2 > dd2) win32++;\n        \tif (aaa1 > dd1 ^ aaa2 > dd2) draw32++;\n        }\n        double w11 = win11 / 7776d;\n        double w12 = win12 / 7776d;\n        double l21 = (7776 - win21) / 7776d;\n        double w21 = win21 / 7776d;\n        double d22 = draw22 / 7776d;\n        double w22 = win22 / 7776d;\n        double l31 = (7776 - win31) / 7776d;\n        double w31 = win31 / 7776d;\n        double l32 = (7776 - win32 - draw32) / 7776d;\n        double d32 = draw32 / 7776d;\n        double w32 = win32 / 7776d;\n        \n        // Construct odds table\n        double[][] odds = new double[attack + 1][defense + 1];\n        for (int a = 1; a <= attack; a++) {\n            odds[a][0] = 1d;\n        \tfor (int d = 1; d <= defense; d++) {\n        \t\tif (a >= 3 && d >= 2) odds[a][d] = l32 * odds[a - 2][d] + d32 * odds[a - 1][d - 1] + w32 * odds[a][d - 2];\n        \t\telse if (a >= 3) odds[a][d] = l31 * odds[a - 1][d] + w31 * odds[a][d - 1];\n        \t\telse if (a == 2 && d >= 2) odds[a][d] = d22 * odds[a - 1][d - 1] + w22 * odds[a][d - 2];\n        \t\telse if (a == 2) odds[a][d] = l21 * odds[a - 1][d] + w21 * odds[a][d - 1];\n        \t\telse if (d >= 2) odds[a][d] = w12 * odds[a][d - 1];\n        \t\telse odds[a][d] = w11;\n        \t}\n        }\n\n        System.out.println(String.format(\"%.2f\", odds[attack][defense] * 100) + \"%\");\n    }\n}",
      "statement": "You've already claimed Africa, and North America is nearly yours. Only Greenland remains between you and total victory. Can you seize this final territory before your enemies retaliate and obliterate you?\n\nIn a game of <<Risk>>, battles ensue between stacks of armies for world domination.\nIn your final Greenland conquest, You, the <<attacker>>, roll the following number of dice, according to the number of your <<attacking armies>> in the battleground:\n```+--------+---+---+---+---+----+\n| Armies | 1 | 2 | 3 | 4 | 5+ |\n+--------+---+---+---+---+----+\n|  Dice  | 1 | 2 | 3 | 3 | 3  |\n+--------+---+---+---+---+----+```\nThe <<defender>> rolls the following number of dice, according to the number of <<defending armies>> in the battleground:\n```+--------+---+---+---+---+----+\n| Armies | 1 | 2 | 3 | 4 | 5+ |\n+--------+---+---+---+---+----+\n|  Dice  | 1 | 2 | 2 | 2 | 2  |\n+--------+---+---+---+---+----+```\nThe highest value from the attacker's dice is compared with the highest value from the defender's dice. The player with the lower roll loses an army. In the event of a tie, the defender prevails, and the attacker loses an army.\n\nIf both parties have thrown at least two dice, the second-highest values are compared, following the same rules.\n\nEach time a battle round ends, you initiate another round with the remaining armies. As the attacker, you're determined to claim Greenland this turn, vowing to fight until only one army stack remains.\n\nFor example:\nYou: [[attack]] = <<5>> armies, defender: [[defense]] = <<4>> armies:\nYou roll {{1}}, {{5}} & {{5}}. Defender rolls {{2}} & {{5}}. {{5}} <= {{5}}, {{5}} > {{2}}, both players lose one army.\nYou: <<4>> armies, defender: <<3>> armies:\nYou roll {{4}}, {{2}} & {{6}}. Defender rolls {{5}} & {{3}}. {{6}} > {{5}}, {{4}} > {{3}}, defender loses two armies.\nYou: <<4>> armies, defender: <<1>> army:\nYou roll {{3}}, {{4}} & {{2}}. Defender rolls {{6}}. {{4}} <= {{6}}, you lose one army.\nYou: <<3>> armies, defender: <<1>> army:\nYou roll {{1}}, {{1}} & {{5}}. Defender rolls {{4}}. {{5}} > {{4}}, defender loses last army.\nAt last, you capture Greenland and emerge victorious, as Africa + North America was your secret objective!\n\nThe aim of this exercise is to compute your probability of winning the game as the attacker at the start of the battle.",
      "testCases": [
        {
          "title": "Minimal armies",
          "isTest": true,
          "testIn": "1\n1",
          "testOut": "41.67%",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "1\n1",
          "testOut": "41.67%",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Small armies, advantage attacker",
          "isTest": true,
          "testIn": "3\n1",
          "testOut": "91.64%",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "4\n1",
          "testOut": "97.15%",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Small armies, advantage defender",
          "isTest": true,
          "testIn": "1\n2",
          "testOut": "10.61%",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "1\n4",
          "testOut": "0.69%",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Small armies, balanced",
          "isTest": true,
          "testIn": "2\n2",
          "testOut": "36.27%",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "4\n4",
          "testOut": "47.65%",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Crushing endgame",
          "isTest": true,
          "testIn": "14\n5",
          "testOut": "98.50%",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "17\n3",
          "testOut": "99.96%",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Hail Mary",
          "isTest": true,
          "testIn": "4\n9",
          "testOut": "8.62%",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 6",
          "isTest": false,
          "testIn": "6\n21",
          "testOut": "0.49%",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Large, uncertain battle",
          "isTest": true,
          "testIn": "36\n41",
          "testOut": "51.40%",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "29\n33",
          "testOut": "50.54%",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Mother of all battles",
          "isTest": true,
          "testIn": "80\n97",
          "testOut": "40.21%",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 8",
          "isTest": false,
          "testIn": "96\n71",
          "testOut": "99.46%",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "0 < [[attack]] < 100\n0 < [[defense]] < 100",
      "coverBinaryId": 112221023180963,
      "stubGenerator": "read attack:int\nread defense:int\nwrite 42.42%",
      "inputDescription": "<<Line 1:>> the [[attack]] army size.\n<<Line 2:>> the [[defense]] army size.",
      "solutionLanguage": "Java",
      "outputDescription": "The attacker victory odds in percentage, rounded to the nearest 0.01% (e.g., 73.68%)."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">You've already claimed Africa, and North America is nearly yours. Only Greenland remains between you and total victory. Can you seize this final territory before your enemies retaliate and obliterate you?<br><br>In a game of <strong>Risk</strong>, battles ensue between stacks of armies for world domination.<br>In your final Greenland conquest, You, the <strong>attacker</strong>, roll the following number of dice, according to the number of your <strong>attacking armies</strong> in the battleground:<br><pre style=\"font-family: monospace\"></pre><pre style=\"font-family: monospace\">+--------+---+---+---+---+----+<br>| Armies | 1 | 2 | 3 | 4 | 5+ |<br>+--------+---+---+---+---+----+<br>|  Dice  | 1 | 2 | 3 | 3 | 3  |<br>+--------+---+---+---+---+----+</pre><pre style=\"font-family: monospace\"></pre><br>The <strong>defender</strong> rolls the following number of dice, according to the number of <strong>defending armies</strong> in the battleground:<br><pre style=\"font-family: monospace\"></pre><pre style=\"font-family: monospace\">+--------+---+---+---+---+----+<br>| Armies | 1 | 2 | 3 | 4 | 5+ |<br>+--------+---+---+---+---+----+<br>|  Dice  | 1 | 2 | 2 | 2 | 2  |<br>+--------+---+---+---+---+----+</pre><pre style=\"font-family: monospace\"></pre><br>The highest value from the attacker's dice is compared with the highest value from the defender's dice. The player with the lower roll loses an army. In the event of a tie, the defender prevails, and the attacker loses an army.<br><br>If both parties have thrown at least two dice, the second-highest values are compared, following the same rules.<br><br>Each time a battle round ends, you initiate another round with the remaining armies. As the attacker, you're determined to claim Greenland this turn, vowing to fight until only one army stack remains.<br><br>For example:<br>You: <var>attack</var> = <strong>5</strong> armies, defender: <var>defense</var> = <strong>4</strong> armies:<br>You roll <const>1</const>, <const>5</const> &amp; <const>5</const>. Defender rolls <const>2</const> &amp; <const>5</const>. <const>5</const> &lt;= <const>5</const>, <const>5</const> &gt; <const>2</const>, both players lose one army.<br>You: <strong>4</strong> armies, defender: <strong>3</strong> armies:<br>You roll <const>4</const>, <const>2</const> &amp; <const>6</const>. Defender rolls <const>5</const> &amp; <const>3</const>. <const>6</const> &gt; <const>5</const>, <const>4</const> &gt; <const>3</const>, defender loses two armies.<br>You: <strong>4</strong> armies, defender: <strong>1</strong> army:<br>You roll <const>3</const>, <const>4</const> &amp; <const>2</const>. Defender rolls <const>6</const>. <const>4</const> &lt;= <const>6</const>, you lose one army.<br>You: <strong>3</strong> armies, defender: <strong>1</strong> army:<br>You roll <const>1</const>, <const>1</const> &amp; <const>5</const>. Defender rolls <const>4</const>. <const>5</const> &gt; <const>4</const>, defender loses last army.<br>At last, you capture Greenland and emerge victorious, as Africa + North America was your secret objective!<br><br>The aim of this exercise is to compute your probability of winning the game as the attacker at the start of the battle.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> the <var>attack</var> army size.<br><strong>Line 2:</strong> the <var>defense</var> army size.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">The attacker victory odds in percentage, rounded to the nearest 0.01% (e.g., 73.68%).</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">0 &lt; <var>attack</var> &lt; 100<br>0 &lt; <var>defense</var> &lt; 100</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">1\n1</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">41.67%</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 72745070306,
  "avatar": 21450681968805,
  "commentCount": 6,
  "upVotes": 6,
  "downVotes": 1,
  "validateAction": {
    "actionId": 863831,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1697984033206,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}