{
  "id": 139308,
  "activeVersion": 22,
  "score": 2,
  "votableId": 38780111,
  "codingamerId": 194094,
  "views": 202,
  "commentableId": 38614069,
  "title": "Santa's Garland",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "Kvirund",
  "publicHandle": "139308125cba9f67bda7b65a5d47b5f67028cd",
  "codingamerHandle": "f0ba56e7d37f9feba64daa49366c33b6490491",
  "lastVersion": {
    "version": 22,
    "autocloseTime": 1768255660683,
    "freezeTime": 1766268460683,
    "data": {
      "title": "Santa's Garland",
      "topics": [
        {
          "id": 48,
          "handle": "graphs",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Graphes",
            "2": "Graphs"
          },
          "pageTitle": "Graphs: exercises and theory",
          "puzzleCount": 43,
          "parentTopicId": 40,
          "contentDetailsId": 75
        },
        {
          "id": 68,
          "handle": "pathfinding",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Recherche de chemins",
            "2": "Pathfinding"
          },
          "pageTitle": "Pathfinding: exercises and theory",
          "puzzleCount": 61,
          "parentTopicId": 41,
          "contentDetailsId": 69
        },
        {
          "id": 54,
          "handle": "BFS",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Parcours en largeur",
            "2": "BFS"
          },
          "pageTitle": "BFS: exercises and theory",
          "puzzleCount": 46,
          "parentTopicId": 41,
          "contentDetailsId": 84
        }
      ],
      "solution": "import sys\nfrom collections import deque\n\ndef solve():\n    n, m = map(int, input().split())\n    start, end = map(int, input().split())\n\n    adjacency = {i: [] for i in range(n)}\n    for _ in range(m):\n        a, b, t = map(int, input().split())\n        adjacency[a].append((b, t))\n        adjacency[b].append((a, t))\n\n    if start == end:\n        print(0)\n        return\n\n    # BFS from END to START\n    queue = deque([(end, 0)])\n    visited = {end: 0}\n\n    while queue:\n        pos, dist = queue.popleft()\n        for neighbor, fuse_time in adjacency[pos]:\n            if fuse_time <= dist:\n                continue\n            new_dist = dist + 1\n            if neighbor == start:\n                print(new_dist)\n                return\n            if neighbor not in visited:\n                visited[neighbor] = new_dist\n                queue.append((neighbor, new_dist))\n\n    print(\"IMPOSSIBLE\")\n\nif __name__ == \"__main__\":\n    solve()",
      "statement": "It's Christmas Eve, and Santa is preparing to light up the grand Christmas tree! The garland consists of [[N]] nodes: a power source, a star, and [[N]]-2 bulbs in between, all connected by wires. Nodes always labelled 0 to [[N]]-1.\n\nEach wire has a fuse rated for [[T]] steps. A step occurs when electricity moves along a wire from one node to another. When electricity passes through a wire at step [[i]], the fuse blows at step [[i]] + [[T]], permanently disconnecting the wire.\n\n<<Important:>> The circuit must stay connected! If ANY wire on the path burns out before the electricity reaches the star, the garland won't light up. Wires are bidirectional.\n\n<<Example:>> Consider a simple path: Power(0) — Bulb(1) — Star(2), where wire 0-1 has [[T]]=2 and wire 1-2 has [[T]]=3.\n• Step 1: Electricity moves from node 0 to node 1 (wire 0-1 used, will burn at step 1+2=3)\n• Step 2: Electricity moves from node 1 to node 2 (wire 1-2 used, will burn at step 2+3=5)\n• Result: Path length is 2. Wire 0-1 burns at step 3, wire 1-2 burns at step 5. Both survive until step 2. Valid!\n\nIf wire 0-1 had [[T]]=1 instead, it would burn at step 1+1=2, exactly when we reach the star. Not valid!\n\nHelp Santa find the shortest valid path from the power source to the star!",
      "testCases": [
        {
          "title": "Test 1: Simple Path",
          "isTest": true,
          "testIn": "3 2\n0 2\n0 1 8\n1 2 12",
          "testOut": "2",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 1: Simple Path (longer chain)",
          "isTest": false,
          "testIn": "5 4\n0 4\n0 1 9\n1 2 7\n2 3 15\n3 4 11",
          "testOut": "4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 2: Disconnected",
          "isTest": true,
          "testIn": "4 2\n0 3\n0 1 8\n2 3 12",
          "testOut": "IMPOSSIBLE",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 2: Disconnected (3 components)",
          "isTest": false,
          "testIn": "9 6\n0 8\n0 1 7\n1 2 12\n3 4 9\n4 5 15\n6 7 8\n7 8 11",
          "testOut": "IMPOSSIBLE",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 3: Triangle with Alternative Path",
          "isTest": true,
          "testIn": "4 4\n0 3\n0 1 1\n1 3 10\n0 2 8\n2 3 15",
          "testOut": "2",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3: Pentagon with Alternative Path",
          "isTest": false,
          "testIn": "5 5\n0 4\n0 1 1\n1 2 10\n2 4 12\n0 3 9\n3 4 8",
          "testOut": "2",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 4: Hexagon Bad Diagonal",
          "isTest": true,
          "testIn": "6 7\n0 3\n0 2 1\n2 3 10\n0 1 8\n1 2 12\n0 5 10\n5 4 15\n4 3 9",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4: Octagon Bad Diagonal",
          "isTest": false,
          "testIn": "8 9\n0 4\n0 3 1\n3 4 15\n0 1 9\n1 2 12\n2 3 8\n0 7 10\n7 6 14\n6 5 7\n5 4 11",
          "testOut": "4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 5: Mid-failure with Bypass",
          "isTest": true,
          "testIn": "8 9\n0 7\n0 1 10\n1 2 10\n2 3 3\n3 4 10\n4 5 10\n5 6 10\n6 7 10\n2 4 10\n2 5 12",
          "testOut": "5",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 5: Mid-failure with Bypass (different structure)",
          "isTest": false,
          "testIn": "10 11\n0 9\n0 1 12\n1 2 12\n2 3 4\n3 4 12\n4 5 12\n5 6 12\n6 7 12\n7 8 12\n8 9 12\n2 4 12\n2 6 15",
          "testOut": "6",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 6: Hub Blocked (different path lengths)",
          "isTest": true,
          "testIn": "8 9\n0 4\n0 7 1\n7 4 1\n0 1 9\n1 2 12\n2 3 8\n3 4 15\n0 6 10\n6 5 14\n5 4 7",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 6: Hub Blocked (10 spokes, asymmetric)",
          "isTest": false,
          "testIn": "11 20\n0 6\n10 0 1\n10 1 1\n10 2 1\n10 3 1\n10 4 1\n10 5 1\n10 6 1\n10 7 1\n10 8 1\n10 9 1\n0 1 12\n1 2 9\n2 3 15\n3 4 8\n4 5 14\n5 6 11\n6 7 7\n7 8 16\n8 9 10\n9 0 13",
          "testOut": "4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 7: Shortcut vs Two Detours",
          "isTest": true,
          "testIn": "9 10\n0 5\n0 1 1\n1 5 8\n0 2 12\n2 3 9\n3 4 15\n4 5 7\n0 6 11\n6 7 14\n7 8 10\n8 5 8",
          "testOut": "4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 7: Shortcut vs Two Detours (deeper)",
          "isTest": false,
          "testIn": "11 12\n0 7\n0 1 1\n1 7 10\n0 2 14\n2 3 11\n3 4 8\n4 5 15\n5 7 12\n0 6 9\n6 8 13\n8 9 10\n9 10 16\n10 7 7",
          "testOut": "5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 8: Grid Traversal",
          "isTest": true,
          "testIn": "9 12\n0 8\n0 1 10\n1 2 12\n1 4 9\n2 5 15\n4 5 8\n4 7 14\n5 8 11\n7 8 7\n2 4 16\n5 7 10\n3 2 5\n6 7 5",
          "testOut": "4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 8: Grid Traversal (different entry)",
          "isTest": false,
          "testIn": "9 10\n0 8\n0 3 11\n3 4 12\n4 5 9\n3 6 15\n6 7 8\n7 8 14\n4 7 11\n5 8 7\n1 2 16\n4 8 10",
          "testOut": "3",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 9: Fuses Blow at Final Step",
          "isTest": true,
          "testIn": "4 4\n0 3\n0 1 2\n1 2 10\n2 3 10\n0 2 1",
          "testOut": "IMPOSSIBLE",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 9: Fuses Blow at Final Step (3 paths)",
          "isTest": false,
          "testIn": "6 7\n0 5\n0 1 2\n1 2 10\n2 5 10\n0 3 1\n3 5 10\n1 3 1\n4 2 1",
          "testOut": "IMPOSSIBLE",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 10: Circle Complete Graph",
          "isTest": true,
          "testIn": "14 80\n0 7\n0 1 12\n1 2 15\n2 3 11\n3 4 18\n4 5 14\n5 6 16\n6 7 13\n7 8 17\n8 9 10\n9 10 19\n10 11 12\n11 12 15\n12 13 14\n13 0 11\n0 2 1\n0 3 1\n0 4 1\n0 5 1\n0 6 1\n0 8 1\n0 9 1\n0 10 1\n0 11 1\n0 12 1\n1 3 1\n1 4 1\n1 5 1\n1 6 1\n1 8 1\n1 9 1\n1 10 1\n1 11 1\n1 12 1\n1 13 1\n2 4 1\n2 5 1\n2 6 1\n2 8 1\n2 9 1\n2 10 1\n2 11 1\n2 12 1\n2 13 1\n3 5 1\n3 6 1\n3 8 1\n3 9 1\n3 10 1\n3 11 1\n3 12 1\n3 13 1\n4 6 1\n4 8 1\n4 9 1\n4 10 1\n4 11 1\n4 12 1\n4 13 1\n5 8 1\n5 9 1\n5 10 1\n5 11 1\n5 12 1\n5 13 1\n6 8 1\n6 9 1\n6 10 1\n6 11 1\n6 12 1\n6 13 1\n8 10 1\n8 11 1\n8 12 1\n8 13 1\n9 11 1\n9 12 1\n9 13 1\n10 12 1\n10 13 1\n11 13 1",
          "testOut": "7",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 10: Circle Complete Graph (smaller)",
          "isTest": false,
          "testIn": "10 38\n0 5\n0 1 14\n1 2 11\n2 3 16\n3 4 13\n4 5 18\n5 6 12\n6 7 15\n7 8 10\n8 9 17\n9 0 14\n0 2 1\n0 3 1\n0 4 1\n0 6 1\n0 7 1\n0 8 1\n1 3 1\n1 4 1\n1 6 1\n1 7 1\n1 8 1\n1 9 1\n2 4 1\n2 6 1\n2 7 1\n2 8 1\n2 9 1\n3 6 1\n3 7 1\n3 8 1\n3 9 1\n4 6 1\n4 7 1\n4 8 1\n4 9 1\n6 8 1\n6 9 1\n7 9 1",
          "testOut": "5",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 11: Hamiltonian 10x10 Grid",
          "isTest": true,
          "testIn": "100 100\n0 90\n0 1 100\n1 2 100\n2 3 100\n3 4 100\n4 5 100\n5 6 100\n6 7 100\n7 8 100\n8 9 100\n9 19 100\n19 18 100\n18 17 100\n17 16 100\n16 15 100\n15 14 100\n14 13 100\n13 12 100\n12 11 100\n11 10 100\n10 20 100\n20 21 100\n21 22 100\n22 23 100\n23 24 100\n24 25 100\n25 26 100\n26 27 100\n27 28 100\n28 29 100\n29 39 100\n39 38 100\n38 37 100\n37 36 100\n36 35 100\n35 34 100\n34 33 100\n33 32 100\n32 31 100\n31 30 100\n30 40 100\n40 41 100\n41 42 100\n42 43 100\n43 44 100\n44 45 100\n45 46 100\n46 47 100\n47 48 100\n48 49 100\n49 59 100\n59 58 100\n58 57 100\n57 56 100\n56 55 100\n55 54 100\n54 53 100\n53 52 100\n52 51 100\n51 50 100\n50 60 100\n60 61 100\n61 62 100\n62 63 100\n63 64 100\n64 65 100\n65 66 100\n66 67 100\n67 68 100\n68 69 100\n69 79 100\n79 78 100\n78 77 100\n77 76 100\n76 75 100\n75 74 100\n74 73 100\n73 72 100\n72 71 100\n71 70 100\n70 80 100\n80 81 100\n81 82 100\n82 83 100\n83 84 100\n84 85 100\n85 86 100\n86 87 100\n87 88 100\n88 89 100\n89 99 100\n99 98 100\n98 97 100\n97 96 100\n96 95 100\n95 94 100\n94 93 100\n93 92 100\n92 91 100\n91 90 100\n0 91 1",
          "testOut": "99",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 11: Hamiltonian 5x5 Grid",
          "isTest": false,
          "testIn": "25 24\n0 24\n0 1 30\n1 2 30\n2 3 30\n3 4 30\n4 9 30\n9 8 30\n8 7 30\n7 6 30\n6 5 30\n5 10 30\n10 11 30\n11 12 30\n12 13 30\n13 14 30\n14 19 30\n19 18 30\n18 17 30\n17 16 30\n16 15 30\n15 20 30\n20 21 30\n21 22 30\n22 23 30\n23 24 30",
          "testOut": "24",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 12: Triple Path Challenge",
          "isTest": true,
          "testIn": "96 100\n84 91\n91 67 1\n4 93 20\n66 38 9\n69 86 15\n32 80 3\n5 24 6\n23 39 22\n83 20 35\n11 75 18\n54 75 18\n2 46 13\n14 81 7\n44 42 29\n31 35 10\n34 7 16\n31 28 11\n3 35 10\n9 33 23\n37 76 33\n18 40 20\n36 23 23\n49 89 11\n21 6 3\n26 33 22\n64 29 24\n57 92 33\n17 13 14\n1 26 21\n32 45 4\n14 3 9\n20 0 34\n37 8 34\n40 39 21\n17 28 12\n84 8 35\n93 85 22\n15 68 19\n49 41 10\n83 43 37\n19 73 38\n53 87 29\n84 61 41\n94 42 29\n18 77 19\n44 47 30\n70 56 17\n22 89 4\n91 48 2\n55 72 6\n43 73 38\n5 6 4\n82 50 26\n65 41 9\n47 79 31\n45 72 5\n50 94 28\n16 2 11\n7 56 16\n80 67 2\n54 4 20\n88 61 40\n58 24 6\n0 92 33\n21 48 2\n60 63 17\n52 10 15\n71 25 28\n16 38 10\n30 65 8\n15 60 18\n81 24 6\n12 36 24\n1 68 20\n77 70 18\n25 87 29\n88 19 39\n30 55 7\n62 9 23\n38 52 5\n34 78 14\n13 86 15\n85 27 22\n66 22 8\n62 59 25\n51 89 12\n74 51 13\n63 10 16\n22 58 7\n90 53 30\n24 65 3\n95 64 25\n69 11 17\n95 71 27\n52 74 14\n84 59 26\n78 46 13\n12 82 26\n29 27 23\n90 57 32\n79 76 32",
          "testOut": "35",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 12: Triple Path Challenge (smaller)",
          "isTest": false,
          "testIn": "64 68\n23 29\n13 58 24\n38 32 25\n2 62 21\n25 23 18\n28 60 7\n48 39 19\n9 46 10\n44 40 3\n43 6 13\n63 15 9\n48 3 18\n42 18 7\n31 16 5\n13 51 22\n63 8 11\n16 21 4\n46 59 11\n53 23 28\n12 52 4\n47 17 8\n31 42 6\n7 25 17\n14 1 6\n37 27 18\n55 24 16\n57 54 12\n9 40 9\n11 20 23\n58 32 25\n10 49 10\n23 20 23\n4 57 13\n55 4 14\n15 17 8\n59 19 12\n3 30 17\n7 22 16\n34 5 17\n8 61 12\n51 62 21\n10 0 9\n22 45 15\n44 26 5\n18 40 8\n53 38 26\n44 28 6\n37 5 17\n33 19 13\n26 52 4\n24 30 16\n60 59 4\n14 52 4\n60 0 8\n12 35 2\n6 61 12\n50 11 22\n45 10 5\n35 29 1\n43 56 15\n36 21 3\n56 34 15\n49 54 11\n36 41 2\n29 41 1\n50 39 20\n1 47 6\n45 33 13\n2 27 19",
          "testOut": "23",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "1 < [[N]] <= 100\n0 < [[M]] <= 100\n0 <= [[S]], [[E]] < [[N]]\n0 <= [[A]], [[B]] < [[N]]\n1 <= [[T]] <= 100\n[[S]] ≠ [[E]]\nNo duplicate wires or self-loops\nEvery node is connected to at least one other node",
      "coverBinaryId": 154383244327502,
      "stubGenerator": "read N:int M:int\nread S:int E:int\nloop M read A:int B:int T:int\nwrite 42",
      "inputDescription": "<<Line 1:>> Two space-separated integers [[N]] and [[M]] - the number of nodes and wires\n<<Line 2:>> Two space-separated integers [[S]] and [[E]] - the power source and the star\n<<Next [[M]] lines:>> Three space-separated integers [[A]], [[B]] and [[T]] - a wire connecting nodes [[A]] and [[B]] with fuse rating [[T]]",
      "solutionLanguage": "Python3",
      "outputDescription": "<<Line 1:>> The minimum number of steps to reach the star, or {{IMPOSSIBLE}} if no valid path exists"
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">It's Christmas Eve, and Santa is preparing to light up the grand Christmas tree! The garland consists of <var>N</var> nodes: a power source, a star, and <var>N</var>-2 bulbs in between, all connected by wires. Nodes always labelled 0 to <var>N</var>-1.<br><br>Each wire has a fuse rated for <var>T</var> steps. A step occurs when electricity moves along a wire from one node to another. When electricity passes through a wire at step <var>i</var>, the fuse blows at step <var>i</var> + <var>T</var>, permanently disconnecting the wire.<br><br><strong>Important:</strong> The circuit must stay connected! If ANY wire on the path burns out before the electricity reaches the star, the garland won't light up. Wires are bidirectional.<br><br><strong>Example:</strong> Consider a simple path: Power(0) &mdash; Bulb(1) &mdash; Star(2), where wire 0-1 has <var>T</var>=2 and wire 1-2 has <var>T</var>=3.<br>&bull; Step 1: Electricity moves from node 0 to node 1 (wire 0-1 used, will burn at step 1+2=3)<br>&bull; Step 2: Electricity moves from node 1 to node 2 (wire 1-2 used, will burn at step 2+3=5)<br>&bull; Result: Path length is 2. Wire 0-1 burns at step 3, wire 1-2 burns at step 5. Both survive until step 2. Valid!<br><br>If wire 0-1 had <var>T</var>=1 instead, it would burn at step 1+1=2, exactly when we reach the star. Not valid!<br><br>Help Santa find the shortest valid path from the power source to the star!</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> Two space-separated integers <var>N</var> and <var>M</var> - the number of nodes and wires<br><strong>Line 2:</strong> Two space-separated integers <var>S</var> and <var>E</var> - the power source and the star<br><strong>Next <var>M</var> lines:</strong> Three space-separated integers <var>A</var>, <var>B</var> and <var>T</var> - a wire connecting nodes <var>A</var> and <var>B</var> with fuse rating <var>T</var></div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> The minimum number of steps to reach the star, or <const>IMPOSSIBLE</const> if no valid path exists</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">1 &lt; <var>N</var> &lt;= 100<br>0 &lt; <var>M</var> &lt;= 100<br>0 &lt;= <var>S</var>, <var>E</var> &lt; <var>N</var><br>0 &lt;= <var>A</var>, <var>B</var> &lt; <var>N</var><br>1 &lt;= <var>T</var> &lt;= 100<br><var>S</var> &ne; <var>E</var><br>No duplicate wires or self-loops<br>Every node is connected to at least one other node</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">3 2\n0 2\n0 1 8\n1 2 12</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">2</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 3172869888,
  "avatar": 4015587045694,
  "commentCount": 26,
  "upVotes": 2,
  "downVotes": 0,
  "validateAction": {
    "actionId": 1318751,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1767555356341,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}