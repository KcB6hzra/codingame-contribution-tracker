{
  "id": 346,
  "activeVersion": 10,
  "score": 6,
  "votableId": 2728999,
  "codingamerId": 1122412,
  "views": 143,
  "commentableId": 2676770,
  "title": "Quaternion Multiplication",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "TheNinja",
  "publicHandle": "346c1cd9d01477717d3a15198a0e9796296",
  "codingamerHandle": "796ed19c638a4cbd9cf6526be9cf56542142211",
  "lastVersion": {
    "version": 10,
    "data": {
      "title": "Quaternion Multiplication",
      "topics": [
        {
          "id": 96,
          "handle": "algebra",
          "labelMap": {
            "1": "Algebra",
            "2": "Algebra"
          },
          "puzzleCount": 2,
          "parentTopicId": 93
        },
        {
          "id": 67,
          "handle": "parsing",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Parsing",
            "2": "Parsing"
          },
          "pageTitle": "Parsing: exercises and theory",
          "puzzleCount": 18,
          "parentTopicId": 41,
          "contentDetailsId": 102
        },
        {
          "id": 94,
          "handle": "mathematics",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Mathematics",
            "2": "Mathematics"
          },
          "puzzleCount": 30,
          "parentTopicId": 93
        }
      ],
      "solution": "#Split the terms and add 1 to constants\nx=gets.chomp.gsub(/([\\^\\D])([ijk])/,'\\11\\2').scan(/[^()]+/)\n#Convert to vectors\ny=x.map{|i|[/([-\\d]*)i/,/([-\\d]*)j/,/([-\\d]*)k/,/([-\\d]*)$/].map{|j|i[j].to_i}}\n#Iteratively Multiply\nwhile y.size>1\n    a,b,c,d,e,f,g,h=y[0]+y[1]\n    z=[[a*h+b*g-c*f+d*e,b*h+c*e-a*g+d*f,c*h+a*f-b*e+d*g,d*h-a*e-b*f-c*g]]\n    y=z+y[2..-1]\nend\na,b,c,d=y[0]\nputs ([[a,?i],[b,?j],[c,?k],[d,'']].map{|i,c|i==0?'':(i>0??+:?-)+((j=i.abs)==1?'':j.to_s)+c}*'').sub(/^\\+/,'')",
      "statement": "The quaternions belong to a number system that extends the complex numbers. A quaternion is defined by the sum of scalar multiples of the constants {{i}},{{j}},{{k}} and {{1}}.\nMore information is available at http://mathworld.wolfram.com/Quaternion.html\n\nConsider the following properties:\n{{j}}{{k}} = {{i}}\n{{k}}{{i}} = {{j}}\n{{i}}{{j}} = {{k}}\n{{i}}² = {{j}}² = {{k}}² = {{-1}}\n\nThese properties also imply that:\n{{k}}{{j}} = {{-i}}\n{{i}}{{k}} = {{-j}}\n{{j}}{{i}} = {{-k}}\n\nThe order of multiplication is important.\n\nYour program must output the result of the product of a number of bracketed simplified quaternions.\n\n<<Pay attention to the formatting>>\nThe coefficient is appended to the left of the constant.\nIf a coefficient is {{1}} or {{-1}}, don't include the {{1}} symbol.\nIf a coefficient or scalar term is {{0}}, don't include it.\nThe terms must be displayed in order: a{{i}} + b{{j}} + c{{k}} + d.\n\n<<Example Multiplication>>\n(2i+2j)(j+1) = (2ij+2i+2j² +2j) = (2k+2i-2+2j) = (2i+2j+2k-2)",
      "testCases": [
        {
          "title": "Small",
          "isTest": true,
          "testIn": "(i+j)(k)",
          "testOut": "i-j",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Small",
          "isTest": false,
          "testIn": "(i+k)(j)",
          "testOut": "-i+k",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Medium",
          "isTest": true,
          "testIn": "(i+j+20)(j-9)",
          "testOut": "-9i+11j+k-181",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Medium",
          "isTest": false,
          "testIn": "(i+k+20)(j-11)",
          "testOut": "-12i+20j-10k-220",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Large",
          "isTest": true,
          "testIn": "(10i)(10j-k+1)(-99i+j-10k+7)(4)",
          "testOut": "-520i-38920j+6800k+7920",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Large",
          "isTest": false,
          "testIn": "(10j)(i-10k+1)(-87j-10k+7)(10i-10j)",
          "testOut": "94000i+78600j+26000k+7400",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Giant",
          "isTest": true,
          "testIn": "(i+j+k+1)(i+2j+4k+8)(i+3j+9k+27)(i+j+8k+8)(i-j+k-10)(99i-j+k-1)(k)(j)(i)(3)",
          "testOut": "11415288i-8751432j-5206896k+9766704",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Giant",
          "isTest": false,
          "testIn": "(i+j+k+1)(i+2j+4k+7)(i+3j+11k+27)(i+j+8k+8)(i-j+k-10)(97i-j+k-1)(k)(j)(i)(3)",
          "testOut": "11264856i-6649128j-5774136k+8287128",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "All coefficients in any part of evaluation will be less than {{10^9}}\nThe input contains no more than 10 simplified bracketed expressions",
      "stubGenerator": "read expr:string(255)\nwrite answer",
      "inputDescription": "<<Line 1>>:The expression [[expr]] to evaluate. This will always be the product of simplified bracketed expressions.",
      "solutionLanguage": "Ruby",
      "outputDescription": "A single line containing the simplified result of the product expression. No brackets are required."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">The quaternions belong to a number system that extends the complex numbers. A quaternion is defined by the sum of scalar multiples of the constants <const>i</const>,<const>j</const>,<const>k</const> and <const>1</const>.<br>More information is available at http://mathworld.wolfram.com/Quaternion.html<br><br>Consider the following properties:<br><const>j</const><const>k</const> = <const>i</const><br><const>k</const><const>i</const> = <const>j</const><br><const>i</const><const>j</const> = <const>k</const><br><const>i</const>&sup2; = <const>j</const>&sup2; = <const>k</const>&sup2; = <const>-1</const><br><br>These properties also imply that:<br><const>k</const><const>j</const> = <const>-i</const><br><const>i</const><const>k</const> = <const>-j</const><br><const>j</const><const>i</const> = <const>-k</const><br><br>The order of multiplication is important.<br><br>Your program must output the result of the product of a number of bracketed simplified quaternions.<br><br><strong>Pay attention to the formatting</strong><br>The coefficient is appended to the left of the constant.<br>If a coefficient is <const>1</const> or <const>-1</const>, don't include the <const>1</const> symbol.<br>If a coefficient or scalar term is <const>0</const>, don't include it.<br>The terms must be displayed in order: a<const>i</const> + b<const>j</const> + c<const>k</const> + d.<br><br><strong>Example Multiplication</strong><br>(2i+2j)(j+1) = (2ij+2i+2j&sup2; +2j) = (2k+2i-2+2j) = (2i+2j+2k-2)</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1</strong>:The expression <var>expr</var> to evaluate. This will always be the product of simplified bracketed expressions.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">A single line containing the simplified result of the product expression. No brackets are required.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">All coefficients in any part of evaluation will be less than <const>10^9</const><br>The input contains no more than 10 simplified bracketed expressions</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">(i+j)(k)</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">i-j</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 302229061549,
  "avatar": 3823739809641,
  "commentCount": 11,
  "upVotes": 6,
  "downVotes": 0,
  "validateAction": {
    "actionId": 657,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}