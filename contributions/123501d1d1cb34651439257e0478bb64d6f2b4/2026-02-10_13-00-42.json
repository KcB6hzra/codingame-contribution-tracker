{
  "id": 123501,
  "activeVersion": 41,
  "score": 8,
  "votableId": 37090715,
  "codingamerId": 5541075,
  "views": 180,
  "commentableId": 36930979,
  "title": "Compiler CG86 (Easy Version)",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "abdelmathin",
  "publicHandle": "123501d1d1cb34651439257e0478bb64d6f2b4",
  "codingamerHandle": "e860d1222214dbf7b38c7ec3646307ea5701455",
  "lastVersion": {
    "version": 41,
    "autocloseTime": 1749401278336,
    "freezeTime": 1747414078336,
    "data": {
      "title": "Compiler CG86 (Easy Version)",
      "topics": [
        {
          "id": 46,
          "handle": "loops",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Boucles",
            "2": "Loops"
          },
          "pageTitle": "Loops: exercises and theory",
          "puzzleCount": 114,
          "parentTopicId": 39,
          "contentDetailsId": 71
        },
        {
          "id": 45,
          "handle": "conditions",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Conditions",
            "2": "Conditions"
          },
          "pageTitle": "Conditions: exercises and theory",
          "puzzleCount": 78,
          "parentTopicId": 39,
          "contentDetailsId": 68
        },
        {
          "id": 47,
          "handle": "arrays",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Tableaux",
            "2": "Arrays"
          },
          "pageTitle": "Arrays: exercises and theory",
          "puzzleCount": 41,
          "parentTopicId": 40,
          "contentDetailsId": 78
        },
        {
          "id": 195,
          "handle": "data-types",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Data Types",
            "2": "Data Types"
          },
          "puzzleCount": 6,
          "parentTopicId": 93
        },
        {
          "id": 49,
          "handle": "hash-tables",
          "category": "FUNDAMENTALS",
          "labelMap": {
            "1": "Tables de hachage",
            "2": "Hash tables"
          },
          "pageTitle": "Hash tables: exercises and theory",
          "puzzleCount": 5,
          "parentTopicId": 40,
          "contentDetailsId": 95
        }
      ],
      "solution": "// Author: Abdelmathin Habachi, https://abdelmathin.com\n// https://www.linkedin.com/in/abdelmathin/\n// rm -rf a.out && gcc -Wall -Wextra -Werror main.c && ./a.out\n\n#include <stdlib.h>\n#include <stdio.h>\n#include <string.h>\n#include <stdbool.h>\n\n/**\n * Auto-generated code below aims at helping you parse\n * the standard input according to the problem statement.\n **/\n\n#define PLUS  0\n#define MINUS 1\n\nint getoperand(int pos, char* str)\n{\n\tif ((pos == 0) || (str[pos - 2] == '+'))\n\t\treturn (PLUS);\n\treturn (MINUS);\n}\n\nint repetition(int pos, char* str, int len)\n{\n\tint  count = 1;\n\tchar digit = str[pos];\n\tint  oprnd = getoperand(pos, str);\n\tpos += 4;\n\twhile (pos < len)\n\t{\n\t\tif ((getoperand(pos, str) == oprnd) && (str[pos] == digit))\n\t\t\tcount++;\n\t\tpos += 4;\n\t}\n\treturn (count);\n}\n\nvoid instruction(int count, int digit, int operand)\n{\n\tif (count > 1)\n\t\tprintf(\"REPEAT %d\\n\", count);\n\tif (operand == PLUS)\n\t\tprintf(\"ADD cgx %d\\n\", digit);\n\telse\n\t\tprintf(\"SUB cgx %d\\n\", digit);\n}\n\nvoid compiler_cg86(char* str)\n{\n\tint visited[2][10];\n\tint len   = (int) strlen(str);\n\tint pos   = 0;\n\tint count = 0;\n\tint oprnd = 0;\n\tint digit = 0;\n\tbzero(visited, sizeof(visited));\n\tif (str[0] == '-')\n\t\tpos += 2;\n\twhile (pos < len)\n\t{\n\t\toprnd = getoperand(pos, str);\n\t\tcount = repetition(pos, str, len);\n\t\tdigit = str[pos] - '0';\n\t\tif (visited[oprnd][digit] == 0)\n\t\t\tinstruction(count, digit, oprnd);\n\t\tvisited[oprnd][digit] = 1;\n\t\tpos += 4;\n\t}\n\tprintf(\"EXIT\\n\");\n}\n\nint main(void)\n{\n    char expression[1025];\n    scanf(\"%[^\\n]\", expression);\n\n    // Write an answer using printf(). DON'T FORGET THE TRAILING \\n\n    // To debug: fprintf(stderr, \"Debug messages...\\n\");\n    compiler_cg86(expression);\n    return (0);\n}\n",
      "statement": "<<CG86>> is a minimal arithmetic compiler targeting a fictional assembly language. It supports only addition and subtraction, using a single register {{cgx}}, initialized to zero.\n\nTo reduce the instruction count, repeated operations can be compressed using the {{REPEAT}} instruction.\n\n<<Instruction Set>>:\n\n{{ADD}} {{cgx}} [[X]]: Adds [[X]] to {{cgx}}  \n{{SUB}} {{cgx}} [[X]]: Subtracts [[X]] from {{cgx}}  \n{{REPEAT}} [[N]]: Repeats the next instruction [[N]] times  \n{{EXIT}}: Terminates the program\n\nThe {{REPEAT}} instruction applies only to <<identical operations>> â€” that is, instructions of the same type and operand (e.g., multiple instances of {{ADD}} {{cgx}} [[5]]).\n\nThe {{REPEAT}} instruction must come before the instruction it repeats.\n\nIdentical operations must be compressed using the {{REPEAT}} instruction, even if they do not appear consecutively in the original expression.\n\nInstructions must preserve the original order of computation and may only be optimized using the {{REPEAT}} instruction. Reordering or merging of non-identical operations is not allowed.\n\nThe program must end with an {{EXIT}} instruction.",
      "testCases": [
        {
          "title": "Test 1",
          "isTest": true,
          "testIn": "1 + 2 + 2 + 2 + 2 - 3",
          "testOut": "ADD cgx 1\nREPEAT 4\nADD cgx 2\nSUB cgx 3\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "8 + 5 + 5 + 5 + 5 - 4",
          "testOut": "ADD cgx 8\nREPEAT 4\nADD cgx 5\nSUB cgx 4\nEXIT",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 2",
          "isTest": true,
          "testIn": "1 + 2 + 2 - 3 + 2 + 2",
          "testOut": "ADD cgx 1\nREPEAT 4\nADD cgx 2\nSUB cgx 3\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "9 + 7 + 7 - 4 + 7 + 7",
          "testOut": "ADD cgx 9\nREPEAT 4\nADD cgx 7\nSUB cgx 4\nEXIT",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 3",
          "isTest": true,
          "testIn": "1 + 2",
          "testOut": "ADD cgx 1\nADD cgx 2\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "7 + 9",
          "testOut": "ADD cgx 7\nADD cgx 9\nEXIT",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 4",
          "isTest": true,
          "testIn": "1 - 2",
          "testOut": "ADD cgx 1\nSUB cgx 2\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "8 - 3",
          "testOut": "ADD cgx 8\nSUB cgx 3\nEXIT",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 5",
          "isTest": true,
          "testIn": "1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9",
          "testOut": "ADD cgx 1\nADD cgx 2\nADD cgx 3\nADD cgx 4\nADD cgx 5\nADD cgx 6\nADD cgx 7\nADD cgx 8\nADD cgx 9\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "9 + 8 + 7 + 6 + 5 + 4 + 3 + 2 + 1",
          "testOut": "ADD cgx 9\nADD cgx 8\nADD cgx 7\nADD cgx 6\nADD cgx 5\nADD cgx 4\nADD cgx 3\nADD cgx 2\nADD cgx 1\nEXIT",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 6",
          "isTest": true,
          "testIn": "1 - 2 - 3 - 4 - 5 - 6 - 7 - 8 - 9",
          "testOut": "ADD cgx 1\nSUB cgx 2\nSUB cgx 3\nSUB cgx 4\nSUB cgx 5\nSUB cgx 6\nSUB cgx 7\nSUB cgx 8\nSUB cgx 9\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 6",
          "isTest": false,
          "testIn": "9 - 8 - 7 - 6 - 5 - 4 - 3 - 2 - 1",
          "testOut": "ADD cgx 9\nSUB cgx 8\nSUB cgx 7\nSUB cgx 6\nSUB cgx 5\nSUB cgx 4\nSUB cgx 3\nSUB cgx 2\nSUB cgx 1\nEXIT",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 7",
          "isTest": true,
          "testIn": "- 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 + 3 - 9 - 9 - 9 - 9 + 5 + 6 + 5 + 4 + 5 - 9 - 9 - 9 - 9 - 9 - 9 - 9 + 3 - 1 + 1 + 5",
          "testOut": "REPEAT 2\nSUB cgx 1\nADD cgx 2\nREPEAT 24\nADD cgx 3\nREPEAT 2\nADD cgx 4\nREPEAT 5\nADD cgx 5\nREPEAT 2\nADD cgx 6\nADD cgx 7\nADD cgx 8\nADD cgx 9\nREPEAT 11\nSUB cgx 9\nADD cgx 1\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "- 7 + 2 + 6 + 4 + 5 + 6 + 7 + 8 + 9 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 + 6 - 9 - 9 - 9 - 9 + 5 + 6 + 5 + 4 + 5 - 9 - 9 - 9 - 9 - 9 - 9 - 9 + 6 - 7 + 7 + 5",
          "testOut": "REPEAT 2\nSUB cgx 7\nADD cgx 2\nREPEAT 26\nADD cgx 6\nREPEAT 2\nADD cgx 4\nREPEAT 5\nADD cgx 5\nREPEAT 2\nADD cgx 7\nADD cgx 8\nADD cgx 9\nREPEAT 11\nSUB cgx 9\nEXIT",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 8",
          "isTest": true,
          "testIn": "- 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9",
          "testOut": "REPEAT 127\nSUB cgx 9\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 8",
          "isTest": false,
          "testIn": "- 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4 - 4",
          "testOut": "REPEAT 127\nSUB cgx 4\nEXIT",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 9",
          "isTest": true,
          "testIn": "- 9 + 1 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 + 5 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 - 9 + 1",
          "testOut": "REPEAT 127\nSUB cgx 9\nREPEAT 2\nADD cgx 1\nADD cgx 5\nEXIT",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 9",
          "isTest": false,
          "testIn": "- 7 + 1 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 + 5 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 - 7 + 1",
          "testOut": "REPEAT 127\nSUB cgx 7\nREPEAT 2\nADD cgx 1\nADD cgx 5\nEXIT",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "easy",
      "constraints": "The length of the input expression is less than 1024 characters.\nAll numbers in the input expression are integers between 1 and 9 (inclusive).\nThe expression is well-formed and contains at least two numbers and one operator.",
      "coverBinaryId": 143607821661776,
      "stubGenerator": "\nread expression:string(1024)\nwrite ADD cgx 1\nwrite EXIT",
      "inputDescription": "A single line containing a space-separated arithmetic expression, alternating between integers and + or - operators.",
      "solutionLanguage": "C",
      "outputDescription": "A sequence of CG86 instructions, with one instruction per line, following the specified order and optimization rules."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\"><strong>CG86</strong> is a minimal arithmetic compiler targeting a fictional assembly language. It supports only addition and subtraction, using a single register <const>cgx</const>, initialized to zero.<br><br>To reduce the instruction count, repeated operations can be compressed using the <const>REPEAT</const> instruction.<br><br><strong>Instruction Set</strong>:<br><br><const>ADD</const> <const>cgx</const> <var>X</var>: Adds <var>X</var> to <const>cgx</const>  <br><const>SUB</const> <const>cgx</const> <var>X</var>: Subtracts <var>X</var> from <const>cgx</const>  <br><const>REPEAT</const> <var>N</var>: Repeats the next instruction <var>N</var> times  <br><const>EXIT</const>: Terminates the program<br><br>The <const>REPEAT</const> instruction applies only to <strong>identical operations</strong> &mdash; that is, instructions of the same type and operand (e.g., multiple instances of <const>ADD</const> <const>cgx</const> <var>5</var>).<br><br>The <const>REPEAT</const> instruction must come before the instruction it repeats.<br><br>Identical operations must be compressed using the <const>REPEAT</const> instruction, even if they do not appear consecutively in the original expression.<br><br>Instructions must preserve the original order of computation and may only be optimized using the <const>REPEAT</const> instruction. Reordering or merging of non-identical operations is not allowed.<br><br>The program must end with an <const>EXIT</const> instruction.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\">A single line containing a space-separated arithmetic expression, alternating between integers and + or - operators.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">A sequence of CG86 instructions, with one instruction per line, following the specified order and optimization rules.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">The length of the input expression is less than 1024 characters.<br>All numbers in the input expression are integers between 1 and 9 (inclusive).<br>The expression is well-formed and contains at least two numbers and one operator.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">1 + 2 + 2 + 2 + 2 - 3</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">ADD cgx 1\nREPEAT 4\nADD cgx 2\nSUB cgx 3\nEXIT</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 23313303846,
  "avatar": 118130566868021,
  "commentCount": 12,
  "upVotes": 9,
  "downVotes": 1,
  "validateAction": {
    "actionId": 1136544,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1747415137001,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}