{
  "id": 4423,
  "activeVersion": 40,
  "score": 7,
  "votableId": 10997720,
  "codingamerId": 2914398,
  "views": 480,
  "commentableId": 10926355,
  "title": "A child's play",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "BLANC",
  "publicHandle": "44234bafac22aabe005455fa4dead0136e9b",
  "codingamerHandle": "b12b98e075dfc70878c9c0b33f79db128934192",
  "lastVersion": {
    "version": 40,
    "autocloseTime": 1565299575210,
    "data": {
      "title": "A child's play",
      "topics": [],
      "solution": "using System;\nusing System.Linq;\nusing System.IO;\nusing System.Text;\nusing System.Collections;\nusing System.Collections.Generic;\n\nclass Solution\n{\n    static void Main(string[] args)\n    {\n        string[] inputs = Console.ReadLine().Split(' ');\n        int w = int.Parse(inputs[0]);\n        int h = int.Parse(inputs[1]);\n        long n = long.Parse(Console.ReadLine());\n\n        char[,] map = new char[w, h];\n        Point robot = new Point();\n        for (int y = 0; y < h; y++)\n        {\n            string line = Console.ReadLine();\n            for (int x = 0; x < w; x++)\n            {\n                map[x, y] = line[x];\n                if (line[x] == 'O')\n                {\n                    robot.X = x;\n                    robot.Y = y;\n                }\n            }\n        }\n\n        int step = 0;\n        int currentDirection = 0;\n\n        Dictionary<string, int> lastVisited = new Dictionary<string, int>()\n        {\n            [stateToKey(robot, currentDirection)] = 0\n        };\n\n        Point previous = new Point();\n        do\n        {\n            previous.X = robot.X;\n            previous.Y = robot.Y;\n            step++;\n        move:\n            currentDirection %= 4;\n            switch (currentDirection)\n            {\n                case 0: if (map[robot.X, robot.Y - 1] != '#') robot.Y--; else { currentDirection++; goto move; } break;\n                case 1: if (map[robot.X + 1, robot.Y] != '#') robot.X++; else { currentDirection++; goto move; } break;\n                case 2: if (map[robot.X, robot.Y + 1] != '#') robot.Y++; else { currentDirection++; goto move; } break;\n                case 3: if (map[robot.X - 1, robot.Y] != '#') robot.X--; else { currentDirection++; goto move; } break;\n            }\n\n            string currentState = stateToKey(robot, currentDirection);\n            if (!lastVisited.ContainsKey(currentState))\n            {\n                lastVisited.Add(currentState, step);\n            }\n            else\n            {\n                int loopStep = step - lastVisited[currentState];\n                n %= loopStep;\n                if (n == 0)\n                {\n                    robot.X = previous.X;\n                    robot.Y = previous.Y;\n                }\n            }\n        } while (--n > 0);\n        Console.WriteLine(robot.X + \" \" + robot.Y);\n    }\n\n    private static string stateToKey(Point point, int direction)\n    {\n        return $\"{point.X};{point.Y};{direction}\";\n    }\n}\n\nstruct Point\n{\n    public int X;\n    public int Y;\n}",
      "statement": "For several years now, in elementary schools, we have seen the emergence of a new educational model, playful programming. The students must program a small robot using assembly blocks. This allows them to get familiar with programming from an early age while exercising their logic and perception of space.\n\nYou are a student at one such school. The purpose of the exercise is simple: your teacher has crafted a circuit for your robot, told you how many moves [[n]] the robot may make, and <<you must find out the final position of the robot at end of execution.>>\n\nTo do this you need to know some principles of robot operation.\n– When the robot encounters an obstacle (represented by {{#}}) it turns right (on same operation) until there's no obstacle ahead anymore. Otherwise on an empty area (represented by {{.}}) it moves straight ahead.\n– The robot initially moves upwards.\n– The robot stops after [[n]] moves.\n– The top left corner represents the coordinates (0,0)\n– The robot's environment is represented as follows, where {{O}} is the robot's initial position:\n`...#........\n...........#\n............\n............\n..#O........\n..........#.`",
      "testCases": [
        {
          "title": "Test example",
          "isTest": true,
          "testIn": "12 6\n987\n...#........\n...........#\n............\n............\n..#O........\n..........#.",
          "testOut": "7 1",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator example",
          "isTest": false,
          "testIn": "12 8\n987\n....#.......\n........#...\n............\n...#O.......\n.......#....\n............\n............\n............",
          "testOut": "7 3",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test real case",
          "isTest": true,
          "testIn": "12 8\n1234321\n....#.......\n........#...\n...........#\n...#O.......\n...#........\n.......#....\n...........#\n....#.......",
          "testOut": "4 2",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator real case",
          "isTest": false,
          "testIn": "12 8\n987654\n....#.......\n........#...\n...........#\n...#O.......\n...#........\n.......#....\n...........#\n....#.......",
          "testOut": "7 2",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 3",
          "isTest": true,
          "testIn": "14 10\n123456789\n..#...........\n....#..#......\n.#O.....#.....\n..............\n..............\n.......##...#.\n............#.\n.#........###.\n.#.#..........\n..............",
          "testOut": "2 1",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "14 10\n12345678\n..#...........\n....#..#......\n.#O.....#.....\n..............\n..............\n.......##...#.\n............#.\n.#........###.\n.#.#..........\n..............",
          "testOut": "3 1",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 4",
          "isTest": true,
          "testIn": "16 10\n12321123212397\n...#...###......\n...............#\n.#..............\n...........#....\n................\n................\n..#O............\n.......####.....\n#...............\n###############.",
          "testOut": "6 6",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "16 10\n123211232123\n...#...###......\n...............#\n.#..............\n...........#....\n................\n................\n..#O............\n.......####.....\n#...............\n###############.",
          "testOut": "14 8",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 5",
          "isTest": true,
          "testIn": "20 10\n1234567898765434\n...#.......#........\n.......#..........#.\n..#O........#.......\n......#.............\n....................\n........#......#....\n....................\n..#......#..........\n..............#.....\n..................#.",
          "testOut": "4 1",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 5",
          "isTest": false,
          "testIn": "20 10\n987654321234567\n...#.......#........\n.......#..........#.\n..#O........#.......\n......#.............\n....................\n........#......#....\n....................\n..#......#..........\n..............#.....\n..................#.",
          "testOut": "4 2",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 6",
          "isTest": true,
          "testIn": "6 5\n15\n######\n##...#\n#.O#.#\n#....#\n######",
          "testOut": "2 3",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 6",
          "isTest": false,
          "testIn": "6 5\n14\n######\n##...#\n#.O#.#\n#....#\n######",
          "testOut": "2 2",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 7",
          "isTest": true,
          "testIn": "4 4\n2\n####\n#..#\n#O.#\n####",
          "testOut": "2 1",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 7",
          "isTest": false,
          "testIn": "4 4\n3\n####\n#..#\n#O.#\n####",
          "testOut": "2 2",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 8",
          "isTest": true,
          "testIn": "5 5\n13\n#####\n#...#\n#.#.#\n#...#\n#O###",
          "testOut": "3 1",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 8",
          "isTest": false,
          "testIn": "5 5\n11\n#####\n#...#\n#.#.#\n#...#\n#O###",
          "testOut": "1 1",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Test 9",
          "isTest": true,
          "testIn": "5 5\n4\n#####\n#...#\n#.#.#\n#...#\n##O##",
          "testOut": "1 3",
          "isValidator": false,
          "needValidation": false
        },
        {
          "title": "Validator 9",
          "isTest": false,
          "testIn": "5 5\n6\n#####\n#...#\n#.#.#\n#...#\n##O##",
          "testOut": "1 1",
          "isValidator": true,
          "needValidation": false
        },
        {
          "title": "Loop detection 1",
          "isTest": true,
          "testIn": "12 6\n4000000000\n..##..#.....\n...........#\n............\n............\n.#.O........\n..........#.",
          "testOut": "5 4",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Loop detection 1",
          "isTest": false,
          "testIn": "12 6\n4000000000\n..###.#.....\n...........#\n............\n............\n.#..O.......\n..........#.",
          "testOut": "4 4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Loop detection 2",
          "isTest": true,
          "testIn": "12 6\n4000000000\n..##..#.....\n...........#\n......O.....\n............\n.#..........\n..........#.",
          "testOut": "2 2",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Loop detection 2",
          "isTest": false,
          "testIn": "12 6\n4000000000\n..##..##....\n...........#\n.......O....\n............\n.#..........\n..........#.",
          "testOut": "2 1",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "easy",
      "constraints": "¤ 0 < [[w]] <= 20\n¤ 0 < [[h]] <= 10\n¤ The obstacles are placed in such a way that the robot will never leave the map \n¤ The robot will never be blocked between obstacles\n¤ [[n]] < 2^53",
      "coverBinaryId": 31036707485792,
      "stubGenerator": "read w:int h:int\nread n:long\nloop h read line:string(500)\nwrite answer",
      "inputDescription": "<<Line 1:>> Width [[w]] and height [[h]] of the map.\n<<Line 2:>> Number [[n]] of operations to be performed by the robot\n<<Next [[h]] lines:>> The map where the robot moves with {{.}} representing a free space, {{#}} an obstacle and {{O}} the starting position.",
      "solutionLanguage": "C#",
      "outputDescription": "¤ The final position [[x y]] (separated by a space) of the robot at end of execution, where [[x]] is the horizontal position and [[y]] is the vertical position."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">For several years now, in elementary schools, we have seen the emergence of a new educational model, playful programming. The students must program a small robot using assembly blocks. This allows them to get familiar with programming from an early age while exercising their logic and perception of space.<br><br>You are a student at one such school. The purpose of the exercise is simple: your teacher has crafted a circuit for your robot, told you how many moves <var>n</var> the robot may make, and <strong>you must find out the final position of the robot at end of execution.</strong><br><br>To do this you need to know some principles of robot operation.<br>&ndash;&nbsp;When the robot encounters an obstacle (represented by <const>#</const>) it turns right (on same operation) until there's no obstacle ahead anymore. Otherwise on an empty area (represented by <const>.</const>) it moves straight ahead.<br>&ndash; The robot initially moves upwards.<br>&ndash; The robot stops after <var>n</var> moves.<br>&ndash; The top left corner represents the coordinates (0,0)<br>&ndash; The robot's environment is represented as follows, where <const>O</const> is the robot's initial position:<br><pre style=\"font-family: monospace\">...#........<br>...........#<br>............<br>............<br>..#O........<br>..........#.</pre></span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> Width <var>w</var> and height <var>h</var> of the map.<br><strong>Line 2:</strong> Number <var>n</var> of operations to be performed by the robot<br><strong>Next <var>h</var> lines:</strong> The map where the robot moves with <const>.</const> representing a free space, <const>#</const> an obstacle and <const>O</const> the starting position.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">&curren; The final position <var>x y</var> (separated by a space) of the robot at end of execution, where <var>x</var> is the horizontal position and <var>y</var> is the vertical position.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">&curren; 0 &lt; <var>w</var> &lt;= 20<br>&curren; 0 &lt; <var>h</var> &lt;= 10<br>&curren; The obstacles are placed in such a way that the robot will never leave the map <br>&curren; The robot will never be blocked between obstacles<br>&curren; <var>n</var> &lt; 2^53</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">12 6\n987\n...#........\n...........#\n............\n............\n..#O........\n..........#.</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">7 1</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 207696110112,
  "avatar": 46459187054094,
  "commentCount": 54,
  "upVotes": 8,
  "downVotes": 1,
  "validateAction": {
    "actionId": 362826,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}