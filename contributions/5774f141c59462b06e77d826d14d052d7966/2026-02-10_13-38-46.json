{
  "id": 5774,
  "activeVersion": 16,
  "score": 86,
  "votableId": 16160883,
  "codingamerId": 1500515,
  "views": 1351,
  "commentableId": 16074627,
  "title": "Blockout",
  "status": "ACCEPTED",
  "type": "PUZZLE_SOLO",
  "nickname": "eulerscheZahl",
  "publicHandle": "5774f141c59462b06e77d826d14d052d7966",
  "codingamerHandle": "8374201b6f1d19eb99d61c80351465b65150051",
  "lastVersion": {
    "version": 16,
    "autocloseTime": 1612117140828,
    "data": {
      "title": "Blockout",
      "topics": [
        {
          "id": 191,
          "handle": "3d",
          "labelMap": {
            "1": "3D",
            "2": "3D"
          },
          "puzzleCount": 1,
          "parentTopicId": 93
        }
      ],
      "difficulty": "hard",
      "refereeMd5": "1500515/b6549569f3f7e9837c1f1826e17766d5",
      "testHandle": "862009d303ad01e86e3f0537f622e3764fe182",
      "viewerCode": "var Drawer=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";n.r(e),n.d(e,\"Drawer\",(function(){return yl}));var r={baseUrl:\"https://cdn-games.codingame.com/community/1500515-1606401236233/\",images:{\"blockdef.png\":\"0d92c1c231aa0f9690a9e94621f970ea5cda546cb4e0f8a247f8384ed5d7a6cd.png\"},sprites:[],fonts:[]};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t){return(a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function c(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function h(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);return n=e?(n=u(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==a(n)&&\"function\"!=typeof n?l(r):n}}function l(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return\"number\"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:0<t?1:+t}),\"name\"in Function.prototype==0&&Object.defineProperty(Function.prototype,\"name\",{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError(\"Cannot convert undefined or null to object\");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e});var d=306,p=307,f=1e3,m=1001,g=1003,v=1006,y=1015,M=1020,x=1022,b=1023,_=1026,S=1027,w=2400,E=2401,R=3e3,T=35044,A=35048;function L(){}Object.assign(L.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&(void 0===(t=this._listeners[t])||-1!==(e=t.indexOf(e))&&t.splice(e,1))},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}});for(var P=[],C=0;C<256;C++)P[C]=(C<16?\"0\":\"\")+C.toString(16);var O,I=1234567,N={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(P[255&t]+P[t>>8&255]+P[t>>16&255]+P[t>>24&255]+\"-\"+P[255&e]+P[e>>8&255]+\"-\"+P[e>>16&15|64]+P[e>>24&255]+\"-\"+P[63&n|128]+P[n>>8&255]+\"-\"+P[n>>16&255]+P[n>>24&255]+P[255&r]+P[r>>8&255]+P[r>>16&255]+P[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((I=16807*(I=void 0!==t?t%2147483647:I)%2147483647)-1)/2147483646},degToRad:function(t){return t*N.DEG2RAD},radToDeg:function(t){return t*N.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),c=o(n/2),h=a((e+r)/2),l=o((e+r)/2),u=a((e-r)/2),d=o((e-r)/2),p=a((r-e)/2),f=o((r-e)/2);switch(i){case\"XYX\":t.set(s*l,c*u,c*d,s*h);break;case\"YZY\":t.set(c*d,s*l,c*u,s*h);break;case\"ZXZ\":t.set(c*u,c*d,s*l,s*h);break;case\"XZX\":t.set(s*l,c*f,c*p,s*h);break;case\"YXY\":t.set(c*p,s*l,c*f,s*h);break;case\"ZYZ\":t.set(c*f,c*p,s*l,s*h);break;default:console.warn(\"THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: \"+i)}}};function D(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.x=t,this.y=e}function F(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}Object.defineProperties(D.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(D.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y;t=t.elements;return this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x;e=this.y-t.y;return this.x=i*n-e*r+t.x,this.y=i*r+e*n+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(F.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,a,o,s,c){var h=this.elements;return h[0]=t,h[1]=r,h[2]=o,h[3]=e,h[4]=i,h[5]=s,h[6]=n,h[7]=a,h[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[3],s=n[6],c=n[1],h=n[4],l=n[7],u=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4];t=r[7],e=r[2],n=r[5],r=r[8];return i[0]=a*f+o*v+s*e,i[3]=a*m+o*y+s*n,i[6]=a*g+o*t+s*r,i[1]=c*f+h*v+l*e,i[4]=c*m+h*y+l*n,i[7]=c*g+h*t+l*r,i[2]=u*f+d*v+p*e,i[5]=u*m+d*y+p*n,i[8]=u*g+d*t+p*r,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t,e=(t=this.elements)[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],c=t[7];return e*a*(t=t[8])-e*o*c-n*i*t+n*o*s+r*i*c-r*a*s},getInverse:function(t,e){void 0!==e&&console.warn(\"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\");var n=t.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],c=n[4],h=n[5],l=n[6],u=n[7],d=n[8],p=d*c-h*u;return 0==(n=i*p+a*(e=h*l-d*s)+o*(t=u*s-c*l))?this.set(0,0,0,0,0,0,0,0,0):(n=1/n,r[0]=p*n,r[1]=(o*u-d*a)*n,r[2]=(h*a-o*c)*n,r[3]=e*n,r[4]=(d*i-o*l)*n,r[5]=(o*s-h*i)*n,r[6]=t*n,r[7]=(a*l-u*i)*n,r[8]=(c*i-a*s)*n,this)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,a,o){var s=Math.cos(i);i=Math.sin(i);this.set(n*s,n*i,-n*(s*a+i*o)+a+t,-r*i,r*s,-r*(-i*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],c=r[4];t=r[7];return r[0]=e*i+n*s,r[3]=e*a+n*c,r[6]=e*o+n*t,r[1]=-n*i+e*s,r[4]=-n*a+e*c,r[7]=-n*o+e*t,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){var n=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var z={getDataURL:function(t){return/^data:/i.test(t.src)||\"undefined\"==typeof HTMLCanvasElement?t.src:2048<(t=t instanceof HTMLCanvasElement?t:((O=void 0===O?document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"):O).width=t.width,O.height=t.height,e=O.getContext(\"2d\"),t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),O)).width||2048<t.height?t.toDataURL(\"image/jpeg\",.6):t.toDataURL(\"image/png\");var e}},B=0;function U(t,e,n,r,i,a,o,s,c,h){Object.defineProperty(this,\"id\",{value:B++}),this.uuid=N.generateUUID(),this.name=\"\",this.image=void 0!==t?t:U.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:U.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:m,this.wrapT=void 0!==r?r:m,this.magFilter=void 0!==i?i:v,this.minFilter=void 0!==a?a:1008,this.anisotropy=void 0!==c?c:1,this.format=void 0!==o?o:b,this.internalFormat=null,this.type=void 0!==s?s:1009,this.offset=new D(0,0),this.repeat=new D(1,1),this.center=new D(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new F,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:R,this.version=0,this.onUpdate=null}function H(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;this.x=t,this.y=e,this.z=n,this.w=r}function G(t,e,n){this.width=t,this.height=e,this.scissor=new H(0,0,t,e),this.scissorTest=!1,this.viewport=new H(0,0,t,e),this.texture=new U(void 0,(n=n||{}).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:v,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function k(t,e,n){G.call(this,t,e,n),this.samples=4}function j(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;this._x=t,this._y=e,this._z=n,this._w=r}U.DEFAULT_IMAGE=void 0,U.DEFAULT_MAPPING=300,U.prototype=Object.assign(Object.create(L.prototype),{constructor:U,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||\"string\"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=N.generateUUID()),!e&&void 0===t.images[r.uuid]){if(Array.isArray(r))for(var i=[],a=0,o=r.length;a<o;a++)i.push(z.getDataURL(r[a]));else i=z.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:\"dispose\"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case f:t.x=t.x-Math.floor(t.x);break;case m:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case f:t.y=t.y-Math.floor(t.y);break;case m:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(U.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(H.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(H.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w;t=t.elements;return this.x=t[0]*e+t[4]*n+t[8]*r+t[12]*i,this.y=t[1]*e+t[5]*n+t[9]*r+t[13]*i,this.z=t[2]*e+t[6]*n+t[10]*r+t[14]*i,this.w=t[3]*e+t[7]*n+t[11]*r+t[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i=(y=t.elements)[0],a=y[4],o=y[8],s=y[1],c=y[5],h=y[9],l=y[2],u=y[6],d=y[10];if(Math.abs(a-s)<.01&&Math.abs(o-l)<.01&&Math.abs(h-u)<.01){if(Math.abs(a+s)<.1&&Math.abs(o+l)<.1&&Math.abs(h+u)<.1&&Math.abs(i+c+d-3)<.1)return this.set(1,0,0,0),this;var p=Math.PI,f=(i+1)/2,m=(c+1)/2,g=(d+1)/2,v=(a+s)/4,y=(t=(o+l)/4,(h+u)/4);return m<f&&g<f?r=f<.01?(e=0,n=.707106781):(n=v/(e=Math.sqrt(f)),t/e):g<m?r=m<.01?(n=0,e=.707106781):(e=v/(n=Math.sqrt(m)),y/n):g<.01?(n=e=.707106781,r=0):(e=t/(r=Math.sqrt(g)),n=y/r),this.set(e,n,r,p),this}return p=Math.sqrt((u-h)*(u-h)+(o-l)*(o-l)+(s-a)*(s-a)),Math.abs(p)<.001&&(p=1),this.x=(u-h)/p,this.y=(o-l)/p,this.z=(s-a)/p,this.w=Math.acos((i+c+d-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),G.prototype=Object.assign(Object.create(L.prototype),{constructor:G,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),k.prototype=Object.assign(Object.create(G.prototype),{constructor:k,isWebGLMultisampleRenderTarget:!0,copy:function(t){return G.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(j,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,a,o){var s=n[r+0],c=n[r+1],h=n[r+2],l=n[r+3],u=i[a+0],d=i[a+1],p=i[a+2],f=i[a+3];l===f&&s===u&&c===d&&h===p||(n=1-o,i=0<=(r=s*u+c*d+h*p+l*f)?1:-1,(a=1-r*r)>Number.EPSILON&&(a=Math.sqrt(a),r=Math.atan2(a,r*i),n=Math.sin(n*r)/a,o=Math.sin(o*r)/a),s=s*n+u*(i*=o),c=c*n+d*i,h=h*n+p*i,l=l*n+f*i,n===1-o&&(s*=o=1/Math.sqrt(s*s+c*c+h*h+l*l),c*=o,h*=o,l*=o)),t[e]=s,t[e+1]=c,t[e+2]=h,t[e+3]=l},multiplyQuaternionsFlat:function(t,e,n,r,i,a){var o=n[r],s=n[r+1],c=n[r+2],h=n[r+3],l=i[a];n=i[a+1],r=i[a+2],a=i[a+3];return t[e]=o*a+h*l+s*r-c*n,t[e+1]=s*a+h*n+c*l-o*r,t[e+2]=c*a+h*r+o*n-s*l,t[e+3]=h*a-o*l-s*n-c*r,t}}),Object.defineProperties(j.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(j.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");var n=t._x,r=t._y,i=t._z,a=t.order,o=Math.cos,s=(t=Math.sin,o(n/2)),c=o(r/2),h=o(i/2),l=t(n/2),u=t(r/2),d=t(i/2);switch(a){case\"XYZ\":this._x=l*c*h+s*u*d,this._y=s*u*h-l*c*d,this._z=s*c*d+l*u*h,this._w=s*c*h-l*u*d;break;case\"YXZ\":this._x=l*c*h+s*u*d,this._y=s*u*h-l*c*d,this._z=s*c*d-l*u*h,this._w=s*c*h+l*u*d;break;case\"ZXY\":this._x=l*c*h-s*u*d,this._y=s*u*h+l*c*d,this._z=s*c*d+l*u*h,this._w=s*c*h-l*u*d;break;case\"ZYX\":this._x=l*c*h-s*u*d,this._y=s*u*h+l*c*d,this._z=s*c*d-l*u*h,this._w=s*c*h+l*u*d;break;case\"YZX\":this._x=l*c*h+s*u*d,this._y=s*u*h+l*c*d,this._z=s*c*d-l*u*h,this._w=s*c*h-l*u*d;break;case\"XZY\":this._x=l*c*h-s*u*d,this._y=s*u*h-l*c*d,this._z=s*c*d+l*u*h,this._w=s*c*h+l*u*d;break;default:console.warn(\"THREE.Quaternion: .setFromEuler() encountered an unknown order: \"+a)}return!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2;e=Math.sin(n);return this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n,r=(n=t.elements)[0],i=n[4],a=n[8],o=n[1],s=n[5],c=n[9],h=n[2],l=n[6];return 0<(n=r+s+(t=n[10]))?(n=.5/Math.sqrt(n+1),this._w=.25/n,this._x=(l-c)*n,this._y=(a-h)*n,this._z=(o-i)*n):s<r&&t<r?(e=2*Math.sqrt(1+r-s-t),this._w=(l-c)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(a+h)/e):t<s?(e=2*Math.sqrt(1+s-r-t),this._w=(a-h)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(c+l)/e):(s=2*Math.sqrt(1+t-r-s),this._w=(o-i)/s,this._x=(a+h)/s,this._y=(c+l)/s,this._z=.25*s),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=n,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(N.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);return 0===n||(n=Math.min(1,e/n),this.slerp(t,n)),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,a=t._w,o=e._x,s=e._y;t=e._z,e=e._w;return this._x=n*e+a*o+r*t-i*s,this._y=r*e+a*s+i*o-n*t,this._z=i*e+a*t+n*s-r*o,this._w=a*e-n*o-r*s-i*t,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=n,this._y=r,this._z=i,this;if((t=1-o*o)<=Number.EPSILON){var s=1-e;return this._w=s*a+e*this._w,this._x=s*n+e*this._x,this._y=s*r+e*this._y,this._z=s*i+e*this._z,this.normalize(),this._onChangeCallback(),this}return s=Math.sqrt(t),t=Math.atan2(s,o),o=Math.sin((1-e)*t)/s,s=Math.sin(e*t)/s,this._w=a*o+this._w*s,this._x=n*o+this._x*s,this._y=r*o+this._y*s,this._z=i*o+this._z*s,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return this._x=t[e=void 0===e?0:e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var V=new Y,W=new j;function Y(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.x=t,this.y=e,this.z=n}Object.assign(Y.prototype,{isVector3:!0,set:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\"),this.applyQuaternion(W.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(W.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[3]*n+t[6]*r,this.y=t[1]*e+t[4]*n+t[7]*r,this.z=t[2]*e+t[5]*n+t[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;t=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*t,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*t,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*t,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z,s=t.w,c=s*e+a*r-o*n,h=s*n+o*e-i*r;t=s*r+i*n-a*e,r=-i*e-a*n-o*r;return this.x=c*s+r*-i+h*-o-t*-a,this.y=h*s+r*-a+t*-i-c*-o,this.z=t*s+r*-o+c*-a-h*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[4]*n+t[8]*r,this.y=t[1]*e+t[5]*n+t[9]*r,this.z=t[2]*e+t[6]*n+t[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this},cross:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,a=e.x;t=e.y,e=e.z;return this.x=r*e-i*t,this.y=i*a-n*e,this.z=n*t-r*a,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return V.copy(this).projectOnVector(t),this.sub(V)},reflect:function(t){return this.sub(V.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(e=this.dot(t)/e,Math.acos(N.clamp(e,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var q=new Y,X=new et,K=new Y(0,0,0),Z=new Y(1,1,1),J=new Y,Q=new Y,tt=new Y;function et(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}Object.assign(et.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,a,o,s,c,h,l,u,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=h,g[10]=l,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new et).fromArray(this.elements)},copy:function(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/q.setFromMatrixColumn(t,0).length(),i=1/q.setFromMatrixColumn(t,1).length();t=1/q.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*t,e[9]=n[9]*t,e[10]=n[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");var e,n,r,i,a,o,s,c,h,l,u,d=this.elements,p=t.x,f=t.y,m=t.z,g=Math.cos(p),v=Math.sin(p),y=Math.cos(f),M=Math.sin(f);p=Math.cos(m),f=Math.sin(m);return\"XYZ\"===t.order?(e=g*p,r=g*f,n=v*p,m=v*f,d[0]=y*p,d[4]=-y*f,d[8]=M,d[1]=r+n*M,d[5]=e-m*M,d[9]=-v*y,d[2]=m-e*M,d[6]=n+r*M,d[10]=g*y):\"YXZ\"===t.order?(e=y*f,n=M*p,d[0]=(i=y*p)+(r=M*f)*v,d[4]=n*v-e,d[8]=g*M,d[1]=g*f,d[5]=g*p,d[9]=-v,d[2]=e*v-n,d[6]=r+i*v,d[10]=g*y):\"ZXY\"===t.order?(i=y*f,a=M*p,d[0]=(s=y*p)-(o=M*f)*v,d[4]=-g*f,d[8]=a+i*v,d[1]=i+a*v,d[5]=g*p,d[9]=o-s*v,d[2]=-g*M,d[6]=v,d[10]=g*y):\"ZYX\"===t.order?(a=g*p,o=g*f,c=v*p,s=v*f,d[0]=y*p,d[4]=c*M-o,d[8]=a*M+s,d[1]=y*f,d[5]=s*M+a,d[9]=o*M-c,d[2]=-M,d[6]=v*y,d[10]=g*y):\"YZX\"===t.order?(l=g*y,c=g*M,h=v*y,u=v*M,d[0]=y*p,d[4]=u-l*f,d[8]=h*f+c,d[1]=f,d[5]=g*p,d[9]=-v*p,d[2]=-M*p,d[6]=c*f+h,d[10]=l-u*f):\"XZY\"===t.order&&(h=g*y,l=g*M,u=v*y,t=v*M,d[0]=y*p,d[4]=-f,d[8]=M*p,d[1]=h*f+t,d[5]=g*p,d[9]=l*f-u,d[2]=u*f-l,d[6]=v*p,d[10]=t*f+h),d[3]=0,d[7]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(K,t,Z)},lookAt:function(t,e,n){var r=this.elements;return tt.subVectors(t,e),0===tt.lengthSq()&&(tt.z=1),tt.normalize(),J.crossVectors(n,tt),0===J.lengthSq()&&(1===Math.abs(n.z)?tt.x+=1e-4:tt.z+=1e-4,tt.normalize(),J.crossVectors(n,tt)),J.normalize(),Q.crossVectors(tt,J),r[0]=J.x,r[4]=Q.x,r[8]=tt.x,r[1]=J.y,r[5]=Q.y,r[9]=tt.y,r[2]=J.z,r[6]=Q.z,r[10]=tt.z,this},multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],h=n[1],l=n[5],u=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],M=n[11],x=n[15],b=r[0],_=r[4],S=r[8],w=r[12],E=r[1],R=r[5],T=r[9],A=r[13],L=r[2],P=r[6],C=r[10],O=r[14];t=r[3],e=r[7],n=r[11],r=r[15];return i[0]=a*b+o*E+s*L+c*t,i[4]=a*_+o*R+s*P+c*e,i[8]=a*S+o*T+s*C+c*n,i[12]=a*w+o*A+s*O+c*r,i[1]=h*b+l*E+u*L+d*t,i[5]=h*_+l*R+u*P+d*e,i[9]=h*S+l*T+u*C+d*n,i[13]=h*w+l*A+u*O+d*r,i[2]=p*b+f*E+m*L+g*t,i[6]=p*_+f*R+m*P+g*e,i[10]=p*S+f*T+m*C+g*n,i[14]=p*w+f*A+m*O+g*r,i[3]=v*b+y*E+M*L+x*t,i[7]=v*_+y*R+M*P+x*e,i[11]=v*S+y*T+M*C+x*n,i[15]=v*w+y*A+M*O+x*r,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],o=t[5],s=t[9],c=t[13],h=t[2],l=t[6],u=t[10],d=t[14];return t[3]*(+i*s*l-r*c*l-i*o*u+n*c*u+r*o*d-n*s*d)+t[7]*(+e*s*d-e*c*u+i*a*u-r*a*d+r*c*h-i*s*h)+t[11]*(+e*c*l-e*o*d-i*a*l+n*a*d+i*o*h-n*c*h)+t[15]*(-r*o*h-e*s*l+e*o*u+r*a*l-n*a*u+n*s*h)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn(\"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\");var n,r=this.elements,i=(n=t.elements)[0],a=n[1],o=n[2],s=n[3],c=n[4],h=n[5],l=n[6],u=n[7],d=n[8],p=n[9],f=n[10],m=n[11],g=n[12],v=n[13],y=n[14],M=n[15],x=p*y*u-v*f*u+v*l*m-h*y*m-p*l*M+h*f*M,b=g*f*u-d*y*u-g*l*m+c*y*m+d*l*M-c*f*M;return 0==(n=i*x+a*b+o*(e=d*v*u-g*p*u+g*h*m-c*v*m-d*h*M+c*p*M)+s*(t=g*p*l-d*v*l-g*h*f+c*v*f+d*h*y-c*p*y))?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(n=1/n,r[0]=x*n,r[1]=(v*f*s-p*y*s-v*o*m+a*y*m+p*o*M-a*f*M)*n,r[2]=(h*y*s-v*l*s+v*o*u-a*y*u-h*o*M+a*l*M)*n,r[3]=(p*l*s-h*f*s-p*o*u+a*f*u+h*o*m-a*l*m)*n,r[4]=b*n,r[5]=(d*y*s-g*f*s+g*o*m-i*y*m-d*o*M+i*f*M)*n,r[6]=(g*l*s-c*y*s-g*o*u+i*y*u+c*o*M-i*l*M)*n,r[7]=(c*f*s-d*l*s+d*o*u-i*f*u-c*o*m+i*l*m)*n,r[8]=e*n,r[9]=(g*p*s-d*v*s-g*a*m+i*v*m+d*a*M-i*p*M)*n,r[10]=(c*v*s-g*h*s+g*a*u-i*v*u-c*a*M+i*h*M)*n,r[11]=(d*h*s-c*p*s-d*a*u+i*p*u+c*a*m-i*h*m)*n,r[12]=t*n,r[13]=(d*v*o-g*p*o+g*a*f-i*v*f-d*a*y+i*p*y)*n,r[14]=(g*h*o-c*v*o-g*a*l+i*v*l+c*a*y-i*h*y)*n,r[15]=(c*p*o-d*h*o+d*a*l-i*p*l-c*a*f+i*h*f)*n,this)},scale:function(t){var e=this.elements,n=t.x,r=t.y;t=t.z;return e[0]*=n,e[4]*=r,e[8]*=t,e[1]*=n,e[5]*=r,e[9]*=t,e[2]*=n,e[6]*=r,e[10]*=t,e[3]*=n,e[7]*=r,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=(n=this.elements)[0]*n[0]+n[1]*n[1]+n[2]*n[2],e=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],n=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(t,e,n))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,o=t.y,s=t.z;e=i*a,t=i*o;return this.set(e*a+n,e*o-r*s,e*s+r*o,0,e*o+r*s,t*o+n,t*s-r*a,0,e*s-r*o,t*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,a=e._y,o=e._z,s=e._w,c=i*(u=i+i),h=i*(d=a+a),l=i*(p=o+o),u=(e=a*d,i=a*p,a=o*p,o=s*u,s*d),d=s*p,p=(s=n.x,n.y);n=n.z;return r[0]=(1-(e+a))*s,r[1]=(h+d)*s,r[2]=(l-u)*s,r[3]=0,r[4]=(h-d)*p,r[5]=(1-(c+a))*p,r[6]=(i+o)*p,r[7]=0,r[8]=(l+u)*n,r[9]=(i-o)*n,r[10]=(1-(c+e))*n,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,n){var r=this.elements,i=q.set(r[0],r[1],r[2]).length(),a=q.set(r[4],r[5],r[6]).length(),o=q.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],X.copy(this);var s=1/i;t=1/a,r=1/o;return X.elements[0]*=s,X.elements[1]*=s,X.elements[2]*=s,X.elements[4]*=t,X.elements[5]*=t,X.elements[6]*=t,X.elements[8]*=r,X.elements[9]*=r,X.elements[10]*=r,e.setFromRotationMatrix(X),n.x=i,n.y=a,n.z=o,this},makePerspective:function(t,e,n,r,i,a){void 0===a&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");var o=this.elements,s=2*i/(n-r),c=(e+t)/(e-t);n=(n+r)/(n-r),r=-(a+i)/(a-i),a=-2*a*i/(a-i);return o[0]=2*i/(e-t),o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=s,o[9]=n,o[13]=0,o[2]=0,o[6]=0,o[10]=r,o[14]=a,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,r,i,a){var o=this.elements,s=1/(e-t),c=1/(n-r),h=1/(a-i);t=(e+t)*s,r=(n+r)*c,i=(a+i)*h;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-t,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-r,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-i,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){var n=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var nt=new et,rt=new j;function it(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:it.DefaultOrder;this._x=t,this._y=e,this._z=n,this._order=r}function at(){this.mask=1}it.RotationOrders=[\"XYZ\",\"YZX\",\"ZXY\",\"XZY\",\"YXZ\",\"ZYX\"],it.DefaultOrder=\"XYZ\",Object.defineProperties(it.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(it.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=N.clamp,i=(t=t.elements)[0],a=t[4],o=t[8],s=t[1],c=t[5],h=t[9],l=t[2],u=t[6],d=t[10];switch(e=e||this._order){case\"XYZ\":this._y=Math.asin(r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(u,c),this._z=0);break;case\"YXZ\":this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,c)):(this._y=Math.atan2(-l,i),this._z=0);break;case\"ZXY\":this._x=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-l,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(s,i));break;case\"ZYX\":this._y=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,c));break;case\"YZX\":this._z=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(o,d));break;case\"XZY\":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(u,c),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn(\"THREE.Euler: .setFromRotationMatrix() encountered an unknown order: \"+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return nt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(nt,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return rt.setFromEuler(this),this.setFromQuaternion(rt,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Y(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(at.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var ot=0,st=new Y,ct=new j,ht=new et,lt=new Y,ut=new Y,dt=new Y,pt=new j,ft=new Y(1,0,0),mt=new Y(0,1,0),gt=new Y(0,0,1),vt={type:\"added\"},yt={type:\"removed\"};function Mt(){Object.defineProperty(this,\"id\",{value:ot++}),this.uuid=N.generateUUID(),this.name=\"\",this.type=\"Object3D\",this.parent=null,this.children=[],this.up=Mt.DefaultUp.clone();var t=new Y,e=new it,n=new j,r=new Y(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new et},normalMatrix:{value:new F}}),this.matrix=new et,this.matrixWorld=new et,this.matrixAutoUpdate=Mt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new at,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function xt(){Mt.call(this),this.type=\"Scene\",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}Mt.DefaultUp=new Y(0,1,0),Mt.DefaultMatrixAutoUpdate=!0,Mt.prototype=Object.assign(Object.create(L.prototype),{constructor:Mt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return ct.setFromAxisAngle(t,e),this.quaternion.multiply(ct),this},rotateOnWorldAxis:function(t,e){return ct.setFromAxisAngle(t,e),this.quaternion.premultiply(ct),this},rotateX:function(t){return this.rotateOnAxis(ft,t)},rotateY:function(t){return this.rotateOnAxis(mt,t)},rotateZ:function(t){return this.rotateOnAxis(gt,t)},translateOnAxis:function(t,e){return st.copy(t).applyQuaternion(this.quaternion),this.position.add(st.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(ft,t)},translateY:function(t){return this.translateOnAxis(mt,t)},translateZ:function(t){return this.translateOnAxis(gt,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(ht.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?lt.copy(t):lt.set(t,e,n),n=this.parent,this.updateWorldMatrix(!0,!1),ut.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ht.lookAt(ut,lt,this.up):ht.lookAt(lt,ut,this.up),this.quaternion.setFromRotationMatrix(ht),n&&(ht.extractRotation(n.matrixWorld),ct.setFromRotationMatrix(ht),this.quaternion.premultiply(ct.inverse()))},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",t):t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(vt)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",t),this},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(yt)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),ht.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ht.multiply(t.parent.matrixWorld)),t.applyMatrix4(ht),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty(\"id\",t)},getObjectByName:function(t){return this.getObjectByProperty(\"name\",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\"),t=new Y),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\"),t=new j),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ut,t,dt),t},getWorldScale:function(t){return void 0===t&&(console.warn(\"THREE.Object3D: .getWorldScale() target is now required\"),t=new Y),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ut,pt,t),t},getWorldDirection:function(t){void 0===t&&(console.warn(\"THREE.Object3D: .getWorldDirection() target is now required\"),t=new Y),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||\"string\"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});var r,i,a,o={};function s(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(o.uuid=this.uuid,o.type=this.type,\"\"!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),\"{}\"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type=\"InstancedMesh\",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);var c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){var h=c.shapes;if(Array.isArray(h))for(var l=0,u=h.length;l<u;l++){var d=h[l];s(t.shapes,d)}else s(t.shapes,h)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var p=[],f=0,m=this.material.length;f<m;f++)p.push(s(t.materials,this.material[f]));o.material=p}else o.material=s(t.materials,this.material);if(0<this.children.length){o.children=[];for(var g=0;g<this.children.length;g++)o.children.push(this.children[g].toJSON(t).object)}return e&&(r=v(t.geometries),i=v(t.materials),a=v(t.textures),c=v(t.images),e=v(t.shapes),0<r.length&&(n.geometries=r),0<i.length&&(n.materials=i),0<a.length&&(n.textures=a),0<c.length&&(n.images=c),0<e.length&&(n.shapes=e)),n.object=o,n;function v(t){var e,n=[];for(e in t){var r=t[e];delete r.metadata,n.push(r)}return n}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),xt.prototype=Object.assign(Object.create(Mt.prototype),{constructor:xt,isScene:!0,copy:function(t,e){return Mt.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Mt.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});var bt=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],_t=new Y,St=new Nt,wt=new Y,Et=new Y,Rt=new Y,Tt=new Y,At=new Y,Lt=new Y,Pt=new Y,Ct=new Y,Ot=new Y,It=new Y;function Nt(t,e){this.min=void 0!==t?t:new Y(1/0,1/0,1/0),this.max=void 0!==e?e:new Y(-1/0,-1/0,-1/0)}function Dt(t,e,n,r,i){for(var a=0,o=t.length-3;a<=o;a+=3){It.fromArray(t,a);var s=i.x*Math.abs(It.x)+i.y*Math.abs(It.y)+i.z*Math.abs(It.z),c=e.dot(It),h=n.dot(It),l=r.dot(It);if(Math.max(-Math.max(c,h,l),Math.min(c,h,l))>s)return!1}return!0}Object.assign(Nt.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=t.length;s<c;s+=3){var h=t[s],l=t[s+1],u=t[s+2];h<e&&(e=h),l<n&&(n=l),u<r&&(r=u),i<h&&(i=h),a<l&&(a=l),o<u&&(o=u)}return this.min.set(e,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=t.count;s<c;s++){var h=t.getX(s),l=t.getY(s),u=t.getZ(s);h<e&&(e=h),l<n&&(n=l),u<r&&(r=u),i<h&&(i=h),a<l&&(a=l),o<u&&(o=u)}return this.min.set(e,n,r),this.max.set(i,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=_t.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Box3: .getCenter() target is now required\"),t=new Y),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn(\"THREE.Box3: .getSize() target is now required\"),t=new Y),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),St.copy(e.boundingBox),St.applyMatrix4(t.matrixWorld),this.union(St));for(var n=t.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn(\"THREE.Box3: .getParameter() target is now required\"),e=new Y),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,_t),_t.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x);return 0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){return!this.isEmpty()&&(this.getCenter(Pt),Ct.subVectors(this.max,Pt),wt.subVectors(t.a,Pt),Et.subVectors(t.b,Pt),Rt.subVectors(t.c,Pt),Tt.subVectors(Et,wt),At.subVectors(Rt,Et),Lt.subVectors(wt,Rt),!!Dt([0,-Tt.z,Tt.y,0,-At.z,At.y,0,-Lt.z,Lt.y,Tt.z,0,-Tt.x,At.z,0,-At.x,Lt.z,0,-Lt.x,-Tt.y,Tt.x,0,-At.y,At.x,0,-Lt.y,Lt.x,0],wt,Et,Rt,Ct)&&!!Dt([1,0,0,0,1,0,0,0,1],wt,Et,Rt,Ct)&&(Ot.crossVectors(Tt,At),Dt([Ot.x,Ot.y,Ot.z],wt,Et,Rt,Ct)))},clampPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Box3: .clampPoint() target is now required\"),e=new Y),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return _t.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error(\"THREE.Box3: .getBoundingSphere() target is now required\"),this.getCenter(t.center),t.radius=.5*this.getSize(_t).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(bt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bt)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Ft=new Nt;function zt(t,e){this.center=void 0!==t?t:new Y,this.radius=void 0!==e?e:-1}Object.assign(zt.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):Ft.setFromPoints(t).getCenter(n);for(var r=0,i=0,a=t.length;i<a;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn(\"THREE.Sphere: .clampPoint() target is now required\"),e=new Y),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn(\"THREE.Sphere: .getBoundingBox() target is now required\"),t=new Nt),this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var Bt=new Y,Ut=new Y,Ht=new Y,Gt=new Y,kt=new Y,jt=new Y,Vt=new Y;function Wt(t,e){this.origin=void 0!==t?t:new Y,this.direction=void 0!==e?e:new Y(0,0,-1)}Object.assign(Wt.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn(\"THREE.Ray: .at() target is now required\"),e=new Y),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,Bt)),this},closestPointToPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Ray: .closestPointToPoint() target is now required\"),e=new Y),e.subVectors(t,this.origin),(t=e.dot(this.direction))<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=Bt.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Bt.copy(this.direction).multiplyScalar(e).add(this.origin),Bt.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,r){Ut.copy(t).add(e).multiplyScalar(.5),Ht.copy(e).sub(t).normalize(),Gt.copy(this.origin).sub(Ut);var i,a,o=.5*t.distanceTo(e),s=-this.direction.dot(Ht),c=Gt.dot(this.direction),h=-Gt.dot(Ht),l=Gt.lengthSq();return l=0<(t=Math.abs(1-s*s))?(a=s*c-h,e=o*t,0<=(i=s*h-c)?-e<=a?a<=e?(i*=t=1/t)*(i+s*(a*=t)+2*c)+a*(s*i+a+2*h)+l:(a=o,-(i=Math.max(0,-(s*a+c)))*i+a*(a+2*h)+l):(a=-o,-(i=Math.max(0,-(s*a+c)))*i+a*(a+2*h)+l):a<=-e?-(i=Math.max(0,-(-s*o+c)))*i+(a=0<i?-o:Math.min(Math.max(-o,-h),o))*(a+2*h)+l:a<=e?(i=0,(a=Math.min(Math.max(-o,-h),o))*(a+2*h)+l):-(i=Math.max(0,-(s*o+c)))*i+(a=0<i?o:Math.min(Math.max(-o,-h),o))*(a+2*h)+l):(a=0<s?-o:o,-(i=Math.max(0,-(s*a+c)))*i+a*(a+2*h)+l),n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Ht).multiplyScalar(a).add(Ut),l},intersectSphere:function(t,e){Bt.subVectors(t.center,this.origin);var n=Bt.dot(this.direction),r=Bt.dot(Bt)-n*n;return(t=t.radius*t.radius)<r?null:(r=n-(t=Math.sqrt(t-r)),t=n+t,r<0&&t<0?null:r<0?this.at(t,e):this.at(r,e))},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(e=-(this.origin.dot(t.normal)+t.constant)/e)?e:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,r,i,a=1/this.direction.x,o=1/this.direction.y,s=1/this.direction.z,c=this.origin;a=0<=a?(n=(t.min.x-c.x)*a,(t.max.x-c.x)*a):(n=(t.max.x-c.x)*a,(t.min.x-c.x)*a);return(o=0<=o?(r=(t.min.y-c.y)*o,(t.max.y-c.y)*o):(r=(t.max.y-c.y)*o,(t.min.y-c.y)*o))<n||a<r?null:((n<r||n!=n)&&(n=r),(o<a||a!=a)&&(a=o),(s=0<=s?(i=(t.min.z-c.z)*s,(t.max.z-c.z)*s):(i=(t.max.z-c.z)*s,(t.min.z-c.z)*s))<n||a<i?null:((n<i||n!=n)&&(n=i),(a=s<a||a!=a?s:a)<0?null:this.at(0<=n?n:a,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,Bt)},intersectTriangle:function(t,e,n,r,i){if(kt.subVectors(e,t),jt.subVectors(n,t),Vt.crossVectors(kt,jt),0<(n=this.direction.dot(Vt))){if(r)return null;a=1}else{if(!(n<0))return null;a=-1,n=-n}if(Gt.subVectors(this.origin,t),(r=a*this.direction.dot(jt.crossVectors(Gt,jt)))<0)return null;if((t=a*this.direction.dot(kt.cross(Gt)))<0)return null;if(n<r+t)return null;var a=-a*Gt.dot(Vt);return a<0?null:this.at(a/n,i)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Yt=new Y,qt=new Y,Xt=new F;function Kt(t,e){this.normal=void 0!==t?t:new Y(1,0,0),this.constant=void 0!==e?e:0}Object.assign(Kt.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){return e=Yt.subVectors(n,e).cross(qt.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(e,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Plane: .projectPoint() target is now required\"),e=new Y),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn(\"THREE.Plane: .intersectLine() target is now required\"),e=new Y);var n=t.delta(Yt),r=this.normal.dot(n);return 0===r?0===this.distanceToPoint(t.start)?e.copy(t.start):void 0:(r=-(t.start.dot(this.normal)+this.constant)/r)<0||1<r?void 0:e.copy(n).multiplyScalar(r).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start);t=this.distanceToPoint(t.end);return e<0&&0<t||t<0&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn(\"THREE.Plane: .coplanarPoint() target is now required\"),t=new Y),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){return e=e||Xt.getNormalMatrix(t),t=this.coplanarPoint(Yt).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Zt=new Y,Jt=new Y,Qt=new Y,$t=new Y,te=new Y,ee=new Y,ne=new Y,re=new Y,ie=new Y,ae=new Y;function oe(t,e,n){this.a=void 0!==t?t:new Y,this.b=void 0!==e?e:new Y,this.c=void 0!==n?n:new Y}Object.assign(oe,{getNormal:function(t,e,n,r){return void 0===r&&(console.warn(\"THREE.Triangle: .getNormal() target is now required\"),r=new Y),r.subVectors(n,e),Zt.subVectors(t,e),r.cross(Zt),0<(e=r.lengthSq())?r.multiplyScalar(1/Math.sqrt(e)):r.set(0,0,0)},getBarycoord:function(t,e,n,r,i){Zt.subVectors(r,e),Jt.subVectors(n,e),Qt.subVectors(t,e);var a=Zt.dot(Zt),o=Zt.dot(Jt);r=Zt.dot(Qt),n=Jt.dot(Jt),t=Jt.dot(Qt),e=a*n-o*o;return void 0===i&&(console.warn(\"THREE.Triangle: .getBarycoord() target is now required\"),i=new Y),0==e?i.set(-2,-1,-1):(n=(n*r-o*t)*(e=1/e),e*=a*t-o*r,i.set(1-n-e,e,n))},containsPoint:function(t,e,n,r){return oe.getBarycoord(t,e,n,r,$t),0<=$t.x&&0<=$t.y&&$t.x+$t.y<=1},getUV:function(t,e,n,r,i,a,o,s){return this.getBarycoord(t,e,n,r,$t),s.set(0,0),s.addScaledVector(i,$t.x),s.addScaledVector(a,$t.y),s.addScaledVector(o,$t.z),s},isFrontFacing:function(t,e,n,r){return Zt.subVectors(n,e),Jt.subVectors(t,e),Zt.cross(Jt).dot(r)<0}}),Object.assign(oe.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Zt.subVectors(this.c,this.b),Jt.subVectors(this.a,this.b),.5*Zt.cross(Jt).length()},getMidpoint:function(t){return void 0===t&&(console.warn(\"THREE.Triangle: .getMidpoint() target is now required\"),t=new Y),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return oe.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn(\"THREE.Triangle: .getPlane() target is now required\"),t=new Kt),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return oe.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,r,i){return oe.getUV(t,this.a,this.b,this.c,e,n,r,i)},containsPoint:function(t){return oe.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return oe.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn(\"THREE.Triangle: .closestPointToPoint() target is now required\"),e=new Y);var n=this.a,r=this.b,i=this.c;te.subVectors(r,n),ee.subVectors(i,n),re.subVectors(t,n);var a=te.dot(re),o=ee.dot(re);if(a<=0&&o<=0)return e.copy(n);ie.subVectors(t,r);var s=te.dot(ie),c=ee.dot(ie);if(0<=s&&c<=s)return e.copy(r);var h=a*c-s*o;if(h<=0&&0<=a&&s<=0)return u=a/(a-s),e.copy(n).addScaledVector(te,u);ae.subVectors(t,i);var l=te.dot(ae);if(0<=(t=ee.dot(ae))&&l<=t)return e.copy(i);if((a=l*o-a*t)<=0&&0<=o&&t<=0)return d=o/(o-t),e.copy(n).addScaledVector(ee,d);if((o=s*t-l*c)<=0&&0<=c-s&&0<=l-t)return ne.subVectors(i,r),d=(c-s)/(c-s+(l-t)),e.copy(r).addScaledVector(ne,d);var u=a*(o=1/(o+a+h)),d=h*o;return e.copy(n).addScaledVector(te,u).addScaledVector(ee,d)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ce={h:0,s:0,l:0},he={h:0,s:0,l:0};function le(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function ue(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function de(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function pe(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function fe(t,e,n,r,i,a){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new Y,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new le,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}Object.assign(le.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):\"number\"==typeof t?this.setHex(t):\"string\"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){return t=N.euclideanModulo(t,1),e=N.clamp(e,0,1),n=N.clamp(n,0,1),0===e?this.r=this.g=this.b=n:(this.r=ue(e=2*n-(n=n<=.5?n*(1+e):n+e-n*e),n,t+1/3),this.g=ue(e,n,t),this.b=ue(e,n,t-1/3)),this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn(\"THREE.Color: Alpha component of \"+t+\" will be ignored.\")}if(c=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(t)){var n,r=c[1],i=c[2];switch(r){case\"rgb\":case\"rgba\":if(n=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case\"hsl\":case\"hsla\":if(n=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(i)){var a=parseFloat(n[1])/360,o=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(a,o,s)}}}else if(c=/^\\#([A-Fa-f0-9]+)$/.exec(t)){var c=(r=c[1]).length;if(3===c)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var e=se[t];return void 0!==e?this.setHex(e):console.warn(\"THREE.Color: Unknown color \"+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return e=0<(e=void 0===e?2:e)?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=de(t.r),this.g=de(t.g),this.b=de(t.b),this},copyLinearToSRGB:function(t){return this.r=pe(t.r),this.g=pe(t.g),this.b=pe(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn(\"THREE.Color: .getHSL() target is now required\"),t={h:0,s:0,l:0});var e,n=this.r,r=this.g,i=this.b,a=Math.max(n,r,i),o=Math.min(n,r,i),s=(o+a)/2;if(o===a)h=e=0;else{var c=a-o,h=s<=.5?c/(a+o):c/(2-a-o);switch(a){case n:e=(r-i)/c+(r<i?6:0);break;case r:e=(i-n)/c+2;break;case i:e=(n-r)/c+4}e/=6}return t.h=e,t.s=h,t.l=s,t},getStyle:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"},offsetHSL:function(t,e,n){return this.getHSL(ce),ce.h+=t,ce.s+=e,ce.l+=n,this.setHSL(ce.h,ce.s,ce.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(ce),t.getHSL(he);var n=N.lerp(ce.h,he.h,e);t=N.lerp(ce.s,he.s,e),e=N.lerp(ce.l,he.l,e);return this.setHSL(n,t,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return this.r=t[e=void 0===e?0:e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},fromBufferAttribute:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),le.NAMES=se,Object.assign(fe.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var r=0,i=t.vertexColors.length;r<i;r++)this.vertexColors[r]=t.vertexColors[r].clone();return this}});var me=0;function ge(){Object.defineProperty(this,\"id\",{value:me++}),this.uuid=N.generateUUID(),this.name=\"\",this.type=\"Material\",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function ve(t){ge.call(this),this.type=\"MeshBasicMaterial\",this.color=new le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}ge.prototype=Object.assign(Object.create(L.prototype),{constructor:ge,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(var e in t){var n,r=t[e];void 0!==r?\"shading\"!==e?void 0!==(n=this[e])?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[e]=r:console.warn(\"THREE.\"+this.type+\": '\"+e+\"' is not a property of this material.\"):(console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===r):console.warn(\"THREE.Material: '\"+e+\"' parameter is undefined.\")}},toJSON:function(t){var e=void 0===t||\"string\"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}};function r(t){var e,n=[];for(e in t){var r=t[e];delete r.metadata,n.push(r)}return n}return n.uuid=this.uuid,n.type=this.type,\"\"!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),\"round\"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),\"round\"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),\"{}\"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e&&(e=r(t.textures),t=r(t.images),0<e.length&&(n.textures=e),0<t.length&&(n.images=t)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e)for(var r=e.length,i=(n=new Array(r),0);i!==r;++i)n[i]=e[i].clone();return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),Object.defineProperty(ge.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),((ve.prototype=Object.create(ge.prototype)).constructor=ve).prototype.isMeshBasicMaterial=!0,ve.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var ye=new Y,Me=new D;function xe(t,e,n){if(Array.isArray(t))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.name=\"\",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=T,this.updateRange={offset:0,count:-1},this.version=0}function be(t,e,n){xe.call(this,new Int8Array(t),e,n)}function _e(t,e,n){xe.call(this,new Uint8Array(t),e,n)}function Se(t,e,n){xe.call(this,new Uint8ClampedArray(t),e,n)}function we(t,e,n){xe.call(this,new Int16Array(t),e,n)}function Ee(t,e,n){xe.call(this,new Uint16Array(t),e,n)}function Re(t,e,n){xe.call(this,new Int32Array(t),e,n)}function Te(t,e,n){xe.call(this,new Uint32Array(t),e,n)}function Ae(t,e,n){xe.call(this,new Float32Array(t),e,n)}function Le(t,e,n){xe.call(this,new Float64Array(t),e,n)}function Pe(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ce(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Object.defineProperty(xe.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.assign(xe.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",r),a=new le),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",r),a=new D),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",r),a=new Y),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",r),a=new H),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)Me.fromBufferAttribute(this,e),Me.applyMatrix3(t),this.setXY(e,Me.x,Me.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)ye.fromBufferAttribute(this,r),ye.applyMatrix3(t),this.setXYZ(r,ye.x,ye.y,ye.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)ye.x=this.getX(e),ye.y=this.getY(e),ye.z=this.getZ(e),ye.applyMatrix4(t),this.setXYZ(e,ye.x,ye.y,ye.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)ye.x=this.getX(e),ye.y=this.getY(e),ye.z=this.getZ(e),ye.applyNormalMatrix(t),this.setXYZ(e,ye.x,ye.y,ye.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)ye.x=this.getX(e),ye.y=this.getY(e),ye.z=this.getZ(e),ye.transformDirection(t),this.setXYZ(e,ye.x,ye.y,ye.z);return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(be.prototype=Object.create(xe.prototype)).constructor=be,(_e.prototype=Object.create(xe.prototype)).constructor=_e,(Se.prototype=Object.create(xe.prototype)).constructor=Se,(we.prototype=Object.create(xe.prototype)).constructor=we,Ee.prototype=Object.create(xe.prototype),Ee.prototype.constructor=Ee,(Re.prototype=Object.create(xe.prototype)).constructor=Re,Te.prototype=Object.create(xe.prototype),Te.prototype.constructor=Te,(Ae.prototype=Object.create(xe.prototype)).constructor=Ae,(Le.prototype=Object.create(xe.prototype)).constructor=Le,Object.assign(Pe.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,n.push(e)),e={start:3*a,materialIndex:r})}void 0!==e&&(e.count=3*a-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e=t.faces,n=t.vertices,r=t.faceVertexUvs,i=r[0]&&0<r[0].length,a=r[1]&&0<r[1].length,o=t.morphTargets,s=o.length;if(0<s){for(var c=[],h=0;h<s;h++)c[h]={name:o[h].name,data:[]};this.morphTargets.position=c}var l=t.morphNormals,u=l.length;if(0<u){for(var d=[],p=0;p<u;p++)d[p]={name:l[p].name,data:[]};this.morphTargets.normal=d}var f=t.skinIndices,m=t.skinWeights,g=f.length===n.length,v=m.length===n.length;0<n.length&&0===e.length&&console.error(\"THREE.DirectGeometry: Faceless geometries are not supported.\");for(var y=0;y<e.length;y++){var M=e[y];this.vertices.push(n[M.a],n[M.b],n[M.c]);var x=M.vertexNormals;3===x.length?this.normals.push(x[0],x[1],x[2]):(_=M.normal,this.normals.push(_,_,_));var b,_=M.vertexColors;3===_.length?this.colors.push(_[0],_[1],_[2]):(_=M.color,this.colors.push(_,_,_)),!0===i&&(void 0!==(b=r[0][y])?this.uvs.push(b[0],b[1],b[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \",y),this.uvs.push(new D,new D,new D))),!0===a&&(void 0!==(b=r[1][y])?this.uvs2.push(b[0],b[1],b[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \",y),this.uvs2.push(new D,new D,new D)));for(var S=0;S<s;S++){var w=o[S].vertices;c[S].data.push(w[M.a],w[M.b],w[M.c])}for(var E=0;E<u;E++){var R=l[E].vertexNormals[y];d[E].data.push(R.a,R.b,R.c)}g&&this.skinIndices.push(f[M.a],f[M.b],f[M.c]),v&&this.skinWeights.push(m[M.a],m[M.b],m[M.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var Oe=1,Ie=new et,Ne=new Mt,De=new Y,Fe=new Nt,ze=new Nt,Be=new Y;function Ue(){Object.defineProperty(this,\"id\",{value:Oe+=2}),this.uuid=N.generateUUID(),this.name=\"\",this.type=\"BufferGeometry\",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ue.prototype=Object.assign(Object.create(L.prototype),{constructor:Ue,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<Ce(t)?Te:Ee)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&(e=(new F).getNormalMatrix(t),n.applyNormalMatrix(e),n.needsUpdate=!0),void 0!==(n=this.attributes.tangent)&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Ie.makeRotationX(t),this.applyMatrix4(Ie),this},rotateY:function(t){return Ie.makeRotationY(t),this.applyMatrix4(Ie),this},rotateZ:function(t){return Ie.makeRotationZ(t),this.applyMatrix4(Ie),this},translate:function(t,e,n){return Ie.makeTranslation(t,e,n),this.applyMatrix4(Ie),this},scale:function(t,e,n){return Ie.makeScale(t,e,n),this.applyMatrix4(Ie),this},lookAt:function(t){return Ne.lookAt(t),Ne.updateMatrix(),this.applyMatrix4(Ne.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(De).negate(),this.translate(De.x,De.y,De.z),this},setFromObject:function(t){var e,n,r=t.geometry;return t.isPoints||t.isLine?(e=new Ae(3*r.vertices.length,3),n=new Ae(3*r.colors.length,3),this.setAttribute(\"position\",e.copyVector3sArray(r.vertices)),this.setAttribute(\"color\",n.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(n=new Ae(r.lineDistances.length,1),this.setAttribute(\"lineDistance\",n.copyArray(r.lineDistances))),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())):t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r),this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute(\"position\",new Ae(e,3)),this},updateFromObject:function(t){var e,n,r=t.geometry;if(t.isMesh){var i=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(i=void 0,r.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(r);i.verticesNeedUpdate=r.verticesNeedUpdate,i.normalsNeedUpdate=r.normalsNeedUpdate,i.colorsNeedUpdate=r.colorsNeedUpdate,i.uvsNeedUpdate=r.uvsNeedUpdate,i.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=i}return!0===r.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(r.vertices),i.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(r.normals),e.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(r.colors),e.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(n=this.attributes.uv)&&(n.copyVector2sArray(r.uvs),n.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(n=this.attributes.lineDistance)&&(n.copyArray(r.lineDistances),n.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(t.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Pe).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e,n,r,i,a=new Float32Array(3*t.vertices.length);for(r in this.setAttribute(\"position\",new xe(a,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.setAttribute(\"normal\",new xe(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.setAttribute(\"color\",new xe(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(n=new Float32Array(2*t.uvs.length),this.setAttribute(\"uv\",new xe(n,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(n=new Float32Array(2*t.uvs2.length),this.setAttribute(\"uv2\",new xe(n,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){for(var o=[],s=t.morphTargets[r],c=0,h=s.length;c<h;c++){var l=s[c],u=new Ae(3*l.data.length,3);u.name=l.name,o.push(u.copyVector3sArray(l.data))}this.morphAttributes[r]=o}return 0<t.skinIndices.length&&(i=new Ae(4*t.skinIndices.length,4),this.setAttribute(\"skinIndex\",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new Ae(4*t.skinWeights.length,4),this.setAttribute(\"skinWeight\",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Nt);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];Fe.setFromBufferAttribute(i),this.morphTargetsRelative?(Be.addVectors(this.boundingBox.min,Fe.min),this.boundingBox.expandByPoint(Be),Be.addVectors(this.boundingBox.max,Fe.max),this.boundingBox.expandByPoint(Be)):(this.boundingBox.expandByPoint(Fe.min),this.boundingBox.expandByPoint(Fe.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new zt);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(Fe.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var a=e[r];ze.setFromBufferAttribute(a),this.morphTargetsRelative?(Be.addVectors(Fe.min,ze.min),Fe.expandByPoint(Be),Be.addVectors(Fe.max,ze.max),Fe.expandByPoint(Be)):(Fe.expandByPoint(ze.min),Fe.expandByPoint(ze.max))}Fe.getCenter(n);for(var o=0,s=0,c=t.count;s<c;s++)Be.fromBufferAttribute(t,s),o=Math.max(o,n.distanceToSquared(Be));if(e)for(var h=0,l=e.length;h<l;h++)for(var u=e[h],d=this.morphTargetsRelative,p=0,f=u.count;p<f;p++)Be.fromBufferAttribute(u,p),d&&(De.fromBufferAttribute(t,p),Be.add(De)),o=Math.max(o,n.distanceToSquared(Be));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute(\"position\");if(void 0!==e){var n=this.getAttribute(\"normal\");if(void 0===n)n=new xe(new Float32Array(3*e.count),3),this.setAttribute(\"normal\",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Y,o=new Y,s=new Y,c=new Y,h=new Y,l=new Y,u=new Y,d=new Y;if(t)for(var p=0,f=t.count;p<f;p+=3){var m=t.getX(p+0),g=t.getX(p+1),v=t.getX(p+2);a.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),s.fromBufferAttribute(e,v),u.subVectors(s,o),d.subVectors(a,o),u.cross(d),c.fromBufferAttribute(n,m),h.fromBufferAttribute(n,g),l.fromBufferAttribute(n,v),c.add(u),h.add(u),l.add(u),n.setXYZ(m,c.x,c.y,c.z),n.setXYZ(g,h.x,h.y,h.z),n.setXYZ(v,l.x,l.y,l.z)}else for(var y=0,M=e.count;y<M;y+=3)a.fromBufferAttribute(e,y+0),o.fromBufferAttribute(e,y+1),s.fromBufferAttribute(e,y+2),u.subVectors(s,o),d.subVectors(a,o),u.cross(d),n.setXYZ(y+0,u.x,u.y,u.z),n.setXYZ(y+1,u.x,u.y,u.z),n.setXYZ(y+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn(\"THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.\"));var n,r=this.attributes;for(n in r)if(void 0!==t.attributes[n])for(var i=r[n].array,a=(o=t.attributes[n]).array,o=o.itemSize*e,s=Math.min(a.length,i.length-o),c=0,h=o;c<s;c++,h++)i[h]=a[c];return this}console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Be.fromBufferAttribute(t,e),Be.normalize(),t.setXYZ(e,Be.x,Be.y,Be.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=(t=t.normalized,new n.constructor(e.length*r)),a=0,o=0,s=0,c=e.length;s<c;s++){a=e[s]*r;for(var h=0;h<r;h++)i[o++]=n[a++]}return new xe(i,r,t)}if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.\"),this;var e,n=new Ue,r=this.index.array,i=this.attributes;for(e in i){var a=t(i[e],r);n.setAttribute(e,a)}var o,s=this.morphAttributes;for(o in s){for(var c=[],h=s[o],l=0,u=h.length;l<u;l++){var d=t(h[l],r);c.push(d)}n.morphAttributes[o]=c}n.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,f=0,m=p.length;f<m;f++){var g=p[f];n.addGroup(g.start,g.count,g.materialIndex)}return n},toJSON:function(){var t={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};if(t.uuid=this.uuid,t.type=this.type,\"\"!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e,n=this.parameters;for(e in n)void 0!==n[e]&&(t[e]=n[e]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i,a=this.attributes;for(i in a){var o=a[i],s=o.toJSON(t.data);\"\"!==o.name&&(s.name=o.name),t.data.attributes[i]=s}var c,h={},l=!1;for(c in this.morphAttributes){for(var u=this.morphAttributes[c],d=[],p=0,f=u.length;p<f;p++){var m=u[p],g=m.toJSON(t.data);\"\"!==m.name&&(g.name=m.name),d.push(g)}0<d.length&&(h[c]=d,l=!0)}return l&&(t.data.morphAttributes=h,t.data.morphTargetsRelative=this.morphTargetsRelative),0<(r=this.groups).length&&(t.data.groups=JSON.parse(JSON.stringify(r))),null!==(r=this.boundingSphere)&&(t.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),t},clone:function(){return(new Ue).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var r,i=t.attributes;for(r in i){var a=i[r];this.setAttribute(r,a.clone(e))}var o,s=t.morphAttributes;for(o in s){for(var c=[],h=s[o],l=0,u=h.length;l<u;l++)c.push(h[l].clone(e));this.morphAttributes[o]=c}this.morphTargetsRelative=t.morphTargetsRelative;for(var d=t.groups,p=0,f=d.length;p<f;p++){var m=d[p];this.addGroup(m.start,m.count,m.materialIndex)}return null!==(n=t.boundingBox)&&(this.boundingBox=n.clone()),null!==(n=t.boundingSphere)&&(this.boundingSphere=n.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});var He=new et,Ge=new Wt,ke=new zt,je=new Y,Ve=new Y,We=new Y,Ye=new Y,qe=new Y,Xe=new Y,Ke=new Y,Ze=new Y,Je=new Y,Qe=new D,$e=new D,tn=new D,en=new Y,nn=new Y;function rn(t,e){Mt.call(this),this.type=\"Mesh\",this.geometry=void 0!==t?t:new Ue,this.material=void 0!==e?e:new ve,this.updateMorphTargets()}function an(t,e,n,r,i,a,o,s){return null===(e=1===e.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,2!==e.side,s))?null:(nn.copy(s),nn.applyMatrix4(t.matrixWorld),(s=n.ray.origin.distanceTo(nn))<n.near||s>n.far?null:{distance:s,point:nn.clone(),object:t})}function on(t,e,n,r,i,a,o,s,c,h,l,u){je.fromBufferAttribute(i,h),Ve.fromBufferAttribute(i,l),We.fromBufferAttribute(i,u);var d=t.morphTargetInfluences;if(e.morphTargets&&a&&d){Ke.set(0,0,0),Ze.set(0,0,0),Je.set(0,0,0);for(var p=0,f=a.length;p<f;p++){var m=d[p],g=a[p];0!==m&&(Ye.fromBufferAttribute(g,h),qe.fromBufferAttribute(g,l),Xe.fromBufferAttribute(g,u),o?(Ke.addScaledVector(Ye,m),Ze.addScaledVector(qe,m),Je.addScaledVector(Xe,m)):(Ke.addScaledVector(Ye.sub(je),m),Ze.addScaledVector(qe.sub(Ve),m),Je.addScaledVector(Xe.sub(We),m)))}je.add(Ke),Ve.add(Ze),We.add(Je)}return t.isSkinnedMesh&&(t.boneTransform(h,je),t.boneTransform(l,Ve),t.boneTransform(u,We)),(r=an(t,e,n,r,je,Ve,We,en))&&(s&&(Qe.fromBufferAttribute(s,h),$e.fromBufferAttribute(s,l),tn.fromBufferAttribute(s,u),r.uv=oe.getUV(en,je,Ve,We,Qe,$e,tn,new D)),c&&(Qe.fromBufferAttribute(c,h),$e.fromBufferAttribute(c,l),tn.fromBufferAttribute(c,u),r.uv2=oe.getUV(en,je,Ve,We,Qe,$e,tn,new D)),c=new fe(h,l,u),oe.getNormal(je,Ve,We,c.normal),r.face=c),r}rn.prototype=Object.assign(Object.create(Mt.prototype),{constructor:rn,isMesh:!0,copy:function(t){return Mt.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error(\"THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")},raycast:function(t,e){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),ke.copy(n.boundingSphere),ke.applyMatrix4(i),!1!==t.ray.intersectsSphere(ke)&&(He.getInverse(i),Ge.copy(t.ray).applyMatrix4(He),null===n.boundingBox||!1!==Ge.intersectsBox(n.boundingBox))))if(n.isBufferGeometry){var a=n.index,o=n.attributes.position,s=n.morphAttributes.position,c=n.morphTargetsRelative,h=n.attributes.uv,l=n.attributes.uv2,u=n.groups,d=n.drawRange;if(null!==a)if(Array.isArray(r))for(var p=0,f=u.length;p<f;p++)for(var m=u[p],g=r[m.materialIndex],v=Math.max(m.start,d.start),y=Math.min(m.start+m.count,d.start+d.count);v<y;v+=3){var M,x=a.getX(v),b=a.getX(v+1),_=a.getX(v+2);(M=on(this,g,t,Ge,o,s,c,h,l,x,b,_))&&(M.faceIndex=Math.floor(v/3),M.face.materialIndex=m.materialIndex,e.push(M))}else for(var S=Math.max(0,d.start),w=Math.min(a.count,d.start+d.count);S<w;S+=3){var E=a.getX(S),R=a.getX(S+1),T=a.getX(S+2);(M=on(this,r,t,Ge,o,s,c,h,l,E,R,T))&&(M.faceIndex=Math.floor(S/3),e.push(M))}else if(void 0!==o)if(Array.isArray(r))for(var A=0,L=u.length;A<L;A++)for(var P=u[A],C=r[P.materialIndex],O=Math.max(P.start,d.start),I=Math.min(P.start+P.count,d.start+d.count);O<I;O+=3)(M=on(this,C,t,Ge,o,s,c,h,l,O,O+1,O+2))&&(M.faceIndex=Math.floor(O/3),M.face.materialIndex=P.materialIndex,e.push(M));else for(var N=Math.max(0,d.start),F=Math.min(o.count,d.start+d.count);N<F;N+=3)(M=on(this,r,t,Ge,o,s,c,h,l,N,N+1,N+2))&&(M.faceIndex=Math.floor(N/3),e.push(M))}else if(n.isGeometry){var z,B=Array.isArray(r),U=n.vertices,H=n.faces;0<(n=n.faceVertexUvs[0]).length&&(z=n);for(var G=0,k=H.length;G<k;G++){var j,V,W,Y=H[G],q=B?r[Y.materialIndex]:r;void 0!==q&&(j=U[Y.a],V=U[Y.b],W=U[Y.c],(M=an(this,q,t,Ge,j,V,W,en))&&(z&&z[G]&&(q=z[G],Qe.copy(q[0]),$e.copy(q[1]),tn.copy(q[2]),M.uv=oe.getUV(en,j,V,W,Qe,$e,tn,new D)),M.face=Y,M.faceIndex=G,e.push(M)))}}}});var sn=0,cn=new et,hn=new Mt,ln=new Y;function un(){Object.defineProperty(this,\"id\",{value:sn+=2}),this.uuid=N.generateUUID(),this.name=\"\",this.type=\"Geometry\",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}un.prototype=Object.assign(Object.create(L.prototype),{constructor:un,isGeometry:!0,applyMatrix4:function(t){for(var e=(new F).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(var i=0,a=this.faces.length;i<a;i++){var o=this.faces[i];o.normal.applyMatrix3(e).normalize();for(var s=0,c=o.vertexNormals.length;s<c;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return cn.makeRotationX(t),this.applyMatrix4(cn),this},rotateY:function(t){return cn.makeRotationY(t),this.applyMatrix4(cn),this},rotateZ:function(t){return cn.makeRotationZ(t),this.applyMatrix4(cn),this},translate:function(t,e,n){return cn.makeTranslation(t,e,n),this.applyMatrix4(cn),this},scale:function(t,e,n){return cn.makeScale(t,e,n),this.applyMatrix4(cn),this},lookAt:function(t){return hn.lookAt(t),hn.updateMatrix(),this.applyMatrix4(hn.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index:void 0,r=t.attributes;if(void 0===r.position)return console.error(\"THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.\"),this;var i=r.position,a=r.normal,o=r.color,s=r.uv,c=r.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var h=0;h<i.count;h++)e.vertices.push((new Y).fromBufferAttribute(i,h)),void 0!==o&&e.colors.push((new le).fromBufferAttribute(o,h));function l(t,n,r,i){var h=void 0===o?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()];i=new fe(t,n,r,void 0===a?[]:[(new Y).fromBufferAttribute(a,t),(new Y).fromBufferAttribute(a,n),(new Y).fromBufferAttribute(a,r)],h,i);e.faces.push(i),void 0!==s&&e.faceVertexUvs[0].push([(new D).fromBufferAttribute(s,t),(new D).fromBufferAttribute(s,n),(new D).fromBufferAttribute(s,r)]),void 0!==c&&e.faceVertexUvs[1].push([(new D).fromBufferAttribute(c,t),(new D).fromBufferAttribute(c,n),(new D).fromBufferAttribute(c,r)])}var u=t.groups;if(0<u.length)for(var d=0;d<u.length;d++)for(var p=u[d],f=p.start,m=f,g=f+p.count;m<g;m+=3)void 0!==n?l(n.getX(m),n.getX(m+1),n.getX(m+2),p.materialIndex):l(m,m+1,m+2,p.materialIndex);else if(void 0!==n)for(var v=0;v<n.count;v+=3)l(n.getX(v),n.getX(v+1),n.getX(v+2));else for(var y=0;y<i.count;y+=3)l(y,y+1,y+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ln).negate(),this.translate(ln.x,ln.y,ln.z),this},normalize:function(){this.computeBoundingSphere();var t,e=this.boundingSphere.center,n=0===(t=this.boundingSphere.radius)?1:1/t;return(t=new et).set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(t),this},computeFaceNormals:function(){for(var t=new Y,e=new Y,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);for(var e=new Array(this.vertices.length),n=0,r=this.vertices.length;n<r;n++)e[n]=new Y;if(t)for(var i=new Y,a=new Y,o=0,s=this.faces.length;o<s;o++){var c=this.faces[o],h=this.vertices[c.a],l=this.vertices[c.b],u=this.vertices[c.c];i.subVectors(u,l),a.subVectors(h,l),i.cross(a),e[c.a].add(i),e[c.b].add(i),e[c.c].add(i)}else{this.computeFaceNormals();for(var d=0,p=this.faces.length;d<p;d++){var f=this.faces[d];e[f.a].add(f.normal),e[f.b].add(f.normal),e[f.c].add(f.normal)}}for(var m=0,g=this.vertices.length;m<g;m++)e[m].normalize();for(var v=0,y=this.faces.length;v<y;v++){var M=this.faces[v],x=M.vertexNormals;3===x.length?(x[0].copy(e[M.a]),x[1].copy(e[M.b]),x[2].copy(e[M.c])):(x[0]=e[M.a].clone(),x[1]=e[M.b].clone(),x[2]=e[M.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var r=0,i=n.vertexNormals.length;r<i;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var a=new un;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var c=this.morphNormals[o].faceNormals,h=this.morphNormals[o].vertexNormals,l=0,u=this.faces.length;l<u;l++){var d=new Y,p={a:new Y,b:new Y,c:new Y};c.push(d),h.push(p)}}var f=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var m=0,g=this.faces.length;m<g;m++){var v=this.faces[m],y=f.faceNormals[m],M=f.vertexNormals[m];y.copy(v.normal),M.a.copy(v.vertexNormals[0]),M.b.copy(v.vertexNormals[1]),M.c.copy(v.vertexNormals[2])}}for(var x=0,b=this.faces.length;x<b;x++){var _=this.faces[x];_.normal=_.__originalFaceNormal,_.vertexNormals=_.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Nt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new zt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,c=t.faces,h=this.colors,l=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new F).getNormalMatrix(e));for(var u=0,d=o.length;u<d;u++){var p=o[u].clone();void 0!==e&&p.applyMatrix4(e),a.push(p)}for(var f=0,m=l.length;f<m;f++)h.push(l[f].clone());for(var g=0,v=c.length;g<v;g++){var y=c[g],M=void 0,x=void 0,b=void 0,_=y.vertexNormals,S=y.vertexColors;(M=new fe(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&M.normal.applyMatrix3(r).normalize();for(var w=0,E=_.length;w<E;w++)x=_[w].clone(),void 0!==r&&x.applyMatrix3(r).normalize(),M.vertexNormals.push(x);M.color.copy(y.color);for(var R=0,T=S.length;R<T;R++)b=S[R],M.vertexColors.push(b.clone());M.materialIndex=y.materialIndex+n,s.push(M)}for(var A=0,L=t.faceVertexUvs.length;A<L;A++){var P=t.faceVertexUvs[A];void 0===this.faceVertexUvs[A]&&(this.faceVertexUvs[A]=[]);for(var C=0,O=P.length;C<O;C++){for(var I=P[C],N=[],D=0,z=I.length;D<z;D++)N.push(I[D].clone());this.faceVertexUvs[A].push(N)}}}else console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\",t)},mergeVertices:function(){for(var t={},e=[],n=[],r=Math.pow(10,4),i=0,a=this.vertices.length;i<a;i++){var o=this.vertices[i];void 0===t[o=Math.round(o.x*r)+\"_\"+Math.round(o.y*r)+\"_\"+Math.round(o.z*r)]?(t[o]=i,e.push(this.vertices[i]),n[i]=e.length-1):n[i]=n[t[o]]}for(var s=[],c=0,h=this.faces.length;c<h;c++){var l=this.faces[c];l.a=n[l.a],l.b=n[l.b],l.c=n[l.c];for(var u=[l.a,l.b,l.c],d=0;d<3;d++)if(u[d]===u[(d+1)%3]){s.push(c);break}}for(var p=s.length-1;0<=p;p--){var f=s[p];this.faces.splice(f,1);for(var m=0,g=this.faceVertexUvs.length;m<g;m++)this.faceVertexUvs[m].splice(f,1)}var v=this.vertices.length-e.length;return this.vertices=e,v},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new Y(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var r,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(r=[]),o&&o.length===e&&(i=[]);for(var s=0;s<e;s++){var c=t[s]._id;r&&r.push(a[c]),i&&i.push(o[c])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:\"Geometry\",generator:\"Geometry.toJSON\"}};if(t.uuid=this.uuid,t.type=this.type,\"\"!==this.name&&(t.name=this.name),void 0!==this.parameters){var e,n=this.parameters;for(e in n)void 0!==n[e]&&(t[e]=n[e]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}for(var o=[],s=[],c={},h=[],l={},u=[],d={},p=0;p<this.faces.length;p++){var f,m=this.faces[p],g=void 0!==this.faceVertexUvs[0][p],v=0<m.normal.length(),y=0<m.vertexNormals.length,M=1!==m.color.r||1!==m.color.g||1!==m.color.b,x=0<m.vertexColors.length;f=b(2,3,g),f=b(f,4,v),f=b(f,5,y),f=b(f,6,M),f=b(f,7,x),o.push(f),o.push(m.a,m.b,m.c),o.push(m.materialIndex),g&&(g=this.faceVertexUvs[0][p],o.push(w(g[0]),w(g[1]),w(g[2]))),v&&o.push(_(m.normal)),y&&(y=m.vertexNormals,o.push(_(y[0]),_(y[1]),_(y[2]))),M&&o.push(S(m.color)),x&&(m=m.vertexColors,o.push(S(m[0]),S(m[1]),S(m[2])))}function b(t,e,n){return n?t|1<<e:t&~(1<<e)}function _(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]||(c[e]=s.length/3,s.push(t.x,t.y,t.z)),c[e]}function S(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]||(l[e]=h.length,h.push(t.getHex())),l[e]}function w(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]||(d[e]=u.length/2,u.push(t.x,t.y)),d[e]}return t.data={},t.data.vertices=r,t.data.normals=s,0<h.length&&(t.data.colors=h),0<u.length&&(t.data.uvs=[u]),t.data.faces=o,t},clone:function(){return(new un).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,n=0,r=e.length;n<r;n++)this.vertices.push(e[n].clone());for(var i=t.colors,a=0,o=i.length;a<o;a++)this.colors.push(i[a].clone());for(var s=t.faces,c=0,h=s.length;c<h;c++)this.faces.push(s[c].clone());for(var l=0,u=t.faceVertexUvs.length;l<u;l++){var d=t.faceVertexUvs[l];void 0===this.faceVertexUvs[l]&&(this.faceVertexUvs[l]=[]);for(var p=0,f=d.length;p<f;p++){for(var m=d[p],g=[],v=0,y=m.length;v<y;v++){var M=m[v];g.push(M.clone())}this.faceVertexUvs[l].push(g)}}for(var x=t.morphTargets,b=0,_=x.length;b<_;b++){var S={};if(S.name=x[b].name,void 0!==x[b].vertices){S.vertices=[];for(var w=0,E=x[b].vertices.length;w<E;w++)S.vertices.push(x[b].vertices[w].clone())}if(void 0!==x[b].normals){S.normals=[];for(var R=0,T=x[b].normals.length;R<T;R++)S.normals.push(x[b].normals[R].clone())}this.morphTargets.push(S)}for(var A=t.morphNormals,L=0,P=A.length;L<P;L++){var C={};if(void 0!==A[L].vertexNormals){C.vertexNormals=[];for(var O=0,I=A[L].vertexNormals.length;O<I;O++){var N=A[L].vertexNormals[O],D={};D.a=N.a.clone(),D.b=N.b.clone(),D.c=N.c.clone(),C.vertexNormals.push(D)}}if(void 0!==A[L].faceNormals){C.faceNormals=[];for(var F=0,z=A[L].faceNormals.length;F<z;F++)C.faceNormals.push(A[L].faceNormals[F].clone())}this.morphNormals.push(C)}for(var B=t.skinWeights,U=0,H=B.length;U<H;U++)this.skinWeights.push(B[U].clone());for(var G=t.skinIndices,k=0,j=G.length;k<j;k++)this.skinIndices.push(G[k].clone());for(var V=t.lineDistances,W=0,Y=V.length;W<Y;W++)this.lineDistances.push(V[W]);var q=t.boundingBox;return null!==q&&(this.boundingBox=q.clone()),null!==(q=t.boundingSphere)&&(this.boundingSphere=q.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});var dn=function(){c(e,un);var t=h(e);function e(n,r,i,a,o,c){var h;return s(this,e),(h=t.call(this)).type=\"BoxGeometry\",h.parameters={width:n,height:r,depth:i,widthSegments:a,heightSegments:o,depthSegments:c},h.fromBufferGeometry(new pn(n,r,i,a,o,c)),h.mergeVertices(),h}return e}(),pn=function(){c(e,Ue);var t=h(e);function e(){var n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1;s(this,e),(n=t.call(this)).type=\"BoxBufferGeometry\",n.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:c,depthSegments:h};var u=l(n),d=(o=Math.floor(o),c=Math.floor(c),h=Math.floor(h),[]),p=[],f=[],m=[],g=0,v=0;function y(t,e,n,r,i,a,o,s,c,h,l){for(var y=a/c,M=o/h,x=a/2,b=o/2,_=s/2,S=c+1,w=h+1,E=0,R=0,T=new Y,A=0;A<w;A++)for(var L=A*M-b,P=0;P<S;P++)T[t]=(P*y-x)*r,T[e]=L*i,T[n]=_,p.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=0<s?1:-1,f.push(T.x,T.y,T.z),m.push(P/c),m.push(1-A/h),E+=1;for(var C=0;C<h;C++)for(var O=0;O<c;O++){var I=g+O+S*C,N=g+O+S*(C+1),D=g+(O+1)+S*(C+1),F=g+(O+1)+S*C;d.push(I,N,F),d.push(N,D,F),R+=6}u.addGroup(v,R,l),v+=R,g+=E}return y(\"z\",\"y\",\"x\",-1,-1,a,i,r,h,c,0),y(\"z\",\"y\",\"x\",1,-1,a,i,-r,h,c,1),y(\"x\",\"z\",\"y\",1,1,r,a,i,o,h,2),y(\"x\",\"z\",\"y\",1,-1,r,a,-i,o,h,3),y(\"x\",\"y\",\"z\",1,-1,r,i,a,o,c,4),y(\"x\",\"y\",\"z\",-1,-1,r,i,-a,o,c,5),n.setIndex(d),n.setAttribute(\"position\",new Ae(p,3)),n.setAttribute(\"normal\",new Ae(f,3)),n.setAttribute(\"uv\",new Ae(m,2)),n}return e}();function fn(t){var e,n={};for(e in t)for(var r in n[e]={},t[e]){var i=t[e][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?n[e][r]=i.clone():Array.isArray(i)?n[e][r]=i.slice():n[e][r]=i}return n}function mn(t){for(var e={},n=0;n<t.length;n++){var r,i=fn(t[n]);for(r in i)e[r]=i[r]}return e}var gn={clone:fn,merge:mn};function vn(t){ge.call(this),this.type=\"ShaderMaterial\",this.defines={},this.uniforms={},this.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\",this.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),this.setValues(t))}function yn(){Mt.call(this),this.type=\"Camera\",this.matrixWorldInverse=new et,this.projectionMatrix=new et,this.projectionMatrixInverse=new et}function Mn(t,e,n,r){yn.call(this),this.type=\"PerspectiveCamera\",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function xn(t,e,n){var r,i,a,o,s,c;Mt.call(this),this.type=\"CubeCamera\",!0===n.isWebGLCubeRenderTarget?(this.renderTarget=n,(r=new Mn(90,1,t,e)).layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Y(1,0,0)),this.add(r),(i=new Mn(90,1,t,e)).layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Y(-1,0,0)),this.add(i),(a=new Mn(90,1,t,e)).layers=this.layers,a.up.set(0,0,1),a.lookAt(new Y(0,1,0)),this.add(a),(o=new Mn(90,1,t,e)).layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Y(0,-1,0)),this.add(o),(s=new Mn(90,1,t,e)).layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Y(0,0,1)),this.add(s),(c=new Mn(90,1,t,e)).layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Y(0,0,-1)),this.add(c),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var h=t.xr.enabled,l=t.getRenderTarget();t.xr.enabled=!1;var u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=u,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(l),t.xr.enabled=h},this.clear=function(t,e,r,i){for(var a=t.getRenderTarget(),o=0;o<6;o++)t.setRenderTarget(n,o),t.clear(e,r,i);t.setRenderTarget(a)}):console.error(\"THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.\")}function bn(t,e,n){Number.isInteger(e)&&(console.warn(\"THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )\"),e=n),G.call(this,t,t,e)}function _n(t,e,n,r,i,a,o,s,c,h,l,u){U.call(this,null,a,o,s,c,h,r,i,l,u),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==c?c:g,this.minFilter=void 0!==h?h:g,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}((vn.prototype=Object.create(ge.prototype)).constructor=vn).prototype.isShaderMaterial=!0,vn.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=fn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this},vn.prototype.toJSON=function(t){var e,n=ge.prototype.toJSON.call(this,t);for(e in n.uniforms={},this.uniforms){var r=this.uniforms[e].value;r&&r.isTexture?n.uniforms[e]={type:\"t\",value:r.toJSON(t).uuid}:r&&r.isColor?n.uniforms[e]={type:\"c\",value:r.getHex()}:r&&r.isVector2?n.uniforms[e]={type:\"v2\",value:r.toArray()}:r&&r.isVector3?n.uniforms[e]={type:\"v3\",value:r.toArray()}:r&&r.isVector4?n.uniforms[e]={type:\"v4\",value:r.toArray()}:r&&r.isMatrix3?n.uniforms[e]={type:\"m3\",value:r.toArray()}:r&&r.isMatrix4?n.uniforms[e]={type:\"m4\",value:r.toArray()}:n.uniforms[e]={value:r}}0<Object.keys(this.defines).length&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;var i,a={};for(i in this.extensions)!0===this.extensions[i]&&(a[i]=!0);return 0<Object.keys(a).length&&(n.extensions=a),n},yn.prototype=Object.assign(Object.create(Mt.prototype),{constructor:yn,isCamera:!0,copy:function(t,e){return Mt.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn(\"THREE.Camera: .getWorldDirection() target is now required\"),t=new Y),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Mt.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Mt.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Mn.prototype=Object.assign(Object.create(yn.prototype),{constructor:Mn,isPerspectiveCamera:!0,copy:function(t,e){return yn.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*N.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*N.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*N.RAD2DEG*Math.atan(Math.tan(.5*N.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e=this.near,n=e*Math.tan(.5*N.DEG2RAD*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i,o=this.view;null!==this.view&&this.view.enabled&&(t=o.fullWidth,s=o.fullHeight,a+=o.offsetX*i/t,n-=o.offsetY*r/s,i*=o.width/t,r*=o.height/s);var s=this.filmOffset;0!==s&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=Mt.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),(xn.prototype=Object.create(Mt.prototype)).constructor=xn,((bn.prototype=Object.create(G.prototype)).constructor=bn).prototype.isWebGLCubeRenderTarget=!0,bn.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=b,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n=new xt,r=\"\\n\\n\\t\\t\\tuniform sampler2D tEquirect;\\n\\n\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t#include <common>\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvec3 direction = normalize( vWorldDirection );\\n\\n\\t\\t\\t\\tvec2 sampleUV = equirectUv( direction );\\n\\n\\t\\t\\t\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\n\\t\\t\\t}\\n\\t\\t\";return(r=new vn({name:\"CubemapFromEquirect\",uniforms:fn({tEquirect:{value:null}}),vertexShader:\"\\n\\n\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\t\\t\\t\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\n\\t\\t\\t\\t#include <begin_vertex>\\n\\t\\t\\t\\t#include <project_vertex>\\n\\n\\t\\t\\t}\\n\\t\\t\",fragmentShader:r,side:1,blending:0})).uniforms.tEquirect.value=e,r=new rn(new pn(5,5,5),r),n.add(r),new xn(1,10,this).update(t,n),r.geometry.dispose(),r.material.dispose(),this},((_n.prototype=Object.create(U.prototype)).constructor=_n).prototype.isDataTexture=!0;var Sn=new zt,wn=new Y;function En(t,e,n,r,i,a){this.planes=[void 0!==t?t:new Kt,void 0!==e?e:new Kt,void 0!==n?n:new Kt,void 0!==r?r:new Kt,void 0!==i?i:new Kt,void 0!==a?a:new Kt]}Object.assign(En.prototype,{set:function(t,e,n,r,i,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var e=this.planes,n=(g=t.elements)[0],r=g[1],i=g[2],a=g[3],o=g[4],s=g[5],c=g[6],h=g[7],l=g[8],u=g[9],d=g[10],p=g[11],f=g[12],m=g[13],g=(t=g[14],g[15]);return e[0].setComponents(a-n,h-o,p-l,g-f).normalize(),e[1].setComponents(a+n,h+o,p+l,g+f).normalize(),e[2].setComponents(a+r,h+s,p+u,g+m).normalize(),e[3].setComponents(a-r,h-s,p-u,g-m).normalize(),e[4].setComponents(a-i,h-c,p-d,g-t).normalize(),e[5].setComponents(a+i,h+c,p+d,g+t).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Sn.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Sn)},intersectsSprite:function(t){return Sn.center.set(0,0,0),Sn.radius=.7071067811865476,Sn.applyMatrix4(t.matrixWorld),this.intersectsSphere(Sn)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(wn.x=(0<r.normal.x?t.max:t.min).x,wn.y=(0<r.normal.y?t.max:t.min).y,wn.z=(0<r.normal.z?t.max:t.min).z,r.distanceToPoint(wn)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Rn={common:{diffuse:{value:new le(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new F},uv2Transform:{value:new F},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new D(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new le(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new le(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new F}},sprite:{diffuse:{value:new le(15658734)},opacity:{value:1},center:{value:new D(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new F}}};function Tn(){var t=null,e=!1,n=null,r=null;function i(e,a){n(e,a),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function An(t,e){var n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){e.isInterleavedBufferAttribute&&(e=e.data);var a,o,s,c,h,l=r.get(e);void 0===l?r.set(e,(o=i,s=(a=e).array,c=a.usage,h=t.createBuffer(),t.bindBuffer(o,h),t.bufferData(o,s,c),a.onUploadCallback(),c=5126,s instanceof Float32Array?c=5126:s instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):s instanceof Uint16Array?c=5123:s instanceof Int16Array?c=5122:s instanceof Uint32Array?c=5125:s instanceof Int32Array?c=5124:s instanceof Int8Array?c=5120:s instanceof Uint8Array&&(c=5121),{buffer:h,type:c,bytesPerElement:s.BYTES_PER_ELEMENT,version:a.version})):l.version<e.version&&(c=l.buffer,s=i,i=(a=e).array,a=a.updateRange,t.bindBuffer(s,c),-1===a.count?t.bufferSubData(s,0,i):(n?t.bufferSubData(s,a.offset*i.BYTES_PER_ELEMENT,i,a.offset,a.count):t.bufferSubData(s,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count)),a.count=-1),l.version=e.version)}}}function Ln(t,e,n,r){un.call(this),this.type=\"PlaneGeometry\",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Pn(t,e,n,r)),this.mergeVertices()}function Pn(t,e,n,r){Ue.call(this),this.type=\"PlaneBufferGeometry\",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};for(var i=(t=t||1)/2,a=(e=e||1)/2,o=Math.floor(n)||1,s=Math.floor(r)||1,c=o+1,h=s+1,l=t/o,u=e/s,d=[],p=[],f=[],m=[],g=0;g<h;g++)for(var v=g*u-a,y=0;y<c;y++)p.push(y*l-i,-v,0),f.push(0,0,1),m.push(y/o),m.push(1-g/s);for(var M=0;M<s;M++)for(var x=0;x<o;x++){var b=x+c*(M+1),_=x+1+c*(M+1),S=x+1+c*M;d.push(x+c*M,b,S),d.push(b,_,S)}this.setIndex(d),this.setAttribute(\"position\",new Ae(p,3)),this.setAttribute(\"normal\",new Ae(f,3)),this.setAttribute(\"uv\",new Ae(m,2))}(Ln.prototype=Object.create(un.prototype)).constructor=Ln,(Pn.prototype=Object.create(Ue.prototype)).constructor=Pn;var Cn={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",alphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\",aomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"vec3 transformed = vec3( position );\",beginnormal_vertex:\"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\",bsdfs:\"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha  = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\",bumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\",clipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\",clipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\",color_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_pars_vertex:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\",common:\"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\",cube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_maxMipLevel 8.0\\n#define cubeUV_minMipLevel 4.0\\n#define cubeUV_maxTileSize 256.0\\n#define cubeUV_minTileSize 16.0\\nfloat getFace(vec3 direction) {\\n    vec3 absDirection = abs(direction);\\n    float face = -1.0;\\n    if (absDirection.x > absDirection.z) {\\n      if (absDirection.x > absDirection.y)\\n        face = direction.x > 0.0 ? 0.0 : 3.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    } else {\\n      if (absDirection.z > absDirection.y)\\n        face = direction.z > 0.0 ? 2.0 : 5.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    }\\n    return face;\\n}\\nvec2 getUV(vec3 direction, float face) {\\n    vec2 uv;\\n    if (face == 0.0) {\\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\\n    return 0.5 * (uv + 1.0);\\n}\\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\\n  float face = getFace(direction);\\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\\n  mipInt = max(mipInt, cubeUV_minMipLevel);\\n  float faceSize = exp2(mipInt);\\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\\n  vec2 f = fract(uv);\\n  uv += 0.5 - f;\\n  if (face > 2.0) {\\n    uv.y += faceSize;\\n    face -= 3.0;\\n  }\\n  uv.x += face * faceSize;\\n  if(mipInt < cubeUV_maxMipLevel){\\n    uv.y += 2.0 * cubeUV_maxTileSize;\\n  }\\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\\n  uv *= texelSize;\\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x += texelSize;\\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.y += texelSize;\\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x -= texelSize;\\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  vec3 tm = mix(tl, tr, f.x);\\n  vec3 bm = mix(bl, br, f.x);\\n  return mix(tm, bm, f.y);\\n}\\n#define r0 1.0\\n#define v0 0.339\\n#define m0 -2.0\\n#define r1 0.8\\n#define v1 0.276\\n#define m1 -1.0\\n#define r4 0.4\\n#define v4 0.046\\n#define m4 2.0\\n#define r5 0.305\\n#define v5 0.016\\n#define m5 3.0\\n#define r6 0.21\\n#define v6 0.0038\\n#define m6 4.0\\nfloat roughnessToMip(float roughness) {\\n  float mip = 0.0;\\n  if (roughness >= r1) {\\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\\n  } else if (roughness >= r4) {\\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\\n  } else if (roughness >= r5) {\\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\\n  } else if (roughness >= r6) {\\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\\n  } else {\\n    mip = -2.0 * log2(1.16 * roughness);  }\\n  return mip;\\n}\\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\\n  float mipF = fract(mip);\\n  float mipInt = floor(mip);\\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\\n  if (mipF == 0.0) {\\n    return vec4(color0, 1.0);\\n  } else {\\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\\n    return vec4(mix(color0, color1, mipF), 1.0);\\n  }\\n}\\n#endif\",defaultnormal_vertex:\"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\",emissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\",encodings_fragment:\"gl_FragColor = linearToOutputTexel( gl_FragColor );\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\",envmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\t\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t}  else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\",envmap_common_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\",envmap_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\",envmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\",envmap_physical_pars_fragment:\"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t  vec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\",fog_vertex:\"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\",gradientmap_pars_fragment:\"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\",lightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\",lights_pars_begin:\"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\",lights_toon_fragment:\"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\",lights_toon_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\",lights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\",lights_fragment_begin:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\",lights_fragment_maps:\"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\",lights_fragment_end:\"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\",logdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\",map_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\",map_particle_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\",map_particle_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",metalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\",morphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\",normal_fragment_begin:\"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\",normal_fragment_maps:\"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\",normalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\",clearcoat_normal_fragment_begin:\"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\",clearcoat_normal_fragment_maps:\"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\\n\\t#endif\\n#endif\",clearcoat_pars_fragment:\"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\",packing:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\",premultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\",project_vertex:\"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\",dithering_fragment:\"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\",dithering_pars_fragment:\"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\",roughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\",shadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\",shadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\",shadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\",skinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\",skinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\",specularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\",tonemapping_pars_fragment:\"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\",transmissionmap_fragment:\"#ifdef USE_TRANSMISSIONMAP\\n\\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\\n#endif\",transmissionmap_pars_fragment:\"#ifdef USE_TRANSMISSIONMAP\\n\\tuniform sampler2D transmissionMap;\\n#endif\",uv_pars_fragment:\"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\",uv_vertex:\"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\",uv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\",background_frag:\"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",background_vert:\"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\",cube_frag:\"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",cube_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\",depth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\",distanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\",distanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\",equirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",equirect_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\",linedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",linedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",meshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshmatcap_frag:\"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshmatcap_vert:\"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\",meshtoon_frag:\"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshtoon_vert:\"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshphysical_frag:\"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSMISSION\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSMISSION\\n\\tuniform float transmission;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <transmissionmap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#ifdef TRANSMISSION\\n\\t\\tfloat totalTransmission = transmission;\\n\\t#endif\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <transmissionmap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSMISSION\\n\\t\\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphysical_vert:\"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",normal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\",normal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\",points_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",points_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\",shadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",shadow_vert:\"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",sprite_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",sprite_vert:\"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\"},On={basic:{uniforms:mn([Rn.common,Rn.specularmap,Rn.envmap,Rn.aomap,Rn.lightmap,Rn.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:mn([Rn.common,Rn.specularmap,Rn.envmap,Rn.aomap,Rn.lightmap,Rn.emissivemap,Rn.fog,Rn.lights,{emissive:{value:new le(0)}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:mn([Rn.common,Rn.specularmap,Rn.envmap,Rn.aomap,Rn.lightmap,Rn.emissivemap,Rn.bumpmap,Rn.normalmap,Rn.displacementmap,Rn.fog,Rn.lights,{emissive:{value:new le(0)},specular:{value:new le(1118481)},shininess:{value:30}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:mn([Rn.common,Rn.envmap,Rn.aomap,Rn.lightmap,Rn.emissivemap,Rn.bumpmap,Rn.normalmap,Rn.displacementmap,Rn.roughnessmap,Rn.metalnessmap,Rn.fog,Rn.lights,{emissive:{value:new le(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:mn([Rn.common,Rn.aomap,Rn.lightmap,Rn.emissivemap,Rn.bumpmap,Rn.normalmap,Rn.displacementmap,Rn.gradientmap,Rn.fog,Rn.lights,{emissive:{value:new le(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:mn([Rn.common,Rn.bumpmap,Rn.normalmap,Rn.displacementmap,Rn.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:mn([Rn.points,Rn.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:mn([Rn.common,Rn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:mn([Rn.common,Rn.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:mn([Rn.common,Rn.bumpmap,Rn.normalmap,Rn.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.normal_vert,fragmentShader:Cn.normal_frag},sprite:{uniforms:mn([Rn.sprite,Rn.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new F},t2D:{value:null}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},cube:{uniforms:mn([Rn.envmap,{opacity:{value:1}}]),vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distanceRGBA:{uniforms:mn([Rn.common,Rn.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distanceRGBA_vert,fragmentShader:Cn.distanceRGBA_frag},shadow:{uniforms:mn([Rn.lights,Rn.fog,{color:{value:new le(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};function In(t,e,n,r){var i,a,o=new le(0),s=0,c=null,h=0,l=null;function u(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),u(o,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){u(o,s=t)},render:function(e,r,p,f){var m=!0===r.isScene?r.background:null;null===(m=(r=(r=t.xr).getSession&&r.getSession())&&\"additive\"===r.environmentBlendMode?null:m)?u(o,s):m&&m.isColor&&(u(m,1),f=!0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||m.mapping===d)?(void 0===a&&((a=new rn(new pn(1,1,1),new vn({name:\"BackgroundCubeMaterial\",uniforms:fn(On.cube.uniforms),vertexShader:On.cube.vertexShader,fragmentShader:On.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute(\"normal\"),a.geometry.deleteAttribute(\"uv\"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,\"envMap\",{get:function(){return this.uniforms.envMap.value}}),n.update(a)),f=m.isWebGLCubeRenderTarget?m.texture:m,a.material.uniforms.envMap.value=f,a.material.uniforms.flipEnvMap.value=f.isCubeTexture?-1:1,c===m&&h===f.version&&l===t.toneMapping||(a.material.needsUpdate=!0,c=m,h=f.version,l=t.toneMapping),e.unshift(a,a.geometry,a.material,0,0,null)):m&&m.isTexture&&(void 0===i&&((i=new rn(new Pn(2,2),new vn({name:\"BackgroundMaterial\",uniforms:fn(On.background.uniforms),vertexShader:On.background.vertexShader,fragmentShader:On.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute(\"normal\"),Object.defineProperty(i.material,\"map\",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),!0===(i.material.uniforms.t2D.value=m).matrixAutoUpdate&&m.updateMatrix(),i.material.uniforms.uvTransform.value.copy(m.matrix),c===m&&h===m.version&&l===t.toneMapping||(i.material.needsUpdate=!0,h=(c=m).version,l=t.toneMapping),e.unshift(i,i.geometry,i.material,0,0,null))}}}function Nn(t,e,n,r){var i=t.getParameter(34921),a=r.isWebGL2?null:e.get(\"OES_vertex_array_object\"),o=r.isWebGL2||null!==a,s={},c=d(null),h=c;function l(e){return r.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function u(e){return r.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function d(t){for(var e=[],n=[],r=[],a=0;a<i;a++)e[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{}}}function p(){for(var t=h.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,i){var a=h.newAttributes,o=h.enabledAttributes,s=h.attributeDivisors;a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==i&&((r.isWebGL2?t:e.get(\"ANGLE_instanced_arrays\"))[r.isWebGL2?\"vertexAttribDivisor\":\"vertexAttribDivisorANGLE\"](n,i),s[n]=i)}function g(){for(var e=h.newAttributes,n=h.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function v(e,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,a,o,s):t.vertexAttribIPointer(e,n,i,o,s)}function y(){M(),h!==c&&l((h=c).object)}function M(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(i,c,u,y,M){var x,b=!1;o?(x=function(e,n,i){var o=!0===i.wireframe;return void 0===(i=s[e.id])&&(i={},s[e.id]=i),void 0===(e=i[n.id])&&(e={},i[n.id]=e),void 0===(n=e[o])&&(n=d(r.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),e[o]=n),n}(y,u,c),h!==x&&l((h=x).object),(b=function(t){var e,n=h.attributes,r=t.attributes;if(Object.keys(n).length!==Object.keys(r).length)return!0;for(e in r){var i=n[e],a=r[e];if(i.attribute!==a)return!0;if(i.data!==a.data)return!0}return!1}(y))&&function(t){var e,n={},r=t.attributes;for(e in r){var i=r[e],a={};(a.attribute=i).data&&(a.data=i.data),n[e]=a}h.attributes=n}(y)):(x=!0===c.wireframe,h.geometry===y.id&&h.program===u.id&&h.wireframe===x||(h.geometry=y.id,h.program=u.id,h.wireframe=x,b=!0)),!0===i.isInstancedMesh&&(b=!0),null!==M&&n.update(M,34963),b&&(function(i,a,o,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get(\"ANGLE_instanced_arrays\")){p();var c,h=s.attributes,l=o.getAttributes(),u=a.defaultAttributeValues;for(c in l){var d=l[c];if(0<=d){var y=h[c];if(void 0!==y){var M,x,b,_,S=y.normalized,w=y.itemSize,E=n.get(y);void 0!==E&&(M=E.buffer,R=E.type,x=E.bytesPerElement,y.isInterleavedBufferAttribute?(_=(b=y.data).stride,E=y.offset,b&&b.isInstancedInterleavedBuffer?(m(d,b.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=b.meshPerAttribute*b.count)):f(d),t.bindBuffer(34962,M),v(d,w,R,S,_*x,E*x)):(y.isInstancedBufferAttribute?(m(d,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):f(d),t.bindBuffer(34962,M),v(d,w,R,S,0,0)))}else if(\"instanceMatrix\"===c){var R=n.get(i.instanceMatrix);void 0!==R&&(S=R.buffer,R=R.type,m(d+0,1),m(d+1,1),m(d+2,1),m(d+3,1),t.bindBuffer(34962,S),t.vertexAttribPointer(d+0,4,R,!1,64,0),t.vertexAttribPointer(d+1,4,R,!1,64,16),t.vertexAttribPointer(d+2,4,R,!1,64,32),t.vertexAttribPointer(d+3,4,R,!1,64,48))}else if(void 0!==u){var T=u[c];if(void 0!==T)switch(T.length){case 2:t.vertexAttrib2fv(d,T);break;case 3:t.vertexAttrib3fv(d,T);break;case 4:t.vertexAttrib4fv(d,T);break;default:t.vertexAttrib1fv(d,T)}}}}g()}}(i,c,u,y),null!==M&&t.bindBuffer(34963,n.get(M).buffer))},reset:y,resetDefaultState:M,dispose:function(){for(var t in y(),s){var e,n=s[t];for(e in n){var r,i=n[e];for(r in i)u(i[r].object),delete i[r];delete n[e]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0!==s[t.id]){var e,n=s[t.id];for(e in n){var r,i=n[e];for(r in i)u(i[r].object),delete i[r];delete n[e]}delete s[t.id]}},releaseStatesOfProgram:function(t){for(var e in s)if(void 0!==(e=s[e])[t.id]){var n,r=e[t.id];for(n in r)u(r[n].object),delete r[n];delete e[t.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function Dn(t,e,n,r){var i,a=r.isWebGL2;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var c,h;if(a)c=t,h=\"drawArraysInstanced\";else if(h=\"drawArraysInstancedANGLE\",null===(c=e.get(\"ANGLE_instanced_arrays\")))return void console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");c[h](i,r,o,s),n.update(o,i,s)}}}function Fn(t,e,n){var r;function i(e){if(\"highp\"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return\"highp\";e=\"mediump\"}return\"mediump\"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?\"mediump\":\"lowp\"}var a=\"undefined\"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||\"undefined\"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:\"highp\";(s=i(o))!==o&&(console.warn(\"THREE.WebGLRenderer:\",o,\"not supported, using\",s,\"instead.\"),o=s);var s,c=!0===n.logarithmicDepthBuffer,h=t.getParameter(34930),l=t.getParameter(35660);return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get(\"EXT_texture_filter_anisotropic\");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:l,maxTextureSize:t.getParameter(3379),maxCubemapSize:t.getParameter(34076),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVaryings:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),vertexTextures:s=0<l,floatFragmentTextures:n=a||!!e.get(\"OES_texture_float\"),floatVertexTextures:s&&n,maxSamples:a?t.getParameter(36183):0}}function zn(){var t=this,e=null,n=0,r=!1,i=!1,a=new Kt,o=new F,s={value:null,needsUpdate:!1};function c(){s.value!==e&&(s.value=e,s.needsUpdate=0<n),t.numPlanes=n,t.numIntersection=0}function h(e,n,r,i){var c=null!==e?e.length:0,h=null;if(0!==c){if(h=s.value,!0!==i||null===h){i=r+4*c;var l=n.matrixWorldInverse;o.getNormalMatrix(l),(null===h||h.length<i)&&(h=new Float32Array(i));for(var u=0,d=r;u!==c;++u,d+=4)a.copy(e[u]).applyMatrix4(l,o),a.normal.toArray(h,d),h[d+3]=a.constant}s.value=h,s.needsUpdate=!0}return t.numPlanes=c,t.numIntersection=0,h}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,a){var o=0!==t.length||i||0!==n||r;return r=i,e=h(t,a,0),n=t.length,o},this.beginShadows=function(){i=!0,h(null)},this.endShadows=function(){i=!1,c()},this.setState=function(t,a,o,l,u,d){if(!r||null===t||0===t.length||i&&!o)i?h(null):c();else{var p=4*(o=i?0:n),f=u.clippingState||null;s.value=f;f=h(t,l,p,d);for(var m=0;m!==p;++m)f[m]=e[m];u.clippingState=f,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=o}}}function Bn(t){var e={};return{has:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case\"WEBGL_depth_texture\":r=t.getExtension(\"WEBGL_depth_texture\")||t.getExtension(\"MOZ_WEBGL_depth_texture\")||t.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case\"EXT_texture_filter_anisotropic\":r=t.getExtension(\"EXT_texture_filter_anisotropic\")||t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case\"WEBGL_compressed_texture_s3tc\":r=t.getExtension(\"WEBGL_compressed_texture_s3tc\")||t.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||t.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case\"WEBGL_compressed_texture_pvrtc\":r=t.getExtension(\"WEBGL_compressed_texture_pvrtc\")||t.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:r=t.getExtension(n)}return!!(e[n]=r)},get:function(t){return this.has(t)||console.warn(\"THREE.WebGLRenderer: \"+t+\" extension not supported.\"),e[t]}}}function Un(t,e,n,r){var i=new WeakMap,a=new WeakMap;function o(t){var s,c=t.target,h=i.get(c);for(s in null!==h.index&&e.remove(h.index),h.attributes)e.remove(h.attributes[s]);c.removeEventListener(\"dispose\",o),i.delete(c),(t=a.get(h))&&(e.remove(t),a.delete(h)),r.releaseStatesOfGeometry(c),!0===c.isInstancedBufferGeometry&&delete c._maxInstanceCount,n.memory.geometries--}return{get:function(t,e){var r=i.get(e);return r||(e.addEventListener(\"dispose\",o),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Ue).setFromObject(t)),r=e._bufferGeometry),i.set(e,r),n.memory.geometries++,r)},update:function(t){var n,r=t.attributes;for(n in r)e.update(r[n],34962);var i,a=t.morphAttributes;for(i in a)for(var o=a[i],s=0,c=o.length;s<c;s++)e.update(o[s],34962)},getWireframeAttribute:function(t){var n,r=a.get(t);return(!r||null!==(n=t.index)&&r.version<n.version)&&function(t){var n=[],r=t.index,i=t.attributes.position,o=0;if(null!==r)for(var s=r.array,c=(o=r.version,0),h=s.length;c<h;c+=3){var l=s[c+0],u=s[c+1],d=s[c+2];n.push(l,u,u,d,d,l)}else{var p=i.array;o=i.version;for(var f=0,m=p.length/3-1;f<m;f+=3){var g=f+0,v=f+1,y=f+2;n.push(g,v,v,y,y,g)}}(p=new(65535<Ce(n)?Te:Ee)(n,1)).version=o,(o=a.get(t))&&e.remove(o),a.set(t,p)}(t),a.get(t)}}}function Hn(t,e,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(t){i=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,a,e*o),n.update(r,i,1)},this.renderInstances=function(r,c,h){if(0!==h){var l,u;if(s)l=t,u=\"drawElementsInstanced\";else if(u=\"drawElementsInstancedANGLE\",null===(l=e.get(\"ANGLE_instanced_arrays\")))return void console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");l[u](i,c,a,r*o,h),n.update(c,i,h)}}}function Gn(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error(\"THREE.WebGLInfo: Unknown draw mode:\",n)}}}}function kn(t,e){return t[0]-e[0]}function jn(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Vn(t){for(var e={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,a,o,s){var c=i.morphTargetInfluences,h=void 0===c?0:c.length;if(void 0===(l=e[a.id])){for(var l=[],u=0;u<h;u++)l[u]=[u,0];e[a.id]=l}for(var d=0;d<h;d++){var p=l[d];p[0]=d,p[1]=c[d]}l.sort(jn);for(var f=0;f<8;f++)f<h&&l[f][1]?(r[f][0]=l[f][0],r[f][1]=l[f][1]):(r[f][0]=Number.MAX_SAFE_INTEGER,r[f][1]=0);r.sort(kn);for(var m=o.morphTargets&&a.morphAttributes.position,g=o.morphNormals&&a.morphAttributes.normal,v=0,y=0;y<8;y++){var M=(x=r[y])[0],x=x[1];M!==Number.MAX_SAFE_INTEGER&&x?(m&&a.getAttribute(\"morphTarget\"+y)!==m[M]&&a.setAttribute(\"morphTarget\"+y,m[M]),g&&a.getAttribute(\"morphNormal\"+y)!==g[M]&&a.setAttribute(\"morphNormal\"+y,g[M]),v+=n[y]=x):(m&&void 0!==a.getAttribute(\"morphTarget\"+y)&&a.deleteAttribute(\"morphTarget\"+y),g&&void 0!==a.getAttribute(\"morphNormal\"+y)&&a.deleteAttribute(\"morphNormal\"+y),n[y]=0)}o=a.morphTargetsRelative?1:1-v,s.getUniforms().setValue(t,\"morphTargetBaseInfluence\",o),s.getUniforms().setValue(t,\"morphTargetInfluences\",n)}}}function Wn(t,e,n,r){var i=new WeakMap;return{update:function(t){var a=r.render.frame,o=t.geometry,s=e.get(t,o);return i.get(s)!==a&&(o.isGeometry&&s.updateFromObject(t),e.update(s),i.set(s,a)),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s},dispose:function(){i=new WeakMap}}}function Yn(t,e,n,r,i,a,o,s,c,h){U.call(this,t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,i,a,o=void 0!==o?o:x,s,c,h),this.flipY=!1}function qn(t,e,n,r){U.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:r||1},this.magFilter=g,this.minFilter=g,this.wrapR=m,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Xn(t,e,n,r){U.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:r||1},this.magFilter=g,this.minFilter=g,this.wrapR=m,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}On.physical={uniforms:mn([On.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new D(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new le(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},((Yn.prototype=Object.create(U.prototype)).constructor=Yn).prototype.isCubeTexture=!0,Object.defineProperty(Yn.prototype,\"images\",{get:function(){return this.image},set:function(t){this.image=t}}),((qn.prototype=Object.create(U.prototype)).constructor=qn).prototype.isDataTexture2DArray=!0,((Xn.prototype=Object.create(U.prototype)).constructor=Xn).prototype.isDataTexture3D=!0;var Kn=new U,Zn=new qn,Jn=new Xn,Qn=new Yn,$n=[],tr=[],er=new Float32Array(16),nr=new Float32Array(9),rr=new Float32Array(4);function ir(t,e,n){var r=t[0];if(r<=0||0<r)return t;var i=e*n,a=$n[i];if(void 0===a&&(a=new Float32Array(i),$n[i]=a),0!==e){r.toArray(a,0);for(var o=1,s=0;o!==e;++o)t[o].toArray(a,s+=n)}return a}function ar(t,e){if(t.length===e.length){for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return;return 1}}function or(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function sr(t,e){var n=tr[e];void 0===n&&(n=new Int32Array(e),tr[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function cr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function hr(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y):ar(n,e)||(t.uniform2fv(this.addr,e),or(n,e))}function lr(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z):void 0!==e.r?n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b):ar(n,e)||(t.uniform3fv(this.addr,e),or(n,e))}function ur(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w):ar(n,e)||(t.uniform4fv(this.addr,e),or(n,e))}function dr(t,e){var n=this.cache,r=e.elements;void 0===r?ar(n,e)||(t.uniformMatrix2fv(this.addr,!1,e),or(n,e)):ar(n,r)||(rr.set(r),t.uniformMatrix2fv(this.addr,!1,rr),or(n,r))}function pr(t,e){var n=this.cache,r=e.elements;void 0===r?ar(n,e)||(t.uniformMatrix3fv(this.addr,!1,e),or(n,e)):ar(n,r)||(nr.set(r),t.uniformMatrix3fv(this.addr,!1,nr),or(n,r))}function fr(t,e){var n=this.cache,r=e.elements;void 0===r?ar(n,e)||(t.uniformMatrix4fv(this.addr,!1,e),or(n,e)):ar(n,r)||(er.set(r),t.uniformMatrix4fv(this.addr,!1,er),or(n,r))}function mr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Kn,i)}function gr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Zn,i)}function vr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Jn,i)}function yr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Qn,i)}function Mr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function xr(t,e){var n=this.cache;ar(n,e)||(t.uniform2iv(this.addr,e),or(n,e))}function br(t,e){var n=this.cache;ar(n,e)||(t.uniform3iv(this.addr,e),or(n,e))}function _r(t,e){var n=this.cache;ar(n,e)||(t.uniform4iv(this.addr,e),or(n,e))}function Sr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function wr(t,e){t.uniform1fv(this.addr,e)}function Er(t,e){t.uniform1iv(this.addr,e)}function Rr(t,e){t.uniform2iv(this.addr,e)}function Tr(t,e){t.uniform3iv(this.addr,e)}function Ar(t,e){t.uniform4iv(this.addr,e)}function Lr(t,e){e=ir(e,this.size,2),t.uniform2fv(this.addr,e)}function Pr(t,e){e=ir(e,this.size,3),t.uniform3fv(this.addr,e)}function Cr(t,e){e=ir(e,this.size,4),t.uniform4fv(this.addr,e)}function Or(t,e){e=ir(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function Ir(t,e){e=ir(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function Nr(t,e){e=ir(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function Dr(t,e,n){var r=e.length,i=sr(n,r);t.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(e[a]||Kn,i[a])}function Fr(t,e,n){var r=e.length,i=sr(n,r);t.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(e[a]||Qn,i[a])}function zr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return cr;case 35664:return hr;case 35665:return lr;case 35666:return ur;case 35674:return dr;case 35675:return pr;case 35676:return fr;case 5124:case 35670:return Mr;case 35667:case 35671:return xr;case 35668:case 35672:return br;case 35669:case 35673:return _r;case 5125:return Sr;case 35678:case 36198:case 36298:case 36306:case 35682:return mr;case 35679:case 36299:case 36307:return vr;case 35680:case 36300:case 36308:case 36293:return yr;case 36289:case 36303:case 36311:case 36292:return gr}}(e.type)}function Br(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return wr;case 35664:return Lr;case 35665:return Pr;case 35666:return Cr;case 35674:return Or;case 35675:return Ir;case 35676:return Nr;case 5124:case 35670:return Er;case 35667:case 35671:return Rr;case 35668:case 35672:return Tr;case 35669:case 35673:return Ar;case 35678:case 36198:case 36298:case 36306:case 35682:return Dr;case 35680:case 36300:case 36308:case 36293:return Fr}}(e.type)}function Ur(t){this.id=t,this.seq=[],this.map={}}Br.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),or(e,t)},Ur.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(t,e[o.id],n)}};var Hr=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;function Gr(t,e){t.seq.push(e),t.map[e.id]=e}function kr(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r);!function(t,e,n){var r=t.name,i=r.length;for(Hr.lastIndex=0;;){var a=Hr.exec(r),o=Hr.lastIndex,s=a[1];if(\"]\"===a[2]&&(s|=0),void 0===(a=a[3])||\"[\"===a&&o+2===i){Gr(n,new(void 0===a?zr:Br)(s,t,e));break}void 0===(a=n.map[s])&&Gr(n,a=new Ur(s)),n=a}}(i,t.getUniformLocation(e,i.name),this)}}function jr(t,e,n){return e=t.createShader(e),t.shaderSource(e,n),t.compileShader(e),e}kr.prototype.setValue=function(t,e,n,r){void 0!==(e=this.map[e])&&e.setValue(t,n,r)},kr.prototype.setOptional=function(t,e,n){void 0!==(e=e[n])&&this.setValue(t,n,e)},kr.upload=function(t,e,n,r){for(var i=0,a=e.length;i!==a;++i){var o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}},kr.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var a=t[r];a.id in e&&n.push(a)}return n};var Vr=0;function Wr(t){switch(t){case R:return[\"Linear\",\"( value )\"];case 3001:return[\"sRGB\",\"( value )\"];case 3002:return[\"RGBE\",\"( value )\"];case 3004:return[\"RGBM\",\"( value, 7.0 )\"];case 3005:return[\"RGBM\",\"( value, 16.0 )\"];case 3006:return[\"RGBD\",\"( value, 256.0 )\"];case 3007:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];case 3003:return[\"LogLuv\",\"( value )\"];default:return console.warn(\"THREE.WebGLProgram: Unsupported encoding:\",t),[\"Linear\",\"( value )\"]}}function Yr(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&\"\"===i?\"\":\"THREE.WebGLShader: gl.getShaderInfoLog() \"+n+\"\\n\"+i+function(t){for(var e=t.split(\"\\n\"),n=0;n<e.length;n++)e[n]=n+1+\": \"+e[n];return e.join(\"\\n\")}(t.getShaderSource(e))}function qr(t,e){return\"vec4 \"+t+\"( vec4 value ) { return \"+(e=Wr(e))[0]+\"ToLinear\"+e[1]+\"; }\"}function Xr(t){return\"\"!==t}function Kr(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Zr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Jr=/^[ \\t]*#include +<([\\w\\d./]+)>/gm;function Qr(t){return t.replace(Jr,$r)}function $r(t,e){var n=Cn[e];if(void 0===n)throw new Error(\"Can not resolve #include <\"+e+\">\");return Qr(n)}var ti=/#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,ei=/#pragma unroll_loop_start[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}[\\s]+?#pragma unroll_loop_end/g;function ni(t){return t.replace(ei,ii).replace(ti,ri)}function ri(t,e,n,r){return console.warn(\"WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.\"),ii(0,e,n,r)}function ii(t,e,n,r){for(var i=\"\",a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\\[ i \\]/g,\"[ \"+a+\" ]\").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function ai(t){var e=\"precision \"+t.precision+\" float;\\nprecision \"+t.precision+\" int;\";return\"highp\"===t.precision?e+=\"\\n#define HIGH_PRECISION\":\"mediump\"===t.precision?e+=\"\\n#define MEDIUM_PRECISION\":\"lowp\"===t.precision&&(e+=\"\\n#define LOW_PRECISION\"),e}function oi(t,e,n,r){var i,a,o=t.getContext(),s=n.defines,c=n.vertexShader,h=n.fragmentShader,l=(g=\"SHADOWMAP_TYPE_BASIC\",1===(m=n).shadowMapType?g=\"SHADOWMAP_TYPE_PCF\":2===m.shadowMapType?g=\"SHADOWMAP_TYPE_PCF_SOFT\":3===m.shadowMapType&&(g=\"SHADOWMAP_TYPE_VSM\"),g),u=function(t){var e=\"ENVMAP_TYPE_CUBE\";if(t.envMap)switch(t.envMapMode){case 301:case 302:e=\"ENVMAP_TYPE_CUBE\";break;case d:case p:e=\"ENVMAP_TYPE_CUBE_UV\";break;case 303:case 304:e=\"ENVMAP_TYPE_EQUIREC\"}return e}(n),f=function(t){var e=\"ENVMAP_MODE_REFLECTION\";if(t.envMap)switch(t.envMapMode){case 302:case 304:case p:e=\"ENVMAP_MODE_REFRACTION\"}return e}(n),m=function(t){var e=\"ENVMAP_BLENDING_NONE\";if(t.envMap)switch(t.combine){case 0:e=\"ENVMAP_BLENDING_MULTIPLY\";break;case 1:e=\"ENVMAP_BLENDING_MIX\";break;case 2:e=\"ENVMAP_BLENDING_ADD\"}return e}(n),g=0<t.gammaFactor?t.gammaFactor:1,v=n.isWebGL2?\"\":[(v=n).extensionDerivatives||v.envMapCubeUV||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||\"physical\"===v.shaderID?\"#extension GL_OES_standard_derivatives : enable\":\"\",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?\"#extension GL_EXT_frag_depth : enable\":\"\",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?\"#extension GL_EXT_draw_buffers : require\":\"\",(v.extensionShaderTextureLOD||v.envMap)&&v.rendererExtensionShaderTextureLod?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(Xr).join(\"\\n\"),y=(s=function(t){var e,n=[];for(e in t){var r=t[e];!1!==r&&n.push(\"#define \"+e+\" \"+r)}return n.join(\"\\n\")}(s),o.createProgram());n.isRawShaderMaterial?(0<(i=[s].filter(Xr).join(\"\\n\")).length&&(i+=\"\\n\"),0<(a=[v,s].filter(Xr).join(\"\\n\")).length&&(a+=\"\\n\")):(i=[ai(n),\"#define SHADER_NAME \"+n.shaderName,s,n.instancing?\"#define USE_INSTANCING\":\"\",n.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+g,\"#define MAX_BONES \"+n.maxBones,n.useFog&&n.fog?\"#define USE_FOG\":\"\",n.useFog&&n.fogExp2?\"#define FOG_EXP2\":\"\",n.map?\"#define USE_MAP\":\"\",n.envMap?\"#define USE_ENVMAP\":\"\",n.envMap?\"#define \"+f:\"\",n.lightMap?\"#define USE_LIGHTMAP\":\"\",n.aoMap?\"#define USE_AOMAP\":\"\",n.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",n.bumpMap?\"#define USE_BUMPMAP\":\"\",n.normalMap?\"#define USE_NORMALMAP\":\"\",n.normalMap&&n.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",n.normalMap&&n.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",n.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",n.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",n.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",n.displacementMap&&n.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",n.specularMap?\"#define USE_SPECULARMAP\":\"\",n.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",n.metalnessMap?\"#define USE_METALNESSMAP\":\"\",n.alphaMap?\"#define USE_ALPHAMAP\":\"\",n.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",n.vertexTangents?\"#define USE_TANGENT\":\"\",n.vertexColors?\"#define USE_COLOR\":\"\",n.vertexUvs?\"#define USE_UV\":\"\",n.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",n.flatShading?\"#define FLAT_SHADED\":\"\",n.skinning?\"#define USE_SKINNING\":\"\",n.useVertexTexture?\"#define BONE_TEXTURE\":\"\",n.morphTargets?\"#define USE_MORPHTARGETS\":\"\",n.morphNormals&&!1===n.flatShading?\"#define USE_MORPHNORMALS\":\"\",n.doubleSided?\"#define DOUBLE_SIDED\":\"\",n.flipSided?\"#define FLIP_SIDED\":\"\",n.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",n.shadowMapEnabled?\"#define \"+l:\"\",n.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",n.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",\"#ifdef USE_INSTANCING\",\" attribute mat4 instanceMatrix;\",\"#endif\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_TANGENT\",\"\\tattribute vec4 tangent;\",\"#endif\",\"#ifdef USE_COLOR\",\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(Xr).join(\"\\n\"),a=[v,ai(n),\"#define SHADER_NAME \"+n.shaderName,s,n.alphaTest?\"#define ALPHATEST \"+n.alphaTest+(n.alphaTest%1?\"\":\".0\"):\"\",\"#define GAMMA_FACTOR \"+g,n.useFog&&n.fog?\"#define USE_FOG\":\"\",n.useFog&&n.fogExp2?\"#define FOG_EXP2\":\"\",n.map?\"#define USE_MAP\":\"\",n.matcap?\"#define USE_MATCAP\":\"\",n.envMap?\"#define USE_ENVMAP\":\"\",n.envMap?\"#define \"+u:\"\",n.envMap?\"#define \"+f:\"\",n.envMap?\"#define \"+m:\"\",n.lightMap?\"#define USE_LIGHTMAP\":\"\",n.aoMap?\"#define USE_AOMAP\":\"\",n.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",n.bumpMap?\"#define USE_BUMPMAP\":\"\",n.normalMap?\"#define USE_NORMALMAP\":\"\",n.normalMap&&n.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",n.normalMap&&n.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",n.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",n.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",n.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",n.specularMap?\"#define USE_SPECULARMAP\":\"\",n.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",n.metalnessMap?\"#define USE_METALNESSMAP\":\"\",n.alphaMap?\"#define USE_ALPHAMAP\":\"\",n.sheen?\"#define USE_SHEEN\":\"\",n.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",n.vertexTangents?\"#define USE_TANGENT\":\"\",n.vertexColors?\"#define USE_COLOR\":\"\",n.vertexUvs?\"#define USE_UV\":\"\",n.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",n.gradientMap?\"#define USE_GRADIENTMAP\":\"\",n.flatShading?\"#define FLAT_SHADED\":\"\",n.doubleSided?\"#define DOUBLE_SIDED\":\"\",n.flipSided?\"#define FLIP_SIDED\":\"\",n.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",n.shadowMapEnabled?\"#define \"+l:\"\",n.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",n.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",n.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",0!==n.toneMapping?\"#define TONE_MAPPING\":\"\",0!==n.toneMapping?Cn.tonemapping_pars_fragment:\"\",0!==n.toneMapping?function(t,e){var n;switch(e){case 1:n=\"Linear\";break;case 2:n=\"Reinhard\";break;case 3:n=\"OptimizedCineon\";break;case 4:n=\"ACESFilmic\";break;case 5:n=\"Custom\";break;default:console.warn(\"THREE.WebGLProgram: Unsupported toneMapping:\",e),n=\"Linear\"}return\"vec3 toneMapping( vec3 color ) { return \"+n+\"ToneMapping( color ); }\"}(0,n.toneMapping):\"\",n.dithering?\"#define DITHERING\":\"\",Cn.encodings_pars_fragment,n.map?qr(\"mapTexelToLinear\",n.mapEncoding):\"\",n.matcap?qr(\"matcapTexelToLinear\",n.matcapEncoding):\"\",n.envMap?qr(\"envMapTexelToLinear\",n.envMapEncoding):\"\",n.emissiveMap?qr(\"emissiveMapTexelToLinear\",n.emissiveMapEncoding):\"\",n.lightMap?qr(\"lightMapTexelToLinear\",n.lightMapEncoding):\"\",(M=\"linearToOutputTexel\",x=Wr(x=n.outputEncoding),\"vec4 \"+M+\"( vec4 value ) { return LinearTo\"+x[0]+x[1]+\"; }\"),n.depthPacking?\"#define DEPTH_PACKING \"+n.depthPacking:\"\",\"\\n\"].filter(Xr).join(\"\\n\")),c=Zr(c=Kr(c=Qr(c),n),n),h=Zr(h=Kr(h=Qr(h),n),n),c=ni(c),h=ni(h),n.isWebGL2&&!n.isRawShaderMaterial&&(i=[\"#version 300 es\\n\",\"#define attribute in\",\"#define varying out\",\"#define texture2D texture\"].join(\"\\n\")+\"\\n\"+i,a=[\"#version 300 es\\n\",\"#define varying in\",\"out highp vec4 pc_fragColor;\",\"#define gl_FragColor pc_fragColor\",\"#define gl_FragDepthEXT gl_FragDepth\",\"#define texture2D texture\",\"#define textureCube texture\",\"#define texture2DProj textureProj\",\"#define texture2DLodEXT textureLod\",\"#define texture2DProjLodEXT textureProjLod\",\"#define textureCubeLodEXT textureLod\",\"#define texture2DGradEXT textureGrad\",\"#define texture2DProjGradEXT textureProjGrad\",\"#define textureCubeGradEXT textureGrad\"].join(\"\\n\")+\"\\n\"+a);var M,x,b,_;u=a+h,f=jr(o,35633,i+c),m=jr(o,35632,u);return o.attachShader(y,f),o.attachShader(y,m),void 0!==n.index0AttributeName?o.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(y,0,\"position\"),o.linkProgram(y),t.debug.checkShaderErrors&&(l=o.getProgramInfoLog(y).trim(),M=o.getShaderInfoLog(f).trim(),x=o.getShaderInfoLog(m).trim(),!(c=h=!0)===o.getProgramParameter(y,35714)?(h=!1,u=Yr(o,f,\"vertex\"),t=Yr(o,m,\"fragment\"),console.error(\"THREE.WebGLProgram: shader error: \",o.getError(),\"35715\",o.getProgramParameter(y,35715),\"gl.getProgramInfoLog\",l,u,t)):\"\"!==l?console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",l):\"\"!==M&&\"\"!==x||(c=!1),c&&(this.diagnostics={runnable:h,programLog:l,vertexShader:{log:M,prefix:i},fragmentShader:{log:x,prefix:a}})),o.deleteShader(f),o.deleteShader(m),this.getUniforms=function(){return b=void 0===b?new kr(o,y):b},this.getAttributes=function(){return _=void 0===_?function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var a=t.getActiveAttrib(e,i).name;n[a]=t.getAttribLocation(e,a)}return n}(o,y):_},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=Vr++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=f,this.fragmentShader=m,this}function si(t,e,n,r){var i=[],a=n.isWebGL2,o=n.logarithmicDepthBuffer,s=n.floatVertexTextures,c=n.maxVertexUniforms,h=n.vertexTextures,l=n.precision,u={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"toon\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",MeshMatcapMaterial:\"matcap\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\",SpriteMaterial:\"sprite\"},f=[\"precision\",\"isWebGL2\",\"supportsVertexTextures\",\"outputEncoding\",\"instancing\",\"map\",\"mapEncoding\",\"matcap\",\"matcapEncoding\",\"envMap\",\"envMapMode\",\"envMapEncoding\",\"envMapCubeUV\",\"lightMap\",\"lightMapEncoding\",\"aoMap\",\"emissiveMap\",\"emissiveMapEncoding\",\"bumpMap\",\"normalMap\",\"objectSpaceNormalMap\",\"tangentSpaceNormalMap\",\"clearcoatMap\",\"clearcoatRoughnessMap\",\"clearcoatNormalMap\",\"displacementMap\",\"specularMap\",\"roughnessMap\",\"metalnessMap\",\"gradientMap\",\"alphaMap\",\"combine\",\"vertexColors\",\"vertexTangents\",\"vertexUvs\",\"uvsVertexOnly\",\"fog\",\"useFog\",\"fogExp2\",\"flatShading\",\"sizeAttenuation\",\"logarithmicDepthBuffer\",\"skinning\",\"maxBones\",\"useVertexTexture\",\"morphTargets\",\"morphNormals\",\"maxMorphTargets\",\"maxMorphNormals\",\"premultipliedAlpha\",\"numDirLights\",\"numPointLights\",\"numSpotLights\",\"numHemiLights\",\"numRectAreaLights\",\"numDirLightShadows\",\"numPointLightShadows\",\"numSpotLightShadows\",\"shadowMapEnabled\",\"shadowMapType\",\"toneMapping\",\"physicallyCorrectLights\",\"alphaTest\",\"doubleSided\",\"flipSided\",\"numClippingPlanes\",\"numClipIntersection\",\"depthPacking\",\"dithering\",\"sheen\",\"transmissionMap\"];function m(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),e=t.texture.encoding):e=R,e}return{getParameters:function(r,i,f,g,v,y,M){var x,b,_=g.fog,S=r.isMeshStandardMaterial?g.environment:null,w=(g=r.envMap||S,S=u[r.type],M.isSkinnedMesh?(w=(b=M).skeleton.bones,s?1024:(b=Math.floor((c-20)/4),(b=Math.min(b,w.length))<w.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+w.length+\" bones. This GPU supports \"+b+\".\"),0):b)):0);null!==r.precision&&(l=n.getMaxPrecision(r.precision))!==r.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",r.precision,\"not supported, using\",l,\"instead.\"),b=S?(x=(E=On[S]).vertexShader,E.fragmentShader):(x=r.vertexShader,r.fragmentShader);var E=t.getRenderTarget();return{isWebGL2:a,shaderID:S,shaderName:r.type,vertexShader:x,fragmentShader:b,defines:r.defines,isRawShaderMaterial:r.isRawShaderMaterial,isShaderMaterial:r.isShaderMaterial,precision:l,instancing:!0===M.isInstancedMesh,supportsVertexTextures:h,outputEncoding:null!==E?m(E.texture):t.outputEncoding,map:!!r.map,mapEncoding:m(r.map),matcap:!!r.matcap,matcapEncoding:m(r.matcap),envMap:!!g,envMapMode:g&&g.mapping,envMapEncoding:m(g),envMapCubeUV:!!g&&(g.mapping===d||g.mapping===p),lightMap:!!r.lightMap,lightMapEncoding:m(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:m(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!_,useFog:r.fog,fogExp2:_&&_.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:o,skinning:r.skinning&&0<w,maxBones:w,useVertexTexture:s,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:v,numClipIntersection:y,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&0<f.length,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||null!==e.get(\"EXT_frag_depth\"),rendererExtensionDrawBuffers:a||null!==e.get(\"WEBGL_draw_buffers\"),rendererExtensionShaderTextureLod:a||null!==e.get(\"EXT_shader_texture_lod\"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);if(void 0===e.isRawShaderMaterial){for(var i=0;i<f.length;i++)n.push(e[f[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){var e=u[t.type];return e?(e=On[e],gn.clone(e.uniforms)):t.uniforms},acquireProgram:function(e,n){for(var a,o=0,s=i.length;o<s;o++){var c=i[o];if(c.cacheKey===n){++(a=c).usedTimes;break}}return void 0===a&&(a=new oi(t,n,e,r),i.push(a)),a},releaseProgram:function(t){var e;0==--t.usedTimes&&(e=i.indexOf(t),i[e]=i[i.length-1],i.pop(),t.destroy())},programs:i}}function ci(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&t.set(e,n={}),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function hi(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function li(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ui(t){var e=[],n=0,r=[],i=[],a={id:-1};function o(r,i,o,s,c,h){var l=e[n],u=t.get(o);return void 0===l?(l={id:r.id,object:r,geometry:i,material:o,program:u.program||a,groupOrder:s,renderOrder:r.renderOrder,z:c,group:h},e[n]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=o,l.program=u.program||a,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=c,l.group=h),n++,l}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(t,e,n,a,s,c){c=o(t,e,n,a,s,c),(!0===n.transparent?i:r).push(c)},unshift:function(t,e,n,a,s,c){c=o(t,e,n,a,s,c),(!0===n.transparent?i:r).unshift(c)},finish:function(){for(var t=n,r=e.length;t<r;t++){var i=e[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){1<r.length&&r.sort(t||hi),1<i.length&&i.sort(e||li)}}}function di(t){var e=new WeakMap;function n(t){(t=t.target).removeEventListener(\"dispose\",n),e.delete(t)}return{get:function(r,i){var a,o=e.get(r);return void 0===o?(a=new ui(t),e.set(r,new WeakMap),e.get(r).set(i,a),r.addEventListener(\"dispose\",n)):void 0===(a=o.get(i))&&(a=new ui(t),o.set(i,a)),a},dispose:function(){e=new WeakMap}}}function pi(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case\"DirectionalLight\":n={direction:new Y,color:new le};break;case\"SpotLight\":n={position:new Y,direction:new Y,color:new le,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case\"PointLight\":n={position:new Y,color:new le,distance:0,decay:0};break;case\"HemisphereLight\":n={direction:new Y,skyColor:new le,groundColor:new le};break;case\"RectAreaLight\":n={color:new le,position:new Y,halfWidth:new Y,halfHeight:new Y}}return t[e.id]=n}}}var fi=0;function mi(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function gi(){for(var t,e=new pi,n=(t={},{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case\"DirectionalLight\":case\"SpotLight\":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new D};break;case\"PointLight\":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new D,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n}}),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)r.probe.push(new Y);var a=new Y,o=new et,s=new et;return{setup:function(t,i,c){for(var h=0,l=0,u=0,d=0;d<9;d++)r.probe[d].set(0,0,0);var p=0,f=0,m=0,g=0,v=0,y=0,M=0,x=0,b=c.matrixWorldInverse;t.sort(mi);for(var _=0,S=t.length;_<S;_++){var w,E,R,T,A,L=t[_],P=L.color,C=L.intensity,O=L.distance,I=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)h+=P.r*C,l+=P.g*C,u+=P.b*C;else if(L.isLightProbe)for(var N=0;N<9;N++)r.probe[N].addScaledVector(L.sh.coefficients[N],C);else L.isDirectionalLight?((R=e.get(L)).color.copy(L.color).multiplyScalar(L.intensity),R.direction.setFromMatrixPosition(L.matrixWorld),a.setFromMatrixPosition(L.target.matrixWorld),R.direction.sub(a),R.direction.transformDirection(b),L.castShadow&&(w=L.shadow,(E=n.get(L)).shadowBias=w.bias,E.shadowNormalBias=w.normalBias,E.shadowRadius=w.radius,E.shadowMapSize=w.mapSize,r.directionalShadow[p]=E,r.directionalShadowMap[p]=I,r.directionalShadowMatrix[p]=L.shadow.matrix,y++),r.directional[p]=R,p++):L.isSpotLight?((E=e.get(L)).position.setFromMatrixPosition(L.matrixWorld),E.position.applyMatrix4(b),E.color.copy(P).multiplyScalar(C),E.distance=O,E.direction.setFromMatrixPosition(L.matrixWorld),a.setFromMatrixPosition(L.target.matrixWorld),E.direction.sub(a),E.direction.transformDirection(b),E.coneCos=Math.cos(L.angle),E.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),E.decay=L.decay,L.castShadow&&(R=L.shadow,(O=n.get(L)).shadowBias=R.bias,O.shadowNormalBias=R.normalBias,O.shadowRadius=R.radius,O.shadowMapSize=R.mapSize,r.spotShadow[m]=O,r.spotShadowMap[m]=I,r.spotShadowMatrix[m]=L.shadow.matrix,x++),r.spot[m]=E,m++):L.isRectAreaLight?((T=e.get(L)).color.copy(P).multiplyScalar(C),T.position.setFromMatrixPosition(L.matrixWorld),T.position.applyMatrix4(b),s.identity(),o.copy(L.matrixWorld),o.premultiply(b),s.extractRotation(o),T.halfWidth.set(.5*L.width,0,0),T.halfHeight.set(0,.5*L.height,0),T.halfWidth.applyMatrix4(s),T.halfHeight.applyMatrix4(s),r.rectArea[g]=T,g++):L.isPointLight?((A=e.get(L)).position.setFromMatrixPosition(L.matrixWorld),A.position.applyMatrix4(b),A.color.copy(L.color).multiplyScalar(L.intensity),A.distance=L.distance,A.decay=L.decay,L.castShadow&&(P=L.shadow,(T=n.get(L)).shadowBias=P.bias,T.shadowNormalBias=P.normalBias,T.shadowRadius=P.radius,T.shadowMapSize=P.mapSize,T.shadowCameraNear=P.camera.near,T.shadowCameraFar=P.camera.far,r.pointShadow[f]=T,r.pointShadowMap[f]=I,r.pointShadowMatrix[f]=L.shadow.matrix,M++),r.point[f]=A,f++):L.isHemisphereLight&&((A=e.get(L)).direction.setFromMatrixPosition(L.matrixWorld),A.direction.transformDirection(b),A.direction.normalize(),A.skyColor.copy(L.color).multiplyScalar(C),A.groundColor.copy(L.groundColor).multiplyScalar(C),r.hemi[v]=A,v++)}r.ambient[0]=h,r.ambient[1]=l,r.ambient[2]=u,(c=r.hash).directionalLength===p&&c.pointLength===f&&c.spotLength===m&&c.rectAreaLength===g&&c.hemiLength===v&&c.numDirectionalShadows===y&&c.numPointShadows===M&&c.numSpotShadows===x||(r.directional.length=p,r.spot.length=m,r.rectArea.length=g,r.point.length=f,r.hemi.length=v,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=M,r.spotShadowMatrix.length=x,c.directionalLength=p,c.pointLength=f,c.spotLength=m,c.rectAreaLength=g,c.hemiLength=v,c.numDirectionalShadows=y,c.numPointShadows=M,c.numSpotShadows=x,r.version=fi++)},state:r}}function vi(){var t=new gi,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(r){t.setup(e,n,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function yi(){var t=new WeakMap;function e(n){(n=n.target).removeEventListener(\"dispose\",e),t.delete(n)}return{get:function(n,r){var i;return!1===t.has(n)?(i=new vi,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener(\"dispose\",e)):!1===t.get(n).has(r)?(i=new vi,t.get(n).set(r,i)):i=t.get(n).get(r),i},dispose:function(){t=new WeakMap}}}function Mi(t){ge.call(this),this.type=\"MeshDepthMaterial\",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function xi(t){ge.call(this),this.type=\"MeshDistanceMaterial\",this.referencePosition=new Y,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}((Mi.prototype=Object.create(ge.prototype)).constructor=Mi).prototype.isMeshDepthMaterial=!0,Mi.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},((xi.prototype=Object.create(ge.prototype)).constructor=xi).prototype.isMeshDistanceMaterial=!0,xi.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};function bi(t,e,n){var r=new En,i=new D,a=new D,o=new H,s=[],c=[],h={},l={0:1,1:0,2:2},u=new vn({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new D},radius:{value:4}},vertexShader:\"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\",fragmentShader:\"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n  float mean = 0.0;\\n  float squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n    #ifdef HORIZONAL_PASS\\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n      mean += distribution.x;\\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n    #else\\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\\n      mean += depth;\\n      squared_mean += depth * depth;\\n    #endif\\n  }\\n  mean = mean * HALF_SAMPLE_RATE;\\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\\n  float std_dev = sqrt( squared_mean - mean * mean );\\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\"}),d=u.clone();d.defines.HORIZONAL_PASS=1;var p=new Ue;p.setAttribute(\"position\",new xe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var f=new rn(p,u),m=this;function y(t,e,n){var r=t<<0|e<<1|n<<2;return void 0===(n=s[r])&&(n=new Mi({depthPacking:3201,morphTargets:t,skinning:e}),s[r]=n),n}function M(t,e,n){var r=t<<0|e<<1|n<<2;return void 0===(n=c[r])&&(n=new xi({morphTargets:t,skinning:e}),c[r]=n),n}function x(e,n,r,i,a,o,s){var c,u,d=null,p=y,f=e.customDepthMaterial;return!0===i.isPointLight&&(p=M,f=e.customDistanceMaterial),d=void 0===f?(!(c=!1)===r.morphTargets&&(c=n.morphAttributes&&n.morphAttributes.position&&0<n.morphAttributes.position.length),!(u=!1)===e.isSkinnedMesh&&(!0===r.skinning?u=!0:console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\",e)),p(c,u,!0===e.isInstancedMesh)):f,t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length&&(u=d.uuid,e=r.uuid,void 0===(f=h[u])&&(h[u]=f={}),void 0===(u=f[e])&&(u=d.clone(),f[e]=u),d=u),d.visible=r.visible,d.wireframe=r.wireframe,d.side=3===s?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:l[r.side],d.clipShadows=r.clipShadows,d.clippingPlanes=r.clippingPlanes,d.clipIntersection=r.clipIntersection,d.wireframeLinewidth=r.wireframeLinewidth,d.linewidth=r.linewidth,!0===i.isPointLight&&!0===d.isMeshDistanceMaterial&&(d.referencePosition.setFromMatrixPosition(i.matrixWorld),d.nearDistance=a,d.farDistance=o),d}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(s,c,h){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==s.length){var l=t.getRenderTarget(),p=t.getActiveCubeFace(),y=t.getActiveMipmapLevel(),M=t.state;M.setBlending(0),M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);for(var _,S=0,w=s.length;S<w;S++){var E=s[S],R=E.shadow;if(!1!==R.autoUpdate||!1!==R.needsUpdate)if(void 0!==R){i.copy(R.mapSize);var T,A=R.getFrameExtents();i.multiply(A),a.copy(R.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(a.x=Math.floor(n/A.x),i.x=a.x*A.x,R.mapSize.x=a.x),i.y>n&&(a.y=Math.floor(n/A.y),i.y=a.y*A.y,R.mapSize.y=a.y)),null!==R.map||R.isPointLightShadow||3!==this.type||(R.map=new G(i.x,i.y,T={minFilter:v,magFilter:v,format:b,stencilBuffer:!1}),R.map.texture.name=E.name+\".shadowMap\",R.mapPass=new G(i.x,i.y,T),R.camera.updateProjectionMatrix()),null===R.map&&(R.map=new G(i.x,i.y,{minFilter:g,magFilter:g,format:b,stencilBuffer:!1}),R.map.texture.name=E.name+\".shadowMap\",R.camera.updateProjectionMatrix()),t.setRenderTarget(R.map),t.clear();for(var L=R.getViewportCount(),P=0;P<L;P++){var C=R.getViewport(P);o.set(a.x*C.x,a.y*C.y,a.x*C.z,a.y*C.w),M.viewport(o),R.updateMatrices(E,P),r=R.getFrustum(),function n(i,a,o,s,c){if(!1!==i.visible){var h=i.layers.test(a.layers);if(h&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&3===c)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);var l=e.update(i),u=i.material;if(Array.isArray(u))for(var d=l.groups,p=0,f=d.length;p<f;p++){var m=d[p],g=u[m.materialIndex];g&&g.visible&&(g=x(i,l,g,s,o.near,o.far,c),t.renderBufferDirect(o,null,l,g,i,m))}else u.visible&&(h=x(i,l,u,s,o.near,o.far,c),t.renderBufferDirect(o,null,l,h,i,null))}for(var v=i.children,y=0,M=v.length;y<M;y++)n(v[y],a,o,s,c)}}(c,h,R.camera,E,this.type)}R.isPointLightShadow||3!==this.type||(_=R,A=h,T=void 0,T=e.update(f),u.uniforms.shadow_pass.value=_.map.texture,u.uniforms.resolution.value=_.mapSize,u.uniforms.radius.value=_.radius,t.setRenderTarget(_.mapPass),t.clear(),t.renderBufferDirect(A,null,T,u,f,null),d.uniforms.shadow_pass.value=_.mapPass.texture,d.uniforms.resolution.value=_.mapSize,d.uniforms.radius.value=_.radius,t.setRenderTarget(_.map),t.clear(),t.renderBufferDirect(A,null,T,d,f,null)),R.needsUpdate=!1}else console.warn(\"THREE.WebGLShadowMap:\",E,\"has no shadow.\")}m.needsUpdate=!1,t.setRenderTarget(l,p,y)}}}function _i(t,e,n){var r=n.isWebGL2,i=new function(){var e=!1,n=new H,r=null,i=new H(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,a,o,s){!0===s&&(e*=o,r*=o,a*=o),n.set(e,r,a,o),!1===i.equals(n)&&(t.clearColor(e,r,a,o),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){(t?I:N)(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,i=r=n=null}}},s=new function(){var e=!1,n=null,r=null,i=null,a=null,o=null,s=null,c=null,h=null;return{setTest:function(t){e||(t?I:N)(2960)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,o){r===e&&i===n&&a===o||(t.stencilFunc(e,n,o),r=e,i=n,a=o)},setOp:function(e,n,r){o===e&&s===n&&c===r||(t.stencilOp(e,n,r),o=e,s=n,c=r)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,h=c=s=o=a=i=r=n=null}}},c={},h=null,l=null,u=null,d=null,p=null,f=null,m=null,g=null,v=null,y=!1,M=null,x=null,b=null,_=null,S=null,w=t.getParameter(35661),E=!1,R=0;-1!==(n=t.getParameter(7938)).indexOf(\"WebGL\")?(R=parseFloat(/^WebGL\\ ([0-9])/.exec(n)[1]),E=1<=R):-1!==n.indexOf(\"OpenGL ES\")&&(R=parseFloat(/^OpenGL\\ ES\\ ([0-9])/.exec(n)[1]),E=2<=R);var T=null,A={},L=new H,P=new H;function C(e,n,r){var i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<r;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var O={};function I(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function N(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}O[3553]=C(3553,3553,1),O[34067]=C(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),s.setClear(0),I(2929),a.setFunc(3),U(!1),G(1),I(2884),B(0);var D,F=(o(R={},100,32774),o(R,101,32778),o(R,102,32779),R);r?(F[103]=32775,F[104]=32776):null!==(D=e.get(\"EXT_blend_minmax\"))&&(F[103]=D.MIN_EXT,F[104]=D.MAX_EXT);var z=(o(D={},200,0),o(D,201,1),o(D,202,768),o(D,204,770),o(D,210,776),o(D,208,774),o(D,206,772),o(D,203,769),o(D,205,771),o(D,209,775),o(D,207,773),D);function B(e,n,r,i,a,o,s,c){if(0!==e){if(l||(I(3042),l=!0),5===e)a=a||n,o=o||r,s=s||i,n===d&&a===m||(t.blendEquationSeparate(F[n],F[a]),d=n,m=a),r===p&&i===f&&o===g&&s===v||(t.blendFuncSeparate(z[r],z[i],z[o],z[s]),p=r,f=i,g=o,v=s),u=e,y=null;else if(e!==u||c!==y){if(100===d&&100===m||(t.blendEquation(32774),m=d=100),c)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",e)}v=g=f=p=null,u=e,y=c}}else l&&(N(3042),l=!1)}function U(e){M!==e&&(e?t.frontFace(2304):t.frontFace(2305),M=e)}function G(e){0!==e?(I(2884),e!==x&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):N(2884),x=e}function k(e,n,r){e?(I(32823),_===n&&S===r||(t.polygonOffset(n,r),_=n,S=r)):N(32823)}function j(e){T!==(e=void 0===e?33984+w-1:e)&&(t.activeTexture(e),T=e)}return{buffers:{color:i,depth:a,stencil:s},enable:I,disable:N,useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:B,setMaterial:function(t,e){(2===t.side?N:I)(2884);var n=1===t.side;U(n=e?!n:n),1===t.blending&&!1===t.transparent?B(0):B(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite),n=t.stencilWrite,s.setTest(n),n&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),k(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:U,setCullFace:G,setLineWidth:function(e){e!==b&&(E&&t.lineWidth(e),b=e)},setPolygonOffset:k,setScissorTest:function(t){(t?I:N)(3089)},activeTexture:j,bindTexture:function(e,n){null===T&&j();var r=A[T];void 0===r&&(A[T]=r={type:void 0,texture:void 0}),r.type===e&&r.texture===n||(t.bindTexture(e,n||O[e]),r.type=e,r.texture=n)},unbindTexture:function(){var e=A[T];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error(\"THREE.WebGLState:\",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error(\"THREE.WebGLState:\",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error(\"THREE.WebGLState:\",t)}},scissor:function(e){!1===L.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),L.copy(e))},viewport:function(e){!1===P.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),P.copy(e))},reset:function(){c={},A={},x=M=u=h=T=null,i.reset(),a.reset(),s.reset()}}}function Si(t,e,n,r,i,a,s){var c,h,l=i.isWebGL2,u=i.maxTextures,d=i.maxCubemapSize,p=i.maxTextureSize,w=i.maxSamples,E=new WeakMap,R=!1;try{R=\"undefined\"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext(\"2d\")}catch(c){}function T(t,e){return R?new OffscreenCanvas(t,e):document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")}function A(t,e,n,r){var i=1;return(i=t.width>r||t.height>r?r/Math.max(t.width,t.height):i)<1||!0===e?\"undefined\"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap?(e=(r=e?N.floorPowerOfTwo:Math.floor)(i*t.width),i=r(i*t.height),void 0===h&&(h=T(e,i)),(n=n?T(e,i):h).width=e,n.height=i,n.getContext(\"2d\").drawImage(t,0,0,e,i),console.warn(\"THREE.WebGLRenderer: Texture has been resized from (\"+t.width+\"x\"+t.height+\") to (\"+e+\"x\"+i+\").\"),n):(\"data\"in t&&console.warn(\"THREE.WebGLRenderer: Image in DataTexture is too big (\"+t.width+\"x\"+t.height+\").\"),t):t}function L(t){return N.isPowerOfTwo(t.width)&&N.isPowerOfTwo(t.height)}function P(t,e){return t.generateMipmaps&&e&&t.minFilter!==g&&t.minFilter!==v}function C(e,n,i,a){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function O(n,r,i){if(!1===l)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn(\"THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '\"+n+\"'\")}return n=r,6403===r&&(5126===i&&(n=33326),5131===i&&(n=33325),5121===i&&(n=33321)),6407===r&&(5126===i&&(n=34837),5131===i&&(n=34843),5121===i&&(n=32849)),6408===r&&(5126===i&&(n=34836),5131===i&&(n=34842),5121===i&&(n=32856)),33325!==n&&33326!==n&&34842!==n&&34836!==n||e.get(\"EXT_color_buffer_float\"),n}function I(t){return t===g||1004===t||1005===t?9728:9729}function D(e){var n,i=e.target;i.removeEventListener(\"dispose\",D),n=i,void 0!==(e=r.get(n)).__webglInit&&(t.deleteTexture(e.__webglTexture),r.remove(n)),i.isVideoTexture&&E.delete(i),s.memory.textures--}function F(e){(e=e.target).removeEventListener(\"dispose\",F),function(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var a=0;a<6;a++)t.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[a]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(e.texture),r.remove(e)}}(e),s.memory.textures--}var z=0;function B(t,e){var i,a=r.get(t);if(t.isVideoTexture&&(o=t,i=s.render.frame,E.get(o)!==i&&(E.set(o,i),o.update())),0<t.version&&a.__version!==t.version){var o=t.image;if(void 0===o)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\");else{if(!1!==o.complete)return void W(a,t,e);console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\")}}n.activeTexture(33984+e),n.bindTexture(3553,a.__webglTexture)}function U(e,i){if(6===e.image.length){var o=r.get(e);if(0<e.version&&o.__version!==e.version){V(o,e),n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture),t.pixelStorei(37440,e.flipY);for(var s=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),c=e.image[0]&&e.image[0].isDataTexture,h=[],u=0;u<6;u++)h[u]=s||c?c?e.image[u].image:e.image[u]:A(e.image[u],!1,!0,d);var p=h[0],f=L(p)||l,m=a.convert(e.format),g=a.convert(e.type),v=O(e.internalFormat,m,g);if(j(34067,e,f),s){for(var y=0;y<6;y++)for(var M=h[y].mipmaps,_=0;_<M.length;_++){var S=M[_];e.format!==b&&e.format!==x?null!==m?n.compressedTexImage2D(34069+y,_,v,S.width,S.height,0,S.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):n.texImage2D(34069+y,_,v,S.width,S.height,0,m,g,S.data)}o.__maxMipLevel=M.length-1}else{M=e.mipmaps;for(var w=0;w<6;w++)if(c){n.texImage2D(34069+w,0,v,h[w].width,h[w].height,0,m,g,h[w].data);for(var E=0;E<M.length;E++){var R=M[E].image[w].image;n.texImage2D(34069+w,E+1,v,R.width,R.height,0,m,g,R.data)}}else{n.texImage2D(34069+w,0,v,m,g,h[w]);for(var T=0;T<M.length;T++){var I=M[T];n.texImage2D(34069+w,T+1,v,m,g,I.image[w])}}o.__maxMipLevel=M.length}P(e,f)&&C(34067,e,p.width,p.height),o.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture)}}function H(t,e){n.activeTexture(33984+e),n.bindTexture(34067,r.get(t).__webglTexture)}var G=(o(c={},f,10497),o(c,m,33071),o(c,1002,33648),c),k=(o(c={},g,9728),o(c,1004,9984),o(c,1005,9986),o(c,v,9729),o(c,1007,9985),o(c,1008,9987),c);function j(n,a,o){o?(t.texParameteri(n,10242,G[a.wrapS]),t.texParameteri(n,10243,G[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,G[a.wrapR]),t.texParameteri(n,10240,k[a.magFilter]),t.texParameteri(n,10241,k[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS===m&&a.wrapT===m||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\"),t.texParameteri(n,10240,I(a.magFilter)),t.texParameteri(n,10241,I(a.minFilter)),a.minFilter!==g&&a.minFilter!==v&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\")),(o=e.get(\"EXT_texture_filter_anisotropic\"))&&(a.type===y&&null===e.get(\"OES_texture_float_linear\")||1016===a.type&&null===(l||e.get(\"OES_texture_half_float_linear\"))||(1<a.anisotropy||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy))}function V(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener(\"dispose\",D),e.__webglTexture=t.createTexture(),s.memory.textures++)}function W(e,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),V(e,r),n.activeTexture(33984+i),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);c=r,i=!l&&(c.wrapS!==m||c.wrapT!==m||c.minFilter!==g&&c.minFilter!==v)&&!1===L(r.image);var s,c=A(r.image,i,!1,p),h=(i=L(c)||l,a.convert(r.format)),u=a.convert(r.type),d=O(r.internalFormat,h,u);j(o,r,i);var f=r.mipmaps;if(r.isDepthTexture)d=6402,l?d=r.type===y?36012:1014===r.type?33190:r.type===M?35056:33189:r.type===y&&console.error(\"WebGLRenderer: Floating point depth texture requires WebGL2.\"),r.format===_&&6402===d&&1012!==r.type&&1014!==r.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),r.type=1012,u=a.convert(r.type)),r.format===S&&6402===d&&(d=34041,r.type!==M&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),r.type=M,u=a.convert(r.type))),n.texImage2D(3553,0,d,c.width,c.height,0,h,u,null);else if(r.isDataTexture)if(0<f.length&&i){for(var w=0,E=f.length;w<E;w++)s=f[w],n.texImage2D(3553,w,d,s.width,s.height,0,h,u,s.data);r.generateMipmaps=!1,e.__maxMipLevel=f.length-1}else n.texImage2D(3553,0,d,c.width,c.height,0,h,u,c.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(var R=0,T=f.length;R<T;R++)s=f[R],r.format!==b&&r.format!==x?null!==h?n.compressedTexImage2D(3553,R,d,s.width,s.height,0,s.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):n.texImage2D(3553,R,d,s.width,s.height,0,h,u,s.data);e.__maxMipLevel=f.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,d,c.width,c.height,c.depth,0,h,u,c.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,d,c.width,c.height,c.depth,0,h,u,c.data),e.__maxMipLevel=0;else if(0<f.length&&i){for(var I=0,N=f.length;I<N;I++)s=f[I],n.texImage2D(3553,I,d,h,u,s);r.generateMipmaps=!1,e.__maxMipLevel=f.length-1}else n.texImage2D(3553,0,d,h,u,c),e.__maxMipLevel=0;P(r,i)&&C(o,r,c.width,c.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function Y(e,i,o,s){var c=a.convert(i.texture.format),h=a.convert(i.texture.type),l=O(i.texture.internalFormat,c,h);n.texImage2D(s,0,l,i.width,i.height,0,c,h,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function q(e,n,r){var i,o,s;t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer?(i=33189,r?((o=n.depthTexture)&&o.isDepthTexture&&(o.type===y?i=36012:1014===o.type&&(i=33190)),o=X(n),t.renderbufferStorageMultisample(36161,o,i,n.width,n.height)):t.renderbufferStorage(36161,i,n.width,n.height),t.framebufferRenderbuffer(36160,36096,36161,e)):n.depthBuffer&&n.stencilBuffer?(r?(s=X(n),t.renderbufferStorageMultisample(36161,s,35056,n.width,n.height)):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)):(s=a.convert(n.texture.format),e=a.convert(n.texture.type),e=O(n.texture.internalFormat,s,e),r?(r=X(n),t.renderbufferStorageMultisample(36161,r,e,n.width,n.height)):t.renderbufferStorage(36161,e,n.width,n.height)),t.bindRenderbuffer(36161,null)}function X(t){return l&&t.isWebGLMultisampleRenderTarget?Math.min(w,t.samples):0}var K=!1,Z=!1;this.allocateTextureUnit=function(){var t=z;return u<=t&&console.warn(\"THREE.WebGLTextures: Trying to use \"+t+\" texture units while this GPU supports only \"+u),z+=1,t},this.resetTextureUnits=function(){z=0},this.setTexture2D=B,this.setTexture2DArray=function(t,e){var i=r.get(t);0<t.version&&i.__version!==t.version?W(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=r.get(t);0<t.version&&i.__version!==t.version?W(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=U,this.setTextureCubeDynamic=H,this.setupRenderTarget=function(e){var i=r.get(e),o=r.get(e.texture);e.addEventListener(\"dispose\",F),o.__webglTexture=t.createTexture(),s.memory.textures++;var c,h=!0===e.isWebGLCubeRenderTarget,u=!0===e.isWebGLMultisampleRenderTarget,d=L(e)||l;if(!l||e.texture.format!==x||e.texture.type!==y&&1016!==e.texture.type||(e.texture.format=b,console.warn(\"THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.\")),h){i.__webglFramebuffer=[];for(var p=0;p<6;p++)i.__webglFramebuffer[p]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer(),u&&(l?(i.__webglMultisampledFramebuffer=t.createFramebuffer(),i.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,i.__webglColorRenderbuffer),c=a.convert(e.texture.format),u=a.convert(e.texture.type),c=O(e.texture.internalFormat,c,u),u=X(e),t.renderbufferStorageMultisample(36161,u,c,e.width,e.height),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(i.__webglDepthRenderbuffer=t.createRenderbuffer(),q(i.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)):console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\"));if(h){n.bindTexture(34067,o.__webglTexture),j(34067,e.texture,d);for(var f=0;f<6;f++)Y(i.__webglFramebuffer[f],e,36064,34069+f);P(e.texture,d)&&C(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,o.__webglTexture),j(3553,e.texture,d),Y(i.__webglFramebuffer,e,36064,3553),P(e.texture,d)&&C(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&function(e){var n=r.get(e),i=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(i)throw new Error(\"target.depthTexture not supported in Cube render targets\");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error(\"Depth Texture with cube render targets is not supported\");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");if(r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),B(n.depthTexture,0),e=r.get(n.depthTexture).__webglTexture,n.depthTexture.format===_)t.framebufferTexture2D(36160,36096,3553,e,0);else{if(n.depthTexture.format!==S)throw new Error(\"Unknown depthTexture format\");t.framebufferTexture2D(36160,33306,3553,e,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=t.createRenderbuffer(),q(n.__webglDepthbuffer[a],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),q(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){var e,i,a=t.texture;P(a,L(t)||l)&&(e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture,n.bindTexture(e,i),C(e,a,t.width,t.height),n.bindTexture(e,null))},this.updateMultisampleRenderTarget=function(e){var n,i,a,o;e.isWebGLMultisampleRenderTarget&&(l?(n=r.get(e),t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer),i=e.width,a=e.height,o=16384,e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)):console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\"))},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===K&&(console.warn(\"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\"),K=!0),t=t.texture),B(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===Z&&(console.warn(\"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),Z=!0),t=t.texture),(t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?U:H)(t,e)}}function wi(t,e,n){var r=n.isWebGL2;return{convert:function(t){var n;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(t===y)return 5126;if(1016===t)return r?5131:null!==(n=e.get(\"OES_texture_half_float\"))?n.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(t===x)return 6407;if(t===b)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(t===_)return 6402;if(t===S)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(null===(n=e.get(\"WEBGL_compressed_texture_s3tc\")))return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(n=e.get(\"WEBGL_compressed_texture_pvrtc\")))return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get(\"WEBGL_compressed_texture_etc1\"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&null!==(n=e.get(\"WEBGL_compressed_texture_etc\"))){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get(\"WEBGL_compressed_texture_astc\"))?t:null:36492===t?null!==(n=e.get(\"EXT_texture_compression_bptc\"))?t:null:t===M?r?34042:null!==(n=e.get(\"WEBGL_depth_texture\"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Ei(t){Mn.call(this),this.cameras=t||[]}function Ri(){Mt.call(this),this.type=\"Group\"}function Ti(){this._targetRay=null,this._grip=null,this._hand=null}function Ai(t,e){var n=this,r=null,i=1,a=null,o=\"local-floor\",s=null,c=[],h=new Map,l=new Mn;l.layers.enable(1),l.viewport=new H;var u=new Mn;u.layers.enable(2),u.viewport=new H;var d=[l,u],p=new Ei;p.layers.enable(1),p.layers.enable(2);var f=null,m=null;function g(t){var e=h.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function v(){h.forEach((function(t,e){t.disconnect(e)})),h.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),w.stop(),n.isPresenting=!1,n.dispatchEvent({type:\"sessionend\"})}function y(t){a=t,w.setContext(r),w.start(),n.isPresenting=!0,n.dispatchEvent({type:\"sessionstart\"})}function M(t){for(var e=r.inputSources,n=0;n<c.length;n++)h.set(e[n],c[n]);for(var i=0;i<t.removed.length;i++){var a=t.removed[i],o=h.get(a);o&&(o.dispatchEvent({type:\"disconnected\",data:a}),h.delete(a))}for(var s=0;s<t.added.length;s++){var l=t.added[s],u=h.get(l);u&&u.dispatchEvent({type:\"connected\",data:l})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){var e=c[t];return void 0===e&&(e=new Ti,c[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=c[t];return void 0===e&&(e=new Ti,c[t]=e),e.getGripSpace()},this.getHand=function(t){var e=c[t];return void 0===e&&(e=new Ti,c[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn(\"THREE.WebXRManager: Cannot change framebuffer scale while presenting.\")},this.setReferenceSpaceType=function(t){o=t,!0===n.isPresenting&&console.warn(\"THREE.WebXRManager: Cannot change reference space type while presenting.\")},this.getReferenceSpace=function(){return a},this.getSession=function(){return r},this.setSession=function(t){null!==(r=t)&&(r.addEventListener(\"select\",g),r.addEventListener(\"selectstart\",g),r.addEventListener(\"selectend\",g),r.addEventListener(\"squeeze\",g),r.addEventListener(\"squeezestart\",g),r.addEventListener(\"squeezeend\",g),r.addEventListener(\"end\",v),!0!==(t=e.getContextAttributes()).xrCompatible&&e.makeXRCompatible(),t={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:i},t=new XRWebGLLayer(r,e,t),r.updateRenderState({baseLayer:t}),r.requestReferenceSpace(o).then(y),r.addEventListener(\"inputsourceschange\",M))};var x=new Y,b=new Y;function _(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){p.near=u.near=l.near=t.near,p.far=u.far=l.far=t.far,f===p.near&&m===p.far||(r.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);var e=t.parent,n=p.cameras;_(p,e);for(var i=0;i<n.length;i++)_(n[i],e);t.matrixWorld.copy(p.matrixWorld);for(var a=t.children,o=0,s=a.length;o<s;o++)a[o].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){x.setFromMatrixPosition(e.matrixWorld),b.setFromMatrixPosition(n.matrixWorld);var r=x.distanceTo(b),i=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],h=(i[9]-1)/i[5],l=(i=o*(l=(i[8]-1)/i[0]),a=o*(n=(a[8]+1)/a[0]),(n=r/(n-l))*-l);e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(l),t.translateZ(n),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld),o+=n,n=s+n,t.projectionMatrix.makePerspective(i-l,r-l+a,c*s/n*o,h*s/n*o,o,n)}(p,l,u):p.projectionMatrix.copy(l.projectionMatrix),p};var S=null,w=new Tn;w.setAnimationLoop((function(e,n){if(null!==(s=n.getViewerPose(a))){var i=s.views,o=r.renderState.baseLayer;t.setFramebuffer(o.framebuffer);var h=!1;i.length!==p.cameras.length&&(h=!(p.cameras.length=0));for(var l=0;l<i.length;l++){var u=i[l],f=o.getViewport(u),m=d[l];m.matrix.fromArray(u.transform.matrix),m.projectionMatrix.fromArray(u.projectionMatrix),m.viewport.set(f.x,f.y,f.width,f.height),0===l&&p.matrix.copy(m.matrix),!0===h&&p.cameras.push(m)}}for(var g=r.inputSources,v=0;v<c.length;v++){var y=c[v],M=g[v];y.update(M,n,a)}S&&S(e,n)})),this.setAnimationLoop=function(t){S=t},this.dispose=function(){}}function Li(t){function e(e,n,r){var i,a;e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),(r=n.envMap||r)&&(e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio,void 0!==(r=t.get(r).__maxMipLevel)&&(e.maxMipLevel.value=r)),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap&&(i=n.emissiveMap),void 0!==i&&(!0===(i=i.isWebGLRenderTarget?i.texture:i).matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(!0===(a=a.isWebGLRenderTarget?a.texture:a).matrixAutoUpdate&&a.updateMatrix(),e.uv2Transform.value.copy(a.matrix))}function n(t,e,n){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),(e.envMap||n)&&(t.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,a,o){var s,c,h,l;r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),h=t,(l=r).emissiveMap&&(h.emissiveMap.value=l.emissiveMap)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r,i),(r.isMeshPhysicalMaterial?function(t,e,r){n(t,e,r),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}:n)(t,r,i)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),s=t,(c=r).displacementMap&&(s.displacementMap.value=c.displacementMap,s.displacementScale.value=c.displacementScale,s.displacementBias.value=c.displacementBias)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(s=r,(c=t).diffuse.value.copy(s.color),c.opacity.value=s.opacity,r.isLineDashedMaterial&&(c=r,(s=t).dashSize.value=c.dashSize,s.totalSize.value=c.dashSize+c.gapSize,s.scale.value=c.scale)):r.isPointsMaterial?function(t,e,n,r){var i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,a,o):r.isSpriteMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Pi(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:\"default\",l=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,u=null,d=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=R,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p=this,f=!1,m=null,g=0,v=0,M=null,x=null,_=-1,S=null,w=null,E=new H,T=new H,A=null,L=e.width,P=e.height,C=1,O=null,I=null,F=new H(0,0,L,P),z=new H(0,0,L,P),B=!1,U=new En,G=new zn,k=!1,j=!1,V=new et,W=new Y,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===M?C:1}var K,Z,J,Q,$,tt,nt,rt,it,at,ot,st,ct,ht,lt,ut,dt,pt,ft,mt=n;function gt(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(null!==(i=e.getContext(i,n)))return i}return null}try{var vt={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:l};if(e.addEventListener(\"webglcontextlost\",_t,!1),e.addEventListener(\"webglcontextrestored\",St,!1),null===mt){var yt=[\"webgl2\",\"webgl\",\"experimental-webgl\"];if(!0===p.isWebGL1Renderer&&yt.shift(),null===(mt=gt(yt,vt)))throw gt(yt)?new Error(\"Error creating WebGL context with your selected attributes.\"):new Error(\"Error creating WebGL context.\")}void 0===mt.getShaderPrecisionFormat&&(mt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error(\"THREE.WebGLRenderer: \"+t.message),t}function Mt(){K=new Bn(mt),!1===(Z=new Fn(mt,K,t)).isWebGL2&&(K.get(\"WEBGL_depth_texture\"),K.get(\"OES_texture_float\"),K.get(\"OES_texture_half_float\"),K.get(\"OES_texture_half_float_linear\"),K.get(\"OES_standard_derivatives\"),K.get(\"OES_element_index_uint\"),K.get(\"OES_vertex_array_object\"),K.get(\"ANGLE_instanced_arrays\")),K.get(\"OES_texture_float_linear\"),pt=new wi(0,K,Z),(J=new _i(mt,K,Z)).scissor(T.copy(z).multiplyScalar(C).floor()),J.viewport(E.copy(F).multiplyScalar(C).floor()),Q=new Gn,$=new ci,tt=new Si(mt,K,J,$,Z,pt,Q),nt=new An(mt,Z),ft=new Nn(mt,K,nt,Z),rt=new Un(0,nt,Q,ft),it=new Wn(0,rt,nt,Q),lt=new Vn(mt),at=new si(p,K,Z,ft),ot=new Li($),st=new di($),ct=new yi,ht=new In(p,J,it,s),ut=new Dn(mt,K,Q,Z),dt=new Hn(mt,K,Q,Z),Q.programs=at.programs,p.capabilities=Z,p.extensions=K,p.properties=$,p.renderLists=st,p.state=J,p.info=Q}Mt();var xt=new Ai(p,mt);this.xr=xt;var bt=new bi(p,it,Z.maxTextureSize);function _t(t){t.preventDefault(),console.log(\"THREE.WebGLRenderer: Context Lost.\"),f=!0}function St(){console.log(\"THREE.WebGLRenderer: Context Restored.\"),f=!1,Mt()}function wt(t){(t=t.target).removeEventListener(\"dispose\",wt),Et(t=t),$.remove(t)}function Et(t){void 0!==(t=$.get(t).program)&&at.releaseProgram(t)}this.shadowMap=bt,this.getContext=function(){return mt},this.getContextAttributes=function(){return mt.getContextAttributes()},this.forceContextLoss=function(){var t=K.get(\"WEBGL_lose_context\");t&&t.loseContext()},this.forceContextRestore=function(){var t=K.get(\"WEBGL_lose_context\");t&&t.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(t){void 0!==t&&(C=t,this.setSize(L,P,!1))},this.getSize=function(t){return void 0===t&&(console.warn(\"WebGLRenderer: .getsize() now requires a Vector2 as an argument\"),t=new D),t.set(L,P)},this.setSize=function(t,n,r){xt.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(L=t,P=n,e.width=Math.floor(t*C),e.height=Math.floor(n*C),!1!==r&&(e.style.width=t+\"px\",e.style.height=n+\"px\"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn(\"WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument\"),t=new D),t.set(L*C,P*C).floor()},this.setDrawingBufferSize=function(t,n,r){L=t,P=n,C=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn(\"WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument\"),t=new H),t.copy(E)},this.getViewport=function(t){return t.copy(F)},this.setViewport=function(t,e,n,r){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,r),J.viewport(E.copy(F).multiplyScalar(C).floor())},this.getScissor=function(t){return t.copy(z)},this.setScissor=function(t,e,n,r){t.isVector4?z.set(t.x,t.y,t.z,t.w):z.set(t,e,n,r),J.scissor(T.copy(z).multiplyScalar(C).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(t){J.setScissorTest(B=t)},this.setOpaqueSort=function(t){O=t},this.setTransparentSort=function(t){I=t},this.getClearColor=function(){return ht.getClearColor()},this.setClearColor=function(){ht.setClearColor.apply(ht,arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha.apply(ht,arguments)},this.clear=function(t,e,n){var r=0;void 0!==t&&!t||(r|=16384),void 0!==e&&!e||(r|=256),void 0!==n&&!n||(r|=1024),mt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener(\"webglcontextlost\",_t,!1),e.removeEventListener(\"webglcontextrestored\",St,!1),st.dispose(),ct.dispose(),$.dispose(),it.dispose(),ft.dispose(),xt.dispose(),Tt.stop()},this.renderBufferImmediate=function(t,e){ft.initAttributes();var n=$.get(t);t.hasPositions&&!n.position&&(n.position=mt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=mt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=mt.createBuffer()),t.hasColors&&!n.color&&(n.color=mt.createBuffer()),e=e.getAttributes(),t.hasPositions&&(mt.bindBuffer(34962,n.position),mt.bufferData(34962,t.positionArray,35048),ft.enableAttribute(e.position),mt.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(mt.bindBuffer(34962,n.normal),mt.bufferData(34962,t.normalArray,35048),ft.enableAttribute(e.normal),mt.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(mt.bindBuffer(34962,n.uv),mt.bufferData(34962,t.uvArray,35048),ft.enableAttribute(e.uv),mt.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(mt.bindBuffer(34962,n.color),mt.bufferData(34962,t.colorArray,35048),ft.enableAttribute(e.color),mt.vertexAttribPointer(e.color,3,5126,!1,0,0)),ft.disableUnusedAttributes(),mt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,a){null===e&&(e=q);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Ct(t,e,r,i);J.setMaterial(r,o);var c=n.index;t=n.attributes.position;if(null===c){if(void 0===t||0===t.count)return}else if(0===c.count)return;e=1,!0===r.wireframe&&(c=rt.getWireframeAttribute(n),e=2),(r.morphTargets||r.morphNormals)&&lt.update(i,n,r,s),ft.setup(i,r,s,n,c),o=ut,null!==c&&(h=nt.get(c),(o=dt).setIndex(h));s=(null!==c?c:t).count;var h=n.drawRange.start*e;c=n.drawRange.count*e,t=null!==a?a.start*e:0,a=null!==a?a.count*e:1/0,e=Math.max(h,t),a=Math.min(s,h+c,t+a)-1;0!==(a=Math.max(0,a-e+1))&&(i.isMesh?!0===r.wireframe?(J.setLineWidth(r.wireframeLinewidth*X()),o.setMode(1)):o.setMode(4):i.isLine?(r=r.linewidth,J.setLineWidth((r=void 0===r?1:r)*X()),i.isLineSegments?o.setMode(1):i.isLineLoop?o.setMode(2):o.setMode(3)):i.isPoints?o.setMode(0):i.isSprite&&o.setMode(4),i.isInstancedMesh?o.renderInstances(e,a,i.count):n.isInstancedBufferGeometry?(n=Math.min(n.instanceCount,n._maxInstanceCount),o.renderInstances(e,a,n)):o.render(e,a))},this.compile=function(t,e){(d=ct.get(t,e)).init(),t.traverse((function(t){t.isLight&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(e);var n=new WeakMap;t.traverse((function(e){var r=e.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){var a=r[i];!1===n.has(a)&&(Pt(a,t,e),n.set(a))}else!1===n.has(r)&&(Pt(r,t,e),n.set(r))}))};var Rt=null,Tt=new Tn;function At(t,e,n){for(var r=!0===e.isScene?e.overrideMaterial:null,i=0,a=t.length;i<a;i++){var o=t[i],s=o.object,c=o.geometry,h=null===r?o.material:r,l=o.group;if(n.isArrayCamera)for(var u=(w=n).cameras,p=0,f=u.length;p<f;p++){var m=u[p];s.layers.test(m.layers)&&(J.viewport(E.copy(m.viewport)),d.setupLights(m),Lt(s,e,m,c,h,l))}else w=null,Lt(s,e,n,c,h,l)}}function Lt(t,e,n,r,i,a){var o,s;t.onBeforeRender(p,e,n,r,i,a),d=ct.get(e,w||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject?(o=Ct(n,e,i,t),J.setMaterial(i),ft.reset(),s=o,t.render((function(t){p.renderBufferImmediate(t,s)}))):p.renderBufferDirect(n,e,r,i,t,a),t.onAfterRender(p,e,n,r,i,a),d=ct.get(e,w||n)}function Pt(t,e,n){!0!==e.isScene&&(e=q);var r=$.get(t),i=d.state.lights,a=d.state.shadowsArray,o=i.state.version,s=at.getParameters(t,i.state,a,e,G.numPlanes,G.numIntersection,n),c=at.getProgramCacheKey(s);n=!0;if(void 0===(a=r.program))t.addEventListener(\"dispose\",wt);else if(a.cacheKey!==c)Et(t);else if(r.lightsStateVersion!==o)r.lightsStateVersion=o,n=!1;else{if(void 0!==s.shaderID)return;n=!1}n&&(s.uniforms=at.getUniforms(t,s),t.onBeforeCompile(s,p),a=at.acquireProgram(s,c),r.program=a,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);var h=a.getAttributes();if(t.morphTargets)for(var l=t.numSupportedMorphTargets=0;l<p.maxMorphTargets;l++)0<=h[\"morphTarget\"+l]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(var u=t.numSupportedMorphNormals=0;u<p.maxMorphNormals;u++)0<=h[\"morphNormal\"+u]&&t.numSupportedMorphNormals++;a=r.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=G.numPlanes,r.numIntersection=G.numIntersection,a.clippingPlanes=G.uniform),r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.needsLights=(e=t).isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,r.lightsStateVersion=o,r.needsLights&&(a.ambientLightColor.value=i.state.ambient,a.lightProbe.value=i.state.probe,a.directionalLights.value=i.state.directional,a.directionalLightShadows.value=i.state.directionalShadow,a.spotLights.value=i.state.spot,a.spotLightShadows.value=i.state.spotShadow,a.rectAreaLights.value=i.state.rectArea,a.pointLights.value=i.state.point,a.pointLightShadows.value=i.state.pointShadow,a.hemisphereLights.value=i.state.hemi,a.directionalShadowMap.value=i.state.directionalShadowMap,a.directionalShadowMatrix.value=i.state.directionalShadowMatrix,a.spotShadowMap.value=i.state.spotShadowMap,a.spotShadowMatrix.value=i.state.spotShadowMatrix,a.pointShadowMap.value=i.state.pointShadowMap,a.pointShadowMatrix.value=i.state.pointShadowMatrix),i=r.program.getUniforms(),a=kr.seqWithValue(i.seq,a),r.uniformsList=a}function Ct(t,e,n,r){!0!==e.isScene&&(e=q),tt.resetTextureUnits();var i=e.fog,a=n.isMeshStandardMaterial?e.environment:null,o=null===M?p.outputEncoding:M.texture.encoding,s=$.get(n),c=d.state.lights;!0===k&&(!0!==j&&t===S||(m=t===S&&n.id===_,G.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,s,m))),n.version===s.__version?(void 0===s.program||n.fog&&s.fog!==i||s.environment!==a||s.needsLights&&s.lightsStateVersion!==c.state.version||void 0!==s.numClippingPlanes&&(s.numClippingPlanes!==G.numPlanes||s.numIntersection!==G.numIntersection)||s.outputEncoding!==o)&&Pt(n,e,r):(Pt(n,e,r),s.__version=n.version);var h,l=!1,u=!1,f=!1,m=s.program;c=m.getUniforms(),o=s.uniforms;return J.useProgram(m.program)&&(f=u=l=!0),n.id!==_&&(_=n.id,u=!0),!l&&S===t||(c.setValue(mt,\"projectionMatrix\",t.projectionMatrix),Z.logarithmicDepthBuffer&&c.setValue(mt,\"logDepthBufFC\",2/(Math.log(t.far+1)/Math.LN2)),S!==t&&(S=t,f=u=!0),!(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap)||void 0!==(h=c.map.cameraPosition)&&h.setValue(mt,W.setFromMatrixPosition(t.matrixWorld)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&c.setValue(mt,\"isOrthographic\",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&c.setValue(mt,\"viewMatrix\",t.matrixWorldInverse)),n.skinning&&(c.setOptional(mt,r,\"bindMatrix\"),c.setOptional(mt,r,\"bindMatrixInverse\"),(e=r.skeleton)&&(l=e.bones,Z.floatVertexTextures?(void 0===e.boneTexture&&(h=Math.sqrt(4*l.length),h=N.ceilPowerOfTwo(h),h=Math.max(h,4),(t=new Float32Array(h*h*4)).set(e.boneMatrices),l=new _n(t,h,h,b,y),e.boneMatrices=t,e.boneTexture=l,e.boneTextureSize=h),c.setValue(mt,\"boneTexture\",e.boneTexture,tt),c.setValue(mt,\"boneTextureSize\",e.boneTextureSize)):c.setOptional(mt,e,\"boneMatrices\"))),!u&&s.receiveShadow===r.receiveShadow||(s.receiveShadow=r.receiveShadow,c.setValue(mt,\"receiveShadow\",r.receiveShadow)),u&&(c.setValue(mt,\"toneMappingExposure\",p.toneMappingExposure),s.needsLights&&(u=f,(f=o).ambientLightColor.needsUpdate=u,f.lightProbe.needsUpdate=u,f.directionalLights.needsUpdate=u,f.directionalLightShadows.needsUpdate=u,f.pointLights.needsUpdate=u,f.pointLightShadows.needsUpdate=u,f.spotLights.needsUpdate=u,f.spotLightShadows.needsUpdate=u,f.rectAreaLights.needsUpdate=u,f.hemisphereLights.needsUpdate=u),i&&n.fog&&ot.refreshFogUniforms(o,i),ot.refreshMaterialUniforms(o,n,a,C,P),void 0!==o.ltc_1&&(o.ltc_1.value=Rn.LTC_1),void 0!==o.ltc_2&&(o.ltc_2.value=Rn.LTC_2),kr.upload(mt,s.uniformsList,o,tt)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(kr.upload(mt,s.uniformsList,o,tt),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&c.setValue(mt,\"center\",r.center),c.setValue(mt,\"modelViewMatrix\",r.modelViewMatrix),c.setValue(mt,\"normalMatrix\",r.normalMatrix),c.setValue(mt,\"modelMatrix\",r.matrixWorld),m}Tt.setAnimationLoop((function(t){xt.isPresenting||Rt&&Rt(t)})),\"undefined\"!=typeof window&&Tt.setContext(window),this.setAnimationLoop=function(t){Rt=t,xt.setAnimationLoop(t),null===t?Tt.stop():Tt.start()},this.render=function(t,e){var n,r,i;void 0!==arguments[2]&&(console.warn(\"THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.\"),r=arguments[2]),void 0!==arguments[3]&&(console.warn(\"THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.\"),i=arguments[3]),void 0===e||!0===e.isCamera?!0!==f&&(ft.resetDefaultState(),_=-1,!(S=null)===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===xt.enabled&&!0===xt.isPresenting&&(e=xt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(p,t,e,r||M),(d=ct.get(t,e)).init(),V.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),U.setFromProjectionMatrix(V),j=this.localClippingEnabled,k=G.init(this.clippingPlanes,j,e),(u=st.get(t,e)).init(),function t(e,n,r,i){if(!1!==e.visible){var a=e.layers.test(n.layers);if(a)if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){var o;e.frustumCulled&&!U.intersectsSprite(e)||(i&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V),o=it.update(e),(a=e.material).visible&&u.push(e,o,a,r,W.z,null))}else if(e.isImmediateRenderObject)i&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V),u.push(e,null,e.material,r,W.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Q.render.frame&&(e.skeleton.update(),e.skeleton.frame=Q.render.frame),!e.frustumCulled||U.intersectsObject(e))){i&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);var s=it.update(e),c=e.material;if(Array.isArray(c))for(var h=s.groups,l=0,p=h.length;l<p;l++){var f=h[l],m=c[f.materialIndex];m&&m.visible&&u.push(e,s,m,r,W.z,f)}else c.visible&&u.push(e,s,c,r,W.z,null)}for(var g=e.children,v=0,y=g.length;v<y;v++)t(g[v],n,r,i)}}(t,e,0,p.sortObjects),u.finish(),!0===p.sortObjects&&u.sort(O,I),!0===k&&G.beginShadows(),n=d.state.shadowsArray,bt.render(n,t,e),d.setupLights(e),!0===k&&G.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),ht.render(u,t,e,i),r=u.opaque,i=u.transparent,0<r.length&&At(r,t,e),0<i.length&&At(i,t,e),!0===t.isScene&&t.onAfterRender(p,t,e),null!==M&&(tt.updateRenderTargetMipmap(M),tt.updateMultisampleRenderTarget(M)),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1),d=u=null):console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\")},this.setFramebuffer=function(t){m!==t&&null===M&&mt.bindFramebuffer(36160,t),m=t},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return M},this.setRenderTarget=function(t,e,n){g=e,v=n,(M=t)&&void 0===$.get(t).__webglFramebuffer&&tt.setupRenderTarget(t);var r,i=m,a=!1;A=t?(r=$.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget?(i=r[e||0],a=!0):i=t.isWebGLMultisampleRenderTarget?$.get(t).__webglMultisampledFramebuffer:r,E.copy(t.viewport),T.copy(t.scissor),t.scissorTest):(E.copy(F).multiplyScalar(C).floor(),T.copy(z).multiplyScalar(C).floor(),B),x!==i&&(mt.bindFramebuffer(36160,i),x=i),J.viewport(E),J.scissor(T),J.setScissorTest(A),a&&(t=$.get(t.texture),mt.framebufferTexture2D(36160,36064,34069+(e||0),t.__webglTexture,n||0))},this.readRenderTargetPixels=function(t,e,n,r,i,a,o){if(t&&t.isWebGLRenderTarget){var s=$.get(t).__webglFramebuffer;if(s=t.isWebGLCubeRenderTarget&&void 0!==o?s[o]:s){o=!1,s!==x&&(mt.bindFramebuffer(36160,s),o=!0);try{var c=t.texture,h=c.format,l=c.type;if(h!==b&&pt.convert(h)!==mt.getParameter(35739))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\");if(!(1009===l||pt.convert(l)===mt.getParameter(35738)||l===y&&(Z.isWebGL2||K.get(\"OES_texture_float\")||K.get(\"WEBGL_color_buffer_float\"))||1016===l&&(Z.isWebGL2?K.get(\"EXT_color_buffer_float\"):K.get(\"EXT_color_buffer_half_float\"))))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\");36053===mt.checkFramebufferStatus(36160)?0<=e&&e<=t.width-r&&0<=n&&n<=t.height-i&&mt.readPixels(e,n,r,i,pt.convert(h),pt.convert(l),a):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\")}finally{o&&mt.bindFramebuffer(36160,x)}}}else console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r);r=pt.convert(e.format);tt.setTexture2D(e,0),mt.copyTexImage2D(3553,n,r,t.x,t.y,i,a,0),J.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r){void 0===r&&(r=0);var i=e.image.width,a=e.image.height,o=pt.convert(n.format),s=pt.convert(n.type);tt.setTexture2D(n,0),mt.pixelStorei(37440,n.flipY),mt.pixelStorei(37441,n.premultiplyAlpha),mt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?mt.texSubImage2D(3553,r,t.x,t.y,i,a,o,s,e.image.data):e.isCompressedTexture?mt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):mt.texSubImage2D(3553,r,t.x,t.y,o,s,e.image),0===r&&n.generateMipmaps&&mt.generateMipmap(3553),J.unbindTexture()},this.initTexture=function(t){tt.setTexture2D(t,0),J.unbindTexture()},\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}function Ci(t){Pi.call(this,t)}function Oi(t,e){this.name=\"\",this.color=new le(t),this.density=void 0!==e?e:25e-5}function Ii(t,e,n){this.name=\"\",this.color=new le(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Ni(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=T,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=N.generateUUID()}Ei.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Ei,isArrayCamera:!0}),Ri.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Ri,isGroup:!0}),Object.assign(Ti.prototype,{constructor:Ti,getHandSpace:function(){if(null===this._hand&&(this._hand=new Ri,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new Ri;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Ri,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Ri,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:\"disconnected\",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,c=this._hand;if(t)if(t.hand){a=!0;for(var h,l,u=0;u<=window.XRHand.LITTLE_PHALANX_TIP;u++)t.hand[u]&&(l=e.getJointPose(t.hand[u],n),h=c.joints[u],null!==l&&(h.matrix.fromArray(l.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=l.radius),h.visible=null!==l,h=c.joints[window.XRHand.INDEX_PHALANX_TIP],l=c.joints[window.XRHand.THUMB_PHALANX_TIP],l=h.position.distanceTo(l.position),c.inputState.pinching&&.025<l?(c.inputState.pinching=!1,this.dispatchEvent({type:\"pinchend\",handedness:t.handedness,target:this})):!c.inputState.pinching&&l<=.015&&(c.inputState.pinching=!0,this.dispatchEvent({type:\"pinchstart\",handedness:t.handedness,target:this})))}else null!==o&&null!==(r=e.getPose(t.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==s&&t.gripSpace&&null!==(i=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale));return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==c&&(c.visible=null!==a),this}}),Object.assign(Ai.prototype,L.prototype),Ci.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Ci,isWebGL1Renderer:!0}),Object.assign(Oi.prototype,{isFogExp2:!0,clone:function(){return new Oi(this.color,this.density)},toJSON:function(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}}}),Object.assign(Ii.prototype,{isFog:!0,clone:function(){return new Ii(this.color,this.near,this.far)},toJSON:function(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Ni.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.assign(Ni.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},clone:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=N.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer),(t=new Ni(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride)).setUsage(this.usage),t},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=N.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var Di,Fi=new Y;function zi(t,e,n,r){this.name=\"\",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Bi(t){ge.call(this),this.type=\"SpriteMaterial\",this.color=new le(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.defineProperties(zi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(zi.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)Fi.x=this.getX(e),Fi.y=this.getY(e),Fi.z=this.getZ(e),Fi.applyMatrix4(t),this.setXYZ(e,Fi.x,Fi.y,Fi.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this},clone:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new zi(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);console.log(\"THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.\");for(var e=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[r+i]);return new xe(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};console.log(\"THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.\");for(var e=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}),((Bi.prototype=Object.create(ge.prototype)).constructor=Bi).prototype.isSpriteMaterial=!0,Bi.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var Ui=new Y,Hi=new Y,Gi=new Y,ki=new D,ji=new D,Vi=new et,Wi=new Y,Yi=new Y,qi=new Y,Xi=new D,Ki=new D,Zi=new D;function Ji(t){var e;Mt.call(this),this.type=\"Sprite\",void 0===Di&&(Di=new Ue,e=new Ni(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5),Di.setIndex([0,1,2,0,2,3]),Di.setAttribute(\"position\",new zi(e,3,0,!1)),Di.setAttribute(\"uv\",new zi(e,2,3,!1))),this.geometry=Di,this.material=void 0!==t?t:new Bi,this.center=new D(.5,.5)}function Qi(t,e,n,r,i,a){ki.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(ji.x=a*ki.x-i*ki.y,ji.y=i*ki.x+a*ki.y):ji.copy(ki),t.copy(e),t.x+=ji.x,t.y+=ji.y,t.applyMatrix4(Vi)}Ji.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Ji,isSprite:!0,raycast:function(t,e){var n;null===t.camera&&console.error('THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.'),Hi.setFromMatrixScale(this.matrixWorld),Vi.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Gi.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Hi.multiplyScalar(-Gi.z),0!==(i=this.material.rotation)&&(r=Math.cos(i),n=Math.sin(i));var r,i=this.center;Qi(Wi.set(-.5,-.5,0),Gi,i,Hi,n,r),Qi(Yi.set(.5,-.5,0),Gi,i,Hi,n,r),Qi(qi.set(.5,.5,0),Gi,i,Hi,n,r),Xi.set(0,0),Ki.set(1,0),Zi.set(1,1),null===t.ray.intersectTriangle(Wi,Yi,qi,!1,Ui)&&(Qi(Yi.set(-.5,.5,0),Gi,i,Hi,n,r),Ki.set(0,1),null===t.ray.intersectTriangle(Wi,qi,Yi,!1,Ui))||(r=t.ray.origin.distanceTo(Ui))<t.near||r>t.far||e.push({distance:r,point:Ui.clone(),uv:oe.getUV(Ui,Wi,Yi,qi,Xi,Ki,Zi,new D),face:null,object:this})},copy:function(t){return Mt.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});var $i,ta,ea,na,ra,ia=new Y,aa=new Y;function oa(){Mt.call(this),this._currentLevel=0,this.type=\"LOD\",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function sa(t,e){t&&t.isGeometry&&console.error(\"THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\"),rn.call(this,t,e),this.type=\"SkinnedMesh\",this.bindMode=\"attached\",this.bindMatrix=new et,this.bindMatrixInverse=new et}oa.prototype=Object.assign(Object.create(Mt.prototype),{constructor:oa,isLOD:!0,copy:function(t){Mt.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(0<e.length){for(var n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){var n;0<this.levels.length&&(ia.setFromMatrixPosition(this.matrixWorld),n=t.ray.origin.distanceTo(ia),this.getObjectForDistance(n).raycast(t,e))},update:function(t){var e=this.levels;if(1<e.length){ia.setFromMatrixPosition(t.matrixWorld),aa.setFromMatrixPosition(this.matrixWorld);var n,r,i=ia.distanceTo(aa)/t.zoom;for(e[0].object.visible=!0,n=1,r=e.length;n<r&&i>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)e[n].object.visible=!1}},toJSON:function(t){var e=Mt.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),sa.prototype=Object.assign(Object.create(rn.prototype),{constructor:sa,isSkinnedMesh:!0,copy:function(t){return rn.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new H,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!=1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){rn.prototype.updateMatrixWorld.call(this,t),\"attached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):\"detached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)},boneTransform:($i=new Y,ta=new H,ea=new H,na=new Y,ra=new et,function(t,e){var n=this.skeleton,r=this.geometry;ta.fromBufferAttribute(r.attributes.skinIndex,t),ea.fromBufferAttribute(r.attributes.skinWeight,t),$i.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var i=0;i<4;i++){var a,o=ea.getComponent(i);0!==o&&(a=ta.getComponent(i),ra.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(na.copy($i).applyMatrix4(ra),o))}return e.applyMatrix4(this.bindMatrixInverse)})});var ca=new et,ha=new et;function la(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn(\"THREE.Skeleton boneInverses is the wrong length.\"),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new et)}}function ua(){Mt.call(this),this.type=\"Bone\"}Object.assign(la.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new et;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.getInverse(this.boneInverses[t])}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=t.length;i<a;i++){var o=t[i]?t[i].matrixWorld:ha;ca.multiplyMatrices(o,e[i]),ca.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new la(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),ua.prototype=Object.assign(Object.create(Mt.prototype),{constructor:ua,isBone:!0});var da=new et,pa=new et,fa=[],ma=new rn;function ga(t,e,n){rn.call(this,t,e),this.instanceMatrix=new xe(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function va(t){ge.call(this),this.type=\"LineBasicMaterial\",this.color=new le(16777215),this.linewidth=1,this.linecap=\"round\",this.linejoin=\"round\",this.morphTargets=!1,this.setValues(t)}ga.prototype=Object.assign(Object.create(rn.prototype),{constructor:ga,isInstancedMesh:!0,copy:function(t){return rn.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,r=this.count;if(ma.geometry=this.geometry,ma.material=this.material,void 0!==ma.material)for(var i=0;i<r;i++){this.getMatrixAt(i,da),pa.multiplyMatrices(n,da),ma.matrixWorld=pa,ma.raycast(t,fa);for(var a=0,o=fa.length;a<o;a++){var s=fa[a];s.instanceId=i,s.object=this,e.push(s)}fa.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),((va.prototype=Object.create(ge.prototype)).constructor=va).prototype.isLineBasicMaterial=!0,va.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var ya=new Y,Ma=new Y,xa=new et,ba=new Wt,_a=new zt;function Sa(t,e,n){1===n&&console.error(\"THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.\"),Mt.call(this),this.type=\"Line\",this.geometry=void 0!==t?t:new Ue,this.material=void 0!==e?e:new va,this.updateMorphTargets()}Sa.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Sa,isLine:!0,copy:function(t){return Mt.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)ya.fromBufferAttribute(e,r-1),Ma.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=ya.distanceTo(Ma);t.setAttribute(\"lineDistance\",new Ae(n,1))}else console.warn(\"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else if(t.isGeometry){var a=t.vertices,o=t.lineDistances;o[0]=0;for(var s=1,c=a.length;s<c;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),_a.copy(n.boundingSphere),_a.applyMatrix4(r),_a.radius+=i,!1!==t.ray.intersectsSphere(_a)){xa.getInverse(r),ba.copy(t.ray).applyMatrix4(xa);var a=(i=i/((this.scale.x+this.scale.y+this.scale.z)/3))*i,o=new Y,s=new Y,c=new Y,h=new Y,l=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){i=n.index;var u=n.attributes.position.array;if(null!==i)for(var d=i.array,p=0,f=d.length-1;p<f;p+=l){var m=d[p],g=d[p+1];o.fromArray(u,3*m),s.fromArray(u,3*g),a<ba.distanceSqToSegment(o,s,h,c)||(h.applyMatrix4(this.matrixWorld),(g=t.ray.origin.distanceTo(h))<t.near||g>t.far||e.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}))}else for(var v,y=0,M=u.length/3-1;y<M;y+=l)o.fromArray(u,3*y),s.fromArray(u,3*y+3),a<ba.distanceSqToSegment(o,s,h,c)||(h.applyMatrix4(this.matrixWorld),(v=t.ray.origin.distanceTo(h))<t.near||v>t.far||e.push({distance:v,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(var x,b=n.vertices,_=b.length,S=0;S<_-1;S+=l)a<ba.distanceSqToSegment(b[S],b[S+1],h,c)||(h.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(h))<t.near||x>t.far||e.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error(\"THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}});var wa=new Y,Ea=new Y;function Ra(t,e){Sa.call(this,t,e),this.type=\"LineSegments\"}function Ta(t,e){Sa.call(this,t,e),this.type=\"LineLoop\"}function Aa(t){ge.call(this),this.type=\"PointsMaterial\",this.color=new le(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Ra.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Ra,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)wa.fromBufferAttribute(e,r),Ea.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+wa.distanceTo(Ea);t.setAttribute(\"lineDistance\",new Ae(n,1))}else console.warn(\"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else if(t.isGeometry)for(var a=t.vertices,o=t.lineDistances,s=0,c=a.length;s<c;s+=2)wa.copy(a[s]),Ea.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+wa.distanceTo(Ea);return this}}),Ta.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Ta,isLineLoop:!0}),((Aa.prototype=Object.create(ge.prototype)).constructor=Aa).prototype.isPointsMaterial=!0,Aa.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var La=new et,Pa=new Wt,Ca=new zt,Oa=new Y;function Ia(t,e){Mt.call(this),this.type=\"Points\",this.geometry=void 0!==t?t:new Ue,this.material=void 0!==e?e:new Aa,this.updateMorphTargets()}function Na(t,e,n,r,i,a,o){var s=Pa.distanceSqToPoint(t);s<n&&(n=new Y,Pa.closestPointToPoint(t,n),n.applyMatrix4(r),(r=i.ray.origin.distanceTo(n))<i.near||r>i.far||a.push({distance:r,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:o}))}function Da(t,e,n,r,i,a,o,s,c){U.call(this,t,e,n,r,i,a,o,s,c),this.format=void 0!==o?o:x,this.minFilter=void 0!==a?a:v,this.magFilter=void 0!==i?i:v,this.generateMipmaps=!1;var h=this;\"requestVideoFrameCallback\"in t&&t.requestVideoFrameCallback((function e(){h.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}function Fa(t,e,n,r,i,a,o,s,c,h,l,u){U.call(this,null,a,o,s,c,h,r,i,l,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function za(t,e,n,r,i,a,o,s,c){U.call(this,t,e,n,r,i,a,o,s,c),this.needsUpdate=!0}function Ba(t,e,n,r,i,a,o,s,c,h){if((h=void 0!==h?h:_)!==_&&h!==S)throw new Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");U.call(this,null,r,i,a,o,s,h,n=void 0===(n=void 0===n&&h===_?1012:n)&&h===S?M:n,c),this.image={width:t,height:e},this.magFilter=void 0!==o?o:g,this.minFilter=void 0!==s?s:g,this.flipY=!1,this.generateMipmaps=!1}function Ua(t){Ue.call(this),this.type=\"WireframeGeometry\";var e=[],n=[0,0],r={},i=[\"a\",\"b\",\"c\"];if(t&&t.isGeometry){for(var a,o=t.faces,s=0,c=o.length;s<c;s++)for(var h=o[s],l=0;l<3;l++){var u=h[i[l]],d=h[i[(l+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d),void 0===r[d=n[0]+\",\"+n[1]]&&(r[d]={index1:n[0],index2:n[1]})}for(a in r){var p=r[a],f=t.vertices[p.index1];e.push(f.x,f.y,f.z),f=t.vertices[p.index2],e.push(f.x,f.y,f.z)}}else if(t&&t.isBufferGeometry){var m=new Y;if(null!==t.index){for(var g,v=t.attributes.position,y=t.index,M=t.groups,x=0,b=(M=0===M.length?[{start:0,count:y.count,materialIndex:0}]:M).length;x<b;++x)for(var _=M[x],S=_.start,w=S,E=S+_.count;w<E;w+=3)for(var R=0;R<3;R++){var T=y.getX(w+R),A=y.getX(w+(R+1)%3);n[0]=Math.min(T,A),n[1]=Math.max(T,A),void 0===r[A=n[0]+\",\"+n[1]]&&(r[A]={index1:n[0],index2:n[1]})}for(g in r){var L=r[g];m.fromBufferAttribute(v,L.index1),e.push(m.x,m.y,m.z),m.fromBufferAttribute(v,L.index2),e.push(m.x,m.y,m.z)}}else for(var P=t.attributes.position,C=0,O=P.count/3;C<O;C++)for(var I=0;I<3;I++)m.fromBufferAttribute(P,3*C+I),e.push(m.x,m.y,m.z),m.fromBufferAttribute(P,3*C+(I+1)%3),e.push(m.x,m.y,m.z)}this.setAttribute(\"position\",new Ae(e,3))}function Ha(t,e,n){un.call(this),this.type=\"ParametricGeometry\",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Ga(t,e,n)),this.mergeVertices()}function Ga(t,e,n){Ue.call(this),this.type=\"ParametricBufferGeometry\",this.parameters={func:t,slices:e,stacks:n};var r=[],i=[],a=[],o=[],s=new Y,c=new Y,h=new Y,l=new Y,u=new Y;t.length<3&&console.error(\"THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.\");for(var d=e+1,p=0;p<=n;p++)for(var f=p/n,m=0;m<=e;m++){var g=m/e;t(g,f,c),i.push(c.x,c.y,c.z),0<=g-1e-5?(t(g-1e-5,f,h),l.subVectors(c,h)):(t(1e-5+g,f,h),l.subVectors(h,c)),0<=f-1e-5?(t(g,f-1e-5,h),u.subVectors(c,h)):(t(g,1e-5+f,h),u.subVectors(h,c)),s.crossVectors(l,u).normalize(),a.push(s.x,s.y,s.z),o.push(g,f)}for(var v=0;v<n;v++)for(var y=0;y<e;y++){var M=v*d+y+1,x=(v+1)*d+y+1,b=(v+1)*d+y;r.push(v*d+y,M,b),r.push(M,x,b)}this.setIndex(r),this.setAttribute(\"position\",new Ae(i,3)),this.setAttribute(\"normal\",new Ae(a,3)),this.setAttribute(\"uv\",new Ae(o,2))}function ka(t,e,n,r){un.call(this),this.type=\"PolyhedronGeometry\",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new ja(t,e,n,r)),this.mergeVertices()}function ja(t,e,n,r){Ue.call(this),this.type=\"PolyhedronBufferGeometry\",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1;var i=[],a=[];function o(t){i.push(t.x,t.y,t.z)}function s(e,n){e*=3,n.x=t[0+e],n.y=t[1+e],n.z=t[2+e]}function c(t,e,n,r){r<0&&1===t.x&&(a[e]=t.x-1),0===n.x&&0===n.z&&(a[e]=r/2/Math.PI+.5)}function h(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new Y,r=new Y,i=new Y,a=0;a<e.length;a+=3)s(e[a+0],n),s(e[a+1],r),s(e[a+2],i),function(t,e,n,r){for(var i=Math.pow(2,r),a=[],s=0;s<=i;s++){a[s]=[];for(var c=t.clone().lerp(n,s/i),h=e.clone().lerp(n,s/i),l=i-s,u=0;u<=l;u++)a[s][u]=0===u&&s===i?c:c.clone().lerp(h,u/l)}for(var d=0;d<i;d++)for(var p=0;p<2*(i-d)-1;p++){var f=Math.floor(p/2);p%2==0?(o(a[d][f+1]),o(a[d+1][f]),o(a[d][f])):(o(a[d][f+1]),o(a[d+1][f+1]),o(a[d+1][f]))}}(n,r,i,t)}(r=r||0),function(t){for(var e=new Y,n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){for(var t=new Y,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var n=h(t)/2/Math.PI+.5,r=function(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}(t)/Math.PI+.5;a.push(n,1-r)}(function(){for(var t=new Y,e=new Y,n=new Y,r=new Y,o=new D,s=new D,l=new D,u=0,d=0;u<i.length;u+=9,d+=6){t.set(i[u+0],i[u+1],i[u+2]),e.set(i[u+3],i[u+4],i[u+5]),n.set(i[u+6],i[u+7],i[u+8]),o.set(a[d+0],a[d+1]),s.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),r.copy(t).add(e).add(n).divideScalar(3);var p=h(r);c(o,d+0,t,p),c(s,d+2,e,p),c(l,d+4,n,p)}})(),function(){for(var t=0;t<a.length;t+=6){var e=a[t+0],n=a[t+2],r=a[t+4],i=Math.max(e,n,r),o=Math.min(e,n,r);.9<i&&o<.1&&(e<.2&&(a[t+0]+=1),n<.2&&(a[t+2]+=1),r<.2&&(a[t+4]+=1))}}()}(),this.setAttribute(\"position\",new Ae(i,3)),this.setAttribute(\"normal\",new Ae(i.slice(),3)),this.setAttribute(\"uv\",new Ae(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Va(t,e){un.call(this),this.type=\"TetrahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Wa(t,e)),this.mergeVertices()}function Wa(t,e){ja.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type=\"TetrahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function Ya(t,e){un.call(this),this.type=\"OctahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new qa(t,e)),this.mergeVertices()}function qa(t,e){ja.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type=\"OctahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function Xa(t,e){un.call(this),this.type=\"IcosahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ka(t,e)),this.mergeVertices()}function Ka(t,e){var n=(1+Math.sqrt(5))/2;ja.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type=\"IcosahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function Za(t,e){un.call(this),this.type=\"DodecahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ja(t,e)),this.mergeVertices()}function Ja(t,e){var n=(1+Math.sqrt(5))/2,r=1/n;ja.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type=\"DodecahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function Qa(t,e,n,r,i,a){un.call(this),this.type=\"TubeGeometry\",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==a&&console.warn(\"THREE.TubeGeometry: taper has been removed.\"),i=new $a(t,e,n,r,i),this.tangents=i.tangents,this.normals=i.normals,this.binormals=i.binormals,this.fromBufferGeometry(i),this.mergeVertices()}function $a(t,e,n,r,i){Ue.call(this),this.type=\"TubeBufferGeometry\",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},e=e||64,n=n||1,r=r||8,i=i||!1;var a=t.computeFrenetFrames(e,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o=new Y,s=new Y,c=new D,h=new Y,l=[],u=[],d=[],p=[];function f(i){h=t.getPointAt(i/e,h);for(var c=a.normals[i],d=a.binormals[i],p=0;p<=r;p++){var f=p/r*Math.PI*2,m=Math.sin(f);f=-Math.cos(f);s.x=f*c.x+m*d.x,s.y=f*c.y+m*d.y,s.z=f*c.z+m*d.z,s.normalize(),u.push(s.x,s.y,s.z),o.x=h.x+n*s.x,o.y=h.y+n*s.y,o.z=h.z+n*s.z,l.push(o.x,o.y,o.z)}}!function(){for(var t=0;t<e;t++)f(t);f(!1===i?e:0),function(){for(var t=0;t<=e;t++)for(var n=0;n<=r;n++)c.x=t/e,c.y=n/r,d.push(c.x,c.y)}(),function(){for(var t=1;t<=e;t++)for(var n=1;n<=r;n++){var i=(r+1)*(t-1)+(n-1),a=(r+1)*t+(n-1),o=(r+1)*t+n,s=(r+1)*(t-1)+n;p.push(i,a,s),p.push(a,o,s)}}()}(),this.setIndex(p),this.setAttribute(\"position\",new Ae(l,3)),this.setAttribute(\"normal\",new Ae(u,3)),this.setAttribute(\"uv\",new Ae(d,2))}function to(t,e,n,r,i,a,o){un.call(this),this.type=\"TorusKnotGeometry\",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==o&&console.warn(\"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.\"),this.fromBufferGeometry(new eo(t,e,n,r,i,a)),this.mergeVertices()}function eo(t,e,n,r,i,a){Ue.call(this),this.type=\"TorusKnotBufferGeometry\",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;for(var o=[],s=[],c=[],h=[],l=new Y,u=new Y,d=new Y,p=new Y,f=new Y,m=new Y,g=new Y,v=0;v<=n;++v){var y=v/n*i*Math.PI*2;T(y,i,a,t,d),T(.01+y,i,a,t,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(var M=0;M<=r;++M){var x=M/r*Math.PI*2,b=-e*Math.cos(x);x=e*Math.sin(x);l.x=d.x+(b*g.x+x*f.x),l.y=d.y+(b*g.y+x*f.y),l.z=d.z+(b*g.z+x*f.z),s.push(l.x,l.y,l.z),u.subVectors(l,d).normalize(),c.push(u.x,u.y,u.z),h.push(v/n),h.push(M/r)}}for(var _=1;_<=n;_++)for(var S=1;S<=r;S++){var w=(r+1)*_+(S-1),E=(r+1)*_+S,R=(r+1)*(_-1)+S;o.push((r+1)*(_-1)+(S-1),w,R),o.push(w,E,R)}function T(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t);e=n/e*t,t=Math.cos(e);i.x=r*(2+t)*.5*a,i.y=r*(2+t)*o*.5,i.z=r*Math.sin(e)*.5}this.setIndex(o),this.setAttribute(\"position\",new Ae(s,3)),this.setAttribute(\"normal\",new Ae(c,3)),this.setAttribute(\"uv\",new Ae(h,2))}function no(t,e,n,r,i){un.call(this),this.type=\"TorusGeometry\",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new ro(t,e,n,r,i)),this.mergeVertices()}function ro(t,e,n,r,i){Ue.call(this),this.type=\"TorusBufferGeometry\",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;for(var a=[],o=[],s=[],c=[],h=new Y,l=new Y,u=new Y,d=0;d<=n;d++)for(var p=0;p<=r;p++){var f=p/r*i,m=d/n*Math.PI*2;l.x=(t+e*Math.cos(m))*Math.cos(f),l.y=(t+e*Math.cos(m))*Math.sin(f),l.z=e*Math.sin(m),o.push(l.x,l.y,l.z),h.x=t*Math.cos(f),h.y=t*Math.sin(f),u.subVectors(l,h).normalize(),s.push(u.x,u.y,u.z),c.push(p/r),c.push(d/n)}for(var g=1;g<=n;g++)for(var v=1;v<=r;v++){var y=(r+1)*(g-1)+v-1,M=(r+1)*(g-1)+v,x=(r+1)*g+v;a.push((r+1)*g+v-1,y,x),a.push(y,M,x)}this.setIndex(a),this.setAttribute(\"position\",new Ae(o,3)),this.setAttribute(\"normal\",new Ae(s,3)),this.setAttribute(\"uv\",new Ae(c,2))}Ia.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Ia,isPoints:!0,copy:function(t){return Mt.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ca.copy(n.boundingSphere),Ca.applyMatrix4(r),Ca.radius+=i,!1!==t.ray.intersectsSphere(Ca)){La.getInverse(r),Pa.copy(t.ray).applyMatrix4(La);var a=(i=i/((this.scale.x+this.scale.y+this.scale.z)/3))*i;if(n.isBufferGeometry){i=n.index;var o=n.attributes.position.array;if(null!==i)for(var s=i.array,c=0,h=s.length;c<h;c++){var l=s[c];Oa.fromArray(o,3*l),Na(Oa,l,a,r,t,e,this)}else for(var u=0,d=o.length/3;u<d;u++)Oa.fromArray(o,3*u),Na(Oa,u,a,r,t,e,this)}else for(var p=n.vertices,f=0,m=p.length;f<m;f++)Na(p[f],f,a,r,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error(\"THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}}),Da.prototype=Object.assign(Object.create(U.prototype),{constructor:Da,isVideoTexture:!0,update:function(){var t=this.image;0==\"requestVideoFrameCallback\"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),((Fa.prototype=Object.create(U.prototype)).constructor=Fa).prototype.isCompressedTexture=!0,((za.prototype=Object.create(U.prototype)).constructor=za).prototype.isCanvasTexture=!0,((Ba.prototype=Object.create(U.prototype)).constructor=Ba).prototype.isDepthTexture=!0,(Ua.prototype=Object.create(Ue.prototype)).constructor=Ua,(Ha.prototype=Object.create(un.prototype)).constructor=Ha,(Ga.prototype=Object.create(Ue.prototype)).constructor=Ga,(ka.prototype=Object.create(un.prototype)).constructor=ka,(ja.prototype=Object.create(Ue.prototype)).constructor=ja,(Va.prototype=Object.create(un.prototype)).constructor=Va,(Wa.prototype=Object.create(ja.prototype)).constructor=Wa,(Ya.prototype=Object.create(un.prototype)).constructor=Ya,(qa.prototype=Object.create(ja.prototype)).constructor=qa,(Xa.prototype=Object.create(un.prototype)).constructor=Xa,(Ka.prototype=Object.create(ja.prototype)).constructor=Ka,(Za.prototype=Object.create(un.prototype)).constructor=Za,(Ja.prototype=Object.create(ja.prototype)).constructor=Ja,(Qa.prototype=Object.create(un.prototype)).constructor=Qa,(($a.prototype=Object.create(Ue.prototype)).constructor=$a).prototype.toJSON=function(){var t=Ue.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},(to.prototype=Object.create(un.prototype)).constructor=to,(eo.prototype=Object.create(Ue.prototype)).constructor=eo,(no.prototype=Object.create(un.prototype)).constructor=no,(ro.prototype=Object.create(Ue.prototype)).constructor=ro;var io=function(t,e,n){n=n||2;var r,i,a,o,s,c=e&&e.length,h=c?e[0]*n:t.length,l=ao(t,0,h,n,!0),u=[];if(!l||l.next===l.prev)return u;if(c&&(l=function(t,e,n,r){var i,a,o,s=[];for(i=0,a=e.length;i<a;i++)(o=ao(t,e[i]*r,o=i<a-1?e[i+1]*r:t.length,r,!1))===o.next&&(o.steiner=!0),s.push(function(t){for(var e=t,n=t;(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),(e=e.next)!==t;);return n}(o));for(s.sort(so),i=0;i<s.length;i++)!function(t,e){(e=function(t,e){var n,r=e,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&o<s){if((o=s)===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}}while((r=r.next)!==e);if(!n)return null;if(i===o)return n;var c,h=n,l=n.x,u=n.y,d=1/0;for(r=n;i>=r.x&&r.x>=l&&i!==r.x&&ho(a<u?i:o,a,l,u,a<u?o:i,a,r.x,r.y)&&(c=Math.abs(a-r.y)/(i-r.x),go(r,t)&&(c<d||c===d&&(r.x>n.x||r.x===n.x&&function(t,e){return lo(t.prev,t,e.prev)<0&&lo(e.next,t,t.next)<0}(n,r)))&&(n=r,d=c)),(r=r.next)!==h;);return n}(t,e))&&(t=vo(e,t),oo(e,e.next),oo(t,t.next))}(s[i],n),n=oo(n,n.next);return n}(t,e,l,n)),t.length>80*n){for(var d=r=t[0],p=i=t[1],f=n;f<h;f+=n)(a=t[f])<d&&(d=a),(o=t[f+1])<p&&(p=o),r<a&&(r=a),i<o&&(i=o);s=0!==(s=Math.max(r-d,i-p))?1/s:0}return function t(e,n,r,i,a,o,s){if(e){!s&&o&&function(t,e,n,r){for(var i=t;null===i.z&&(i.z=co(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,a,o,s,c,h=1;do{for(n=t,a=t=null,o=0;n;){for(o++,r=n,e=s=0;e<h&&(s++,r=r.nextZ);e++);for(c=h;0<s||0<c&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(n=(i=n).nextZ,s--):(r=(i=r).nextZ,c--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}}while(a.nextZ=null,h*=2,1<o)}(i)}(e,i,a,o);for(var c,h,l=e;e.prev!==e.next;)if(c=e.prev,h=e.next,o?function(t,e,n,r){var i=t.prev,a=t,o=t.next;if(0<=lo(i,a,o))return!1;for(var s=(i.x<a.x?i.x<o.x?i:o:a.x<o.x?a:o).x,c=(i.y<a.y?i.y<o.y?i:o:a.y<o.y?a:o).y,h=(i.x>a.x?i.x>o.x?i:o:a.x>o.x?a:o).x,l=(i.y>a.y?i.y>o.y?i:o:a.y>o.y?a:o).y,u=co(s,c,e,n,r),d=co(h,l,e,n,r),p=t.prevZ,f=t.nextZ;p&&p.z>=u&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&ho(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&0<=lo(p.prev,p,p.next))return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&ho(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=lo(f.prev,f,f.next))return!1;f=f.nextZ}for(;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&ho(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&0<=lo(p.prev,p,p.next))return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&ho(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=lo(f.prev,f,f.next))return!1;f=f.nextZ}return!0}(e,i,a,o):function(t){var e=t.prev,n=t,r=t.next;if(0<=lo(e,n,r))return!1;for(var i=t.next.next;i!==t.prev;){if(ho(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=lo(i.prev,i,i.next))return!1;i=i.next}return!0}(e))n.push(c.i/r),n.push(e.i/r),n.push(h.i/r),Mo(e),e=h.next,l=h.next;else if((e=h)===l){s?1===s?t(e=function(t,e,n){var r=t;do{var i=r.prev,a=r.next.next}while(!uo(i,a)&&po(i,r,r.next,a)&&go(i,a)&&go(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),Mo(r),Mo(r.next),r=t=a),(r=r.next)!==t);return oo(r)}(oo(e),n,r),n,r,i,a,o,2):2===s&&function(e,n,r,i,a,o){var s=e;do{for(var c=s.next.next;c!==s.prev;){if(s.i!==c.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&po(n,n.next,t,e))return!0}while((n=n.next)!==t);return!1}(t,e)&&(go(t,e)&&go(e,t)&&function(t,e){for(var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r}(t,e)&&(lo(t.prev,t,e.prev)||lo(t,e.prev,e))||uo(t,e)&&0<lo(t.prev,t,t.next)&&0<lo(e.prev,e,e.next))}(s,c)){var h=vo(s,c);return s=oo(s,s.next),h=oo(h,h.next),t(s,n,r,i,a,o),t(h,n,r,i,a,o)}c=c.next}}while((s=s.next)!==e)}(e,n,r,i,a,o):t(oo(e),n,r,i,a,o,1);break}}}(l,u,n,d,p,s),u};function ao(t,e,n,r,i){var a,o;if(i===0<function(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}(t,e,n,r))for(a=e;a<n;a+=r)o=yo(a,t[a],t[a+1],o);else for(a=n-r;e<=a;a-=r)o=yo(a,t[a],t[a+1],o);return o&&uo(o,o.next)&&(Mo(o),o=o.next),o}function oo(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!uo(r,r.next)&&0!==lo(r.prev,r,r.next))r=r.next;else{if(Mo(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function so(t,e){return t.x-e.x}function co(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ho(t,e,n,r,i,a,o,s){return 0<=(i-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(r-s)-(n-o)*(e-s)&&0<=(n-o)*(a-s)-(i-o)*(r-s)}function lo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function uo(t,e){return t.x===e.x&&t.y===e.y}function po(t,e,n,r){var i=mo(lo(t,e,n)),a=mo(lo(t,e,r)),o=mo(lo(n,r,t)),s=mo(lo(n,r,e));return i!==a&&o!==s||0===i&&fo(t,n,e)||0===a&&fo(t,r,e)||0===o&&fo(n,t,r)||!(0!==s||!fo(n,e,r))}function fo(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function mo(t){return 0<t?1:t<0?-1:0}function go(t,e){return lo(t.prev,t,t.next)<0?0<=lo(t,e,t.next)&&0<=lo(t,t.prev,e):lo(t,e,t.prev)<0||lo(t,t.next,e)<0}function vo(t,e){var n=new xo(t.i,t.x,t.y),r=new xo(e.i,e.x,e.y),i=t.next,a=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(a.next=r).prev=a,r}function yo(t,e,n,r){return n=new xo(t,e,n),r?(n.next=r.next,(n.prev=r).next.prev=n,r.next=n):(n.prev=n).next=n,n}function Mo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xo(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var bo={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return bo.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];_o(t),So(n,t);var a=t.length;e.forEach(_o);for(var o=0;o<e.length;o++)r.push(a),a+=e[o].length,So(n,e[o]);for(var s=io(n,r),c=0;c<s.length;c+=3)i.push(s.slice(c,c+3));return i}};function _o(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function So(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function wo(t,e){un.call(this),this.type=\"ExtrudeGeometry\",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Eo(t,e)),this.mergeVertices()}function Eo(t,e){Ue.call(this),this.type=\"ExtrudeBufferGeometry\",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,r=[],i=[],a=0,o=t.length;a<o;a++)!function(t){var a=[],o=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,c=void 0!==e.depth?e.depth:100,h=void 0===e.bevelEnabled||e.bevelEnabled,l=void 0!==e.bevelThickness?e.bevelThickness:6,u=void 0!==e.bevelSize?e.bevelSize:l-2,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3,f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Ro;void 0!==e.amount&&(console.warn(\"THREE.ExtrudeBufferGeometry: amount has been renamed to depth.\"),c=e.amount);var g,v,y,M,x,b=!1;f&&(g=f.getSpacedPoints(s),h=!(b=!0),v=f.computeFrenetFrames(s,!1),y=new Y,M=new Y,x=new Y),h||(d=u=l=p=0);var _=(o=t.extractPoints(o)).shape,S=o.holes;if(!bo.isClockWise(_)){_=_.reverse();for(var w=0,E=S.length;w<E;w++){var R=S[w];bo.isClockWise(R)&&(S[w]=R.reverse())}}for(var T=bo.triangulateShape(_,S),A=_,L=0,P=S.length;L<P;L++){var C=S[L];_=_.concat(C)}function O(t,e,n){return e||console.error(\"THREE.ExtrudeGeometry: vec does not exist\"),e.clone().multiplyScalar(n).add(t)}var I=_.length,N=T.length;function F(t,e,n){var r=t.x-e.x,i=t.y-e.y,a=n.x-t.x,o=n.y-t.y,s=r*r+i*i;if(Math.abs(r*o-i*a)>Number.EPSILON){var c=Math.sqrt(s),h=Math.sqrt(a*a+o*o),l=e.x-i/c,u=e.y+r/c;if((u=(h=l+r*(c=((n.x-o/h-l)*o-(n.y+a/h-u)*a)/(r*o-i*a))-t.x)*h+(l=u+i*c-t.y)*l)<=2)return new D(h,l);c=Math.sqrt(u/2)}else u=!1,r>Number.EPSILON?a>Number.EPSILON&&(u=!0):r<-Number.EPSILON?a<-Number.EPSILON&&(u=!0):Math.sign(i)===Math.sign(o)&&(u=!0),c=u?(h=-i,l=r,Math.sqrt(s)):(h=r,l=i,Math.sqrt(s/2));return new D(h/c,l/c)}for(var z=[],B=0,U=A.length,H=U-1,G=B+1;B<U;B++,H++,G++)H===U&&(H=0),G===U&&(G=0),z[B]=F(A[B],A[H],A[G]);for(var k,j=[],V=z.concat(),W=0,q=S.length;W<q;W++){var X=S[W];k=[];for(var K=0,Z=X.length,J=Z-1,Q=K+1;K<Z;K++,J++,Q++)J===Z&&(J=0),Q===Z&&(Q=0),k[K]=F(X[K],X[J],X[Q]);j.push(k),V=V.concat(k)}for(var $=0;$<p;$++){for(var tt=$/p,et=l*Math.cos(tt*Math.PI/2),nt=u*Math.sin(tt*Math.PI/2)+d,rt=0,it=A.length;rt<it;rt++){var at=O(A[rt],z[rt],nt);Ot(at.x,at.y,-et)}for(var ot=0,st=S.length;ot<st;ot++){var ct=S[ot];k=j[ot];for(var ht=0,lt=ct.length;ht<lt;ht++){var ut=O(ct[ht],k[ht],nt);Ot(ut.x,ut.y,-et)}}}for(var dt=u+d,pt=0;pt<I;pt++){var ft=h?O(_[pt],V[pt],dt):_[pt];b?(M.copy(v.normals[0]).multiplyScalar(ft.x),y.copy(v.binormals[0]).multiplyScalar(ft.y),x.copy(g[0]).add(M).add(y),Ot(x.x,x.y,x.z)):Ot(ft.x,ft.y,0)}for(var mt=1;mt<=s;mt++)for(var gt=0;gt<I;gt++){var vt=h?O(_[gt],V[gt],dt):_[gt];b?(M.copy(v.normals[mt]).multiplyScalar(vt.x),y.copy(v.binormals[mt]).multiplyScalar(vt.y),x.copy(g[mt]).add(M).add(y),Ot(x.x,x.y,x.z)):Ot(vt.x,vt.y,c/s*mt)}for(var yt=p-1;0<=yt;yt--){for(var Mt=yt/p,xt=l*Math.cos(Mt*Math.PI/2),bt=u*Math.sin(Mt*Math.PI/2)+d,_t=0,St=A.length;_t<St;_t++){var wt=O(A[_t],z[_t],bt);Ot(wt.x,wt.y,c+xt)}for(var Et=0,Rt=S.length;Et<Rt;Et++){var Tt=S[Et];k=j[Et];for(var At=0,Lt=Tt.length;At<Lt;At++){var Pt=O(Tt[At],k[At],bt);b?Ot(Pt.x,Pt.y+g[s-1].y,g[s-1].x+xt):Ot(Pt.x,Pt.y,c+xt)}}}function Ct(t,e){for(var i=t.length;0<=--i;){var a=i,o=i-1;o<0&&(o=t.length-1);for(var c=0,h=s+2*p;c<h;c++){var l=I*c,u=I*(c+1);!function(t,e,i,a){Nt(t),Nt(e),Nt(a),Nt(e),Nt(i),Nt(a),a=r.length/3,Dt((a=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1))[0]),Dt(a[1]),Dt(a[3]),Dt(a[1]),Dt(a[2]),Dt(a[3])}(e+a+l,e+o+l,e+o+u,e+a+u)}}}function Ot(t,e,n){a.push(t),a.push(e),a.push(n)}function It(t,e,i){Nt(t),Nt(e),Nt(i),i=r.length/3,Dt((i=m.generateTopUV(n,r,i-3,i-2,i-1))[0]),Dt(i[1]),Dt(i[2])}function Nt(t){r.push(a[3*t+0]),r.push(a[3*t+1]),r.push(a[3*t+2])}function Dt(t){i.push(t.x),i.push(t.y)}(function(){var t=r.length/3;if(h){for(var e=0*I,i=0;i<N;i++){var a=T[i];It(a[2]+e,a[1]+e,a[0]+e)}e=I*(s+2*p);for(var o=0;o<N;o++){var c=T[o];It(c[0]+e,c[1]+e,c[2]+e)}}else{for(var l=0;l<N;l++){var u=T[l];It(u[2],u[1],u[0])}for(var d=0;d<N;d++){var f=T[d];It(f[0]+I*s,f[1]+I*s,f[2]+I*s)}}n.addGroup(t,r.length/3-t,0)})(),function(){var t=r.length/3,e=0;Ct(A,e),e+=A.length;for(var i=0,a=S.length;i<a;i++){var o=S[i];Ct(o,e),e+=o.length}n.addGroup(t,r.length/3-t,1)}()}(t[a]);this.setAttribute(\"position\",new Ae(r,3)),this.setAttribute(\"uv\",new Ae(i,2)),this.computeVertexNormals()}((wo.prototype=Object.create(un.prototype)).constructor=wo).prototype.toJSON=function(){var t=un.prototype.toJSON.call(this);return To(this.parameters.shapes,this.parameters.options,t)},((Eo.prototype=Object.create(Ue.prototype)).constructor=Eo).prototype.toJSON=function(){var t=Ue.prototype.toJSON.call(this);return To(this.parameters.shapes,this.parameters.options,t)};var Ro={generateTopUV:function(t,e,n,r,i){var a=e[3*n],o=e[3*n+1],s=e[3*r];n=e[3*r+1],r=e[3*i],i=e[3*i+1];return[new D(a,o),new D(s,n),new D(r,i)]},generateSideWallUV:function(t,e,n,r,i,a){var o=e[3*n],s=e[3*n+1],c=e[3*n+2],h=e[3*r],l=e[3*r+1],u=e[3*r+2],d=e[3*i],p=e[3*i+1];n=e[3*i+2],r=e[3*a],i=e[3*a+1],a=e[3*a+2];return Math.abs(s-l)<.01?[new D(o,1-c),new D(h,1-u),new D(d,1-n),new D(r,1-a)]:[new D(s,1-c),new D(l,1-u),new D(p,1-n),new D(i,1-a)]}};function To(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Ao(t,e){un.call(this),this.type=\"TextGeometry\",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Lo(t,e)),this.mergeVertices()}function Lo(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),new un;t=n.generateShapes(t,e.size),e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Eo.call(this,t,e),this.type=\"TextBufferGeometry\"}function Po(t,e,n,r,i,a,o){un.call(this),this.type=\"SphereGeometry\",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Co(t,e,n,r,i,a,o)),this.mergeVertices()}function Co(t,e,n,r,i,a,o){Ue.call(this),this.type=\"SphereBufferGeometry\",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=Math.min(a+o,Math.PI),c=0,h=[],l=new Y,u=new Y,d=[],p=[],f=[],m=[],g=0;g<=n;g++){var v=[],y=g/n,M=0;0==g&&0==a?M=.5/e:g==n&&s==Math.PI&&(M=-.5/e);for(var x=0;x<=e;x++){var b=x/e;l.x=-t*Math.cos(r+b*i)*Math.sin(a+y*o),l.y=t*Math.cos(a+y*o),l.z=t*Math.sin(r+b*i)*Math.sin(a+y*o),p.push(l.x,l.y,l.z),u.copy(l).normalize(),f.push(u.x,u.y,u.z),m.push(b+M,1-y),v.push(c++)}h.push(v)}for(var _=0;_<n;_++)for(var S=0;S<e;S++){var w=h[_][S+1],E=h[_][S],R=h[_+1][S],T=h[_+1][S+1];(0!==_||0<a)&&d.push(w,E,T),(_!==n-1||s<Math.PI)&&d.push(E,R,T)}this.setIndex(d),this.setAttribute(\"position\",new Ae(p,3)),this.setAttribute(\"normal\",new Ae(f,3)),this.setAttribute(\"uv\",new Ae(m,2))}function Oo(t,e,n,r,i,a){un.call(this),this.type=\"RingGeometry\",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new Io(t,e,n,r,i,a)),this.mergeVertices()}function Io(t,e,n,r,i,a){Ue.call(this),this.type=\"RingBufferGeometry\",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},t=t||.5,e=e||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;for(var o=[],s=[],c=[],h=[],l=t,u=(e-t)/(r=void 0!==r?Math.max(1,r):1),d=new Y,p=new D,f=0;f<=r;f++){for(var m=0;m<=n;m++){var g=i+m/n*a;d.x=l*Math.cos(g),d.y=l*Math.sin(g),s.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,h.push(p.x,p.y)}l+=u}for(var v=0;v<r;v++)for(var y=v*(n+1),M=0;M<n;M++){var x=M+y,b=x+n+1,_=x+n+2,S=x+1;o.push(x,b,S),o.push(b,_,S)}this.setIndex(o),this.setAttribute(\"position\",new Ae(s,3)),this.setAttribute(\"normal\",new Ae(c,3)),this.setAttribute(\"uv\",new Ae(h,2))}function No(t,e,n,r){un.call(this),this.type=\"LatheGeometry\",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new Do(t,e,n,r)),this.mergeVertices()}function Do(t,e,n,r){Ue.call(this),this.type=\"LatheBufferGeometry\",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=N.clamp(r,0,2*Math.PI);for(var i=[],a=[],o=[],s=1/e,c=new Y,h=new D,l=0;l<=e;l++)for(var u=n+l*s*r,d=Math.sin(u),p=Math.cos(u),f=0;f<=t.length-1;f++)c.x=t[f].x*d,c.y=t[f].y,c.z=t[f].x*p,a.push(c.x,c.y,c.z),h.x=l/e,h.y=f/(t.length-1),o.push(h.x,h.y);for(var m=0;m<e;m++)for(var g=0;g<t.length-1;g++){var v=g+m*t.length,y=v+t.length,M=v+t.length+1,x=v+1;i.push(v,y,x),i.push(y,M,x)}if(this.setIndex(i),this.setAttribute(\"position\",new Ae(a,3)),this.setAttribute(\"uv\",new Ae(o,2)),this.computeVertexNormals(),r===2*Math.PI)for(var b=this.attributes.normal.array,_=new Y,S=new Y,w=new Y,E=e*t.length*3,R=0,T=0;R<t.length;R++,T+=3)_.x=b[T+0],_.y=b[T+1],_.z=b[T+2],S.x=b[E+T+0],S.y=b[E+T+1],S.z=b[E+T+2],w.addVectors(_,S).normalize(),b[T+0]=b[E+T+0]=w.x,b[T+1]=b[E+T+1]=w.y,b[T+2]=b[E+T+2]=w.z}function Fo(t,e){un.call(this),this.type=\"ShapeGeometry\",\"object\"===a(e)&&(console.warn(\"THREE.ShapeGeometry: Options parameter has been removed.\"),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new zo(t,e)),this.mergeVertices()}function zo(t,e){Ue.call(this),this.type=\"ShapeBufferGeometry\",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(t))h(t);else for(var c=0;c<t.length;c++)h(t[c]),this.addGroup(o,s,c),o+=s,s=0;function h(t){var o=r.length/3,c=(t=t.extractPoints(e)).shape,h=t.holes;!1===bo.isClockWise(c)&&(c=c.reverse());for(var l=0,u=h.length;l<u;l++){var d=h[l];!0===bo.isClockWise(d)&&(h[l]=d.reverse())}for(var p=bo.triangulateShape(c,h),f=0,m=h.length;f<m;f++){var g=h[f];c=c.concat(g)}for(var v=0,y=c.length;v<y;v++){var M=c[v];r.push(M.x,M.y,0),i.push(0,0,1),a.push(M.x,M.y)}for(var x=0,b=p.length;x<b;x++){var _=(w=p[x])[0]+o,S=w[1]+o,w=w[2]+o;n.push(_,S,w),s+=3}}this.setIndex(n),this.setAttribute(\"position\",new Ae(r,3)),this.setAttribute(\"normal\",new Ae(i,3)),this.setAttribute(\"uv\",new Ae(a,2))}function Bo(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function Uo(t,e){Ue.call(this),this.type=\"EdgesGeometry\",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,a,o=[],s=Math.cos(N.DEG2RAD*e),c=[0,0],h={},l=[\"a\",\"b\",\"c\"];t.isBufferGeometry?(a=new un).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var u=a.vertices,d=a.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],g=0;g<3;g++)n=m[l[g]],r=m[l[(g+1)%3]],c[0]=Math.min(n,r),c[1]=Math.max(n,r),void 0===h[i=c[0]+\",\"+c[1]]?h[i]={index1:c[0],index2:c[1],face1:p,face2:void 0}:h[i].face2=p;for(i in h){var v,y=h[i];(void 0===y.face2||d[y.face1].normal.dot(d[y.face2].normal)<=s)&&(v=u[y.index1],o.push(v.x,v.y,v.z),v=u[y.index2],o.push(v.x,v.y,v.z))}this.setAttribute(\"position\",new Ae(o,3))}function Ho(t,e,n,r,i,a,o,s){un.call(this),this.type=\"CylinderGeometry\",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Go(t,e,n,r,i,a,o,s)),this.mergeVertices()}function Go(t,e,n,r,i,a,o,s){Ue.call(this),this.type=\"CylinderBufferGeometry\",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var c=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var h=[],l=[],u=[],d=[],p=0,f=[],m=n/2,g=0;function v(n){for(var i=new D,a=new Y,f=0,v=!0===n?t:e,y=!0===n?1:-1,M=p,x=1;x<=r;x++)l.push(0,m*y,0),u.push(0,y,0),d.push(.5,.5),p++;for(var b=p,_=0;_<=r;_++){var S=_/r*s+o,w=Math.cos(S);S=Math.sin(S);a.x=v*S,a.y=m*y,a.z=v*w,l.push(a.x,a.y,a.z),u.push(0,y,0),i.x=.5*w+.5,i.y=.5*S*y+.5,d.push(i.x,i.y),p++}for(var E=0;E<r;E++){var R=M+E,T=b+E;!0===n?h.push(T,T+1,R):h.push(T+1,T,R),f+=3}c.addGroup(g,f,!0===n?1:2),g+=f}!function(){for(var a=new Y,v=new Y,y=0,M=(e-t)/n,x=0;x<=i;x++){for(var b=[],_=x/i,S=_*(e-t)+t,w=0;w<=r;w++){var E=w/r,R=E*s+o,T=Math.sin(R);R=Math.cos(R);v.x=S*T,v.y=-_*n+m,v.z=S*R,l.push(v.x,v.y,v.z),a.set(T,M,R).normalize(),u.push(a.x,a.y,a.z),d.push(E,1-_),b.push(p++)}f.push(b)}for(var A=0;A<r;A++)for(var L=0;L<i;L++){var P=f[L][A],C=f[L+1][A],O=f[L+1][A+1],I=f[L][A+1];h.push(P,C,I),h.push(C,O,I),y+=6}c.addGroup(g,y,0),g+=y}(),!1===a&&(0<t&&v(!0),0<e&&v(!1)),this.setIndex(h),this.setAttribute(\"position\",new Ae(l,3)),this.setAttribute(\"normal\",new Ae(u,3)),this.setAttribute(\"uv\",new Ae(d,2))}function ko(t,e,n,r,i,a,o){Ho.call(this,0,t,e,n,r,i,a,o),this.type=\"ConeGeometry\",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function jo(t,e,n,r,i,a,o){Go.call(this,0,t,e,n,r,i,a,o),this.type=\"ConeBufferGeometry\",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function Vo(t,e,n,r){un.call(this),this.type=\"CircleGeometry\",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Wo(t,e,n,r)),this.mergeVertices()}function Wo(t,e,n,r){Ue.call(this),this.type=\"CircleBufferGeometry\",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=[],a=[],o=[],s=[],c=new Y,h=new D;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(var l=0,u=3;l<=e;l++,u+=3){var d=n+l/e*r;c.x=t*Math.cos(d),c.y=t*Math.sin(d),a.push(c.x,c.y,c.z),o.push(0,0,1),h.x=(a[u]/t+1)/2,h.y=(a[u+1]/t+1)/2,s.push(h.x,h.y)}for(var p=1;p<=e;p++)i.push(p,p+1,0);this.setIndex(i),this.setAttribute(\"position\",new Ae(a,3)),this.setAttribute(\"normal\",new Ae(o,3)),this.setAttribute(\"uv\",new Ae(s,2))}(Ao.prototype=Object.create(un.prototype)).constructor=Ao,(Lo.prototype=Object.create(Eo.prototype)).constructor=Lo,(Po.prototype=Object.create(un.prototype)).constructor=Po,(Co.prototype=Object.create(Ue.prototype)).constructor=Co,(Oo.prototype=Object.create(un.prototype)).constructor=Oo,(Io.prototype=Object.create(Ue.prototype)).constructor=Io,(No.prototype=Object.create(un.prototype)).constructor=No,(Do.prototype=Object.create(Ue.prototype)).constructor=Do,((Fo.prototype=Object.create(un.prototype)).constructor=Fo).prototype.toJSON=function(){var t=un.prototype.toJSON.call(this);return Bo(this.parameters.shapes,t)},((zo.prototype=Object.create(Ue.prototype)).constructor=zo).prototype.toJSON=function(){var t=Ue.prototype.toJSON.call(this);return Bo(this.parameters.shapes,t)},(Uo.prototype=Object.create(Ue.prototype)).constructor=Uo,(Ho.prototype=Object.create(un.prototype)).constructor=Ho,(Go.prototype=Object.create(Ue.prototype)).constructor=Go,(ko.prototype=Object.create(Ho.prototype)).constructor=ko,(jo.prototype=Object.create(Go.prototype)).constructor=jo,(Vo.prototype=Object.create(un.prototype)).constructor=Vo,(Wo.prototype=Object.create(Ue.prototype)).constructor=Wo;var Yo=Object.freeze({__proto__:null,WireframeGeometry:Ua,ParametricGeometry:Ha,ParametricBufferGeometry:Ga,TetrahedronGeometry:Va,TetrahedronBufferGeometry:Wa,OctahedronGeometry:Ya,OctahedronBufferGeometry:qa,IcosahedronGeometry:Xa,IcosahedronBufferGeometry:Ka,DodecahedronGeometry:Za,DodecahedronBufferGeometry:Ja,PolyhedronGeometry:ka,PolyhedronBufferGeometry:ja,TubeGeometry:Qa,TubeBufferGeometry:$a,TorusKnotGeometry:to,TorusKnotBufferGeometry:eo,TorusGeometry:no,TorusBufferGeometry:ro,TextGeometry:Ao,TextBufferGeometry:Lo,SphereGeometry:Po,SphereBufferGeometry:Co,RingGeometry:Oo,RingBufferGeometry:Io,PlaneGeometry:Ln,PlaneBufferGeometry:Pn,LatheGeometry:No,LatheBufferGeometry:Do,ShapeGeometry:Fo,ShapeBufferGeometry:zo,ExtrudeGeometry:wo,ExtrudeBufferGeometry:Eo,EdgesGeometry:Uo,ConeGeometry:ko,ConeBufferGeometry:jo,CylinderGeometry:Ho,CylinderBufferGeometry:Go,CircleGeometry:Vo,CircleBufferGeometry:Wo,BoxGeometry:dn,BoxBufferGeometry:pn});function qo(t){ge.call(this),this.type=\"ShadowMaterial\",this.color=new le(0),this.transparent=!0,this.setValues(t)}function Xo(t){vn.call(this,t),this.type=\"RawShaderMaterial\"}function Ko(t){ge.call(this),this.defines={STANDARD:\"\"},this.type=\"MeshStandardMaterial\",this.color=new le(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new D(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Zo(t){Ko.call(this),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.type=\"MeshPhysicalMaterial\",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new D(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function Jo(t){ge.call(this),this.type=\"MeshPhongMaterial\",this.color=new le(16777215),this.specular=new le(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new D(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Qo(t){ge.call(this),this.defines={TOON:\"\"},this.type=\"MeshToonMaterial\",this.color=new le(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new D(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function $o(t){ge.call(this),this.type=\"MeshNormalMaterial\",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new D(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ts(t){ge.call(this),this.type=\"MeshLambertMaterial\",this.color=new le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function es(t){ge.call(this),this.defines={MATCAP:\"\"},this.type=\"MeshMatcapMaterial\",this.color=new le(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new D(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ns(t){va.call(this),this.type=\"LineDashedMaterial\",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}((qo.prototype=Object.create(ge.prototype)).constructor=qo).prototype.isShadowMaterial=!0,qo.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.color.copy(t.color),this},((Xo.prototype=Object.create(vn.prototype)).constructor=Xo).prototype.isRawShaderMaterial=!0,((Ko.prototype=Object.create(ge.prototype)).constructor=Ko).prototype.isMeshStandardMaterial=!0,Ko.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.defines={STANDARD:\"\"},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},((Zo.prototype=Object.create(Ko.prototype)).constructor=Zo).prototype.isMeshPhysicalMaterial=!0,Zo.prototype.copy=function(t){return Ko.prototype.copy.call(this,t),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new le).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},((Jo.prototype=Object.create(ge.prototype)).constructor=Jo).prototype.isMeshPhongMaterial=!0,Jo.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Qo.prototype=Object.create(ge.prototype)).constructor=Qo).prototype.isMeshToonMaterial=!0,Qo.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(($o.prototype=Object.create(ge.prototype)).constructor=$o).prototype.isMeshNormalMaterial=!0,$o.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((ts.prototype=Object.create(ge.prototype)).constructor=ts).prototype.isMeshLambertMaterial=!0,ts.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((es.prototype=Object.create(ge.prototype)).constructor=es).prototype.isMeshMatcapMaterial=!0,es.prototype.copy=function(t){return ge.prototype.copy.call(this,t),this.defines={MATCAP:\"\"},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((ns.prototype=Object.create(va.prototype)).constructor=ns).prototype.isLineDashedMaterial=!0,ns.prototype.copy=function(t){return va.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var rs=Object.freeze({__proto__:null,ShadowMaterial:qo,SpriteMaterial:Bi,RawShaderMaterial:Xo,ShaderMaterial:vn,PointsMaterial:Aa,MeshPhysicalMaterial:Zo,MeshStandardMaterial:Ko,MeshPhongMaterial:Jo,MeshToonMaterial:Qo,MeshNormalMaterial:$o,MeshLambertMaterial:ts,MeshDepthMaterial:Mi,MeshDistanceMaterial:xi,MeshBasicMaterial:ve,MeshMatcapMaterial:es,LineDashedMaterial:ns,LineBasicMaterial:va,Material:ge}),is={arraySlice:function(t,e,n){return is.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:\"number\"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*e,c=0;c!==e;++c)i[o++]=t[s+c];return i},flattenJSON:function(t,e,n,r){for(var i=1,a=t[0];void 0!==a&&void 0===a[r];)a=t[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))for(;void 0!==(o=a[r])&&(e.push(a.time),n.push.apply(n,o)),void 0!==(a=t[i++]););else if(void 0!==o.toArray)for(;void 0!==(o=a[r])&&(e.push(a.time),o.toArray(n,n.length)),void 0!==(a=t[i++]););else for(;void 0!==(o=a[r])&&(e.push(a.time),n.push(o)),void 0!==(a=t[i++]););}},subclip:function(t,e,n,r,i){i=i||30;var a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var c=a.tracks[s],h=c.getValueSize(),l=[],u=[],d=0;d<c.times.length;++d){var p=c.times[d]*i;if(!(p<n||r<=p)){l.push(c.times[d]);for(var f=0;f<h;++f)u.push(c.values[d*h+f])}}0!==l.length&&(c.times=is.convertArray(l,c.times.constructor),c.values=is.convertArray(u,c.values.constructor),o.push(c))}a.tracks=o;for(var m=1/0,g=0;g<a.tracks.length;++g)m>a.tracks[g].times[0]&&(m=a.tracks[g].times[0]);for(var v=0;v<a.tracks.length;++v)a.tracks[v].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(t,e,n,r){void 0===n&&(n=t);for(var i=t.tracks.length,a=(e=void 0===e?0:e)/(r=void 0===r||r<=0?30:r),o=0;o<i;++o)!function(e){var r=n.tracks[e],i=r.ValueTypeName;if(\"bool\"!==i&&\"string\"!==i){var o=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0!==o){var s,c=r.getValueSize();e=r.times.length-1;s=a<=r.times[0]?is.arraySlice(r.values,0,r.valueSize):a>=r.times[e]?is.arraySlice(r.values,e*c):((e=r.createInterpolant()).evaluate(a),e.resultBuffer),\"quaternion\"===i&&new j(s[0],s[1],s[2],s[3]).normalize().conjugate().toArray(s);for(var h=o.times.length,l=0;l<h;++l){var u=l*c;if(\"quaternion\"===i)j.multiplyQuaternionsFlat(o.values,u,s,0,o.values,u);else for(var d=0;d<c;++d)o.values[u+d]-=s[d]}}}}(o);return t.blendMode=2501,t}};function as(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function os(t,e,n,r){as.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ss(t,e,n,r){as.call(this,t,e,n,r)}function cs(t,e,n,r){as.call(this,t,e,n,r)}function hs(t,e,n,r){if(void 0===t)throw new Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===e||0===e.length)throw new Error(\"THREE.KeyframeTrack: no keyframes in track named \"+t);this.name=t,this.times=is.convertArray(e,this.TimeBufferType),this.values=is.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function ls(t,e,n){hs.call(this,t,e,n)}function us(t,e,n,r){hs.call(this,t,e,n,r)}function ds(t,e,n,r){hs.call(this,t,e,n,r)}function ps(t,e,n,r){as.call(this,t,e,n,r)}function fs(t,e,n,r){hs.call(this,t,e,n,r)}function ms(t,e,n,r){hs.call(this,t,e,n,r)}function gs(t,e,n,r){hs.call(this,t,e,n,r)}function vs(t,e,n,r){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==r?r:2500,this.uuid=N.generateUUID(),this.duration<0&&this.resetDuration()}function ys(t){if(void 0===t.type)throw new Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");var e,n,r=function(t){switch(t.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return ds;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return gs;case\"color\":return us;case\"quaternion\":return fs;case\"bool\":case\"boolean\":return ls;case\"string\":return ms}throw new Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+t)}(t.type);return void 0===t.times&&(is.flattenJSON(t.keys,e=[],n=[],\"value\"),t.times=e,t.values=n),void 0!==r.parse?r.parse(t):new r(t.name,t.times,t.values,t.interpolation)}Object.assign(as.prototype,{evaluate:function(t){var e,n=this.parameterPositions,r=this._cachedIndex,i=n[r],a=n[r-1];t:{e:{n:{r:if(!(t<i)){for(var o=r+2;;){if(void 0===i){if(t<a)break r;return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,t,a)}if(r===o)break;if(a=i,t<(i=n[++r]))break e}e=n.length;break n}if(a<=t)break t;var s=n[1];t<s&&(r=2,a=s);for(var c=r-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(r===c)break;if(i=a,(a=n[--r-1])<=t)break e}e=r,r=0}for(;r<e;){var h=r+e>>>1;t<n[h]?e=h:r=1+h}if(i=n[r],void 0===(a=n[r-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,a,t)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,a=0;a!==r;++a)e[a]=n[i+a];return e},interpolate_:function(){throw new Error(\"call to abstract method\")},intervalChanged_:function(){}}),Object.assign(as.prototype,{beforeStart_:as.prototype.copySampleValue_,afterEnd_:as.prototype.copySampleValue_}),os.prototype=Object.assign(Object.create(as.prototype),{constructor:os,DefaultSettings_:{endingStart:w,endingEnd:w},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,a=t+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case E:i=t,o=2*e-n;break;case 2402:o=e+r[i=r.length-2]-r[i+1];break;default:i=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case E:a=t,s=2*n-e;break;case 2402:s=n+r[a=1]-r[0];break;default:a=t-1,s=e}var c=.5*(n-e),h=this.valueSize;this._weightPrev=c/(e-o),this._weightNext=c/(s-n),this._offsetPrev=i*h,this._offsetNext=a*h},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,h=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,d=-u*(e=(r=(n=(n-e)/(r-e))*n)*n)+2*u*r-u*n,p=(1+u)*e+(-1.5-2*u)*r+(-.5+u)*n+1,f=(-1-(t=this._weightNext))*e+(1.5+t)*r+.5*n,m=t*e-t*r,g=0;g!==o;++g)i[g]=d*a[h+g]+p*a[c+g]+f*a[s+g]+m*a[l+g];return i}}),ss.prototype=Object.assign(Object.create(as.prototype),{constructor:ss,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,h=(n-e)/(r-e),l=1-h,u=0;u!==o;++u)i[u]=a[c+u]*l+a[s+u]*h;return i}}),cs.prototype=Object.assign(Object.create(as.prototype),{constructor:cs,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(hs,{toJSON:function(t){var e,n=t.constructor;return void 0!==n.toJSON?e=n.toJSON(t):(e={name:t.name,times:is.convertArray(t.times,Array),values:is.convertArray(t.values,Array)},(n=t.getInterpolation())!==t.DefaultInterpolation&&(e.interpolation=n)),e.type=t.ValueTypeName,e}}),Object.assign(hs.prototype,{constructor:hs,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new cs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new ss(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new os(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)return this.createInterpolant=e,this;var n=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn(\"THREE.KeyframeTrack:\",n),this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n,r=this.times,i=r.length,a=0,o=i-1;a!==i&&r[a]<t;)++a;for(;-1!==o&&r[o]>e;)--o;return++o,0===a&&o===i||(o<=a&&(a=(o=Math.max(o,1))-1),n=this.getValueSize(),this.times=is.arraySlice(r,a,o),this.values=is.arraySlice(this.values,a*n,o*n)),this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",this),t=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if(\"number\"==typeof s&&isNaN(s)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,o,s),t=!1;break}if(null!==a&&s<a){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,o,s,a),t=!1;break}a=s}if(void 0!==r&&is.isTypedArray(r))for(var c=0,h=r.length;c!==h;++c){var l=r[c];if(isNaN(l)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,c,l),t=!1;break}}return t},optimize:function(){for(var t=is.arraySlice(this.times),e=is.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=t.length-1,a=1,o=1;o<i;++o){var s=!1,c=t[o];if(c!==t[o+1]&&(1!==o||c!==c[0]))if(r)s=!0;else for(var h=o*n,l=h-n,u=h+n,d=0;d!==n;++d){var p=e[h+d];if(p!==e[l+d]||p!==e[u+d]){s=!0;break}}if(s){if(o!==a){t[a]=t[o];for(var f=o*n,m=a*n,g=0;g!==n;++g)e[m+g]=e[f+g]}++a}}if(0<i){t[a]=t[i];for(var v=i*n,y=a*n,M=0;M!==n;++M)e[y+M]=e[v+M];++a}return a!==t.length?(this.times=is.arraySlice(t,0,a),this.values=is.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this},clone:function(){var t=is.arraySlice(this.times,0),e=is.arraySlice(this.values,0);return(e=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,e}}),ls.prototype=Object.assign(Object.create(hs.prototype),{constructor:ls,ValueTypeName:\"bool\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),us.prototype=Object.assign(Object.create(hs.prototype),{constructor:us,ValueTypeName:\"color\"}),ds.prototype=Object.assign(Object.create(hs.prototype),{constructor:ds,ValueTypeName:\"number\"}),ps.prototype=Object.assign(Object.create(as.prototype),{constructor:ps,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-e)/(r-e),c=t*o,h=c+o;c!==h;c+=4)j.slerpFlat(i,0,a,c-o,a,c,s);return i}}),fs.prototype=Object.assign(Object.create(hs.prototype),{constructor:fs,ValueTypeName:\"quaternion\",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new ps(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),ms.prototype=Object.assign(Object.create(hs.prototype),{constructor:ms,ValueTypeName:\"string\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),gs.prototype=Object.assign(Object.create(hs.prototype),{constructor:gs,ValueTypeName:\"vector\"}),Object.assign(vs,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,a=n.length;i!==a;++i)e.push(ys(n[i]).scale(r));return new vs(t.name,t.duration,e,t.blendMode)},toJSON:function(t){for(var e=[],n=t.tracks,r=(t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},0),i=n.length;r!==i;++r)e.push(hs.toJSON(n[r]));return t},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,a=[],o=0;o<i;o++){var s=[];(h=[]).push((o+i-1)%i,o,(o+1)%i),s.push(0,1,0);var c=is.getKeyframeOrder(h),h=is.sortedArray(h,1,c);s=is.sortedArray(s,1,c);r||0!==h[0]||(h.push(i),s.push(s[0])),a.push(new ds(\".morphTargetInfluences[\"+e[o].name+\"]\",h,s).scale(1/n))}return new vs(t,-1,a)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\\w-]*?)([\\d]+)$/,a=0,o=t.length;a<o;a++){var s,c=t[a],h=c.name.match(i);h&&1<h.length&&((h=r[s=h[1]])||(r[s]=h=[]),h.push(c))}var l,u=[];for(l in r)u.push(vs.CreateFromMorphTargetSequence(l,r[l],e,n));return u},parseAnimation:function(t,e){if(!t)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;for(var n=function(t,e,n,r,i){var a;0!==n.length&&(is.flattenJSON(n,a=[],n=[],r),0!==a.length&&i.push(new t(e,a,n)))},r=[],i=t.name||\"default\",a=t.fps||30,o=t.blendMode,s=t.length||-1,c=t.hierarchy||[],h=0;h<c.length;h++){var l=c[h].keys;if(l&&0!==l.length)if(l[0].morphTargets){var u,d={},p=void 0;for(p=0;p<l.length;p++)if(l[p].morphTargets)for(var f=0;f<l[p].morphTargets.length;f++)d[l[p].morphTargets[f]]=-1;for(u in d){for(var m=[],g=[],v=0;v!==l[p].morphTargets.length;++v){var y=l[p];m.push(y.time),g.push(y.morphTarget===u?1:0)}r.push(new ds(\".morphTargetInfluence[\"+u+\"]\",m,g))}s=d.length*(a||1)}else{var M=\".bones[\"+e[h].name+\"]\";n(gs,M+\".position\",l,\"pos\",r),n(fs,M+\".quaternion\",l,\"rot\",r),n(gs,M+\".scale\",l,\"scl\",r)}}return 0===r.length?null:new vs(i,s,r,o)}}),Object.assign(vs.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new vs(this.name,this.duration,t,this.blendMode)}});var Ms={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function xs(t,e,n){var r=this,i=!1,a=0,o=0,s=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===i&&void 0!==r.onStart&&r.onStart(t,a,o),i=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return c.push(t,e),this},this.removeHandler=function(t){return-1!==(t=c.indexOf(t))&&c.splice(t,2),this},this.getHandler=function(t){for(var e=0,n=c.length;e<n;e+=2){var r=c[e],i=c[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}}var bs=new xs;function _s(t){this.manager=void 0!==t?t:bs,this.crossOrigin=\"anonymous\",this.path=\"\",this.resourcePath=\"\",this.requestHeader={}}Object.assign(_s.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var Ss={};function ws(t){_s.call(this,t)}function Es(t){_s.call(this,t)}function Rs(t){_s.call(this,t)}function Ts(t){_s.call(this,t)}function As(t){_s.call(this,t)}function Ls(t){_s.call(this,t)}function Ps(t){_s.call(this,t)}function Cs(){this.type=\"Curve\",this.arcLengthDivisions=200}function Os(t,e,n,r,i,a,o,s){Cs.call(this),this.type=\"EllipseCurve\",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Is(t,e,n,r,i,a){Os.call(this,t,e,n,n,r,i,a),this.type=\"ArcCurve\"}function Ns(){var t=0,e=0,n=0,r=0;function i(i,a,o,s){n=-3*(t=i)+3*a-2*(e=o)-s,r=2*i-2*a+o+s}return{initCatmullRom:function(t,e,n,r,a){i(e,n,a*(n-t),a*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,a,o,s){a=(e-t)/a-(n-t)/(a+o)+(n-e)/o,s=(n-e)/o-(r-e)/(o+s)+(r-n)/s,i(e,n,a*=o,s*=o)},calc:function(i){var a=i*i;return t+e*i+n*a+r*(a*i)}}}ws.prototype=Object.assign(Object.create(_s.prototype),{constructor:ws,load:function(t,e,n,r){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=Ms.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;if(void 0===Ss[t]){var o,s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var c=s[1],h=!!s[2],l=s[3];l=decodeURIComponent(l);h&&(l=atob(l));try{var u=(this.responseType||\"\").toLowerCase();switch(u){case\"arraybuffer\":case\"blob\":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);f=\"blob\"===u?new Blob([d.buffer],{type:c}):d.buffer;break;case\"document\":var f=(new DOMParser).parseFromString(l,c);break;case\"json\":f=JSON.parse(l);break;default:f=l}setTimeout((function(){e&&e(f),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{for(var m in Ss[t]=[],Ss[t].push({onLoad:e,onProgress:n,onError:r}),(o=new XMLHttpRequest).open(\"GET\",t,!0),o.addEventListener(\"load\",(function(e){var n=this.response,r=Ss[t];if(delete Ss[t],200===this.status||0===this.status){0===this.status&&console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),Ms.add(t,n);for(var a=0,o=r.length;a<o;a++){var s=r[a];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(var c=0,h=r.length;c<h;c++){var l=r[c];l.onError&&l.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),o.addEventListener(\"progress\",(function(e){for(var n=Ss[t],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(e)}}),!1),o.addEventListener(\"error\",(function(e){var n=Ss[t];delete Ss[t];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),o.addEventListener(\"abort\",(function(e){var n=Ss[t];delete Ss[t];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\"),this.requestHeader)o.setRequestHeader(m,this.requestHeader[m]);o.send(null)}return i.manager.itemStart(t),o}Ss[t].push({onLoad:e,onProgress:n,onError:r})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Es.prototype=Object.assign(Object.create(_s.prototype),{constructor:Es,load:function(t,e,n,r){var i=this,a=new ws(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(n){r?r(n):console.error(n),i.manager.itemError(t)}}),n,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var r=vs.parse(t[n]);e.push(r)}return e}}),Rs.prototype=Object.assign(Object.create(_s.prototype),{constructor:Rs,load:function(t,e,n,r){var i=this,a=[],o=new Fa;o.image=a;var s=new ws(this.manager);s.setPath(this.path),s.setResponseType(\"arraybuffer\"),s.setRequestHeader(this.requestHeader);var c=0;if(Array.isArray(t))for(var h=0,l=t.length;h<l;++h)!function(h){s.load(t[h],(function(t){t=i.parse(t,!0),a[h]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(o.minFilter=v),o.format=t.format,o.needsUpdate=!0,e&&e(o))}),n,r)}(h);else s.load(t,(function(t){var n=i.parse(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=v),o.format=n.format,o.needsUpdate=!0,e&&e(o)}),n,r);return o}}),Ts.prototype=Object.assign(Object.create(_s.prototype),{constructor:Ts,load:function(t,e,n,r){var i=this,a=new _n,o=new ws(this.manager);return o.setResponseType(\"arraybuffer\"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.load(t,(function(t){(t=i.parse(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:m,a.wrapT=void 0!==t.wrapT?t.wrapT:m,a.magFilter=void 0!==t.magFilter?t.magFilter:v,a.minFilter=void 0!==t.minFilter?t.minFilter:v,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps,a.minFilter=1008),1===t.mipmapCount&&(a.minFilter=v),a.needsUpdate=!0,e&&e(a,t))}),n,r),a}}),As.prototype=Object.assign(Object.create(_s.prototype),{constructor:As,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=Ms.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;var o=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"img\");function s(){o.removeEventListener(\"load\",s,!1),o.removeEventListener(\"error\",c,!1),Ms.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(e){o.removeEventListener(\"load\",s,!1),o.removeEventListener(\"error\",c,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return o.addEventListener(\"load\",s,!1),o.addEventListener(\"error\",c,!1),\"data:\"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(t),o.src=t,o}}),Ls.prototype=Object.assign(Object.create(_s.prototype),{constructor:Ls,load:function(t,e,n,r){var i=new Yn,a=new As(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<t.length;++s)!function(n){a.load(t[n],(function(t){i.images[n]=t,6==++o&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}(s);return i}}),Ps.prototype=Object.assign(Object.create(_s.prototype),{constructor:Ps,load:function(t,e,n,r){var i=new U,a=new As(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(n){i.image=n,n=0<t.search(/\\.jpe?g($|\\?)/i)||0===t.search(/^data\\:image\\/jpeg/),i.format=n?x:b,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(Cs.prototype,{getPoint:function(){return console.warn(\"THREE.Curve: .getPoint() not implemented.\"),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=t;a++)i+=(e=this.getPoint(a/t)).distanceTo(r),n.push(i),r=e;return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){for(var n,r=this.getLengths(),i=0,a=r.length,o=e||t*r[a-1],s=0,c=a-1;s<=c;)if((n=r[i=Math.floor(s+(c-s)/2)]-o)<0)s=i+1;else{if(!(0<n)){c=i;break}c=i-1}return r[i=c]===o?i/(a-1):(i+(o-(t=r[i]))/(r[i+1]-t))/(a-1)},getTangent:function(t,e){var n=t-1e-4;return 1<(t=t+1e-4)&&(t=1),n=this.getPoint(n=n<0?0:n),t=this.getPoint(t),(e=e||new(n.isVector2?D:Y)).copy(t).sub(n).normalize(),e},getTangentAt:function(t,e){return t=this.getUtoTmapping(t),this.getTangent(t,e)},computeFrenetFrames:function(t,e){for(var n=new Y,r=[],i=[],a=[],o=new Y,s=new et,c=0;c<=t;c++)r[c]=this.getTangentAt(c/t,new Y),r[c].normalize();i[0]=new Y,a[0]=new Y;var h=Number.MAX_VALUE,l=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);l<=h&&(h=l,n.set(1,0,0)),u<=h&&(h=u,n.set(0,1,0)),d<=h&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p,f=1;f<=t;f++)i[f]=i[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(r[f-1],r[f]),o.length()>Number.EPSILON&&(o.normalize(),p=Math.acos(N.clamp(r[f-1].dot(r[f]),-1,1)),i[f].applyMatrix4(s.makeRotationAxis(o,p))),a[f].crossVectors(r[f],i[f]);if(!0===e){var m=Math.acos(N.clamp(i[0].dot(i[t]),-1,1));m/=t,0<r[0].dot(o.crossVectors(i[0],i[t]))&&(m=-m);for(var g=1;g<=t;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),((Os.prototype=Object.create(Cs.prototype)).constructor=Os).prototype.isEllipseCurve=!0,Os.prototype.getPoint=function(t,e){for(var n=e||new D,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;r<i;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);return 0!==this.aRotation&&(e=Math.cos(this.aRotation),a=Math.sin(this.aRotation),s=(t=s-this.aX)*e-(o=c-this.aY)*a+this.aX,c=t*a+o*e+this.aY),n.set(s,c)},Os.prototype.copy=function(t){return Cs.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Os.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Os.prototype.fromJSON=function(t){return Cs.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},((Is.prototype=Object.create(Os.prototype)).constructor=Is).prototype.isArcCurve=!0;var Ds=new Y,Fs=new Ns,zs=new Ns,Bs=new Ns;function Us(t,e,n,r){Cs.call(this),this.type=\"CatmullRomCurve3\",this.points=t||[],this.closed=e||!1,this.curveType=n||\"centripetal\",this.tension=void 0!==r?r:.5}function Hs(t,e,n,r,i){var a=.5*(r-e);return(2*n-2*r+a+(e=.5*(i-n)))*(t*(i=t*t))+(-3*n+3*r-2*a-e)*i+a*t+n}function Gs(t,e,n,r){return(i=1-(i=t))*i*e+2*(1-t)*t*n+t*t*r;var i}function ks(t,e,n,r,i){return(a=1-(a=t))*a*a*e+3*(e=1-t)*e*t*n+3*(1-t)*t*t*r+t*t*t*i;var a}function js(t,e,n,r){Cs.call(this),this.type=\"CubicBezierCurve\",this.v0=t||new D,this.v1=e||new D,this.v2=n||new D,this.v3=r||new D}function Vs(t,e,n,r){Cs.call(this),this.type=\"CubicBezierCurve3\",this.v0=t||new Y,this.v1=e||new Y,this.v2=n||new Y,this.v3=r||new Y}function Ws(t,e){Cs.call(this),this.type=\"LineCurve\",this.v1=t||new D,this.v2=e||new D}function Ys(t,e){Cs.call(this),this.type=\"LineCurve3\",this.v1=t||new Y,this.v2=e||new Y}function qs(t,e,n){Cs.call(this),this.type=\"QuadraticBezierCurve\",this.v0=t||new D,this.v1=e||new D,this.v2=n||new D}function Xs(t,e,n){Cs.call(this),this.type=\"QuadraticBezierCurve3\",this.v0=t||new Y,this.v1=e||new Y,this.v2=n||new Y}function Ks(t){Cs.call(this),this.type=\"SplineCurve\",this.points=t||[]}((Us.prototype=Object.create(Cs.prototype)).constructor=Us).prototype.isCatmullRomCurve3=!0,Us.prototype.getPoint=function(t,e){var n,r=e||new Y,i=this.points,a=i.length,o=(a-(this.closed?0:1))*t,s=Math.floor(o),c=o-s;return this.closed?s+=0<s?0:(Math.floor(Math.abs(s)/a)+1)*a:0===c&&s===a-1&&(s=a-2,c=1),n=this.closed||0<s?i[(s-1)%a]:(Ds.subVectors(i[0],i[1]).add(i[0]),Ds),e=i[s%a],t=i[(s+1)%a],o=this.closed||s+2<a?i[(s+2)%a]:(Ds.subVectors(i[a-1],i[a-2]).add(i[a-1]),Ds),\"centripetal\"===this.curveType||\"chordal\"===this.curveType?(s=\"chordal\"===this.curveType?.5:.25,i=Math.pow(n.distanceToSquared(e),s),(a=Math.pow(e.distanceToSquared(t),s))<1e-4&&(a=1),i<1e-4&&(i=a),(s=Math.pow(t.distanceToSquared(o),s))<1e-4&&(s=a),Fs.initNonuniformCatmullRom(n.x,e.x,t.x,o.x,i,a,s),zs.initNonuniformCatmullRom(n.y,e.y,t.y,o.y,i,a,s),Bs.initNonuniformCatmullRom(n.z,e.z,t.z,o.z,i,a,s)):\"catmullrom\"===this.curveType&&(Fs.initCatmullRom(n.x,e.x,t.x,o.x,this.tension),zs.initCatmullRom(n.y,e.y,t.y,o.y,this.tension),Bs.initCatmullRom(n.z,e.z,t.z,o.z,this.tension)),r.set(Fs.calc(c),zs.calc(c),Bs.calc(c)),r},Us.prototype.copy=function(t){Cs.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Us.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Us.prototype.fromJSON=function(t){Cs.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new Y).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},((js.prototype=Object.create(Cs.prototype)).constructor=js).prototype.isCubicBezierCurve=!0,js.prototype.getPoint=function(t,e){var n=e||new D,r=this.v0,i=this.v1,a=this.v2;e=this.v3;return n.set(ks(t,r.x,i.x,a.x,e.x),ks(t,r.y,i.y,a.y,e.y)),n},js.prototype.copy=function(t){return Cs.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},js.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},js.prototype.fromJSON=function(t){return Cs.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},((Vs.prototype=Object.create(Cs.prototype)).constructor=Vs).prototype.isCubicBezierCurve3=!0,Vs.prototype.getPoint=function(t,e){var n=e||new Y,r=this.v0,i=this.v1,a=this.v2;e=this.v3;return n.set(ks(t,r.x,i.x,a.x,e.x),ks(t,r.y,i.y,a.y,e.y),ks(t,r.z,i.z,a.z,e.z)),n},Vs.prototype.copy=function(t){return Cs.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Vs.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Vs.prototype.fromJSON=function(t){return Cs.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},((Ws.prototype=Object.create(Cs.prototype)).constructor=Ws).prototype.isLineCurve=!0,Ws.prototype.getPoint=function(t,e){return e=e||new D,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Ws.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ws.prototype.getTangent=function(t,e){return(e=e||new D).copy(this.v2).sub(this.v1).normalize(),e},Ws.prototype.copy=function(t){return Cs.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ws.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ws.prototype.fromJSON=function(t){return Cs.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((Ys.prototype=Object.create(Cs.prototype)).constructor=Ys).prototype.isLineCurve3=!0,Ys.prototype.getPoint=function(t,e){return e=e||new Y,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Ys.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ys.prototype.copy=function(t){return Cs.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ys.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ys.prototype.fromJSON=function(t){return Cs.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((qs.prototype=Object.create(Cs.prototype)).constructor=qs).prototype.isQuadraticBezierCurve=!0,qs.prototype.getPoint=function(t,e){var n=e||new D,r=this.v0,i=this.v1;e=this.v2;return n.set(Gs(t,r.x,i.x,e.x),Gs(t,r.y,i.y,e.y)),n},qs.prototype.copy=function(t){return Cs.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},qs.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},qs.prototype.fromJSON=function(t){return Cs.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((Xs.prototype=Object.create(Cs.prototype)).constructor=Xs).prototype.isQuadraticBezierCurve3=!0,Xs.prototype.getPoint=function(t,e){var n=e||new Y,r=this.v0,i=this.v1;e=this.v2;return n.set(Gs(t,r.x,i.x,e.x),Gs(t,r.y,i.y,e.y),Gs(t,r.z,i.z,e.z)),n},Xs.prototype.copy=function(t){return Cs.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Xs.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Xs.prototype.fromJSON=function(t){return Cs.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((Ks.prototype=Object.create(Cs.prototype)).constructor=Ks).prototype.isSplineCurve=!0,Ks.prototype.getPoint=function(t,e){var n=e||new D,r=this.points,i=(a=(r.length-1)*t)-(o=Math.floor(a)),a=(e=r[0===o?o:o-1],t=r[o],r[o>r.length-2?r.length-1:o+1]),o=r[o>r.length-3?r.length-1:o+2];return n.set(Hs(i,e.x,t.x,a.x,o.x),Hs(i,e.y,t.y,a.y,o.y)),n},Ks.prototype.copy=function(t){Cs.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},Ks.prototype.toJSON=function(){var t=Cs.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},Ks.prototype.fromJSON=function(t){Cs.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new D).fromArray(r))}return this};var Zs=Object.freeze({__proto__:null,ArcCurve:Is,CatmullRomCurve3:Us,CubicBezierCurve:js,CubicBezierCurve3:Vs,EllipseCurve:Os,LineCurve:Ws,LineCurve3:Ys,QuadraticBezierCurve:qs,QuadraticBezierCurve3:Xs,SplineCurve:Ks});function Js(){Cs.call(this),this.type=\"CurvePath\",this.curves=[],this.autoClose=!1}function Qs(t){Js.call(this),this.type=\"Path\",this.currentPoint=new D,t&&this.setFromPoints(t)}function $s(t){Qs.call(this,t),this.uuid=N.generateUUID(),this.type=\"Shape\",this.holes=[]}function tc(t,e){Mt.call(this),this.type=\"Light\",this.color=new le(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function ec(t,e,n){tc.call(this,t,n),this.type=\"HemisphereLight\",this.castShadow=void 0,this.position.copy(Mt.DefaultUp),this.updateMatrix(),this.groundColor=new le(e)}function nc(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new D(512,512),this.map=null,this.mapPass=null,this.matrix=new et,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new En,this._frameExtents=new D(1,1),this._viewportCount=1,this._viewports=[new H(0,0,1,1)]}function rc(){nc.call(this,new Mn(50,1,.5,500))}function ic(t,e,n,r,i,a){tc.call(this,t,e),this.type=\"SpotLight\",this.position.copy(Mt.DefaultUp),this.updateMatrix(),this.target=new Mt,Object.defineProperty(this,\"power\",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new rc}function ac(){nc.call(this,new Mn(90,1,.5,500)),this._frameExtents=new D(4,2),this._viewportCount=6,this._viewports=[new H(2,1,1,1),new H(0,1,1,1),new H(3,1,1,1),new H(1,1,1,1),new H(3,0,1,1),new H(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}function oc(t,e,n,r){tc.call(this,t,e),this.type=\"PointLight\",Object.defineProperty(this,\"power\",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new ac}function sc(t,e,n,r,i,a){yn.call(this),this.type=\"OrthographicCamera\",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function cc(){nc.call(this,new sc(-5,5,5,-5,.5,500))}function hc(t,e){tc.call(this,t,e),this.type=\"DirectionalLight\",this.position.copy(Mt.DefaultUp),this.updateMatrix(),this.target=new Mt,this.shadow=new cc}function lc(t,e){tc.call(this,t,e),this.type=\"AmbientLight\",this.castShadow=void 0}function uc(t,e,n,r){tc.call(this,t,e),this.type=\"RectAreaLight\",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function dc(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Y)}function pc(t,e){tc.call(this,void 0,e),this.type=\"LightProbe\",this.sh=void 0!==t?t:new dc}function fc(t){_s.call(this,t),this.textures={}}Js.prototype=Object.assign(Object.create(Cs.prototype),{constructor:Js,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ws(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,a=this.curves[r],o=a.getLength();return a.getPointAt(0===o?0:1-i/o)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),c=0;c<s.length;c++){var h=s[c];e&&e.equals(h)||(n.push(h),e=h)}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Cs.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Cs.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){Cs.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new Zs[r.type]).fromJSON(r))}return this}}),Qs.prototype=Object.assign(Object.create(Js.prototype),{constructor:Qs,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new Ws(this.currentPoint.clone(),new D(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){return e=new qs(this.currentPoint.clone(),new D(t,e),new D(n,r)),this.curves.push(e),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,a){return r=new js(this.currentPoint.clone(),new D(t,e),new D(n,r),new D(i,a)),this.curves.push(r),this.currentPoint.set(i,a),this},splineThru:function(t){var e=new Ks([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,n,r,i,a),this},absarc:function(t,e,n,r,i,a){return this.absellipse(t,e,n,n,r,i,a),this},ellipse:function(t,e,n,r,i,a,o,s){var c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+c,e+h,n,r,i,a,o,s),this},absellipse:function(t,e,n,r,i,a,o,s){return o=new Os(t,e,n,r,i,a,o,s),0<this.curves.length&&((s=o.getPoint(0)).equals(this.currentPoint)||this.lineTo(s.x,s.y)),this.curves.push(o),o=o.getPoint(1),this.currentPoint.copy(o),this},copy:function(t){return Js.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Js.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Js.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),$s.prototype=Object.assign(Object.create(Qs.prototype),{constructor:$s,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Qs.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=Qs.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){Qs.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new Qs).fromJSON(r))}return this}}),tc.prototype=Object.assign(Object.create(Mt.prototype),{constructor:tc,isLight:!0,copy:function(t){return Mt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=Mt.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ec.prototype=Object.assign(Object.create(tc.prototype),{constructor:ec,isHemisphereLight:!0,copy:function(t){return tc.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(nc.prototype,{_projScreenMatrix:new et,_lightPositionWorld:new Y,_lookTarget:new Y,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),rc.prototype=Object.assign(Object.create(nc.prototype),{constructor:rc,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*N.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),nc.prototype.updateMatrices.call(this,t)}}),ic.prototype=Object.assign(Object.create(tc.prototype),{constructor:ic,isSpotLight:!0,copy:function(t){return tc.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ac.prototype=Object.assign(Object.create(nc.prototype),{constructor:ac,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;i.setFromMatrixPosition(t.matrixWorld),n.position.copy(i),a.copy(n.position),a.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(a),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),oc.prototype=Object.assign(Object.create(tc.prototype),{constructor:oc,isPointLight:!0,copy:function(t){return tc.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),sc.prototype=Object.assign(Object.create(yn.prototype),{constructor:sc,isOrthographicCamera:!0,copy:function(t,e){return yn.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,a=n+t;n=r+e,t=r-e;null!==this.view&&this.view.enabled&&(r=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,a=(i+=r*this.view.offsetX)+r*this.view.width,t=(n-=e*this.view.offsetY)-e*this.view.height),this.projectionMatrix.makeOrthographic(i,a,n,t,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=Mt.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),cc.prototype=Object.assign(Object.create(nc.prototype),{constructor:cc,isDirectionalLightShadow:!0,updateMatrices:function(t){nc.prototype.updateMatrices.call(this,t)}}),hc.prototype=Object.assign(Object.create(tc.prototype),{constructor:hc,isDirectionalLight:!0,copy:function(t){return tc.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),lc.prototype=Object.assign(Object.create(tc.prototype),{constructor:lc,isAmbientLight:!0}),uc.prototype=Object.assign(Object.create(tc.prototype),{constructor:uc,isRectAreaLight:!0,copy:function(t){return tc.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=tc.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),Object.assign(dc.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,r=t.y,i=t.z;t=this.coefficients;return e.copy(t[0]).multiplyScalar(.282095),e.addScaledVector(t[1],.488603*r),e.addScaledVector(t[2],.488603*i),e.addScaledVector(t[3],.488603*n),e.addScaledVector(t[4],n*r*1.092548),e.addScaledVector(t[5],r*i*1.092548),e.addScaledVector(t[6],.315392*(3*i*i-1)),e.addScaledVector(t[7],n*i*1.092548),e.addScaledVector(t[8],.546274*(n*n-r*r)),e},getIrradianceAt:function(t,e){var n=t.x,r=t.y,i=t.z;t=this.coefficients;return e.copy(t[0]).multiplyScalar(.886227),e.addScaledVector(t[1],1.023328*r),e.addScaledVector(t[2],1.023328*i),e.addScaledVector(t[3],1.023328*n),e.addScaledVector(t[4],.858086*n*r),e.addScaledVector(t[5],.858086*r*i),e.addScaledVector(t[6],.743125*i*i-.247708),e.addScaledVector(t[7],.858086*n*i),e.addScaledVector(t[8],.429043*(n*n-r*r)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},addScaledSH:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}),Object.assign(dc,{getBasisAt:function(t,e){var n=t.x,r=t.y;t=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*t,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*n*t,e[8]=.546274*(n*n-r*r)}}),pc.prototype=Object.assign(Object.create(tc.prototype),{constructor:pc,isLightProbe:!0,copy:function(t){return tc.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){return(t=tc.prototype.toJSON.call(this,t)).object.sh=this.sh.toArray(),t}}),fc.prototype=Object.assign(Object.create(_s.prototype),{constructor:fc,load:function(t,e,n,r){var i=this,a=new ws(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(n){r?r(n):console.error(n),i.manager.itemError(t)}}),n,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",t),e[t]}var r,i=new rs[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=(new le).setHex(t.sheen)),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.vertexTangents&&(i.vertexTangents=t.vertexTangents),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&(\"number\"==typeof t.vertexColors?i.vertexColors=0<t.vertexColors:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var a in t.uniforms){var o=t.uniforms[a];switch(i.uniforms[a]={},o.type){case\"t\":i.uniforms[a].value=n(o.value);break;case\"c\":i.uniforms[a].value=(new le).setHex(o.value);break;case\"v2\":i.uniforms[a].value=(new D).fromArray(o.value);break;case\"v3\":i.uniforms[a].value=(new Y).fromArray(o.value);break;case\"v4\":i.uniforms[a].value=(new H).fromArray(o.value);break;case\"m3\":i.uniforms[a].value=(new F).fromArray(o.value);case\"m4\":i.uniforms[a].value=(new et).fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var s in t.extensions)i.extensions[s]=t.extensions[s];return void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale&&(r=t.normalScale,!1===Array.isArray(r)&&(r=[r,r]),i.normalScale=(new D).fromArray(r)),void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new D).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),i},setTextures:function(t){return this.textures=t,this}});var mc=function(t){var e=t.lastIndexOf(\"/\");return-1===e?\"./\":t.substr(0,e+1)};function gc(){Ue.call(this),this.type=\"InstancedBufferGeometry\",this.instanceCount=1/0}function vc(t,e,n,r){\"number\"==typeof n&&(r=n,n=!1,console.error(\"THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.\")),xe.call(this,t,e,n),this.meshPerAttribute=r||1}function yc(t){_s.call(this,t)}gc.prototype=Object.assign(Object.create(Ue.prototype),{constructor:gc,isInstancedBufferGeometry:!0,copy:function(t){return Ue.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Ue.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),vc.prototype=Object.assign(Object.create(xe.prototype),{constructor:vc,isInstancedBufferAttribute:!0,copy:function(t){return xe.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=xe.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),yc.prototype=Object.assign(Object.create(_s.prototype),{constructor:yc,load:function(t,e,n,r){var i=this,a=new ws(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(n){r?r(n):console.error(n),i.manager.itemError(t)}}),n,r)},parse:function(t){var e={},n={};function r(t,r){if(void 0!==e[r])return e[r];var i=t.interleavedBuffers[r];t=function(t,e){return void 0!==n[e]?n[e]:(t=t.arrayBuffers[e],t=new Uint32Array(t).buffer,n[e]=t)}(t,i.buffer);return(t=new Ni(new Mc[i.type](t),i.stride)).uuid=i.uuid,e[r]=t}var i=new(t.isInstancedBufferGeometry?gc:Ue);void 0!==(M=t.data.index)&&(y=new Mc[M.type](M.array),i.setIndex(new xe(y,1)));var a,o=t.data.attributes;for(a in o){var s,c=o[a],h=void 0;h=c.isInterleavedBufferAttribute?new zi(r(t.data,c.data),c.itemSize,c.offset,c.normalized):(s=new Mc[c.type](c.array),new(c.isInstancedBufferAttribute?vc:xe)(s,c.itemSize,c.normalized)),void 0!==c.name&&(h.name=c.name),i.setAttribute(a,h)}var l=t.data.morphAttributes;if(l)for(var u in l){for(var d=l[u],p=[],f=0,m=d.length;f<m;f++){var g=d[f],v=void 0;v=g.isInterleavedBufferAttribute?new zi(r(t.data,g.data),g.itemSize,g.offset,g.normalized):new xe(new Mc[g.type](g.array),g.itemSize,g.normalized),void 0!==g.name&&(v.name=g.name),p.push(v)}i.morphAttributes[u]=p}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var y,M,x=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==x)for(var b=0,_=x.length;b!==_;++b){var S=x[b];i.addGroup(S.start,S.count,S.materialIndex)}return void 0!==(M=t.data.boundingSphere)&&(y=new Y,void 0!==M.center&&y.fromArray(M.center),i.boundingSphere=new zt(y,M.radius)),t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}});var Mc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:\"undefined\"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function xc(t){_s.call(this,t)}xc.prototype=Object.assign(Object.create(_s.prototype),{constructor:xc,load:function(t,e,n,r){var i=this,a=\"\"===this.path?mc(t):this.path;this.resourcePath=this.resourcePath||a,(a=new ws(i.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(t,(function(n){var a=null;try{a=JSON.parse(n)}catch(n){return void 0!==r&&r(n),void console.error(\"THREE:ObjectLoader: Can't parse \"+t+\".\",n.message)}void 0!==(n=a.metadata)&&void 0!==n.type&&\"geometry\"!==n.type.toLowerCase()?i.parse(a,e):console.error(\"THREE.ObjectLoader: Can't load \"+t)}),n,r)},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=(n=this.parseImages(t.images,(function(){void 0!==e&&e(i)})),n=this.parseTextures(t.textures,n),n=this.parseMaterials(t.materials,n),this.parseObject(t.object,r,n));return t.animations&&(i.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(i),i},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new $s).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new yc,i=0,a=t.length;i<a;i++){var o=void 0,s=t[i];switch(s.type){case\"PlaneGeometry\":case\"PlaneBufferGeometry\":o=new Yo[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case\"BoxGeometry\":case\"BoxBufferGeometry\":case\"CubeGeometry\":o=new Yo[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case\"CircleGeometry\":case\"CircleBufferGeometry\":o=new Yo[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case\"CylinderGeometry\":case\"CylinderBufferGeometry\":o=new Yo[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case\"ConeGeometry\":case\"ConeBufferGeometry\":o=new Yo[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case\"SphereGeometry\":case\"SphereBufferGeometry\":o=new Yo[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case\"DodecahedronGeometry\":case\"DodecahedronBufferGeometry\":case\"IcosahedronGeometry\":case\"IcosahedronBufferGeometry\":case\"OctahedronGeometry\":case\"OctahedronBufferGeometry\":case\"TetrahedronGeometry\":case\"TetrahedronBufferGeometry\":o=new Yo[s.type](s.radius,s.detail);break;case\"RingGeometry\":case\"RingBufferGeometry\":o=new Yo[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case\"TorusGeometry\":case\"TorusBufferGeometry\":o=new Yo[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case\"TorusKnotGeometry\":case\"TorusKnotBufferGeometry\":o=new Yo[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case\"TubeGeometry\":case\"TubeBufferGeometry\":o=new Yo[s.type]((new Zs[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case\"LatheGeometry\":case\"LatheBufferGeometry\":o=new Yo[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case\"PolyhedronGeometry\":case\"PolyhedronBufferGeometry\":o=new Yo[s.type](s.vertices,s.indices,s.radius,s.details);break;case\"ShapeGeometry\":case\"ShapeBufferGeometry\":for(var c=[],h=0,l=s.shapes.length;h<l;h++){var u=e[s.shapes[h]];c.push(u)}o=new Yo[s.type](c,s.curveSegments);break;case\"ExtrudeGeometry\":case\"ExtrudeBufferGeometry\":c=[];for(var d=0,p=s.shapes.length;d<p;d++){var f=e[s.shapes[d]];c.push(f)}var m=s.options.extrudePath;void 0!==m&&(s.options.extrudePath=(new Zs[m.type]).fromJSON(m)),o=new Yo[s.type](c,s.options);break;case\"BufferGeometry\":case\"InstancedBufferGeometry\":o=r.parse(s);break;case\"Geometry\":console.error('THREE.ObjectLoader: Loading \"Geometry\" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+s.type+'\"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(t,e){var n={},r={};if(void 0!==t){var i=new fc;i.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if(\"MultiMaterial\"===s.type){for(var c=[],h=0;h<s.materials.length;h++){var l=s.materials[h];void 0===n[l.uuid]&&(n[l.uuid]=i.parse(l)),c.push(n[l.uuid])}r[s.uuid]=c}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=vs.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={};function i(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&0<t.length){var a;e=new xs(e);(a=new As(e)).setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var c=t[o],h=c.url;if(Array.isArray(h)){r[c.uuid]=[];for(var l=0,u=h.length;l<u;l++){var d=h[l];d=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(d)?d:n.resourcePath+d;r[c.uuid].push(i(d))}}else{var p=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;r[c.uuid]=i(p)}}}return r},parseTextures:function(t,e){function n(t,e){return\"number\"==typeof t?t:(console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",t),e[t])}var r={};if(void 0!==t)for(var i=0,a=t.length;i<a;i++){var o=t[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',o.uuid),void 0===e[o.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",o.image);var s=void 0;(s=new(Array.isArray(e[o.image])?Yn:U)(e[o.image])).needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,_c)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Sc),s.wrapT=n(o.wrap[1],Sc)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,wc)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,wc)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r},parseObject:function(t,e,n){function r(t){return void 0===e[t]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",t),e[t]}function i(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var a=t[r];void 0===n[a]&&console.warn(\"THREE.ObjectLoader: Undefined material\",a),e.push(n[a])}return e}return void 0===n[t]&&console.warn(\"THREE.ObjectLoader: Undefined material\",t),n[t]}}switch(t.type){case\"Scene\":a=new xt,void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new le(t.background)),void 0!==t.fog&&(\"Fog\"===t.fog.type?a.fog=new Ii(t.fog.color,t.fog.near,t.fog.far):\"FogExp2\"===t.fog.type&&(a.fog=new Oi(t.fog.color,t.fog.density)));break;case\"PerspectiveCamera\":a=new Mn(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case\"OrthographicCamera\":a=new sc(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case\"AmbientLight\":a=new lc(t.color,t.intensity);break;case\"DirectionalLight\":a=new hc(t.color,t.intensity);break;case\"PointLight\":a=new oc(t.color,t.intensity,t.distance,t.decay);break;case\"RectAreaLight\":a=new uc(t.color,t.intensity,t.width,t.height);break;case\"SpotLight\":a=new ic(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case\"HemisphereLight\":a=new ec(t.color,t.groundColor,t.intensity);break;case\"LightProbe\":a=(new pc).fromJSON(t);break;case\"SkinnedMesh\":console.warn(\"THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.\");case\"Mesh\":a=new rn(o=r(t.geometry),s=i(t.material));break;case\"InstancedMesh\":var a,o=r(t.geometry),s=i(t.material),c=t.count,h=t.instanceMatrix;(a=new ga(o,s,c)).instanceMatrix=new xe(new Float32Array(h.array),16);break;case\"LOD\":a=new oa;break;case\"Line\":a=new Sa(r(t.geometry),i(t.material),t.mode);break;case\"LineLoop\":a=new Ta(r(t.geometry),i(t.material));break;case\"LineSegments\":a=new Ra(r(t.geometry),i(t.material));break;case\"PointCloud\":case\"Points\":a=new Ia(r(t.geometry),i(t.material));break;case\"Sprite\":a=new Ji(i(t.material));break;case\"Group\":a=new Ri;break;default:a=new Mt}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(a.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,u=0;u<l.length;u++)a.add(this.parseObject(l[u],e,n));if(\"LOD\"===t.type){void 0!==t.autoUpdate&&(a.autoUpdate=t.autoUpdate);for(var d=t.levels,p=0;p<d.length;p++){var f=d[p],m=a.getObjectByProperty(\"uuid\",f.object);void 0!==m&&a.addLevel(m,f.distance)}}return a}});var bc,_c={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:d,CubeUVRefractionMapping:p},Sc={RepeatWrapping:f,ClampToEdgeWrapping:m,MirroredRepeatWrapping:1002},wc={NearestFilter:g,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:v,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};function Ec(t){\"undefined\"==typeof createImageBitmap&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\"),\"undefined\"==typeof fetch&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\"),_s.call(this,t),this.options={premultiplyAlpha:\"none\"}}function Rc(){this.type=\"ShapePath\",this.color=new le,this.subPaths=[],this.currentPath=null}function Tc(t){this.type=\"Font\",this.data=t}function Ac(t){_s.call(this,t)}Ec.prototype=Object.assign(Object.create(_s.prototype),{constructor:Ec,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=Ms.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,i.options)})).then((function(n){Ms.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(Rc.prototype,{moveTo:function(t,e){return this.currentPath=new Qs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,a){return this.currentPath.bezierCurveTo(t,e,n,r,i,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],a=new $s;a.curves=i.curves,e.push(a)}return e}var r=bo.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===e)return n(i);var a,o,s,c=[];if(1===i.length)return o=i[0],(s=new $s).curves=o.curves,c.push(s),c;var h,l=!r(i[0].getPoints()),u=(l=t?!l:l,[]),d=[],p=[],f=0;d[f]=void 0,p[f]=[];for(var m=0,g=i.length;m<g;m++)a=r(h=(o=i[m]).getPoints()),(a=t?!a:a)?(!l&&d[f]&&f++,d[f]={s:new $s,p:h},d[f].s.curves=o.curves,l&&f++,p[f]=[]):p[f].push({h:o,p:h[0]});if(!d[0])return n(i);if(1<d.length){for(var v=!1,y=[],M=0,x=d.length;M<x;M++)u[M]=[];for(var b=0,_=d.length;b<_;b++)for(var S=p[b],w=0;w<S.length;w++){for(var E=S[w],R=!0,T=0;T<d.length;T++)!function(t,e){for(var n=e.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=e[i],s=e[a],c=s.x-o.x,h=s.y-o.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(o=e[a],c=-c,s=e[i],h=-h),!(t.y<o.y||t.y>s.y))if(t.y===o.y){if(t.x===o.x)return 1}else{if(0==(c=h*(t.x-o.x)-c*(t.y-o.y)))return 1;c<0||(r=!r)}}else if(t.y===o.y&&(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x))return 1}return r}(E.p,d[T].p)||(b!==T&&y.push({froms:b,tos:T,hole:w}),R?(R=!1,u[T].push(E)):v=!0);R&&u[b].push(E)}0<y.length&&(v||(p=u))}for(var A=0,L=d.length;A<L;A++){s=d[A].s,c.push(s);for(var P,C=0,O=(P=p[A]).length;C<O;C++)s.holes.push(P[C].h)}return c}}),Object.assign(Tc.prototype,{isFont:!0,generateShapes:function(t,e){for(var n=[],r=function(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(\"\"),i=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,c=0,h=0;h<r.length;h++){var l=r[h];\"\\n\"===l?(s=0,c-=a):(l=function(t,e,n,r,i){var a=i.glyphs[t]||i.glyphs[\"?\"];if(a){var o,s,c,h,l,u,d,p,f=new Rc;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(\" \")),g=0,v=m.length;g<v;)switch(m[g++]){case\"m\":o=m[g++]*e+n,s=m[g++]*e+r,f.moveTo(o,s);break;case\"l\":o=m[g++]*e+n,s=m[g++]*e+r,f.lineTo(o,s);break;case\"q\":c=m[g++]*e+n,h=m[g++]*e+r,l=m[g++]*e+n,u=m[g++]*e+r,f.quadraticCurveTo(l,u,c,h);break;case\"b\":c=m[g++]*e+n,h=m[g++]*e+r,l=m[g++]*e+n,u=m[g++]*e+r,d=m[g++]*e+n,p=m[g++]*e+r,f.bezierCurveTo(l,u,d,p,c,h)}return{offsetX:a.ha*e,path:f}}console.error('THREE.Font: character \"'+t+'\" does not exists in font family '+i.familyName+\".\")}(l,i,s,c,n),s+=l.offsetX,o.push(l.path))}return o}(t,e=void 0===e?100:e,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Ac.prototype=Object.assign(Object.create(_s.prototype),{constructor:Ac,load:function(t,e,n,r){var i=this,a=new ws(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(t,(function(t){try{n=JSON.parse(t)}catch(e){console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),n=JSON.parse(t.substring(65,t.length-2))}var n=i.parse(n);e&&e(n)}),n,r)},parse:function(t){return new Tc(t)}});var Lc=function(){return bc=void 0===bc?new(window.AudioContext||window.webkitAudioContext):bc};function Pc(t){_s.call(this,t)}function Cc(t,e,n){pc.call(this,void 0,n);var r=(new le).set(t);n=(new le).set(e),t=new Y(r.r,r.g,r.b),e=new Y(n.r,n.g,n.b),n=(r=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(t).add(e).multiplyScalar(r),this.sh.coefficients[1].copy(t).sub(e).multiplyScalar(n)}function Oc(t,e){pc.call(this,void 0,e),t=(new le).set(t),this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}Pc.prototype=Object.assign(Object.create(_s.prototype),{constructor:Pc,load:function(t,e,n,r){var i=this,a=new ws(i.manager);a.setResponseType(\"arraybuffer\"),a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.load(t,(function(n){try{var a=n.slice(0);Lc().decodeAudioData(a,(function(t){e(t)}))}catch(n){r?r(n):console.error(n),i.manager.itemError(t)}}),n,r)}}),Cc.prototype=Object.assign(Object.create(pc.prototype),{constructor:Cc,isHemisphereLightProbe:!0,copy:function(t){return pc.prototype.copy.call(this,t),this},toJSON:function(t){return pc.prototype.toJSON.call(this,t)}}),Oc.prototype=Object.assign(Object.create(pc.prototype),{constructor:Oc,isAmbientLightProbe:!0,copy:function(t){return pc.prototype.copy.call(this,t),this},toJSON:function(t){return pc.prototype.toJSON.call(this,t)}});var Ic=new et,Nc=new et;function Dc(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(function(){this.type=\"StereoCamera\",this.aspect=1,this.eyeSep=.064,this.cameraL=new Mn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Mn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(t){var e,n,r,i,a,o=this._cache;o.focus===t.focus&&o.fov===t.fov&&o.aspect===t.aspect*this.aspect&&o.near===t.near&&o.far===t.far&&o.zoom===t.zoom&&o.eyeSep===this.eyeSep||(o.focus=t.focus,o.fov=t.fov,o.aspect=t.aspect*this.aspect,o.near=t.near,o.far=t.far,o.zoom=t.zoom,o.eyeSep=this.eyeSep,e=t.projectionMatrix.clone(),n=(a=o.eyeSep/2)*o.near/o.focus,r=o.near*Math.tan(N.DEG2RAD*o.fov*.5)/o.zoom,Nc.elements[12]=-a,Ic.elements[12]=a,i=-r*o.aspect+n,a=r*o.aspect+n,e.elements[0]=2*o.near/(a-i),e.elements[8]=(a+i)/(a-i),this.cameraL.projectionMatrix.copy(e),i=-r*o.aspect-n,a=r*o.aspect-n,e.elements[0]=2*o.near/(a-i),e.elements[8]=(a+i)/(a-i),this.cameraR.projectionMatrix.copy(e)),this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Nc),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Ic)}}),Object.assign(Dc.prototype,{start:function(){this.startTime=(\"undefined\"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t,e=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(e=((t=(\"undefined\"==typeof performance?Date:performance).now())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)}});var Fc=new Y,zc=new j,Bc=new Y,Uc=new Y;function Hc(){Mt.call(this),this.type=\"AudioListener\",this.context=Lc(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Dc}function Gc(t){Mt.call(this),this.type=\"Audio\",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType=\"empty\",this._startedAt=0,this._progress=0,this.filters=[]}Hc.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Hc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){Mt.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fc,zc,Bc),Uc.set(0,0,-1).applyQuaternion(zc),e.positionX?(t=this.context.currentTime+this.timeDelta,e.positionX.linearRampToValueAtTime(Fc.x,t),e.positionY.linearRampToValueAtTime(Fc.y,t),e.positionZ.linearRampToValueAtTime(Fc.z,t),e.forwardX.linearRampToValueAtTime(Uc.x,t),e.forwardY.linearRampToValueAtTime(Uc.y,t),e.forwardZ.linearRampToValueAtTime(Uc.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)):(e.setPosition(Fc.x,Fc.y,Fc.z),e.setOrientation(Uc.x,Uc.y,Uc.z,n.x,n.y,n.z))}}),Gc.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Gc,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"audioNode\",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"mediaNode\",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"mediaStreamNode\",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType=\"buffer\",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl)return this._startedAt=this.context.currentTime+t,(t=this.context.createBufferSource()).buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect();console.warn(\"THREE.Audio: this Audio has no playback control.\")}else console.warn(\"THREE.Audio: Audio is already playing.\")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t=t||[],!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var kc=new Y,jc=new j,Vc=new Y,Wc=new Y;function Yc(t){Gc.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel=\"HRTF\",this.panner.connect(this.gain)}function qc(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Xc(t,e,n){var r,i,a;switch(this.binding=t,this.valueSize=n,e){case\"quaternion\":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case\"string\":case\"bool\":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Yc.prototype=Object.assign(Object.create(Gc.prototype),{constructor:Yc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){var e;Mt.prototype.updateMatrixWorld.call(this,t),!0===this.hasPlaybackControl&&!1===this.isPlaying||(this.matrixWorld.decompose(kc,jc,Vc),Wc.set(0,0,1).applyQuaternion(jc),(e=this.panner).positionX?(t=this.context.currentTime+this.listener.timeDelta,e.positionX.linearRampToValueAtTime(kc.x,t),e.positionY.linearRampToValueAtTime(kc.y,t),e.positionZ.linearRampToValueAtTime(kc.z,t),e.orientationX.linearRampToValueAtTime(Wc.x,t),e.orientationY.linearRampToValueAtTime(Wc.y,t),e.orientationZ.linearRampToValueAtTime(Wc.z,t)):(e.setPosition(kc.x,kc.y,kc.z),e.setOrientation(Wc.x,Wc.y,Wc.z)))}}),Object.assign(qc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Xc.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r;if(0===(t=this.cumulativeWeight)){for(var a=0;a!==r;++a)n[i+a]=n[a];t=e}else this._mixBufferRegion(n,i,0,e/(t+=e),r);this.cumulativeWeight=t},accumulateAdditive:function(t){var e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1&&(t=e*this._origIndex,this._mixBufferRegion(n,r,t,1-i,e)),0<a&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(var s=e,c=e+e;s!==c;++s)if(n[s]!==n[s+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(var i=n,a=r;i!==a;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,r,i){if(.5<=r)for(var a=0;a!==i;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,r){j.slerpFlat(t,e,t,e,t,n,r)},_slerpAdditive:function(t,e,n,r,i){i=this._workIndex*i,j.multiplyQuaternionsFlat(t,i,t,e,t,n),j.slerpFlat(t,e,t,e,t,i,r)},_lerp:function(t,e,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*r}},_lerpAdditive:function(t,e,n,r,i){for(var a=0;a!==i;++a){var o=e+a;t[o]=t[o]+t[n+a]*r}}});var Kc=\"\\\\[\\\\]\\\\.:\\\\/\",Zc=new RegExp(\"[\"+Kc+\"]\",\"g\"),Jc=\"[^\"+Kc+\"]\",Qc=(n=\"[^\"+Kc.replace(\"\\\\.\",\"\")+\"]\",e=/((?:WC+[\\/:])*)/.source.replace(\"WC\",Jc),Kc=/(WCOD+)?/.source.replace(\"WCOD\",n),n=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",Jc),Jc=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",Jc),new RegExp(\"^\"+e+Kc+n+Jc+\"$\")),$c=[\"material\",\"materials\",\"bones\"];function th(t,e,n){n=n||eh.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function eh(t,e,n){this.path=e,this.parsedPath=n||eh.parseTrackName(e),this.node=eh.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function nh(t,e,n,r){this._mixer=t,this._clip=e,this._localRoot=n||null,this.blendMode=r||e.blendMode;for(var i=e.tracks,a=i.length,o=new Array(a),s={endingStart:w,endingEnd:w},c=0;c!==a;++c){var h=i[c].createInterpolant(null);(o[c]=h).settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function rh(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ih(t){\"string\"==typeof t&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),t=arguments[1]),this.value=t}function ah(t,e,n){Ni.call(this,t,e),this.meshPerAttribute=n||1}function oh(t,e,n,r){this.ray=new Wt(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new at,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\"),this.Points}}})}function sh(t,e){return t.distance-e.distance}function ch(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r)for(var i=t.children,a=0,o=i.length;a<o;a++)ch(i[a],e,n,!0)}Object.assign(th.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_;void 0!==(n=this._bindings[n])&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(eh,{Composite:th,create:function(t,e,n){return new(t&&t.isAnimationObjectGroup?eh.Composite:eh)(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\\s/g,\"_\").replace(Zc,\"\")},parseTrackName:function(t){var e=Qc.exec(t);if(!e)throw new Error(\"PropertyBinding: Cannot parse trackName: \"+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(\".\");if(void 0!==r&&-1!==r&&(e=n.nodeName.substring(r+1),-1!==$c.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)),null===n.propertyName||0===n.propertyName.length)throw new Error(\"PropertyBinding: can not parse propertyName from trackName: \"+t);return n},findNode:function(t,e){if(!e||\"\"===e||\".\"===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}return t.children&&(t=function t(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===e||i.uuid===e)return i;if(i=t(i.children))return i}return null}(t.children))?t:null}}),Object.assign(eh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=eh.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case\"materials\":if(!t.material)return void console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);if(!t.material.materials)return void console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",this);t=t.material.materials;break;case\"bones\":if(!t.skeleton)return void console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return void console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",this,t);t=t[a]}}var s=t[r];if(void 0!==s){var c=this.Versioning.None;void 0!==(this.targetObject=t).needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var h=this.BindingType.Direct;if(void 0!==i){if(\"morphTargetInfluences\"===r){if(!t.geometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",this);if(!t.geometry.isBufferGeometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.\",this);if(!t.geometry.morphAttributes)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}h=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(h=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}else e=e.nodeName,console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+e+\".\"+r+\" but it wasn't found.\",t)}else console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+this.path+\" but it wasn't found.\")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(eh.prototype,{_getValue_unbound:eh.prototype.getValue,_setValue_unbound:eh.prototype.setValue}),Object.assign(function(){this.uuid=N.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats=Object.defineProperties({objects:Object.defineProperties({},{total:{get:function(){return r._objects.length},configurable:!0,enumerable:!0},inUse:{get:function(){return this.total-r.nCachedObjects_},configurable:!0,enumerable:!0}})},{bindingsPerObject:{get:function(){return r._bindings.length},configurable:!0,enumerable:!0}})}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=t.length,c=this.nCachedObjects_,h=0,l=arguments.length;h!==l;++h){var u=arguments[h],d=u.uuid,p=e[d];if(void 0===p){p=s++,e[d]=p,t.push(u);for(var f=0,m=a;f!==m;++f)i[f].push(new eh(u,n[f],r[f]))}else if(p<c){o=t[p];var g=--c,v=t[g];t[e[v.uuid]=p]=v,t[e[d]=g]=u;for(var y=0,M=a;y!==M;++y){var x=i[y],b=x[g],_=x[p];x[p]=b,void 0===_&&(_=new eh(u,n[y],r[y])),x[g]=_}}else t[p]!==o&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=c},remove:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,h=e[c];if(void 0!==h&&i<=h){var l=i++,u=t[l];t[e[u.uuid]=h]=u,t[e[c]=l]=s;for(var d=0,p=r;d!==p;++d){var f=n[d],m=f[l],g=f[h];f[h]=m,f[l]=g}}}this.nCachedObjects_=i},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=t.length,o=0,s=arguments.length;o!==s;++o){var c=e[l=arguments[o].uuid];if(void 0!==c)if(delete e[l],c<i){var h=--i,l=t[h],u=--a,d=t[u];t[e[l.uuid]=c]=l,t[e[d.uuid]=h]=d,t.pop();for(var p=0,f=r;p!==f;++p){var m=n[p],g=m[h],v=m[u];m[c]=g,m[h]=v,m.pop()}}else{var y=--a;t[e[(d=t[y]).uuid]=c]=d,t.pop();for(var M=0,x=r;M!==x;++M){var b=n[M];b[c]=b[y],b.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,h=this.nCachedObjects_,l=new Array(c);r=i.length;n[t]=r,a.push(t),o.push(e),i.push(l);for(var u=h,d=s.length;u!==d;++u){var p=s[u];l[u]=new eh(p,t,e)}return l},unsubscribe_:function(t){var e,n,r,i,a,o=this._bindingsIndicesByPath,s=o[t];void 0!==s&&(e=this._paths,n=this._parsedPaths,a=(r=this._bindings)[i=r.length-1],r[o[t[i]]=s]=a,r.pop(),n[s]=n[i],n.pop(),e[s]=e[i],e.pop())}}),Object.assign(nh.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){var r,i;return t.fadeOut(e),this.fadeIn(e),n&&(n=(r=this._clip.duration)/(i=t._clip.duration),t.warp(1,i/r,e),this.warp(n,1,e)),this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;return null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o),r=o.parameterPositions,o=o.sampleValues,r[0]=i,r[1]=i+n,o[0]=t/a,o[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){if((i=(t-i)*n)<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);var a=this._updateTime(e),o=this._updateWeight(t);if(0<o){var s=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(var h=0,l=s.length;h!==l;++h)s[h].evaluate(a),c[h].accumulateAdditive(o);else for(var u=0,d=s.length;u!==d;++u)s[u].evaluate(a),c[u].accumulate(r,o)}}else this._updateWeight(t)},_updateWeight:function(t){var e,n,r=0;return this.enabled&&(r=this.weight,null!==(e=this._weightInterpolant)&&(r*=n=e.evaluate(t)[0],t>e.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1)))),this._effectiveWeight=r},_updateTimeScale:function(t){var e,n=0;return this.paused||(n=this.timeScale,null!==(e=this._timeScaleInterpolant)&&(n*=e.evaluate(t)[0],t>e.parameterPositions[1]&&(this.stopWarping(),0===n?this.paused=!0:this.timeScale=n))),this._effectiveTimeScale=n},_updateTime:function(t){var e,n=this._clip.duration,r=this.loop,i=this.time+t,a=this._loopCount,o=2202===r;if(0===t)return-1!==a&&o&&1==(1&a)?n-i:i;if(2200===r){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(n<=i)i=n;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:t<0?-1:1})}}else if(-1===a&&(0<=t?this._setEndings(!(a=0),0===this.repetitions,o):this._setEndings(0===this.repetitions,!0,o)),n<=i||i<0?(i-=n*(e=Math.floor(i/n)),a+=Math.abs(e),(r=this.repetitions-a)<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i=0<t?n:0,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0<t?1:-1})):(1==r?this._setEndings(r=t<0,!r,o):this._setEndings(!1,!1,o),this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:e}))):this.time=i,o&&1==(1&a))return n-i;return i},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=E,r.endingEnd=E):(r.endingStart=t?this.zeroSlopeAtStart?E:w:2402,r.endingEnd=e?this.zeroSlopeAtEnd?E:w:2402)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;return null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a),r=a.parameterPositions,a=a.sampleValues,r[0]=i,a[0]=e,r[1]=i+t,a[1]=n,this}}),rh.prototype=Object.assign(Object.create(L.prototype),{constructor:rh,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,c=(t=this._bindingsByRootAndName)[s];void 0===c&&(t[s]=c={});for(var h=0;h!==i;++h){var l=r[h],u=l.name;if(void 0!==(d=c[u]))a[h]=d;else{if(void 0!==(d=a[h])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,u));continue}var d,p=e&&e._propertyBindings[h].binding.parsedPath;++(d=new Xc(eh.create(n,u,p),l.ValueTypeName,l.getValueSize())).referenceCount,this._addInactiveBinding(d,s,u),a[h]=d}o[h].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){var e,n,r;null===t._cacheIndex&&(e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n],this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e));for(var i=t._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:Object.defineProperties({},{total:{get:function(){return t._actions.length},configurable:!0,enumerable:!0},inUse:{get:function(){return t._nActiveActions},configurable:!0,enumerable:!0}}),bindings:Object.defineProperties({},{total:{get:function(){return t._bindings.length},configurable:!0,enumerable:!0},inUse:{get:function(){return t._nActiveBindings},configurable:!0,enumerable:!0}}),controlInterpolants:Object.defineProperties({},{total:{get:function(){return t._controlInterpolants.length},configurable:!0,enumerable:!0},inUse:{get:function(){return t._nActiveControlInterpolants},configurable:!0,enumerable:!0}})}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,a=i[e];void 0===a?(a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=a):(e=a.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=r.length,r.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=(o=this._actions)[o.length-1],n=t._cacheIndex;o[e._cacheIndex=n]=e,o.pop(),t._cacheIndex=null;var r=t._clip.uuid,i=this._actionsByClip,a=i[r],o=(e=(n=a.knownActions)[n.length-1],t._byClipCacheIndex);n[e._byClipCacheIndex=o]=e,n.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===n.length&&delete i[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];e[t._cacheIndex=r]=t,e[i._cacheIndex=n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];e[t._cacheIndex=r]=t,e[i._cacheIndex=n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[e];void 0===a&&(r[e]=a={}),(a[n]=t)._cacheIndex=i.length,i.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=(o=t.binding).rootNode.uuid,r=o.path,i=this._bindingsByRootAndName,a=i[n],o=e[e.length-1];t=t._cacheIndex;e[o._cacheIndex=t]=o,e.pop(),delete a[r],0===Object.keys(a).length&&delete i[n]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];e[t._cacheIndex=r]=t,e[i._cacheIndex=n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];e[t._cacheIndex=r]=t,e[i._cacheIndex=n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(t[(n=new ss(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];e[t.__cacheIndex=r]=t,e[i.__cacheIndex=n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){var r=(s=e||this._root).uuid,i=\"string\"==typeof t?vs.findByName(s,t):t,a=null!==i?i.uuid:t,o=this._actionsByClip[a],s=null;if(void 0===n&&(n=null!==i?i.blendMode:2500),void 0!==o){if(void 0!==(t=o.actionByRoot[r])&&t.blendMode===n)return t;s=o.knownActions[0],null===i&&(i=s._clip)}return null===i?null:(n=new nh(this,i,e,n),this._bindAction(n,s),this._addInactiveAction(n,a,r),n)},existingAction:function(t,e){var n;e=(n=e||this._root).uuid,t=(n=\"string\"==typeof t?vs.findByName(n,t):t)?n.uuid:t;return void 0!==(t=this._actionsByClip[t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions-1;0<=e;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o)e[o]._update(r,t,i,a);for(var s=this._bindings,c=this._nActiveBindings,h=0;h!==c;++h)s[h].apply(a);return this},setTime:function(t){for(var e=this.time=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip;if(void 0!==(t=r[n])){for(var i=t.knownActions,a=0,o=i.length;a!==o;++a){var s=i[a];this._deactivateAction(s);var c=s._cacheIndex,h=e[e.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,e[h._cacheIndex=c]=h,e.pop(),this._removeInactiveBindingsForAction(s)}delete r[n]}},uncacheRoot:function(t){var e,n=t.uuid,r=this._actionsByClip;for(e in r){var i=r[e].actionByRoot[n];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[n];if(void 0!==a)for(var o in a)(o=a[o]).restoreOriginalState(),this._removeInactiveBinding(o)},uncacheAction:function(t,e){null!==(e=this.existingAction(t,e))&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),ih.prototype.clone=function(){return new ih(void 0===this.value.clone?this.value:this.value.clone())},ah.prototype=Object.assign(Object.create(Ni.prototype),{constructor:ah,isInstancedInterleavedBuffer:!0,copy:function(t){return Ni.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){return(t=Ni.prototype.clone.call(this,t)).meshPerAttribute=this.meshPerAttribute,t},toJSON:function(t){return(t=Ni.prototype.toJSON.call(this,t)).isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.assign(oh.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error(\"THREE.Raycaster: Unsupported camera type.\")},intersectObject:function(t,e,n){return ch(t,this,n=n||[],e),n.sort(sh),n},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn(\"THREE.Raycaster.intersectObjects: objects is not an Array.\"),r;for(var i=0,a=t.length;i<a;i++)ch(t[i],this,r,e);return r.sort(sh),r}});var hh=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return s(this,t),this.radius=e,this.phi=n,this.theta=r,this}var e,n;return e=t,(n=[{key:\"set\",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:\"makeSafe\",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:\"setFromVector3\",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:\"setFromCartesianCoords\",value:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(N.clamp(e/this.radius,-1,1))),this}}])&&i(e.prototype,n),t}();Object.assign(function(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var lh=new D;function uh(t,e){this.min=void 0!==t?t:new D(1/0,1/0),this.max=void 0!==e?e:new D(-1/0,-1/0)}Object.assign(uh.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=lh.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Box2: .getCenter() target is now required\"),t=new D),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn(\"THREE.Box2: .getSize() target is now required\"),t=new D),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn(\"THREE.Box2: .getParameter() target is now required\"),e=new D),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Box2: .clampPoint() target is now required\"),e=new D),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return lh.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var dh=new Y,ph=new Y;function fh(t,e){this.start=void 0!==t?t:new Y,this.end=void 0!==e?e:new Y}function mh(t){Mt.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Object.assign(fh.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Line3: .getCenter() target is now required\"),t=new Y),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn(\"THREE.Line3: .delta() target is now required\"),t=new Y),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn(\"THREE.Line3: .at() target is now required\"),e=new Y),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){return dh.subVectors(t,this.start),ph.subVectors(this.end,this.start),t=ph.dot(ph),t=ph.dot(dh)/t,e?N.clamp(t,0,1):t},closestPointToPoint:function(t,e,n){return e=this.closestPointToPointParameter(t,e),void 0===n&&(console.warn(\"THREE.Line3: .closestPointToPoint() target is now required\"),n=new Y),this.delta(n).multiplyScalar(e).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),((mh.prototype=Object.create(Mt.prototype)).constructor=mh).prototype.isImmediateRenderObject=!0;var gh=new Y;function vh(t,e){Mt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;t=new Ue;for(var n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1;r<32;r++,i++){var a=r/32*Math.PI*2,o=i/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}t.setAttribute(\"position\",new Ae(n,3)),e=new va({fog:!1,toneMapped:!1}),this.cone=new Ra(t,e),this.add(this.cone),this.update()}((vh.prototype=Object.create(Mt.prototype)).constructor=vh).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},vh.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance||1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),gh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var yh=new Y,Mh=new et,xh=new et;function bh(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new Ue,r=[],i=[],a=new le(0,0,1),o=new le(0,1,0),s=0;s<e.length;s++){var c=e[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute(\"position\",new Ae(r,3)),n.setAttribute(\"color\",new Ae(i,3));var h=new va({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Ra.call(this,n,h),this.type=\"SkeletonHelper\",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function _h(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n,n=new Co(e,4,2),e=new ve({wireframe:!0,fog:!1,toneMapped:!1}),rn.call(this,n,e),this.type=\"PointLightHelper\",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}((bh.prototype=Object.create(Ra.prototype)).constructor=bh).prototype.isSkeletonHelper=!0,bh.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,r=n.getAttribute(\"position\");xh.getInverse(this.root.matrixWorld);for(var i=0,a=0;i<e.length;i++){var o=e[i];o.parent&&o.parent.isBone&&(Mh.multiplyMatrices(xh,o.matrixWorld),yh.setFromMatrixPosition(Mh),r.setXYZ(a,yh.x,yh.y,yh.z),Mh.multiplyMatrices(xh,o.parent.matrixWorld),yh.setFromMatrixPosition(Mh),r.setXYZ(a+1,yh.x,yh.y,yh.z),a+=2)}n.getAttribute(\"position\").needsUpdate=!0,Mt.prototype.updateMatrixWorld.call(this,t)},((_h.prototype=Object.create(rn.prototype)).constructor=_h).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},_h.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Sh=new Y,wh=new le,Eh=new le;function Rh(t,e,n){Mt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,(n=new qa(e)).rotateY(.5*Math.PI),this.material=new ve({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0),e=n.getAttribute(\"position\"),e=new Float32Array(3*e.count),n.setAttribute(\"color\",new xe(e,3)),this.add(new rn(n,this.material)),this.update()}function Th(t,e,n,r){t=t||10,e=e||10,n=new le(void 0!==n?n:4473924),r=new le(void 0!==r?r:8947848);for(var i=e/2,a=t/e,o=t/2,s=[],c=[],h=0,l=0,u=-o;h<=e;h++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);var d=h===i?n:r;d.toArray(c,l),l+=3,d.toArray(c,l),l+=3,d.toArray(c,l),l+=3,d.toArray(c,l),l+=3}var p=new Ue;p.setAttribute(\"position\",new Ae(s,3)),p.setAttribute(\"color\",new Ae(c,3)),t=new va({vertexColors:!0,toneMapped:!1}),Ra.call(this,p,t),this.type=\"GridHelper\"}function Ah(t,e,n,r,i,a){t=t||10,e=e||16,n=n||8,r=r||64,i=new le(void 0!==i?i:4473924),a=new le(void 0!==a?a:8947848);for(var o=[],s=[],c=0;c<=e;c++){var h=c/e*(2*Math.PI),l=Math.sin(h)*t;h=Math.cos(h)*t;o.push(0,0,0),o.push(l,0,h),h=1&c?i:a,s.push(h.r,h.g,h.b),s.push(h.r,h.g,h.b)}for(var u=0;u<=n;u++)for(var d=1&u?i:a,p=t-t/n*u,f=0;f<r;f++){var m=f/r*(2*Math.PI),g=Math.sin(m)*p,v=Math.cos(m)*p;o.push(g,0,v),s.push(d.r,d.g,d.b),m=(f+1)/r*(2*Math.PI),g=Math.sin(m)*p,v=Math.cos(m)*p,o.push(g,0,v),s.push(d.r,d.g,d.b)}var y=new Ue;y.setAttribute(\"position\",new Ae(o,3)),y.setAttribute(\"color\",new Ae(s,3));var M=new va({vertexColors:!0,toneMapped:!1});Ra.call(this,y,M),this.type=\"PolarGridHelper\"}((Rh.prototype=Object.create(Mt.prototype)).constructor=Rh).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Rh.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute(\"color\");wh.copy(this.light.color),Eh.copy(this.light.groundColor);for(var n=0,r=e.count;n<r;n++){var i=n<r/2?wh:Eh;e.setXYZ(n,i.r,i.g,i.b)}e.needsUpdate=!0}t.lookAt(Sh.setFromMatrixPosition(this.light.matrixWorld).negate())},(Th.prototype=Object.create(Ra.prototype)).constructor=Th,(Ah.prototype=Object.create(Ra.prototype)).constructor=Ah;var Lh=new Y,Ph=new Y,Ch=new Y;function Oh(t,e,n){Mt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1),(n=new Ue).setAttribute(\"position\",new Ae([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new va({fog:!1,toneMapped:!1}),this.lightPlane=new Sa(n,e),this.add(this.lightPlane),(n=new Ue).setAttribute(\"position\",new Ae([0,0,0,0,0,1],3)),this.targetLine=new Sa(n,e),this.add(this.targetLine),this.update()}((Oh.prototype=Object.create(Mt.prototype)).constructor=Oh).prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Oh.prototype.update=function(){Lh.setFromMatrixPosition(this.light.matrixWorld),Ph.setFromMatrixPosition(this.light.target.matrixWorld),Ch.subVectors(Ph,Lh),this.lightPlane.lookAt(Ph),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ph),this.targetLine.scale.z=Ch.length()};var Ih=new Y,Nh=new yn;function Dh(t){var e=new Ue,n=new va({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={},o=new le(16755200),s=new le(16711680),c=new le(43775),h=new le(16777215),l=new le(3355443);function u(t,e,n){d(t,n),d(e,n)}function d(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(r.length/3-1)}u(\"n1\",\"n2\",o),u(\"n2\",\"n4\",o),u(\"n4\",\"n3\",o),u(\"n3\",\"n1\",o),u(\"f1\",\"f2\",o),u(\"f2\",\"f4\",o),u(\"f4\",\"f3\",o),u(\"f3\",\"f1\",o),u(\"n1\",\"f1\",o),u(\"n2\",\"f2\",o),u(\"n3\",\"f3\",o),u(\"n4\",\"f4\",o),u(\"p\",\"n1\",s),u(\"p\",\"n2\",s),u(\"p\",\"n3\",s),u(\"p\",\"n4\",s),u(\"u1\",\"u2\",c),u(\"u2\",\"u3\",c),u(\"u3\",\"u1\",c),u(\"c\",\"t\",h),u(\"p\",\"c\",l),u(\"cn1\",\"cn2\",l),u(\"cn3\",\"cn4\",l),u(\"cf1\",\"cf2\",l),u(\"cf3\",\"cf4\",l),e.setAttribute(\"position\",new Ae(r,3)),e.setAttribute(\"color\",new Ae(i,3)),Ra.call(this,e,n),this.type=\"CameraHelper\",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Fh(t,e,n,r,i,a,o){Ih.set(i,a,o).unproject(r);var s=e[t];if(void 0!==s)for(var c=n.getAttribute(\"position\"),h=0,l=s.length;h<l;h++)c.setXYZ(s[h],Ih.x,Ih.y,Ih.z)}((Dh.prototype=Object.create(Ra.prototype)).constructor=Dh).prototype.update=function(){var t=this.geometry,e=this.pointMap;Nh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Fh(\"c\",e,t,Nh,0,0,-1),Fh(\"t\",e,t,Nh,0,0,1),Fh(\"n1\",e,t,Nh,-1,-1,-1),Fh(\"n2\",e,t,Nh,1,-1,-1),Fh(\"n3\",e,t,Nh,-1,1,-1),Fh(\"n4\",e,t,Nh,1,1,-1),Fh(\"f1\",e,t,Nh,-1,-1,1),Fh(\"f2\",e,t,Nh,1,-1,1),Fh(\"f3\",e,t,Nh,-1,1,1),Fh(\"f4\",e,t,Nh,1,1,1),Fh(\"u1\",e,t,Nh,.7,1.1,-1),Fh(\"u2\",e,t,Nh,-.7,1.1,-1),Fh(\"u3\",e,t,Nh,0,2,-1),Fh(\"cf1\",e,t,Nh,-1,0,1),Fh(\"cf2\",e,t,Nh,1,0,1),Fh(\"cf3\",e,t,Nh,0,-1,1),Fh(\"cf4\",e,t,Nh,0,1,1),Fh(\"cn1\",e,t,Nh,-1,0,-1),Fh(\"cn2\",e,t,Nh,1,0,-1),Fh(\"cn3\",e,t,Nh,0,-1,-1),Fh(\"cn4\",e,t,Nh,0,1,-1),t.getAttribute(\"position\").needsUpdate=!0};var zh=new Nt;function Bh(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24);(t=new Ue).setIndex(new xe(n,1)),t.setAttribute(\"position\",new xe(r,3)),Ra.call(this,t,new va({color:e,toneMapped:!1})),this.type=\"BoxHelper\",this.matrixAutoUpdate=!1,this.update()}function Uh(t,e){this.type=\"Box3Helper\",this.box=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);(t=new Ue).setIndex(new xe(n,1)),t.setAttribute(\"position\",new Ae([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ra.call(this,t,new va({color:e,toneMapped:!1})),this.type=\"Box3Helper\",this.geometry.computeBoundingSphere()}function Hh(t,e,n){this.plane=t,this.size=void 0===e?1:e,e=void 0!==n?n:16776960,(n=new Ue).setAttribute(\"position\",new Ae([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),n.computeBoundingSphere(),Sa.call(this,n,new va({color:e,toneMapped:!1})),this.type=\"PlaneHelper\",(n=new Ue).setAttribute(\"position\",new Ae([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),n.computeBoundingSphere(),this.add(new rn(n,new ve({color:e,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}((Bh.prototype=Object.create(Ra.prototype)).constructor=Bh).prototype.update=function(t){var e,n,r;void 0!==t&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\"),void 0!==this.object&&zh.setFromObject(this.object),zh.isEmpty()||(e=zh.min,n=zh.max,(t=(r=this.geometry.attributes.position).array)[0]=n.x,t[1]=n.y,t[2]=n.z,t[3]=e.x,t[4]=n.y,t[5]=n.z,t[6]=e.x,t[7]=e.y,t[8]=n.z,t[9]=n.x,t[10]=e.y,t[11]=n.z,t[12]=n.x,t[13]=n.y,t[14]=e.z,t[15]=e.x,t[16]=n.y,t[17]=e.z,t[18]=e.x,t[19]=e.y,t[20]=e.z,t[21]=n.x,t[22]=e.y,t[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere())},Bh.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Bh.prototype.copy=function(t){return Ra.prototype.copy.call(this,t),this.object=t.object,this},((Uh.prototype=Object.create(Ra.prototype)).constructor=Uh).prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Mt.prototype.updateMatrixWorld.call(this,t))},((Hh.prototype=Object.create(Sa.prototype)).constructor=Hh).prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?1:0,this.lookAt(this.plane.normal),Mt.prototype.updateMatrixWorld.call(this,t)};var Gh,kh,jh=new Y;function Vh(t,e,n,r,i,a){Mt.call(this),this.type=\"ArrowHelper\",void 0===t&&(t=new Y(0,0,1)),void 0===e&&(e=new Y(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===a&&(a=.2*i),void 0===Gh&&((Gh=new Ue).setAttribute(\"position\",new Ae([0,0,0,0,1,0],3)),(kh=new Go(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Sa(Gh,new va({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new rn(kh,new ve({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,a)}function Wh(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new Ue).setAttribute(\"position\",new Ae(e,3)),t.setAttribute(\"color\",new Ae([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new va({vertexColors:!0,toneMapped:!1}),Ra.call(this,t,e),this.type=\"AxesHelper\"}((Vh.prototype=Object.create(Mt.prototype)).constructor=Vh).prototype.setDirection=function(t){.99999<t.y?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(jh.set(t.z,0,-t.x).normalize(),t=Math.acos(t.y),this.quaternion.setFromAxisAngle(jh,t))},Vh.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Vh.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Vh.prototype.copy=function(t){return Mt.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},(Wh.prototype=Object.create(Ra.prototype)).constructor=Wh,Math.pow(2,8);var Yh=[.125,.215,.35,.446,.526,.582],qh=5+Yh.length;o(n={},R,0),o(n,3001,1),o(n,3002,2),o(n,3004,3),o(n,3005,4),o(n,3006,5),o(n,3007,6),new sc,Jc=function(){for(var t=[],e=[],n=[],r=8,i=0;i<qh;i++){var a=Math.pow(2,r);e.push(a);var o=1/a;4<i?o=Yh[i-8+4-1]:0==i&&(o=0),n.push(o);for(var s=[a=-(o=1/(a-1))/2,a,o=1+o/2,a,o,o,a,a,o,o,a,o],c=new Float32Array(108),h=new Float32Array(72),l=new Float32Array(36),u=0;u<6;u++){var d=u%3*2/3-1,p=[d,p=2<u?0:-1,0,d+2/3,p,0,d+2/3,1+p,0,d,p,0,d+2/3,1+p,0,d,1+p,0];c.set(p,18*u),h.set(s,12*u),p=[u,u,u,u,u,u],l.set(p,6*u)}(o=new Ue).setAttribute(\"position\",new xe(c,3)),o.setAttribute(\"uv\",new xe(h,2)),o.setAttribute(\"faceIndex\",new xe(l,1)),t.push(o),4<r&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}(),Jc=1/(n=(Jc._lodPlanes,Jc._sizeLods,Jc._sigmas,(1+Math.sqrt(5))/2));function Xh(t){console.warn(\"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.\"),Us.call(this,t),this.type=\"catmullrom\"}function Kh(t,e){var n,r,i,a,o,s;void 0===e&&console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(h),c.update(),p=d.NONE},this.update=(n=new Y,r=(new j).setFromUnitVectors(t.up,new Y(0,1,0)),i=r.clone().inverse(),a=new Y,o=new j,s=2*Math.PI,function(){var t=c.object.position;n.copy(t).sub(c.target),n.applyQuaternion(r),m.setFromVector3(n),c.autoRotate&&p===d.NONE&&P(2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(m.theta+=g.theta*c.dampingFactor,m.phi+=g.phi*c.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);var e=c.minAzimuthAngle,l=c.maxAzimuthAngle;return isFinite(e)&&isFinite(l)&&(e<-Math.PI?e+=s:e>Math.PI&&(e-=s),l<-Math.PI?l+=s:l>Math.PI&&(l-=s),m.theta=e<l?Math.max(e,Math.min(l,m.theta)):m.theta>(e+l)/2?Math.max(e,m.theta):Math.min(l,m.theta)),m.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(c.minDistance,Math.min(c.maxDistance,m.radius)),!0===c.enableDamping?c.target.addScaledVector(y,c.dampingFactor):c.target.add(y),n.setFromSpherical(m),n.applyQuaternion(i),t.copy(c.target).add(n),c.object.lookAt(c.target),!0===c.enableDamping?(g.theta*=1-c.dampingFactor,g.phi*=1-c.dampingFactor,y.multiplyScalar(1-c.dampingFactor)):(g.set(0,0,0),y.set(0,0,0)),v=1,!(!(M||a.distanceToSquared(c.object.position)>f||8*(1-o.dot(c.object.quaternion))>f)||(c.dispatchEvent(h),a.copy(c.object.position),o.copy(c.object.quaternion),M=!1))}),this.dispose=function(){c.domElement.removeEventListener(\"contextmenu\",at,!1),c.domElement.removeEventListener(\"mousedown\",J,!1),c.domElement.removeEventListener(\"wheel\",tt,!1),c.domElement.removeEventListener(\"touchstart\",nt,!1),c.domElement.removeEventListener(\"touchend\",it,!1),c.domElement.removeEventListener(\"touchmove\",rt,!1),c.domElement.ownerDocument.removeEventListener(\"mousemove\",Q,!1),c.domElement.ownerDocument.removeEventListener(\"mouseup\",$,!1),c.domElement.removeEventListener(\"keydown\",et,!1)};var c=this,h={type:\"change\"},l={type:\"start\"},u={type:\"end\"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},p=d.NONE,f=1e-6,m=new hh,g=new hh,v=1,y=new Y,M=!1,x=new D,b=new D,_=new D,S=new D,w=new D,E=new D,R=new D,T=new D,A=new D;function L(){return Math.pow(.95,c.zoomSpeed)}function P(t){g.theta-=t}function C(t){g.phi-=t}var O,I,N,F=(O=new Y,function(t,e){O.setFromMatrixColumn(e,0),O.multiplyScalar(-t),y.add(O)}),z=(I=new Y,function(t,e){!0===c.screenSpacePanning?I.setFromMatrixColumn(e,1):(I.setFromMatrixColumn(e,0),I.crossVectors(c.object.up,I)),I.multiplyScalar(t),y.add(I)}),B=(N=new Y,function(t,e){var n,r=c.domElement;c.object.isPerspectiveCamera?(n=c.object.position,N.copy(n).sub(c.target),n=N.length(),n*=Math.tan(c.object.fov/2*Math.PI/180),F(2*t*n/r.clientHeight,c.object.matrix),z(2*e*n/r.clientHeight,c.object.matrix)):c.object.isOrthographicCamera?(F(t*(c.object.right-c.object.left)/c.object.zoom/r.clientWidth,c.object.matrix),z(e*(c.object.top-c.object.bottom)/c.object.zoom/r.clientHeight,c.object.matrix)):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"),c.enablePan=!1)});function U(t){c.object.isPerspectiveCamera?v/=t:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*t)),c.object.updateProjectionMatrix(),M=!0):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"),c.enableZoom=!1)}function H(t){c.object.isPerspectiveCamera?v*=t:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/t)),c.object.updateProjectionMatrix(),M=!0):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"),c.enableZoom=!1)}function G(t){x.set(t.clientX,t.clientY)}function k(t){S.set(t.clientX,t.clientY)}function V(t){var e;1==t.touches.length?x.set(t.touches[0].pageX,t.touches[0].pageY):(e=.5*(t.touches[0].pageX+t.touches[1].pageX),t=.5*(t.touches[0].pageY+t.touches[1].pageY),x.set(e,t))}function W(t){var e;1==t.touches.length?S.set(t.touches[0].pageX,t.touches[0].pageY):(e=.5*(t.touches[0].pageX+t.touches[1].pageX),t=.5*(t.touches[0].pageY+t.touches[1].pageY),S.set(e,t))}function q(t){var e=t.touches[0].pageX-t.touches[1].pageX;t=t.touches[0].pageY-t.touches[1].pageY,t=Math.sqrt(e*e+t*t);R.set(0,t)}function X(t){var e;1==t.touches.length?b.set(t.touches[0].pageX,t.touches[0].pageY):(e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY),b.set(e,n)),_.subVectors(b,x).multiplyScalar(c.rotateSpeed);var n=c.domElement;P(2*Math.PI*_.x/n.clientHeight),C(2*Math.PI*_.y/n.clientHeight),x.copy(b)}function K(t){var e;1==t.touches.length?w.set(t.touches[0].pageX,t.touches[0].pageY):(e=.5*(t.touches[0].pageX+t.touches[1].pageX),t=.5*(t.touches[0].pageY+t.touches[1].pageY),w.set(e,t)),E.subVectors(w,S).multiplyScalar(c.panSpeed),B(E.x,E.y),S.copy(w)}function Z(t){var e=t.touches[0].pageX-t.touches[1].pageX;t=t.touches[0].pageY-t.touches[1].pageY,t=Math.sqrt(e*e+t*t);T.set(0,t),A.set(0,Math.pow(T.y/R.y,c.zoomSpeed)),U(A.y),R.copy(T)}function J(t){if(!1!==c.enabled){var e;switch(t.preventDefault(),(c.domElement.focus?c.domElement:window).focus(),t.button){case 0:e=c.mouseButtons.LEFT;break;case 1:e=c.mouseButtons.MIDDLE;break;case 2:e=c.mouseButtons.RIGHT;break;default:e=-1}switch(e){case 1:if(!1===c.enableZoom)return;R.set(t.clientX,t.clientY),p=d.DOLLY;break;case 0:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===c.enablePan)return;k(t),p=d.PAN}else{if(!1===c.enableRotate)return;G(t),p=d.ROTATE}break;case 2:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===c.enableRotate)return;G(t),p=d.ROTATE}else{if(!1===c.enablePan)return;k(t),p=d.PAN}break;default:p=d.NONE}p!==d.NONE&&(c.domElement.ownerDocument.addEventListener(\"mousemove\",Q,!1),c.domElement.ownerDocument.addEventListener(\"mouseup\",$,!1),c.dispatchEvent(l))}}function Q(t){var e;if(!1!==c.enabled)switch(t.preventDefault(),p){case d.ROTATE:if(!1===c.enableRotate)return;e=t,b.set(e.clientX,e.clientY),_.subVectors(b,x).multiplyScalar(c.rotateSpeed),e=c.domElement,P(2*Math.PI*_.x/e.clientHeight),C(2*Math.PI*_.y/e.clientHeight),x.copy(b),c.update();break;case d.DOLLY:if(!1===c.enableZoom)return;T.set(t.clientX,t.clientY),A.subVectors(T,R),0<A.y?U(L()):A.y<0&&H(L()),R.copy(T),c.update();break;case d.PAN:if(!1===c.enablePan)return;w.set(t.clientX,t.clientY),E.subVectors(w,S).multiplyScalar(c.panSpeed),B(E.x,E.y),S.copy(w),c.update()}}function $(t){!1!==c.enabled&&(c.domElement.ownerDocument.removeEventListener(\"mousemove\",Q,!1),c.domElement.ownerDocument.removeEventListener(\"mouseup\",$,!1),c.dispatchEvent(u),p=d.NONE)}function tt(t){!1===c.enabled||!1===c.enableZoom||p!==d.NONE&&p!==d.ROTATE||(t.preventDefault(),t.stopPropagation(),c.dispatchEvent(l),(t=t).deltaY<0?H(L()):0<t.deltaY&&U(L()),c.update(),c.dispatchEvent(u))}function et(t){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(t){var e=!1;switch(t.keyCode){case c.keys.UP:B(0,c.keyPanSpeed),e=!0;break;case c.keys.BOTTOM:B(0,-c.keyPanSpeed),e=!0;break;case c.keys.LEFT:B(c.keyPanSpeed,0),e=!0;break;case c.keys.RIGHT:B(-c.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),c.update())}(t)}function nt(t){if(!1!==c.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(c.touches.ONE){case 0:if(!1===c.enableRotate)return;V(t),p=d.TOUCH_ROTATE;break;case 1:if(!1===c.enablePan)return;W(t),p=d.TOUCH_PAN;break;default:p=d.NONE}break;case 2:switch(c.touches.TWO){case 2:if(!1===c.enableZoom&&!1===c.enablePan)return;e=t,c.enableZoom&&q(e),c.enablePan&&W(e),p=d.TOUCH_DOLLY_PAN;break;case 3:if(!1===c.enableZoom&&!1===c.enableRotate)return;e=t,c.enableZoom&&q(e),c.enableRotate&&V(e),p=d.TOUCH_DOLLY_ROTATE;break;default:p=d.NONE}break;default:p=d.NONE}var e;p!==d.NONE&&c.dispatchEvent(l)}}function rt(t){var e;if(!1!==c.enabled)switch(t.preventDefault(),t.stopPropagation(),p){case d.TOUCH_ROTATE:if(!1===c.enableRotate)return;X(t),c.update();break;case d.TOUCH_PAN:if(!1===c.enablePan)return;K(t),c.update();break;case d.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;e=t,c.enableZoom&&Z(e),c.enablePan&&K(e),c.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;e=t,c.enableZoom&&Z(e),c.enableRotate&&X(e),c.update();break;default:p=d.NONE}}function it(t){!1!==c.enabled&&(c.dispatchEvent(u),p=d.NONE)}function at(t){!1!==c.enabled&&t.preventDefault()}c.domElement.addEventListener(\"contextmenu\",at,!1),c.domElement.addEventListener(\"mousedown\",J,!1),c.domElement.addEventListener(\"wheel\",tt,!1),c.domElement.addEventListener(\"touchstart\",nt,!1),c.domElement.addEventListener(\"touchend\",it,!1),c.domElement.addEventListener(\"touchmove\",rt,!1),c.domElement.addEventListener(\"keydown\",et,!1),-1===c.domElement.tabIndex&&(c.domElement.tabIndex=0),this.update()}function Zh(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Jh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zh(Object(n),!0).forEach((function(e){$h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}new Y(1,1,1),new Y(-1,1,1),new Y(1,1,-1),new Y(-1,1,-1),new Y(0,n,Jc),new Y(0,n,-Jc),new Y(Jc,0,n),new Y(-Jc,0,n),new Y(n,Jc,0),new Y(-n,Jc,0),Cs.create=function(t,e){return console.log(\"THREE.Curve.create() has been deprecated\"),t.prototype=Object.create(Cs.prototype),(t.prototype.constructor=t).prototype.getPoint=e,t},Object.assign(Js.prototype,{createPointsGeometry:function(t){return console.warn(\"THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\"),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn(\"THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\"),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn(\"THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");for(var e=new un,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new Y(i.x,i.y,i.z||0))}return e}}),Object.assign(Qs.prototype,{fromPoints:function(t){return console.warn(\"THREE.Path: .fromPoints() has been renamed to .setFromPoints().\"),this.setFromPoints(t)}}),Object.create(Us.prototype),Object.create(Us.prototype),Xh.prototype=Object.create(Us.prototype),Object.assign(Xh.prototype,{initFromArray:function(){console.error(\"THREE.Spline: .initFromArray() has been removed.\")},getControlPointsArray:function(){console.error(\"THREE.Spline: .getControlPointsArray() has been removed.\")},reparametrizeByArcLength:function(){console.error(\"THREE.Spline: .reparametrizeByArcLength() has been removed.\")}}),Th.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")},bh.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")},Object.assign(_s.prototype,{extractUrlBase:function(t){return console.warn(\"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.\"),mc(t)}}),_s.Handlers={add:function(){console.error(\"THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.\")},get:function(){console.error(\"THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.\")}},Object.assign(xc.prototype,{setTexturePath:function(t){return console.warn(\"THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().\"),this.setResourcePath(t)}}),Object.assign(uh.prototype,{center:function(t){return console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\"),this.getCenter(t)},empty:function(){return console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},isIntersectionBox:function(t){return console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},size:function(t){return console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\"),this.getSize(t)}}),Object.assign(Nt.prototype,{center:function(t){return console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\"),this.getCenter(t)},empty:function(){return console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},isIntersectionBox:function(t){return console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(t)},size:function(t){return console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\"),this.getSize(t)}}),Object.assign(zt.prototype,{empty:function(){return console.warn(\"THREE.Sphere: .empty() has been renamed to .isEmpty().\"),this.isEmpty()}}),En.prototype.setFromMatrix=function(t){return console.warn(\"THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().\"),this.setFromProjectionMatrix(t)},fh.prototype.center=function(t){return console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\"),this.getCenter(t)},Object.assign(N,{random16:function(){return console.warn(\"THREE.Math: .random16() has been deprecated. Use Math.random() instead.\"),Math.random()},nearestPowerOfTwo:function(t){return console.warn(\"THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().\"),N.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn(\"THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().\"),N.ceilPowerOfTwo(t)}}),Object.assign(F.prototype,{flattenToArrayOffset:function(t,e){return console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(t,e)},multiplyVector3:function(t){return console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\"),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},applyToBufferAttribute:function(t){return console.warn(\"THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.\"),t.applyMatrix3(this)},applyToVector3Array:function(){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")}}),Object.assign(et.prototype,{extractPosition:function(t){return console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\"),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(t,e)},getPosition:function(){return console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\"),(new Y).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\"),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},multiplyVector3:function(t){return console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},rotateAxis:function(t){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\"),t.transformDirection(this)},crossVector:function(t){return console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},translate:function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},rotateX:function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},rotateY:function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},rotateZ:function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},rotateByAxis:function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},applyToBufferAttribute:function(t){return console.warn(\"THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},applyToVector3Array:function(){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},makeFrustum:function(t,e,n,r,i,a){return console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\"),this.makePerspective(t,e,r,n,i,a)}}),Kt.prototype.isIntersectionLine=function(t){return console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\"),this.intersectsLine(t)},j.prototype.multiplyVector3=function(t){return console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\"),t.applyQuaternion(this)},Object.assign(Wt.prototype,{isIntersectionBox:function(t){return console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\"),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(t)}}),Object.assign(oe.prototype,{area:function(){return console.warn(\"THREE.Triangle: .area() has been renamed to .getArea().\"),this.getArea()},barycoordFromPoint:function(t,e){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),this.getBarycoord(t,e)},midpoint:function(t){return console.warn(\"THREE.Triangle: .midpoint() has been renamed to .getMidpoint().\"),this.getMidpoint(t)},normal:function(t){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),this.getNormal(t)},plane:function(t){return console.warn(\"THREE.Triangle: .plane() has been renamed to .getPlane().\"),this.getPlane(t)}}),Object.assign(oe,{barycoordFromPoint:function(t,e,n,r,i){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),oe.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),oe.getNormal(t,e,n,r)}}),Object.assign($s.prototype,{extractAllPoints:function(t){return console.warn(\"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.\"),this.extractPoints(t)},extrude:function(t){return console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\"),new wo(this,t)},makeGeometry:function(t){return console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\"),new Fo(this,t)}}),Object.assign(D.prototype,{fromAttribute:function(t,e,n){return console.warn(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn(\"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn(\"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(Y.prototype,{setEulerFromRotationMatrix:function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},setEulerFromQuaternion:function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},getPositionFromMatrix:function(t){return console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\"),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\"),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\"),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\"),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn(\"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn(\"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(H.prototype,{fromAttribute:function(t,e,n){return console.warn(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn(\"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(un.prototype,{computeTangents:function(){console.error(\"THREE.Geometry: .computeTangents() has been removed.\")},computeLineDistances:function(){console.error(\"THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.\")},applyMatrix:function(t){return console.warn(\"THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(t)}}),Object.assign(Mt.prototype,{getChildByName:function(t){return console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\"),this.getObjectByName(t)},renderDepth:function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},translate:function(t,e){return console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\"),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error(\"THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.\")},applyMatrix:function(t){return console.warn(\"THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(t)}}),Object.defineProperties(Mt.prototype,{eulerOrder:{get:function(){return console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order},set:function(t){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order=t}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},set:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}}),Object.assign(rn.prototype,{setDrawMode:function(){console.error(\"THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.\")}}),Object.defineProperties(rn.prototype,{drawMode:{get:function(){return console.error(\"THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.\"),0},set:function(){console.error(\"THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.\")}}}),Object.defineProperties(oa.prototype,{objects:{get:function(){return console.warn(\"THREE.LOD: .objects has been renamed to .levels.\"),this.levels}}}),Object.defineProperty(la.prototype,\"useVertexTexture\",{get:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")},set:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")}}),sa.prototype.initBones=function(){console.error(\"THREE.SkinnedMesh: initBones() has been removed.\")},Object.defineProperty(Cs.prototype,\"__arcLengthDivisions\",{get:function(){return console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\"),this.arcLengthDivisions},set:function(t){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\"),this.arcLengthDivisions=t}}),Mn.prototype.setLens=function(t,e){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\"),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(tc.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(t){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\"),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\"),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\"),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\"),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\"),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\"),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\"),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(t){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\"),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(t){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\"),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\"),this.shadow.mapSize.height=t}}}),Object.defineProperties(xe.prototype,{length:{get:function(){return console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\"),this.array.length}},dynamic:{get:function(){return console.warn(\"THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.\"),this.usage===A},set:function(){console.warn(\"THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.\"),this.setUsage(A)}}}),Object.assign(xe.prototype,{setDynamic:function(t){return console.warn(\"THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.\"),this.setUsage(!0===t?A:T),this},copyIndicesArray:function(){console.error(\"THREE.BufferAttribute: .copyIndicesArray() has been removed.\")},setArray:function(){console.error(\"THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers\")}}),Object.assign(Ue.prototype,{addIndex:function(t){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\"),this.setIndex(t)},addAttribute:function(t,e){return console.warn(\"THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().\"),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?\"index\"===t?(console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(e),this):this.setAttribute(t,e):(console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.setAttribute(t,new xe(e,arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\"),console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\"),this.addGroup(t,e)},clearDrawCalls:function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\"),this.clearGroups()},computeTangents:function(){console.warn(\"THREE.BufferGeometry: .computeTangents() has been removed.\")},computeOffsets:function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")},removeAttribute:function(t){return console.warn(\"THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().\"),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn(\"THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(t)}}),Object.defineProperties(Ue.prototype,{drawcalls:{get:function(){return console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\"),this.groups}},offsets:{get:function(){return console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\"),this.groups}}}),Object.defineProperties(gc.prototype,{maxInstancedCount:{get:function(){return console.warn(\"THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.\"),this.instanceCount},set:function(t){console.warn(\"THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.\"),this.instanceCount=t}}}),Object.defineProperties(oh.prototype,{linePrecision:{get:function(){return console.warn(\"THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.\"),this.params.Line.threshold},set:function(t){console.warn(\"THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.\"),this.params.Line.threshold=t}}}),Object.defineProperties(Ni.prototype,{dynamic:{get:function(){return console.warn(\"THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.\"),this.usage===A},set:function(t){console.warn(\"THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.\"),this.setUsage(t)}}}),Object.assign(Ni.prototype,{setDynamic:function(t){return console.warn(\"THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.\"),this.setUsage(!0===t?A:T),this},setArray:function(){console.error(\"THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers\")}}),Object.assign(Eo.prototype,{getArrays:function(){console.error(\"THREE.ExtrudeBufferGeometry: .getArrays() has been removed.\")},addShapeList:function(){console.error(\"THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.\")},addShape:function(){console.error(\"THREE.ExtrudeBufferGeometry: .addShape() has been removed.\")}}),Object.defineProperties(ih.prototype,{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){return console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\"),this}}}),Object.defineProperties(ge.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},overdraw:{get:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")},set:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")}},wrapRGB:{get:function(){return console.warn(\"THREE.Material: .wrapRGB has been removed.\"),new le}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(t){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn(\"THREE.\"+this.type+\": .stencilMask has been removed. Use .stencilFuncMask instead.\"),this.stencilFuncMask},set:function(t){console.warn(\"THREE.\"+this.type+\": .stencilMask has been removed. Use .stencilFuncMask instead.\"),this.stencilFuncMask=t}}}),Object.defineProperties(Jo.prototype,{metal:{get:function(){return console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\"),!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}}),Object.defineProperties(Zo.prototype,{transparency:{get:function(){return console.warn(\"THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.\"),this.transmission},set:function(t){console.warn(\"THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.\"),this.transmission=t}}}),Object.defineProperties(vn.prototype,{derivatives:{get:function(){return console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives},set:function(t){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives=t}}}),Object.assign(Pi.prototype,{clearTarget:function(t,e,n,r){console.warn(\"THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.\"),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn(\"THREE.WebGLRenderer: .animate() is now .setAnimationLoop().\"),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\"),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\"),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\"),this.capabilities.precision},resetGLState:function(){return console.warn(\"THREE.WebGLRenderer: .resetGLState() is now .state.reset().\"),this.state.reset()},supportsFloatTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\"),this.extensions.get(\"OES_texture_float\")},supportsHalfFloatTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\"),this.extensions.get(\"OES_texture_half_float\")},supportsStandardDerivatives:function(){return console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\"),this.extensions.get(\"OES_standard_derivatives\")},supportsCompressedTextureS3TC:function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},supportsCompressedTexturePVRTC:function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},supportsBlendMinMax:function(){return console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\"),this.extensions.get(\"EXT_blend_minmax\")},supportsVertexTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\"),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\"),this.extensions.get(\"ANGLE_instanced_arrays\")},enableScissorTest:function(t){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\"),this.setScissorTest(t)},initMaterial:function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},addPrePlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},addPostPlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},updateShadowMap:function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")},setFaceCulling:function(){console.warn(\"THREE.WebGLRenderer: .setFaceCulling() has been removed.\")},allocTextureUnit:function(){console.warn(\"THREE.WebGLRenderer: .allocTextureUnit() has been removed.\")},setTexture:function(){console.warn(\"THREE.WebGLRenderer: .setTexture() has been removed.\")},setTexture2D:function(){console.warn(\"THREE.WebGLRenderer: .setTexture2D() has been removed.\")},setTextureCube:function(){console.warn(\"THREE.WebGLRenderer: .setTextureCube() has been removed.\")},getActiveMipMapLevel:function(){return console.warn(\"THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().\"),this.getActiveMipmapLevel()}}),Object.defineProperties(Pi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\"),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\"),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")}},context:{get:function(){return console.warn(\"THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.\"),this.getContext()}},vr:{get:function(){return console.warn(\"THREE.WebGLRenderer: .vr has been renamed to .xr\"),this.xr}},gammaInput:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.\"),!1},set:function(){console.warn(\"THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.\")}},gammaOutput:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.\"),!1},set:function(t){console.warn(\"THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.\"),this.outputEncoding=!0===t?3001:R}},toneMappingWhitePoint:{get:function(){return console.warn(\"THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.\"),1},set:function(){console.warn(\"THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.\")}}}),Object.defineProperties(bi.prototype,{cullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")}},renderReverseSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")}},renderSingleSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")}}}),Object.defineProperties(G.prototype,{wrapS:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy=t}},offset:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset=t}},repeat:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat=t}},format:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format=t}},type:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps=t}}}),Object.defineProperties(Gc.prototype,{load:{value:function(t){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");var e=this;return(new Pc).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn(\"THREE.Audio: .startTime is now .play( delay ).\")}}}),qc.prototype.getData=function(){return console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\"),this.getFrequencyData()},xn.prototype.updateCubeMap=function(t,e){return console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\"),this.update(t,e)},z.crossOrigin=void 0,z.loadTexture=function(t,e,n,r){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var i=new Ps;return i.setCrossOrigin(this.crossOrigin),r=i.load(t,n,void 0,r),e&&(r.mapping=e),r},z.loadTextureCube=function(t,e,n,r){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var i=new Ls;return i.setCrossOrigin(this.crossOrigin),r=i.load(t,n,void 0,r),e&&(r.mapping=e),r},z.loadCompressedTexture=function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},z.loadCompressedTextureCube=function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")},\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"register\",{detail:{revision:\"119\"}})),(Kh.prototype=Object.create(L.prototype)).constructor=Kh,((Jc=function(t,e){Kh.call(this,t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=2,this.mouseButtons.RIGHT=0,this.touches.ONE=1,this.touches.TWO=3}).prototype=Object.create(L.prototype)).constructor=Jc;var tl=[function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),$h(this,\"cubes\",{}),$h(this,\"scene\",new xt),$h(this,\"renderer\",new Pi)}var e,n,r;return e=t,r=[{key:\"name\",get:function(){return\"board\"}}],(n=[{key:\"reinitScene\",value:function(t,e){}},{key:\"updateScene\",value:function(t,e,n){var r;this.container.style.width!=this.container.parentElement.clientWidth+\"px\"&&(a=9*(r=this.container.parentElement.clientWidth)/16,this.container.style.width=r,this.container.style.height=a,this.container.children[0].style.width=r,this.container.children[0].style.height=a,this.renderer.setSize(r,a),this.camera.aspect=r/a,this.camera.updateProjectionMatrix());var i,a=0,o=(a=e?e.number:a)+n;for(i in this.cubes){var s=this.cubes[i];if(o<s.states[0].t)s.material.opacity=0;else{for(var c=0;s.states.length>c+1&&s.states[c+1].t<o;)c++;var h=s.states[c],l=s.states[c],u=0;c+1<s.states.length&&(l=s.states[c+1],u=(o-h.t)/(l.t-h.t)),s.material.opacity=h.opacity+u*(l.opacity-h.opacity),s.position.x=h.x+u*(l.x-h.x),s.position.y=h.y+u*(l.y-h.y),s.position.z=h.z+u*(l.z-h.z)}}}},{key:\"handleFrameData\",value:function(t,e){var n=this;if(!e)return t;var r=Math.floor(Math.random()*(1<<24));return e.split(\";\").forEach((function(e){var i;if(\"P\"==(e=e.split(\" \"))[0]){for(var a=+e[1],o=+e[2],s=+e[3],c=new va({color:8947848,opacity:.2}),h=new un,l=0;l<=a;l++)h.vertices.push(new Y(l-.5,-.5,-.5)),h.vertices.push(new Y(l-.5,-.5,s-.5)),h.vertices.push(new Y(l-.5,-.5,-.5)),h.vertices.push(new Y(l-.5,o-.5,-.5)),h.vertices.push(new Y(l-.5,-.5,s-.5)),h.vertices.push(new Y(l-.5,o-.5,s-.5));for(var u=0;u<=s;u++)h.vertices.push(new Y(-.5,-.5,u-.5)),h.vertices.push(new Y(a-.5,-.5,u-.5)),h.vertices.push(new Y(-.5,-.5,u-.5)),h.vertices.push(new Y(-.5,o-.5,u-.5)),h.vertices.push(new Y(a-.5,-.5,u-.5)),h.vertices.push(new Y(a-.5,o-.5,u-.5));for(var d=1;d<=o;d++)h.vertices.push(new Y(-.5,d-.5,-.5)),h.vertices.push(new Y(a-.5,d-.5,-.5)),h.vertices.push(new Y(-.5,d-.5,s-.5)),h.vertices.push(new Y(a-.5,d-.5,s-.5)),h.vertices.push(new Y(-.5,d-.5,-.5)),h.vertices.push(new Y(-.5,d-.5,s-.5)),h.vertices.push(new Y(a-.5,d-.5,-.5)),h.vertices.push(new Y(a-.5,d-.5,s-.5));c=new Ra(h,c);n.scene.add(c)}else\"S\"==e[0]?((c=new rn(new dn(1,1,1),new Jo({color:r,emissive:468276,side:2,flatShading:!0,transparent:!0}))).states=[],c.states.push({opacity:0,t:t.number,x:+e[3],y:+e[4],z:+e[5]}),c.states.push(Jh(Jh({},c.states[0]),{},{opacity:1,t:t.number+ +e[2]})),c.states.push(Jh(Jh({},c.states[1]),{},{y:e[4]-e[6],t:t.number+1})),n.scene.add(c),n.cubes[+e[1]]=c):\"R\"==e[0]?((i=n.cubes[+e[1]]).states.push(Jh(Jh({},i.states[i.states.length-1]),{},{t:t.number})),i.states.push(Jh(Jh({},i.states[i.states.length-1]),{},{opacity:0,t:t.number+ +e[2]}))):\"M\"==e[0]&&((i=n.cubes[+e[1]]).states.push(Jh(Jh({},i.states[i.states.length-1]),{},{t:t.number+ +e[3]})),i.states.push(Jh(Jh({},i.states[i.states.length-1]),{},{y:+e[2],t:t.number+ +e[4]})))})),t}},{key:\"handleGlobalData\",value:function(t,e){this.container=document.createElement(\"div\"),(a=document.body.children[0].children[1].children[0]).parentElement.replaceChild(this.container,a),this.container.style.width=window.innerWidth,this.container.style.height=9*window.innerWidth/16,this.camera=new Mn(75,16/9,.1,1e3),this.renderer.setSize(window.innerWidth,9*window.innerWidth/16),this.container.appendChild(this.renderer.domElement);var n=this.renderer,r=this.scene,i=this.camera,a=new Kh(i,n.domElement);i.position.set(-12,17,11),a.update(),(a=[])[0]=new oc(16777215,1,0),a[1]=new oc(16777215,1,0),a[2]=new oc(16777215,1,0),a[0].position.set(0,200,0),a[1].position.set(100,200,100),a[2].position.set(-100,-200,-100),r.add(a[0]),r.add(a[1]),r.add(a[2]),function t(){requestAnimationFrame(t),n.render(r,i)}()}}])&&Qh(e.prototype,n),r&&Qh(e,r),t}()];function el(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nl=[],rl=[],il=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}var e,n;return e=t,n=[{key:\"listen\",value:function(t){if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");rl.push(t)}},{key:\"push\",value:function(t){nl.push(t),rl.forEach((function(e){return e(t)}))}}],null&&el(e.prototype,null),n&&el(e,n),t}(),al={views:['KEY_FRAME 0\\n{\"global\":{},\"frame\":{}}\\n','KEY_FRAME 1\\n{\"duration\":1360,\"board\":\"P 5 12 5;S 341 0.294 3 12 2 12;S 342 0.294 4 12 3 12;S 343 0.294 3 12 3 12;S 344 0.294 4 12 4 12;S 345 0.294 4 13 4 12\"}\\n','KEY_FRAME 2\\n{\"board\":\"S 866 0.294 4 12 0 12;S 867 0.294 4 12 1 12;S 868 0.294 3 12 1 12;S 869 0.294 3 13 1 12;S 870 0.294 4 12 2 12\"}\\n','KEY_FRAME 3\\n{\"board\":\"S 1411 0.294 0 12 0 12;S 1412 0.294 1 12 0 12;S 1413 0.294 2 12 0 12;S 1414 0.294 0 12 1 12;S 1415 0.294 2 12 1 12\"}\\n','KEY_FRAME 4\\n{\"board\":\"S 1711 0.294 2 12 2 12;S 1712 0.294 2 13 2 12;S 1713 0.294 2 12 3 12;S 1714 0.294 2 12 4 12;S 1715 0.294 3 12 4 12\"}\\n','KEY_FRAME 5\\n{\"board\":\"S 2018 0.294 1 12 1 12;S 2019 0.294 0 12 2 12;S 2020 0.294 1 12 2 12;S 2021 0.294 0 12 3 12\"}\\n','KEY_FRAME 6\\n{\"board\":\"S 2271 0.294 3 12 0 12;S 2272 0.294 1 13 0 12;S 2273 0.294 2 13 0 12;S 2274 0.294 3 13 0 12;S 2275 0.294 1 13 1 12\"}\\n','KEY_FRAME 7\\n{\"board\":\"S 2681 0.294 1 14 2 12;S 2682 0.294 1 13 2 12;S 2683 0.294 1 13 3 12;S 2684 0.294 1 12 3 12;S 2685 0.294 1 12 4 12\"}\\n','KEY_FRAME 8\\n{\"board\":\"S 3071 0.294 2 13 3 12;S 3072 0.294 0 12 4 12;S 3073 0.294 0 13 4 12;S 3074 0.294 1 13 4 12;S 3075 0.294 2 13 4 12\"}\\n','KEY_FRAME 9\\n{\"board\":\"R 341 0.833;R 342 0.833;R 343 0.833;R 344 0.833;M 345 0 0.833 1.0;R 866 0.833;R 867 0.833;R 868 0.833;M 869 0 0.833 1.0;R 870 0.833;R 1411 0.833;R 1412 0.833;R 1413 0.833;R 1414 0.833;R 1415 0.833;R 1711 0.833;M 1712 0 0.833 1.0;R 1713 0.833;R 1714 0.833;R 1715 0.833;R 2018 0.833;R 2019 0.833;R 2020 0.833;R 2021 0.833;R 2271 0.833;M 2272 0 0.833 1.0;M 2273 0 0.833 1.0;M 2274 0 0.833 1.0;M 2275 0 0.833 1.0;M 2681 1 0.833 1.0;M 2682 0 0.833 1.0;M 2683 0 0.833 1.0;R 2684 0.833;R 2685 0.833;M 3071 0 0.833 1.0;R 3072 0.833;M 3073 0 0.833 1.0;M 3074 0 0.833 1.0;M 3075 0 0.833 1.0\"}\\n','KEY_FRAME 10\\n{\"board\":\"S 3376 0.294 4 12 2 12;S 3377 0.294 4 13 2 12;S 3378 0.294 3 12 2 12;S 3379 0.294 3 12 3 12;S 3380 0.294 3 12 4 12\"}\\n','KEY_FRAME 11\\n{\"board\":\"S 3896 0.294 0 12 2 12;S 3897 0.294 0 12 3 12;S 3898 0.294 0 13 3 12;S 3899 0.294 0 13 4 12;S 3900 0.294 1 13 4 12\"}\\n','KEY_FRAME 12\\n{\"board\":\"S 4281 0.294 2 12 1 12\"}\\n','KEY_FRAME 13\\n{\"duration\":1280,\"board\":\"S 4441 0.313 2 12 1 11;S 4442 0.313 2 12 2 11;S 4443 0.313 2 12 3 11;S 4444 0.313 1 12 3 11;S 4445 0.313 2 12 4 11\"}\\n','KEY_FRAME 14\\n{\"duration\":1360,\"board\":\"S 4995 0.294 0 12 0 12;S 4996 0.294 0 13 0 12;S 4997 0.294 0 14 0 12;S 4998 0.294 0 12 1 12\"}\\n','KEY_FRAME 15\\n{\"duration\":1280,\"board\":\"S 5436 0.313 3 12 0 11;S 5437 0.313 2 12 0 11;S 5438 0.313 1 12 0 11;S 5439 0.313 3 12 1 11;S 5440 0.313 3 12 2 11\"}\\n','KEY_FRAME 16\\n{\"duration\":1360,\"board\":\"S 5791 0.294 4 14 0 12;S 5792 0.294 3 14 0 12;S 5793 0.294 2 14 0 12;S 5794 0.294 4 13 0 12;S 5795 0.294 4 12 0 12\"}\\n','KEY_FRAME 17\\n{\"board\":\"S 6271 0.294 4 13 3 12;S 6272 0.294 4 12 3 12;S 6273 0.294 3 14 4 12;S 6274 0.294 3 13 4 12;S 6275 0.294 4 13 4 12\"}\\n','KEY_FRAME 18\\n{\"board\":\"S 6541 0.294 4 14 1 12;S 6542 0.294 3 14 1 12;S 6543 0.294 2 14 1 12;S 6544 0.294 4 13 1 12;S 6545 0.294 4 12 1 12\"}\\n','KEY_FRAME 19\\n{\"board\":\"R 345 0.833;R 869 0.833;R 1712 0.833;R 2272 0.833;R 2273 0.833;R 2274 0.833;R 2275 0.833;M 2681 0 0.833 1.0;R 2682 0.833;R 2683 0.833;R 3071 0.833;R 3073 0.833;R 3074 0.833;R 3075 0.833;R 3376 0.833;M 3377 0 0.833 1.0;R 3378 0.833;R 3379 0.833;R 3380 0.833;R 3896 0.833;R 3897 0.833;M 3898 0 0.833 1.0;M 3899 0 0.833 1.0;M 3900 0 0.833 1.0;R 4281 0.833;M 4441 0 0.833 1.0;M 4442 0 0.833 1.0;M 4443 0 0.833 1.0;M 4444 0 0.833 1.0;M 4445 0 0.833 1.0;R 4995 0.833;M 4996 0 0.833 1.0;M 4997 1 0.833 1.0;R 4998 0.833;M 5436 0 0.833 1.0;M 5437 0 0.833 1.0;M 5438 0 0.833 1.0;M 5439 0 0.833 1.0;M 5440 0 0.833 1.0;M 5791 1 0.833 1.0;M 5792 1 0.833 1.0;M 5793 1 0.833 1.0;M 5794 0 0.833 1.0;R 5795 0.833;M 6271 0 0.833 1.0;R 6272 0.833;M 6273 1 0.833 1.0;M 6274 0 0.833 1.0;M 6275 0 0.833 1.0;M 6541 1 0.833 1.0;M 6542 1 0.833 1.0;M 6543 1 0.833 1.0;M 6544 0 0.833 1.0;R 6545 0.833\"}\\n','KEY_FRAME 20\\n{\"board\":\"S 6991 0.294 1 13 0 12;S 6992 0.294 1 13 1 12;S 6993 0.294 1 12 1 12;S 6994 0.294 0 12 1 12;S 6995 0.294 1 13 2 12\"}\\n','KEY_FRAME 21\\n{\"board\":\"S 7631 0.294 0 12 2 12;S 7632 0.294 0 13 2 12;S 7633 0.294 0 13 3 12;S 7634 0.294 1 13 3 12;S 7635 0.294 2 13 3 12\"}\\n','KEY_FRAME 22\\n{\"board\":\"S 8011 0.294 3 13 2 12;S 8012 0.294 2 13 2 12;S 8013 0.294 2 14 2 12;S 8014 0.294 3 12 3 12;S 8015 0.294 3 13 3 12\"}\\n','KEY_FRAME 23\\n{\"board\":\"R 2681 0.833;R 3377 0.833;R 3898 0.833;R 3899 0.833;R 3900 0.833;R 4441 0.833;R 4442 0.833;R 4443 0.833;R 4444 0.833;R 4445 0.833;R 4996 0.833;M 4997 0 0.833 1.0;R 5436 0.833;R 5437 0.833;R 5438 0.833;R 5439 0.833;R 5440 0.833;M 5791 0 0.833 1.0;M 5792 0 0.833 1.0;M 5793 0 0.833 1.0;R 5794 0.833;R 6271 0.833;M 6273 0 0.833 1.0;R 6274 0.833;R 6275 0.833;M 6541 0 0.833 1.0;M 6542 0 0.833 1.0;M 6543 0 0.833 1.0;R 6544 0.833;M 6991 0 0.833 1.0;M 6992 0 0.833 1.0;R 6993 0.833;R 6994 0.833;M 6995 0 0.833 1.0;R 7631 0.833;M 7632 0 0.833 1.0;M 7633 0 0.833 1.0;M 7634 0 0.833 1.0;M 7635 0 0.833 1.0;M 8011 0 0.833 1.0;M 8012 0 0.833 1.0;M 8013 1 0.833 1.0;R 8014 0.833;M 8015 0 0.833 1.0\"}\\n','KEY_FRAME 24\\n{\"board\":\"S 8381 0.294 0 13 3 12;S 8382 0.294 0 12 4 12;S 8383 0.294 1 12 4 12;S 8384 0.294 2 12 4 12;S 8385 0.294 0 13 4 12\"}\\n','KEY_FRAME 25\\n{\"board\":\"S 8891 0.294 4 13 1 12;S 8892 0.294 4 13 2 12;S 8893 0.294 3 13 2 12;S 8894 0.294 4 12 2 12;S 8895 0.294 4 12 3 12\"}\\n','KEY_FRAME 26\\n{\"board\":\"S 9421 0.294 0 13 0 12;S 9422 0.294 0 13 1 12;S 9423 0.294 0 12 1 12;S 9424 0.294 1 13 1 12;S 9425 0.294 0 13 2 12\"}\\n','KEY_FRAME 27\\n{\"board\":\"S 9603 0.294 4 12 4 12;S 9604 0.294 4 13 4 12\"}\\n','KEY_FRAME 28\\n{\"board\":\"R 4997 0.833;R 5791 0.833;R 5792 0.833;R 5793 0.833;R 6273 0.833;R 6541 0.833;R 6542 0.833;R 6543 0.833;R 6991 0.833;R 6992 0.833;R 6995 0.833;R 7632 0.833;R 7633 0.833;R 7634 0.833;R 7635 0.833;R 8011 0.833;R 8012 0.833;M 8013 0 0.833 1.0;R 8015 0.833;M 8381 0 0.833 1.0;R 8382 0.833;R 8383 0.833;R 8384 0.833;M 8385 0 0.833 1.0;M 8891 0 0.833 1.0;M 8892 0 0.833 1.0;M 8893 0 0.833 1.0;R 8894 0.833;R 8895 0.833;M 9421 0 0.833 1.0;M 9422 0 0.833 1.0;R 9423 0.833;M 9424 0 0.833 1.0;M 9425 0 0.833 1.0;R 9603 0.833;M 9604 0 0.833 1.0\"}\\n','KEY_FRAME 29\\n{\"board\":\"S 9666 0.294 1 12 2 12;S 9667 0.294 1 12 3 12;S 9668 0.294 1 12 4 12\"}\\n','KEY_FRAME 30\\n{\"board\":\"S 9806 0.294 2 12 3 12;S 9807 0.294 3 12 3 12;S 9808 0.294 4 12 3 12;S 9809 0.294 4 13 3 12;S 9810 0.294 3 12 4 12\"}\\n','KEY_FRAME 31\\n{\"board\":\"S 10491 0.294 2 13 0 12;S 10492 0.294 3 12 0 12;S 10493 0.294 2 12 0 12;S 10494 0.294 1 12 0 12;S 10495 0.294 3 12 1 12\"}\\n','KEY_FRAME 32\\n{\"board\":\"S 10871 0.294 2 14 4 12;S 10872 0.294 2 13 4 12;S 10873 0.294 2 12 4 12;S 10874 0.294 3 13 4 12;S 10875 0.294 4 13 4 12\"}\\n','KEY_FRAME 33\\n{\"board\":\"S 11236 0.294 3 13 0 12;S 11237 0.294 3 14 0 12;S 11238 0.294 3 13 1 12;S 11239 0.294 2 12 1 12;S 11240 0.294 2 13 1 12\"}\\n','KEY_FRAME 34\\n{\"board\":\"S 11525 0.294 4 12 0 12;S 11526 0.294 4 13 0 12;S 11527 0.294 4 14 0 12;S 11528 0.294 4 13 1 12\"}\\n','KEY_FRAME 35\\n{\"board\":\"R 8013 0.833;R 8381 0.833;R 8385 0.833;R 8891 0.833;R 8892 0.833;R 8893 0.833;R 9421 0.833;R 9422 0.833;R 9424 0.833;R 9425 0.833;R 9604 0.833;R 9666 0.833;R 9667 0.833;R 9668 0.833;R 9806 0.833;R 9807 0.833;R 9808 0.833;M 9809 0 0.833 1.0;R 9810 0.833;M 10491 0 0.833 1.0;R 10492 0.833;R 10493 0.833;R 10494 0.833;R 10495 0.833;M 10871 1 0.833 1.0;M 10872 0 0.833 1.0;R 10873 0.833;M 10874 0 0.833 1.0;M 10875 0 0.833 1.0;M 11236 0 0.833 1.0;M 11237 1 0.833 1.0;M 11238 0 0.833 1.0;R 11239 0.833;M 11240 0 0.833 1.0;R 11525 0.833;M 11526 0 0.833 1.0;M 11527 1 0.833 1.0;M 11528 0 0.833 1.0\"}\\n','KEY_FRAME 36\\n{\"board\":\"S 11776 0.294 1 13 2 12;S 11777 0.294 3 12 2 12;S 11778 0.294 2 12 2 12;S 11779 0.294 1 12 2 12;S 11780 0.294 3 12 3 12\"}\\n','KEY_FRAME 37\\n{\"board\":\"S 12091 0.294 0 12 3 12;S 12092 0.294 1 12 3 12;S 12093 0.294 2 12 3 12;S 12094 0.294 2 13 3 12;S 12095 0.294 1 12 4 12\"}\\n','KEY_FRAME 38\\n{\"board\":\"S 12771 0.294 1 12 1 12;S 12772 0.294 0 12 1 12;S 12773 0.294 0 12 2 12;S 12774 0.294 0 13 2 12;S 12775 0.294 0 14 2 12\"}\\n','KEY_FRAME 39\\n{\"duration\":1280,\"board\":\"S 13056 0.313 0 12 1 11;S 13057 0.313 1 12 1 11;S 13058 0.313 2 12 1 11;S 13059 0.313 3 12 1 11\"}\\n','KEY_FRAME 40\\n{\"duration\":1360,\"board\":\"S 13221 0.294 4 12 2 12;S 13222 0.294 2 13 2 12;S 13223 0.294 3 13 2 12;S 13224 0.294 4 13 2 12;S 13225 0.294 3 13 3 12\"}\\n','KEY_FRAME 41\\n{\"board\":\"S 13641 0.294 0 12 0 12;S 13642 0.294 1 12 0 12\"}\\n','KEY_FRAME 42\\n{\"board\":\"S 13841 0.294 1 14 3 12;S 13842 0.294 1 13 4 12;S 13843 0.294 1 14 4 12;S 13844 0.294 0 12 4 12;S 13845 0.294 0 13 4 12\"}\\n','KEY_FRAME 43\\n{\"board\":\"R 9809 0.833;R 10491 0.833;M 10871 0 0.833 1.0;R 10872 0.833;R 10874 0.833;R 10875 0.833;R 11236 0.833;M 11237 0 0.833 1.0;R 11238 0.833;R 11240 0.833;R 11526 0.833;M 11527 0 0.833 1.0;R 11528 0.833;M 11776 0 0.833 1.0;R 11777 0.833;R 11778 0.833;R 11779 0.833;R 11780 0.833;R 12091 0.833;R 12092 0.833;R 12093 0.833;M 12094 0 0.833 1.0;R 12095 0.833;R 12771 0.833;R 12772 0.833;R 12773 0.833;M 12774 0 0.833 1.0;M 12775 1 0.833 1.0;M 13056 0 0.833 1.0;M 13057 0 0.833 1.0;M 13058 0 0.833 1.0;M 13059 0 0.833 1.0;R 13221 0.833;M 13222 0 0.833 1.0;M 13223 0 0.833 1.0;M 13224 0 0.833 1.0;M 13225 0 0.833 1.0;R 13641 0.833;R 13642 0.833;M 13841 1 0.833 1.0;M 13842 0 0.833 1.0;M 13843 1 0.833 1.0;R 13844 0.833;M 13845 0 0.833 1.0\"}\\n','KEY_FRAME 44\\n{\"board\":\"S 14326 0.294 3 12 4 12;S 14327 0.294 4 12 4 12;S 14328 0.294 2 13 4 12;S 14329 0.294 3 13 4 12\"}\\n','KEY_FRAME 45\\n{\"board\":\"S 14521 0.294 0 12 0 12;S 14522 0.294 1 12 0 12;S 14523 0.294 0 13 0 12\"}\\n','KEY_FRAME 46\\n{\"duration\":1280,\"board\":\"S 14936 0.313 3 12 2 11;S 14937 0.313 2 12 2 11;S 14938 0.313 1 12 2 11;S 14939 0.313 3 12 3 11;S 14940 0.313 2 12 3 11\"}\\n','KEY_FRAME 47\\n{\"board\":\"S 15401 0.313 3 12 0 11;S 15402 0.313 1 12 1 11;S 15403 0.313 2 12 1 11;S 15404 0.313 3 12 1 11;S 15405 0.313 1 13 1 11\"}\\n','KEY_FRAME 48\\n{\"board\":\"S 15741 0.313 0 13 1 11;S 15742 0.313 0 12 1 11;S 15743 0.313 0 13 2 11;S 15744 0.313 1 14 2 11;S 15745 0.313 1 13 2 11\"}\\n','KEY_FRAME 49\\n{\"duration\":1360,\"board\":\"S 15931 0.294 0 12 3 12;S 15932 0.294 0 13 3 12;S 15933 0.294 0 14 3 12;S 15934 0.294 0 15 3 12;S 15935 0.294 0 16 3 12\"}\\n','KEY_FRAME 50\\n{\"board\":\"S 15998 0.294 2 12 0 12;S 15999 0.294 2 13 0 12\"}\\n','KEY_FRAME 51\\n{\"duration\":1280,\"board\":\"S 16156 0.313 1 13 0 11;S 16157 0.313 1 12 0 11;S 16158 0.313 2 13 0 11;S 16159 0.313 2 14 1 11;S 16160 0.313 2 13 1 11\"}\\n','KEY_FRAME 52\\n{\"duration\":1360,\"board\":\"S 16485 0.294 4 12 1 12;S 16486 0.294 4 13 1 12;S 16487 0.294 4 14 1 12;S 16488 0.294 3 14 1 12\"}\\n','KEY_FRAME 53\\n{\"board\":\"S 17051 0.294 4 14 2 12;S 17052 0.294 4 13 2 12;S 17053 0.294 4 13 3 12;S 17054 0.294 4 12 3 12;S 17055 0.294 4 13 4 12\"}\\n','KEY_FRAME 54\\n{\"duration\":1200,\"board\":\"S 17521 0.333 2 13 2 10;S 17522 0.333 3 12 2 10;S 17523 0.333 2 12 2 10;S 17524 0.333 3 13 3 10;S 17525 0.333 3 12 3 10\"}\\n','KEY_FRAME 55\\n{\"duration\":1280,\"board\":\"S 17991 0.313 2 13 4 11;S 17992 0.313 1 13 4 11;S 17993 0.313 1 14 4 11;S 17994 0.313 0 12 4 11;S 17995 0.313 0 13 4 11\"}\\n','KEY_FRAME 56\\n{\"board\":\"S 18346 0.313 4 12 0 11\"}\\n','KEY_FRAME 57\\n{\"board\":\"R 12775 0.833;R 13841 0.833;R 13843 0.833;R 14328 0.833;R 14329 0.833;R 14523 0.833;R 14936 0.833;R 14937 0.833;R 14938 0.833;R 14939 0.833;R 14940 0.833;R 15401 0.833;R 15402 0.833;R 15403 0.833;R 15404 0.833;M 15405 1 0.833 1.0;M 15741 1 0.833 1.0;R 15742 0.833;M 15743 1 0.833 1.0;M 15744 2 0.833 1.0;M 15745 1 0.833 1.0;R 15932 0.833;M 15933 1 0.833 1.0;M 15934 2 0.833 1.0;M 15935 3 0.833 1.0;R 15999 0.833;M 16156 1 0.833 1.0;R 16157 0.833;M 16158 1 0.833 1.0;M 16159 2 0.833 1.0;M 16160 1 0.833 1.0;R 16486 0.833;M 16487 1 0.833 1.0;M 16488 1 0.833 1.0;M 17051 1 0.833 1.0;R 17052 0.833;R 17053 0.833;R 17055 0.833;M 17521 2 0.833 1.0;M 17522 1 0.833 1.0;M 17523 1 0.833 1.0;M 17524 2 0.833 1.0;M 17525 1 0.833 1.0;M 17991 1 0.833 1.0;M 17992 1 0.833 1.0;M 17993 2 0.833 1.0;R 17994 0.833;M 17995 1 0.833 1.0;R 18346 0.833\"}\\n','KEY_FRAME 58\\n{\"board\":\"S 18481 0.313 4 12 0 11;S 18482 0.313 3 12 0 11;S 18483 0.313 3 13 0 11;S 18484 0.313 2 13 0 11;S 18485 0.313 2 14 0 11\"}\\n','KEY_FRAME 59\\n{\"duration\":1360,\"board\":\"S 18786 0.294 1 12 3 12\"}\\n','KEY_FRAME 60\\n{\"board\":\"R 10871 0.833;R 11237 0.833;R 11527 0.833;R 11776 0.833;R 12094 0.833;R 12774 0.833;R 13056 0.833;R 13057 0.833;R 13058 0.833;R 13059 0.833;R 13222 0.833;R 13223 0.833;R 13224 0.833;R 13225 0.833;R 13842 0.833;R 13845 0.833;R 14326 0.833;R 14327 0.833;R 14521 0.833;R 14522 0.833;M 15405 0 0.833 1.0;M 15741 0 0.833 1.0;M 15743 0 0.833 1.0;M 15744 1 0.833 1.0;M 15745 0 0.833 1.0;R 15931 0.833;M 15933 0 0.833 1.0;M 15934 1 0.833 1.0;M 15935 2 0.833 1.0;R 15998 0.833;M 16156 0 0.833 1.0;M 16158 0 0.833 1.0;M 16159 1 0.833 1.0;M 16160 0 0.833 1.0;R 16485 0.833;M 16487 0 0.833 1.0;M 16488 0 0.833 1.0;M 17051 0 0.833 1.0;R 17054 0.833;M 17521 1 0.833 1.0;M 17522 0 0.833 1.0;M 17523 0 0.833 1.0;M 17524 1 0.833 1.0;M 17525 0 0.833 1.0;M 17991 0 0.833 1.0;M 17992 0 0.833 1.0;M 17993 1 0.833 1.0;M 17995 0 0.833 1.0;M 18481 0 0.833 1.0;M 18482 0 0.833 1.0;M 18483 1 0.833 1.0;M 18484 1 0.833 1.0;M 18485 2 0.833 1.0;R 18786 0.833\"}\\n','KEY_FRAME 61\\n{\"board\":\"S 18926 0.294 4 13 4 12;S 18927 0.294 3 13 4 12;S 18928 0.294 2 13 4 12;S 18929 0.294 4 12 4 12;S 18930 0.294 3 12 4 12\"}\\n','KEY_FRAME 62\\n{\"board\":\"S 19516 0.294 4 13 1 12;S 19517 0.294 3 13 2 12;S 19518 0.294 4 13 2 12;S 19519 0.294 4 12 3 12;S 19520 0.294 4 13 3 12\"}\\n','KEY_FRAME 63\\n{\"board\":\"S 19949 0.294 1 13 0 12;S 19950 0.294 0 13 0 12;S 19951 0.294 0 12 0 12;S 19952 0.294 0 13 1 12\"}\\n','KEY_FRAME 64\\n{\"board\":\"S 20331 0.294 1 12 3 12;S 20332 0.294 1 13 3 12;S 20333 0.294 1 14 3 12;S 20334 0.294 1 14 4 12;S 20335 0.294 1 15 4 12\"}\\n','KEY_FRAME 65\\n{\"duration\":1280,\"board\":\"S 20791 0.313 1 13 0 11;S 20792 0.313 1 13 1 11;S 20793 0.313 1 12 1 11;S 20794 0.313 2 13 1 11;S 20795 0.313 1 13 2 11\"}\\n','KEY_FRAME 66\\n{\"board\":\"S 21191 0.313 2 14 0 11;S 21192 0.313 3 14 0 11;S 21193 0.313 3 13 0 11;S 21194 0.313 3 13 1 11;S 21195 0.313 3 12 1 11\"}\\n','KEY_FRAME 67\\n{\"duration\":1360,\"board\":\"S 21616 0.294 2 14 3 12;S 21617 0.294 2 13 3 12;S 21618 0.294 2 12 3 12;S 21619 0.294 3 14 3 12;S 21620 0.294 4 14 3 12\"}\\n','KEY_FRAME 68\\n{\"board\":\"R 15405 0.833;R 15741 0.833;R 15743 0.833;M 15744 0 0.833 1.0;R 15745 0.833;R 15933 0.833;M 15934 0 0.833 1.0;M 15935 1 0.833 1.0;R 16156 0.833;R 16158 0.833;M 16159 0 0.833 1.0;R 16160 0.833;R 16487 0.833;R 16488 0.833;R 17051 0.833;M 17521 0 0.833 1.0;R 17522 0.833;R 17523 0.833;M 17524 0 0.833 1.0;R 17525 0.833;R 17991 0.833;R 17992 0.833;M 17993 0 0.833 1.0;R 17995 0.833;R 18481 0.833;R 18482 0.833;M 18483 0 0.833 1.0;M 18484 0 0.833 1.0;M 18485 1 0.833 1.0;M 18926 0 0.833 1.0;M 18927 0 0.833 1.0;M 18928 0 0.833 1.0;R 18929 0.833;R 18930 0.833;M 19516 0 0.833 1.0;M 19517 0 0.833 1.0;M 19518 0 0.833 1.0;R 19519 0.833;M 19520 0 0.833 1.0;M 19949 0 0.833 1.0;M 19950 0 0.833 1.0;R 19951 0.833;M 19952 0 0.833 1.0;R 20331 0.833;M 20332 0 0.833 1.0;M 20333 1 0.833 1.0;M 20334 1 0.833 1.0;M 20335 2 0.833 1.0;M 20791 1 0.833 1.0;M 20792 1 0.833 1.0;M 20793 0 0.833 1.0;M 20794 1 0.833 1.0;M 20795 1 0.833 1.0;M 21191 2 0.833 1.0;M 21192 2 0.833 1.0;M 21193 1 0.833 1.0;M 21194 1 0.833 1.0;M 21195 0 0.833 1.0;M 21616 1 0.833 1.0;M 21617 0 0.833 1.0;R 21618 0.833;M 21619 1 0.833 1.0;M 21620 1 0.833 1.0\"}\\n','KEY_FRAME 69\\n{\"duration\":1280,\"board\":\"S 21961 0.313 2 12 4 11;S 21962 0.313 3 12 4 11;S 21963 0.313 2 13 4 11;S 21964 0.313 3 13 4 11\"}\\n','KEY_FRAME 70\\n{\"duration\":1360,\"board\":\"S 22065 0.294 0 12 4 12;S 22066 0.294 0 13 4 12;S 22067 0.294 0 14 4 12;S 22068 0.294 0 15 4 12\"}\\n','KEY_FRAME 71\\n{\"duration\":1280,\"board\":\"S 22251 0.313 4 12 1 11;S 22252 0.313 3 12 2 11;S 22253 0.313 4 12 2 11;S 22254 0.313 4 13 2 11;S 22255 0.313 4 13 3 11\"}\\n','KEY_FRAME 72\\n{\"duration\":1200,\"board\":\"S 22781 0.333 3 12 1 10;S 22782 0.333 2 12 1 10;S 22783 0.333 3 12 2 10;S 22784 0.333 3 12 3 10;S 22785 0.333 2 12 3 10\"}\\n','KEY_FRAME 73\\n{\"duration\":1360,\"board\":\"S 23081 0.294 1 14 2 12;S 23082 0.294 0 12 2 12;S 23083 0.294 0 13 2 12;S 23084 0.294 0 14 2 12;S 23085 0.294 1 14 3 12\"}\\n','KEY_FRAME 74\\n{\"board\":\"S 23531 0.294 4 12 0 12;S 23532 0.294 4 13 0 12;S 23533 0.294 4 14 0 12;S 23534 0.294 4 15 0 12;S 23535 0.294 4 16 0 12\"}\\n','KEY_FRAME 75\\n{\"board\":\"R 15744 0.833;R 15934 0.833;M 15935 0 0.833 1.0;R 16159 0.833;R 17521 0.833;R 17524 0.833;R 17993 0.833;R 18483 0.833;R 18484 0.833;M 18485 0 0.833 1.0;R 18926 0.833;R 18927 0.833;R 18928 0.833;R 19516 0.833;R 19517 0.833;R 19518 0.833;R 19520 0.833;R 19949 0.833;R 19950 0.833;R 19952 0.833;R 20332 0.833;M 20333 0 0.833 1.0;M 20334 0 0.833 1.0;M 20335 1 0.833 1.0;M 20791 0 0.833 1.0;M 20792 0 0.833 1.0;R 20793 0.833;M 20794 0 0.833 1.0;M 20795 0 0.833 1.0;M 21191 1 0.833 1.0;M 21192 1 0.833 1.0;M 21193 0 0.833 1.0;M 21194 0 0.833 1.0;R 21195 0.833;M 21616 0 0.833 1.0;R 21617 0.833;M 21619 0 0.833 1.0;M 21620 0 0.833 1.0;M 21961 0 0.833 1.0;M 21962 0 0.833 1.0;M 21963 1 0.833 1.0;M 21964 1 0.833 1.0;R 22065 0.833;M 22066 0 0.833 1.0;M 22067 1 0.833 1.0;M 22068 2 0.833 1.0;M 22251 0 0.833 1.0;M 22252 0 0.833 1.0;M 22253 0 0.833 1.0;M 22254 1 0.833 1.0;M 22255 1 0.833 1.0;M 22781 1 0.833 1.0;M 22782 1 0.833 1.0;M 22783 1 0.833 1.0;M 22784 1 0.833 1.0;M 22785 1 0.833 1.0;M 23081 1 0.833 1.0;R 23082 0.833;M 23083 0 0.833 1.0;M 23084 1 0.833 1.0;M 23085 1 0.833 1.0;R 23531 0.833;M 23532 0 0.833 1.0;M 23533 1 0.833 1.0;M 23534 2 0.833 1.0;M 23535 3 0.833 1.0\"}\\n','KEY_FRAME 76\\n{\"board\":\"S 23806 0.294 0 12 0 12;S 23807 0.294 0 14 0 12;S 23808 0.294 0 12 1 12;S 23809 0.294 0 13 1 12;S 23810 0.294 0 14 1 12\"}\\n','KEY_FRAME 77\\n{\"duration\":1280,\"board\":\"S 24036 0.313 2 13 3 11;S 24037 0.313 1 13 3 11;S 24038 0.313 0 13 3 11;S 24039 0.313 0 12 3 11;S 24040 0.313 1 13 4 11\"}\\n','KEY_FRAME 78\\n{\"duration\":1360,\"board\":\"S 24448 0.294 2 12 2 12;S 24449 0.294 2 13 2 12\"}\\n','KEY_FRAME 79\\n{\"duration\":1280,\"board\":\"S 24696 0.313 2 13 0 11;S 24697 0.313 1 12 0 11;S 24698 0.313 1 13 0 11;S 24699 0.313 1 12 1 11;S 24700 0.313 1 13 1 11\"}\\n','KEY_FRAME 80\\n{\"duration\":1360,\"board\":\"S 25281 0.294 3 14 3 12;S 25282 0.294 4 14 3 12;S 25283 0.294 4 14 4 12;S 25284 0.294 4 13 4 12;S 25285 0.294 4 12 4 12\"}\\n','KEY_FRAME 81\\n{\"board\":\"R 15935 0.833;R 18485 0.833;R 20333 0.833;R 20334 0.833;M 20335 0 0.833 1.0;R 20791 0.833;R 20792 0.833;R 20794 0.833;R 20795 0.833;M 21191 0 0.833 1.0;M 21192 0 0.833 1.0;R 21193 0.833;R 21194 0.833;R 21616 0.833;R 21619 0.833;R 21620 0.833;R 21961 0.833;R 21962 0.833;M 21963 0 0.833 1.0;M 21964 0 0.833 1.0;R 22066 0.833;M 22067 0 0.833 1.0;M 22068 1 0.833 1.0;R 22251 0.833;R 22252 0.833;R 22253 0.833;M 22254 0 0.833 1.0;M 22255 0 0.833 1.0;M 22781 0 0.833 1.0;M 22782 0 0.833 1.0;M 22783 0 0.833 1.0;M 22784 0 0.833 1.0;M 22785 0 0.833 1.0;M 23081 0 0.833 1.0;R 23083 0.833;M 23084 0 0.833 1.0;M 23085 0 0.833 1.0;R 23532 0.833;M 23533 0 0.833 1.0;M 23534 1 0.833 1.0;M 23535 2 0.833 1.0;R 23806 0.833;M 23807 1 0.833 1.0;R 23808 0.833;M 23809 0 0.833 1.0;M 23810 1 0.833 1.0;M 24036 1 0.833 1.0;M 24037 1 0.833 1.0;M 24038 1 0.833 1.0;M 24039 0 0.833 1.0;M 24040 1 0.833 1.0;R 24448 0.833;M 24449 0 0.833 1.0;M 24696 1 0.833 1.0;M 24697 0 0.833 1.0;M 24698 1 0.833 1.0;M 24699 0 0.833 1.0;M 24700 1 0.833 1.0;M 25281 1 0.833 1.0;M 25282 1 0.833 1.0;M 25283 1 0.833 1.0;M 25284 0 0.833 1.0;R 25285 0.833\"}\\n','KEY_FRAME 82\\n{\"board\":\"S 25620 0.294 4 12 1 12;S 25621 0.294 4 13 1 12;S 25622 0.294 3 13 1 12;S 25623 0.294 4 13 2 12\"}\\n','KEY_FRAME 83\\n{\"duration\":1280,\"board\":\"S 25901 0.313 3 12 0 11;S 25902 0.313 1 13 0 11;S 25903 0.313 2 13 0 11;S 25904 0.313 3 13 0 11;S 25905 0.313 1 13 1 11\"}\\n','KEY_FRAME 84\\n{\"board\":\"S 26276 0.313 2 12 1 11;S 26277 0.313 1 12 2 11;S 26278 0.313 2 12 2 11;S 26279 0.313 3 12 2 11;S 26280 0.313 1 13 2 11\"}\\n','KEY_FRAME 85\\n{\"board\":\"S 26758 0.313 2 13 3 11;S 26759 0.313 2 13 4 11;S 26760 0.313 2 12 4 11;S 26761 0.313 3 12 4 11\"}\\n','KEY_FRAME 86\\n{\"board\":\"S 27116 0.313 0 14 0 11;S 27117 0.313 0 13 1 11;S 27118 0.313 0 14 1 11;S 27119 0.313 0 12 2 11;S 27120 0.313 0 13 2 11\"}\\n','KEY_FRAME 87\\n{\"board\":\"R 22068 0.833;R 23534 0.833;M 23535 1 0.833 1.0;R 23807 0.833;R 23810 0.833;R 24036 0.833;R 24037 0.833;R 24038 0.833;R 24040 0.833;R 24696 0.833;R 24698 0.833;R 24700 0.833;R 25281 0.833;R 25282 0.833;R 25283 0.833;R 25621 0.833;R 25622 0.833;R 25623 0.833;R 25901 0.833;M 25902 1 0.833 1.0;M 25903 1 0.833 1.0;M 25904 1 0.833 1.0;M 25905 1 0.833 1.0;R 26276 0.833;R 26277 0.833;R 26278 0.833;R 26279 0.833;M 26280 1 0.833 1.0;M 26758 1 0.833 1.0;M 26759 1 0.833 1.0;R 26760 0.833;R 26761 0.833;M 27116 2 0.833 1.0;M 27117 1 0.833 1.0;M 27118 2 0.833 1.0;R 27119 0.833;M 27120 1 0.833 1.0\"}\\n','KEY_FRAME 88\\n{\"board\":\"S 27515 0.313 2 12 1 11;S 27516 0.313 3 12 2 11;S 27517 0.313 2 12 2 11;S 27518 0.313 3 12 3 11\"}\\n','KEY_FRAME 89\\n{\"board\":\"S 27801 0.313 4 13 0 11;S 27802 0.313 4 12 1 11;S 27803 0.313 4 13 1 11;S 27804 0.313 4 12 2 11;S 27805 0.313 4 12 3 11\"}\\n','KEY_FRAME 90\\n{\"board\":\"S 28311 0.313 3 13 4 11;S 28312 0.313 2 13 4 11;S 28313 0.313 1 13 4 11;S 28314 0.313 3 12 4 11;S 28315 0.313 1 12 4 11\"}\\n','KEY_FRAME 91\\n{\"board\":\"S 28636 0.313 3 13 3 11;S 28637 0.313 2 13 3 11;S 28638 0.313 1 13 3 11;S 28639 0.313 1 12 3 11;S 28640 0.313 0 12 3 11\"}\\n','KEY_FRAME 92\\n{\"board\":\"S 29256 0.313 4 13 2 11;S 29257 0.313 4 13 3 11;S 29258 0.313 4 12 4 11;S 29259 0.313 4 13 4 11;S 29260 0.313 4 14 4 11\"}\\n','KEY_FRAME 93\\n{\"duration\":1200,\"board\":\"S 29501 0.333 0 12 2 10;S 29502 0.333 1 12 2 10;S 29503 0.333 0 12 3 10;S 29504 0.333 0 13 3 10;S 29505 0.333 1 13 3 10\"}\\n','KEY_FRAME 94\\n{\"duration\":1280,\"board\":\"S 30036 0.313 3 13 0 11;S 30037 0.313 3 13 1 11;S 30038 0.313 2 13 1 11;S 30039 0.313 3 12 1 11;S 30040 0.313 3 13 2 11\"}\\n','KEY_FRAME 95\\n{\"duration\":1200,\"board\":\"S 30386 0.333 1 12 0 10;S 30387 0.333 2 13 1 10;S 30388 0.333 1 13 1 10;S 30389 0.333 0 13 1 10;S 30390 0.333 1 12 1 10\"}\\n','KEY_FRAME 96\\n{\"board\":\"S 30807 0.333 2 13 2 10;S 30808 0.333 1 13 2 10;S 30809 0.333 2 12 2 10\"}\\n','KEY_FRAME 97\\n{\"duration\":1120,\"board\":\"S 31196 0.357 4 13 0 9;S 31197 0.357 4 12 0 9;S 31198 0.357 3 12 1 9;S 31199 0.357 4 12 1 9;S 31200 0.357 3 12 2 9\"}\\n','KEY_FRAME 98\\n{\"board\":\"S 31721 0.357 2 12 3 9;S 31722 0.357 3 12 3 9;S 31723 0.357 2 13 4 9;S 31724 0.357 2 12 4 9;S 31725 0.357 3 12 4 9\"}\\n','KEY_FRAME 99\\n{\"duration\":1280,\"board\":\"S 32221 0.313 0 14 4 11;S 32222 0.313 0 13 4 11;S 32223 0.313 0 12 4 11;S 32224 0.313 1 15 4 11;S 32225 0.313 1 14 4 11\"}\\n','KEY_FRAME 100\\n{\"duration\":1200,\"board\":\"S 32748 0.333 2 14 0 10;S 32749 0.333 2 13 0 10;S 32750 0.333 2 12 0 10;S 32751 0.333 2 14 1 10\"}\\n','KEY_FRAME 101\\n{\"board\":\"R 27116 0.833;R 27118 0.833;R 27801 0.833;R 27803 0.833;R 28311 0.833;R 28312 0.833;R 28313 0.833;R 28636 0.833;R 28637 0.833;R 28638 0.833;R 29256 0.833;R 29257 0.833;R 29259 0.833;M 29260 2 0.833 1.0;R 29501 0.833;R 29502 0.833;R 29503 0.833;M 29504 2 0.833 1.0;M 29505 2 0.833 1.0;R 30036 0.833;R 30037 0.833;R 30038 0.833;R 30040 0.833;R 30386 0.833;M 30387 2 0.833 1.0;M 30388 2 0.833 1.0;M 30389 2 0.833 1.0;R 30390 0.833;M 30807 2 0.833 1.0;M 30808 2 0.833 1.0;R 30809 0.833;M 31196 3 0.833 1.0;M 31197 2 0.833 1.0;M 31198 2 0.833 1.0;M 31199 2 0.833 1.0;M 31200 2 0.833 1.0;M 31721 2 0.833 1.0;M 31722 2 0.833 1.0;M 31723 3 0.833 1.0;M 31724 2 0.833 1.0;M 31725 2 0.833 1.0;M 32221 2 0.833 1.0;R 32222 0.833;M 32224 3 0.833 1.0;M 32225 2 0.833 1.0;M 32748 3 0.833 1.0;M 32749 2 0.833 1.0;R 32750 0.833;M 32751 3 0.833 1.0\"}\\n','KEY_FRAME 102\\n{\"board\":\"S 33141 0.333 0 13 1 10;S 33142 0.333 0 13 2 10;S 33143 0.333 0 12 2 10;S 33144 0.333 1 13 2 10;S 33145 0.333 0 13 3 10\"}\\n','KEY_FRAME 103\\n{\"board\":\"S 33426 0.333 4 12 2 10;S 33427 0.333 2 13 2 10;S 33428 0.333 3 13 2 10;S 33429 0.333 4 13 2 10;S 33430 0.333 2 13 3 10\"}\\n','KEY_FRAME 104\\n{\"board\":\"S 33730 0.333 4 12 3 10;S 33731 0.333 4 13 3 10;S 33732 0.333 3 13 3 10;S 33733 0.333 4 13 4 10\"}\\n','KEY_FRAME 105\\n{\"board\":\"S 34016 0.333 4 14 0 10;S 34017 0.333 3 12 0 10;S 34018 0.333 3 13 0 10;S 34019 0.333 3 14 0 10;S 34020 0.333 3 13 1 10\"}\\n','KEY_FRAME 106\\n{\"duration\":1120,\"board\":\"S 34515 0.357 4 12 1 9;S 34516 0.357 4 13 1 9;S 34517 0.357 3 13 1 9;S 34518 0.357 4 13 2 9\"}\\n','KEY_FRAME 107\\n{\"duration\":1200,\"board\":\"S 34811 0.333 0 12 0 10;S 34812 0.333 1 14 0 10;S 34813 0.333 1 13 0 10;S 34814 0.333 1 12 0 10;S 34815 0.333 1 14 1 10\"}\\n','KEY_FRAME 108\\n{\"board\":\"R 29260 0.833;R 29504 0.833;R 29505 0.833;R 30387 0.833;R 30388 0.833;R 30389 0.833;R 30807 0.833;R 30808 0.833;M 31196 2 0.833 1.0;R 31197 0.833;R 31198 0.833;R 31199 0.833;R 31200 0.833;R 31721 0.833;R 31722 0.833;M 31723 2 0.833 1.0;R 31724 0.833;R 31725 0.833;R 32221 0.833;M 32224 2 0.833 1.0;R 32225 0.833;M 32748 2 0.833 1.0;R 32749 0.833;M 32751 2 0.833 1.0;M 33141 2 0.833 1.0;M 33142 2 0.833 1.0;R 33143 0.833;M 33144 2 0.833 1.0;M 33145 2 0.833 1.0;R 33426 0.833;M 33427 2 0.833 1.0;M 33428 2 0.833 1.0;M 33429 2 0.833 1.0;M 33430 2 0.833 1.0;R 33730 0.833;M 33731 2 0.833 1.0;M 33732 2 0.833 1.0;M 33733 2 0.833 1.0;M 34016 3 0.833 1.0;R 34017 0.833;M 34018 2 0.833 1.0;M 34019 3 0.833 1.0;M 34020 2 0.833 1.0;M 34515 2 0.833 1.0;M 34516 3 0.833 1.0;M 34517 3 0.833 1.0;M 34518 3 0.833 1.0;R 34811 0.833;M 34812 3 0.833 1.0;M 34813 2 0.833 1.0;R 34814 0.833;M 34815 3 0.833 1.0\"}\\n','KEY_FRAME 109\\n{\"board\":\"S 35271 0.333 3 13 3 10;S 35272 0.333 4 13 3 10;S 35273 0.333 3 12 4 10;S 35274 0.333 3 13 4 10;S 35275 0.333 4 13 4 10\"}\\n','KEY_FRAME 110\\n{\"duration\":1360,\"board\":\"S 35576 0.294 0 12 0 12;S 35577 0.294 0 13 0 12;S 35578 0.294 0 14 0 12;S 35579 0.294 0 15 0 12;S 35580 0.294 0 16 0 12\"}\\n','KEY_FRAME 111\\n{\"board\":\"R 20335 0.714;R 21191 0.714;R 21192 0.714;R 21963 0.714;R 21964 0.714;R 22067 0.714;R 22254 0.714;R 22255 0.714;R 22781 0.714;R 22782 0.714;R 22783 0.714;R 22784 0.714;R 22785 0.714;R 23081 0.714;R 23084 0.714;R 23085 0.714;R 23533 0.714;R 23535 0.714;R 23809 0.714;R 24039 0.714;R 24449 0.714;R 24697 0.714;R 24699 0.714;R 25284 0.714;R 25620 0.714;R 25902 0.714;R 25903 0.714;R 25904 0.714;R 25905 0.714;R 26280 0.714;R 26758 0.714;R 26759 0.714;R 27117 0.714;R 27120 0.714;R 27515 0.714;R 27516 0.714;R 27517 0.714;R 27518 0.714;R 27802 0.714;R 27804 0.714;R 27805 0.714;R 28314 0.714;R 28315 0.714;R 28639 0.714;R 28640 0.714;R 29258 0.714;R 30039 0.714;M 31196 0 0.714 1.0;M 31723 0 0.714 1.0;R 32223 0.714;M 32224 0 0.714 1.0;M 32748 0 0.714 1.0;M 32751 0 0.714 1.0;M 33141 0 0.714 1.0;M 33142 0 0.714 1.0;M 33144 0 0.714 1.0;M 33145 0 0.714 1.0;M 33427 0 0.714 1.0;M 33428 0 0.714 1.0;M 33429 0 0.714 1.0;M 33430 0 0.714 1.0;M 33731 0 0.714 1.0;M 33732 0 0.714 1.0;M 33733 0 0.714 1.0;M 34016 1 0.714 1.0;M 34018 0 0.714 1.0;M 34019 1 0.714 1.0;M 34020 0 0.714 1.0;M 34515 0 0.714 1.0;M 34516 1 0.714 1.0;M 34517 1 0.714 1.0;M 34518 1 0.714 1.0;M 34812 1 0.714 1.0;M 34813 0 0.714 1.0;M 34815 1 0.714 1.0;M 35271 1 0.714 1.0;M 35272 1 0.714 1.0;M 35273 0 0.714 1.0;M 35274 1 0.714 1.0;M 35275 1 0.714 1.0;R 35576 0.714;R 35577 0.714;M 35578 0 0.714 1.0;M 35579 1 0.714 1.0;M 35580 2 0.714 1.0\"}\\n','KEY_FRAME 112\\n{\"board\":\"S 35786 0.294 1 13 2 12;S 35787 0.294 1 13 3 12;S 35788 0.294 1 12 3 12;S 35789 0.294 2 13 3 12;S 35790 0.294 2 13 4 12\"}\\n','KEY_FRAME 113\\n{\"board\":\"S 36271 0.294 0 12 4 12;S 36272 0.294 0 13 4 12;S 36273 0.294 1 13 4 12;S 36274 0.294 1 14 4 12;S 36275 0.294 2 14 4 12\"}\\n','KEY_FRAME 114\\n{\"duration\":1280,\"board\":\"S 36691 0.313 2 12 1 11;S 36692 0.313 2 12 2 11;S 36693 0.313 3 12 2 11;S 36694 0.313 3 13 2 11\"}\\n','KEY_FRAME 115\\n{\"board\":\"S 37046 0.313 2 13 3 11;S 37047 0.313 1 13 3 11;S 37048 0.313 0 13 3 11;S 37049 0.313 0 12 3 11;S 37050 0.313 0 13 4 11\"}\\n','KEY_FRAME 116\\n{\"duration\":1200,\"board\":\"S 37496 0.333 4 12 0 10;S 37497 0.333 4 12 1 10;S 37498 0.333 4 12 2 10;S 37499 0.333 4 12 3 10\"}\\n','KEY_FRAME 117\\n{\"board\":\"S 37648 0.333 3 12 0 10;S 37649 0.333 2 12 1 10;S 37650 0.333 3 12 1 10;S 37651 0.333 2 12 2 10\"}\\n','KEY_FRAME 118\\n{\"duration\":1280,\"board\":\"S 38006 0.313 0 12 1 11;S 38007 0.313 0 13 1 11;S 38008 0.313 0 14 1 11;S 38009 0.313 0 15 1 11;S 38010 0.313 0 12 2 11\"}\\n','KEY_FRAME 119\\n{\"duration\":1200,\"board\":\"S 38461 0.333 3 13 2 10;S 38462 0.333 3 13 3 10;S 38463 0.333 2 13 3 10;S 38464 0.333 3 12 3 10;S 38465 0.333 3 12 4 10\"}\\n','KEY_FRAME 120\\n{\"duration\":1280,\"board\":\"S 38966 0.313 0 14 0 11;S 38967 0.313 1 14 0 11;S 38968 0.313 1 13 0 11;S 38969 0.313 2 13 0 11;S 38970 0.313 2 12 0 11\"}\\n','KEY_FRAME 121\\n{\"board\":\"R 34016 0.833;R 34019 0.833;R 34516 0.833;R 34517 0.833;R 34518 0.833;R 34812 0.833;R 34815 0.833;R 35271 0.833;R 35272 0.833;R 35274 0.833;R 35275 0.833;R 35579 0.833;M 35580 1 0.833 1.0;R 35786 0.833;R 35787 0.833;R 35789 0.833;R 35790 0.833;R 36272 0.833;R 36273 0.833;M 36274 1 0.833 1.0;M 36275 1 0.833 1.0;R 36691 0.833;R 36692 0.833;R 36693 0.833;M 36694 1 0.833 1.0;M 37046 1 0.833 1.0;M 37047 1 0.833 1.0;M 37048 1 0.833 1.0;R 37049 0.833;M 37050 1 0.833 1.0;M 37496 1 0.833 1.0;M 37497 1 0.833 1.0;M 37498 1 0.833 1.0;M 37499 1 0.833 1.0;M 37648 1 0.833 1.0;M 37649 1 0.833 1.0;M 37650 1 0.833 1.0;M 37651 1 0.833 1.0;R 38006 0.833;M 38007 1 0.833 1.0;M 38008 2 0.833 1.0;M 38009 3 0.833 1.0;R 38010 0.833;M 38461 2 0.833 1.0;M 38462 2 0.833 1.0;M 38463 2 0.833 1.0;M 38464 1 0.833 1.0;M 38465 1 0.833 1.0;M 38966 2 0.833 1.0;M 38967 2 0.833 1.0;M 38968 1 0.833 1.0;M 38969 1 0.833 1.0;R 38970 0.833\"}\\n','KEY_FRAME 122\\n{\"board\":\"S 39461 0.313 0 13 2 11;S 39462 0.313 1 12 2 11;S 39463 0.313 0 12 2 11;S 39464 0.313 1 13 3 11;S 39465 0.313 0 13 3 11\"}\\n','KEY_FRAME 123\\n{\"duration\":1200,\"board\":\"S 39991 0.333 2 12 0 10;S 39992 0.333 2 13 1 10;S 39993 0.333 2 12 1 10;S 39994 0.333 1 12 2 10;S 39995 0.333 2 12 2 10\"}\\n','KEY_FRAME 124\\n{\"duration\":1280,\"board\":\"S 40481 0.313 4 13 3 11;S 40482 0.313 4 12 4 11;S 40483 0.313 4 13 4 11;S 40484 0.313 4 14 4 11;S 40485 0.313 3 13 4 11\"}\\n','KEY_FRAME 125\\n{\"duration\":1200,\"board\":\"S 40786 0.333 3 12 1 10;S 40787 0.333 4 12 1 10;S 40788 0.333 3 13 1 10;S 40789 0.333 4 12 2 10\"}\\n','KEY_FRAME 126\\n{\"duration\":1360,\"board\":\"S 41246 0.294 1 15 0 12;S 41247 0.294 1 12 1 12;S 41248 0.294 1 13 1 12;S 41249 0.294 1 14 1 12;S 41250 0.294 1 15 1 12\"}\\n','KEY_FRAME 127\\n{\"board\":\"R 31196 0.714;R 31723 0.714;R 32224 0.714;R 32748 0.714;R 32751 0.714;R 33141 0.714;R 33142 0.714;R 33144 0.714;R 33145 0.714;R 33427 0.714;R 33428 0.714;R 33429 0.714;R 33430 0.714;R 33731 0.714;R 33732 0.714;R 33733 0.714;R 34018 0.714;R 34020 0.714;R 34515 0.714;R 34813 0.714;R 35273 0.714;R 35578 0.714;R 35580 0.714;R 35788 0.714;R 36271 0.714;R 36274 0.714;R 36275 0.714;R 36694 0.714;R 37046 0.714;R 37047 0.714;R 37048 0.714;R 37050 0.714;R 37496 0.714;R 37497 0.714;R 37498 0.714;R 37499 0.714;R 37648 0.714;R 37649 0.714;R 37650 0.714;R 37651 0.714;R 38007 0.714;M 38008 0 0.714 1.0;M 38009 1 0.714 1.0;M 38461 0 0.714 1.0;M 38462 0 0.714 1.0;M 38463 0 0.714 1.0;R 38464 0.714;R 38465 0.714;M 38966 0 0.714 1.0;M 38967 0 0.714 1.0;R 38968 0.714;R 38969 0.714;M 39461 0 0.714 1.0;R 39462 0.714;R 39463 0.714;M 39464 0 0.714 1.0;M 39465 0 0.714 1.0;M 39991 0 0.714 1.0;M 39992 1 0.714 1.0;M 39993 0 0.714 1.0;M 39994 0 0.714 1.0;M 39995 0 0.714 1.0;M 40481 0 0.714 1.0;R 40482 0.714;M 40483 0 0.714 1.0;M 40484 1 0.714 1.0;M 40485 0 0.714 1.0;M 40786 0 0.714 1.0;M 40787 0 0.714 1.0;M 40788 1 0.714 1.0;M 40789 0 0.714 1.0;M 41246 1 0.714 1.0;R 41247 0.714;R 41248 0.714;M 41249 0 0.714 1.0;M 41250 1 0.714 1.0\"}\\n','KEY_FRAME 128\\n{\"duration\":1280,\"board\":\"S 41716 0.313 0 12 2 11;S 41717 0.313 1 12 2 11;S 41718 0.313 2 12 2 11;S 41719 0.313 3 12 2 11;S 41720 0.313 1 12 3 11\"}\\n','KEY_FRAME 129\\n{\"duration\":1360,\"board\":\"S 42196 0.294 0 13 3 12;S 42197 0.294 1 12 4 12;S 42198 0.294 0 12 4 12;S 42199 0.294 0 13 4 12;S 42200 0.294 0 14 4 12\"}\\n','KEY_FRAME 130\\n{\"duration\":1280,\"board\":\"S 42586 0.313 4 12 1 11;S 42587 0.313 4 12 2 11;S 42588 0.313 4 12 3 11\"}\\n','KEY_FRAME 131\\n{\"duration\":1360,\"board\":\"S 42645 0.294 4 12 0 12;S 42646 0.294 4 13 0 12;S 42647 0.294 4 14 0 12;S 42648 0.294 4 15 0 12\"}\\n','KEY_FRAME 132\\n{\"duration\":1280,\"board\":\"S 42831 0.313 0 12 0 11;S 42832 0.313 0 13 0 11;S 42833 0.313 0 13 1 11;S 42834 0.313 0 13 2 11;S 42835 0.313 1 13 2 11\"}\\n','KEY_FRAME 133\\n{\"board\":\"S 43166 0.313 2 13 0 11;S 43167 0.313 2 12 0 11;S 43168 0.313 2 13 1 11;S 43169 0.313 1 13 1 11;S 43170 0.313 2 13 2 11\"}\\n','KEY_FRAME 134\\n{\"duration\":1360,\"board\":\"S 43659 0.294 3 13 3 12;S 43660 0.294 3 13 4 12;S 43661 0.294 2 13 4 12;S 43662 0.294 2 12 4 12\"}\\n','KEY_FRAME 135\\n{\"board\":\"S 43893 0.294 3 12 0 12;S 43894 0.294 3 13 0 12\"}\\n','KEY_FRAME 136\\n{\"board\":\"R 38008 0.833;M 38009 0 0.833 1.0;R 38461 0.833;R 38462 0.833;R 38463 0.833;R 38966 0.833;R 38967 0.833;R 39461 0.833;R 39464 0.833;R 39465 0.833;R 39991 0.833;M 39992 0 0.833 1.0;R 39993 0.833;R 39994 0.833;R 39995 0.833;R 40481 0.833;R 40483 0.833;M 40484 0 0.833 1.0;R 40485 0.833;R 40786 0.833;R 40787 0.833;M 40788 0 0.833 1.0;R 40789 0.833;M 41246 0 0.833 1.0;R 41249 0.833;M 41250 0 0.833 1.0;M 41716 0 0.833 1.0;M 41717 0 0.833 1.0;M 41718 0 0.833 1.0;M 41719 0 0.833 1.0;M 41720 0 0.833 1.0;M 42196 0 0.833 1.0;R 42197 0.833;R 42198 0.833;M 42199 0 0.833 1.0;M 42200 1 0.833 1.0;M 42586 0 0.833 1.0;M 42587 0 0.833 1.0;M 42588 0 0.833 1.0;R 42645 0.833;M 42646 0 0.833 1.0;M 42647 1 0.833 1.0;M 42648 2 0.833 1.0;M 42831 0 0.833 1.0;M 42832 1 0.833 1.0;M 42833 1 0.833 1.0;M 42834 1 0.833 1.0;M 42835 1 0.833 1.0;M 43166 1 0.833 1.0;M 43167 0 0.833 1.0;M 43168 1 0.833 1.0;M 43169 1 0.833 1.0;M 43170 1 0.833 1.0;M 43659 0 0.833 1.0;M 43660 0 0.833 1.0;M 43661 0 0.833 1.0;R 43662 0.833;R 43893 0.833;M 43894 0 0.833 1.0\"}\\n','KEY_FRAME 137\\n{\"board\":\"S 43986 0.294 2 12 3 12;S 43987 0.294 1 13 3 12;S 43988 0.294 2 13 3 12;S 43989 0.294 3 13 3 12;S 43990 0.294 2 14 3 12\"}\\n','KEY_FRAME 138\\n{\"board\":\"S 44105 0.294 1 12 4 12;S 44106 0.294 1 13 4 12;S 44107 0.294 1 14 4 12;S 44108 0.294 1 15 4 12\"}\\n','KEY_FRAME 139\\n{\"board\":\"R 38009 0.833;R 39992 0.833;R 40484 0.833;R 40788 0.833;R 41246 0.833;R 41250 0.833;R 41716 0.833;R 41717 0.833;R 41718 0.833;R 41719 0.833;R 41720 0.833;R 42196 0.833;R 42199 0.833;M 42200 0 0.833 1.0;R 42586 0.833;R 42587 0.833;R 42588 0.833;R 42646 0.833;M 42647 0 0.833 1.0;M 42648 1 0.833 1.0;R 42831 0.833;M 42832 0 0.833 1.0;M 42833 0 0.833 1.0;M 42834 0 0.833 1.0;M 42835 0 0.833 1.0;M 43166 0 0.833 1.0;R 43167 0.833;M 43168 0 0.833 1.0;M 43169 0 0.833 1.0;M 43170 0 0.833 1.0;R 43659 0.833;R 43660 0.833;R 43661 0.833;R 43894 0.833;R 43986 0.833;M 43987 0 0.833 1.0;M 43988 0 0.833 1.0;M 43989 0 0.833 1.0;M 43990 1 0.833 1.0;R 44105 0.833;M 44106 0 0.833 1.0;M 44107 1 0.833 1.0;M 44108 2 0.833 1.0\"}\\n','KEY_FRAME 140\\n{\"board\":\"S 44186 0.294 3 12 0 12;S 44187 0.294 3 12 1 12;S 44188 0.294 3 12 2 12\"}\\n','KEY_FRAME 141\\n{\"board\":\"S 44305 0.294 4 12 3 12;S 44306 0.294 4 13 3 12;S 44307 0.294 4 12 4 12;S 44308 0.294 3 12 4 12\"}\\n','KEY_FRAME 142\\n{\"duration\":1280,\"board\":\"S 44756 0.313 0 12 0 11;S 44757 0.313 0 12 1 11;S 44758 0.313 0 12 2 11;S 44759 0.313 1 12 2 11;S 44760 0.313 1 12 3 11\"}\\n','KEY_FRAME 143\\n{\"duration\":1360,\"board\":\"S 45099 0.294 2 12 4 12;S 45100 0.294 2 13 4 12;S 45101 0.294 2 14 4 12\"}\\n','KEY_FRAME 144\\n{\"board\":\"S 45270 0.294 0 12 3 12;S 45271 0.294 0 13 3 12;S 45272 0.294 0 14 3 12;S 45273 0.294 0 13 4 12\"}\\n','KEY_FRAME 145\\n{\"board\":\"S 45551 0.294 3 13 1 12;S 45552 0.294 3 13 2 12;S 45553 0.294 4 13 2 12;S 45554 0.294 4 12 2 12;S 45555 0.294 3 13 3 12\"}\\n','KEY_FRAME 146\\n{\"board\":\"S 45955 0.294 4 12 1 12;S 45956 0.294 4 13 1 12;S 45957 0.294 4 14 1 12;S 45958 0.294 4 15 1 12\"}\\n','KEY_FRAME 147\\n{\"duration\":1280,\"board\":\"S 46146 0.313 3 12 0 11;S 46147 0.313 2 12 0 11;S 46148 0.313 2 12 1 11;S 46149 0.313 2 12 2 11;S 46150 0.313 2 13 2 11\"}\\n','KEY_FRAME 148\\n{\"duration\":1360,\"board\":\"S 46496 0.294 1 12 0 12;S 46497 0.294 1 13 0 12;S 46498 0.294 1 14 0 12;S 46499 0.294 1 15 0 12;S 46500 0.294 0 15 0 12\"}\\n','KEY_FRAME 149\\n{\"board\":\"R 42200 0.833;R 42647 0.833;M 42648 0 0.833 1.0;R 42832 0.833;R 42833 0.833;R 42834 0.833;R 42835 0.833;R 43166 0.833;R 43168 0.833;R 43169 0.833;R 43170 0.833;R 43987 0.833;R 43988 0.833;R 43989 0.833;M 43990 0 0.833 1.0;R 44106 0.833;M 44107 0 0.833 1.0;M 44108 1 0.833 1.0;R 44186 0.833;R 44187 0.833;R 44188 0.833;R 44305 0.833;M 44306 0 0.833 1.0;R 44307 0.833;R 44308 0.833;M 44756 0 0.833 1.0;M 44757 0 0.833 1.0;M 44758 0 0.833 1.0;M 44759 0 0.833 1.0;M 44760 0 0.833 1.0;R 45099 0.833;M 45100 0 0.833 1.0;M 45101 1 0.833 1.0;R 45270 0.833;M 45271 0 0.833 1.0;M 45272 1 0.833 1.0;M 45273 0 0.833 1.0;M 45551 0 0.833 1.0;M 45552 0 0.833 1.0;M 45553 0 0.833 1.0;R 45554 0.833;M 45555 0 0.833 1.0;R 45955 0.833;M 45956 0 0.833 1.0;M 45957 1 0.833 1.0;M 45958 2 0.833 1.0;M 46146 0 0.833 1.0;M 46147 0 0.833 1.0;M 46148 0 0.833 1.0;M 46149 0 0.833 1.0;M 46150 1 0.833 1.0;R 46496 0.833;M 46497 0 0.833 1.0;M 46498 1 0.833 1.0;M 46499 2 0.833 1.0;M 46500 2 0.833 1.0\"}\\n','KEY_FRAME 150\\n{\"board\":\"S 47056 0.294 2 13 0 12;S 47057 0.294 1 13 1 12;S 47058 0.294 1 12 1 12;S 47059 0.294 2 13 1 12;S 47060 0.294 1 13 2 12\"}\\n','KEY_FRAME 151\\n{\"board\":\"S 47546 0.294 3 13 3 12;S 47547 0.294 4 12 4 12;S 47548 0.294 3 12 4 12;S 47549 0.294 3 13 4 12;S 47550 0.294 3 14 4 12\"}\\n','KEY_FRAME 152\\n{\"board\":\"R 42648 0.833;R 43990 0.833;R 44107 0.833;M 44108 0 0.833 1.0;R 44306 0.833;R 44756 0.833;R 44757 0.833;R 44758 0.833;R 44759 0.833;R 44760 0.833;R 45100 0.833;M 45101 0 0.833 1.0;R 45271 0.833;M 45272 0 0.833 1.0;R 45273 0.833;R 45551 0.833;R 45552 0.833;R 45553 0.833;R 45555 0.833;R 45956 0.833;M 45957 0 0.833 1.0;M 45958 1 0.833 1.0;R 46146 0.833;R 46147 0.833;R 46148 0.833;R 46149 0.833;M 46150 0 0.833 1.0;R 46497 0.833;M 46498 0 0.833 1.0;M 46499 1 0.833 1.0;M 46500 1 0.833 1.0;M 47056 0 0.833 1.0;M 47057 0 0.833 1.0;R 47058 0.833;M 47059 0 0.833 1.0;M 47060 0 0.833 1.0;M 47546 0 0.833 1.0;R 47547 0.833;R 47548 0.833;M 47549 0 0.833 1.0;M 47550 1 0.833 1.0\"}\\n','KEY_FRAME 153\\n{\"board\":\"S 48063 0.294 3 12 0 12;S 48064 0.294 4 12 0 12;S 48065 0.294 3 12 1 12;S 48066 0.294 3 12 2 12\"}\\n','KEY_FRAME 154\\n{\"board\":\"S 48486 0.294 2 13 0 12;S 48487 0.294 0 12 1 12;S 48488 0.294 0 13 1 12;S 48489 0.294 1 13 1 12;S 48490 0.294 2 13 1 12\"}\\n','KEY_FRAME 155\\n{\"board\":\"S 48801 0.294 1 13 2 12;S 48802 0.294 2 13 2 12;S 48803 0.294 2 13 3 12;S 48804 0.294 2 12 3 12;S 48805 0.294 2 13 4 12\"}\\n','KEY_FRAME 156\\n{\"board\":\"S 49311 0.294 4 12 2 12;S 49312 0.294 4 12 3 12;S 49313 0.294 4 13 3 12;S 49314 0.294 4 14 3 12;S 49315 0.294 4 12 4 12\"}\\n','KEY_FRAME 157\\n{\"duration\":1280,\"board\":\"S 49641 0.313 4 12 0 11;S 49642 0.313 3 12 0 11;S 49643 0.313 3 12 1 11;S 49644 0.313 3 12 2 11;S 49645 0.313 3 13 2 11\"}\\n','KEY_FRAME 158\\n{\"duration\":1360,\"board\":\"S 49855 0.294 0 12 2 12;S 49856 0.294 0 13 2 12;S 49857 0.294 0 14 2 12;S 49858 0.294 0 15 2 12\"}\\n','KEY_FRAME 159\\n{\"board\":\"S 50021 0.294 1 12 3 12;S 50022 0.294 1 13 3 12;S 50023 0.294 1 14 3 12;S 50024 0.294 0 13 3 12;S 50025 0.294 1 13 4 12\"}\\n','KEY_FRAME 160\\n{\"duration\":1200,\"board\":\"S 50431 0.333 0 12 1 10;S 50432 0.333 1 12 1 10;S 50433 0.333 1 12 2 10;S 50434 0.333 2 12 2 10;S 50435 0.333 2 12 3 10\"}\\n','KEY_FRAME 161\\n{\"board\":\"S 50796 0.333 3 12 0 10;S 50797 0.333 3 13 0 10;S 50798 0.333 2 12 0 10;S 50799 0.333 3 12 1 10;S 50800 0.333 2 12 1 10\"}\\n','KEY_FRAME 162\\n{\"duration\":1280,\"board\":\"S 51396 0.313 4 13 0 11;S 51397 0.313 4 13 1 11;S 51398 0.313 4 12 2 11;S 51399 0.313 4 13 2 11;S 51400 0.313 4 14 2 11\"}\\n','KEY_FRAME 163\\n{\"duration\":1200,\"board\":\"S 51676 0.333 2 13 3 10;S 51677 0.333 1 13 3 10;S 51678 0.333 2 13 4 10;S 51679 0.333 3 12 4 10;S 51680 0.333 2 12 4 10\"}\\n','KEY_FRAME 164\\n{\"duration\":1360,\"board\":\"S 52006 0.294 0 14 3 12;S 52007 0.294 0 14 4 12;S 52008 0.294 0 13 4 12;S 52009 0.294 0 12 4 12;S 52010 0.294 1 14 4 12\"}\\n','KEY_FRAME 165\\n{\"duration\":1120,\"board\":\"S 52521 0.357 2 12 1 9;S 52522 0.357 1 12 2 9;S 52523 0.357 2 12 2 9;S 52524 0.357 3 12 2 9\"}\\n','KEY_FRAME 166\\n{\"duration\":1200,\"board\":\"S 52676 0.333 1 12 0 10;S 52677 0.333 0 13 0 10;S 52678 0.333 1 13 0 10;S 52679 0.333 2 13 0 10;S 52680 0.333 1 14 0 10\"}\\n','KEY_FRAME 167\\n{\"duration\":1120,\"board\":\"S 52876 0.357 4 12 0 9;S 52877 0.357 2 13 0 9;S 52878 0.357 3 13 0 9;S 52879 0.357 4 13 0 9;S 52880 0.357 2 13 1 9\"}\\n','KEY_FRAME 168\\n{\"board\":\"S 53201 0.357 0 12 1 9;S 53202 0.357 1 12 1 9;S 53203 0.357 1 13 1 9;S 53204 0.357 1 14 1 9;S 53205 0.357 2 14 1 9\"}\\n','KEY_FRAME 169\\n{\"board\":\"S 53586 0.357 0 12 3 9;S 53587 0.357 2 13 4 9;S 53588 0.357 1 13 4 9;S 53589 0.357 1 12 4 9;S 53590 0.357 0 12 4 9\"}\\n','KEY_FRAME 170\\n{\"duration\":1040,\"board\":\"S 54058 0.385 0 12 2 8;S 54059 0.385 0 12 3 8;S 54060 0.385 1 12 3 8;S 54061 0.385 0 12 4 8\"}\\n','KEY_FRAME 171\\n{\"duration\":1120,\"board\":\"S 54476 0.357 3 12 1 9;S 54477 0.357 4 13 1 9;S 54478 0.357 4 12 1 9;S 54479 0.357 4 14 2 9;S 54480 0.357 4 13 2 9\"}\\n','KEY_FRAME 172\\n{\"duration\":1280,\"board\":\"S 54755 0.313 3 12 3 11;S 54756 0.313 3 13 3 11;S 54757 0.313 3 14 3 11;S 54758 0.313 3 15 3 11\"}\\n','KEY_FRAME 173\\n{\"duration\":1040,\"board\":\"S 54916 0.385 1 12 2 8;S 54917 0.385 2 12 2 8;S 54918 0.385 3 12 2 8;S 54919 0.385 1 13 2 8;S 54920 0.385 3 13 2 8\"}\\n','KEY_FRAME 174\\n{\"duration\":1280,\"board\":\"S 55138 0.313 4 12 4 11;S 55139 0.313 4 13 4 11\"}\\n','KEY_FRAME 175\\n{\"board\":\"R 45958 0.833;R 46499 0.833;R 46500 0.833;R 47550 0.833;R 48486 0.833;R 48488 0.833;R 48489 0.833;R 48490 0.833;R 48801 0.833;R 48802 0.833;R 48803 0.833;R 48805 0.833;R 49313 0.833;M 49314 1 0.833 1.0;R 49641 0.833;R 49642 0.833;R 49643 0.833;R 49644 0.833;M 49645 1 0.833 1.0;R 49856 0.833;M 49857 1 0.833 1.0;M 49858 2 0.833 1.0;R 50022 0.833;M 50023 1 0.833 1.0;R 50024 0.833;R 50025 0.833;M 50431 1 0.833 1.0;M 50432 1 0.833 1.0;M 50433 1 0.833 1.0;M 50434 1 0.833 1.0;M 50435 1 0.833 1.0;M 50796 1 0.833 1.0;M 50797 2 0.833 1.0;M 50798 1 0.833 1.0;M 50799 1 0.833 1.0;M 50800 1 0.833 1.0;M 51396 1 0.833 1.0;M 51397 1 0.833 1.0;R 51398 0.833;M 51399 1 0.833 1.0;M 51400 2 0.833 1.0;M 51676 2 0.833 1.0;M 51677 2 0.833 1.0;M 51678 2 0.833 1.0;M 51679 1 0.833 1.0;M 51680 1 0.833 1.0;M 52006 1 0.833 1.0;M 52007 1 0.833 1.0;R 52008 0.833;M 52010 1 0.833 1.0;M 52521 2 0.833 1.0;M 52522 2 0.833 1.0;M 52523 2 0.833 1.0;M 52524 2 0.833 1.0;M 52676 1 0.833 1.0;M 52677 2 0.833 1.0;M 52678 2 0.833 1.0;M 52679 2 0.833 1.0;M 52680 3 0.833 1.0;M 52876 2 0.833 1.0;M 52877 3 0.833 1.0;M 52878 3 0.833 1.0;M 52879 3 0.833 1.0;M 52880 3 0.833 1.0;M 53201 2 0.833 1.0;M 53202 2 0.833 1.0;M 53203 3 0.833 1.0;M 53204 4 0.833 1.0;M 53205 4 0.833 1.0;M 53586 2 0.833 1.0;M 53587 3 0.833 1.0;M 53588 3 0.833 1.0;M 53589 2 0.833 1.0;M 53590 2 0.833 1.0;M 54058 3 0.833 1.0;M 54059 3 0.833 1.0;M 54060 3 0.833 1.0;M 54061 3 0.833 1.0;M 54476 2 0.833 1.0;M 54477 3 0.833 1.0;M 54478 2 0.833 1.0;M 54479 4 0.833 1.0;M 54480 3 0.833 1.0;R 54755 0.833;M 54756 1 0.833 1.0;M 54757 2 0.833 1.0;M 54758 3 0.833 1.0;M 54916 3 0.833 1.0;M 54917 3 0.833 1.0;M 54918 3 0.833 1.0;M 54919 4 0.833 1.0;M 54920 4 0.833 1.0;R 55138 0.833;M 55139 1 0.833 1.0\"}\\n','KEY_FRAME 176\\n{\"duration\":1200,\"board\":\"S 55331 0.333 3 12 4 10;S 55332 0.333 4 12 4 10;S 55333 0.333 3 13 4 10;S 55334 0.333 2 14 4 10;S 55335 0.333 3 14 4 10\"}\\n','KEY_FRAME 177\\n{\"duration\":1120,\"board\":\"S 55756 0.357 2 12 3 9;S 55757 0.357 1 13 3 9;S 55758 0.357 2 13 3 9;S 55759 0.357 3 13 3 9;S 55760 0.357 1 13 4 9\"}\\n','KEY_FRAME 178\\n{\"board\":\"S 56186 0.357 4 13 0 9;S 56187 0.357 4 14 0 9;S 56188 0.357 4 13 1 9;S 56189 0.357 3 12 1 9;S 56190 0.357 3 13 1 9\"}\\n','KEY_FRAME 179\\n{\"duration\":1200,\"board\":\"S 56353 0.333 4 12 3 10;S 56354 0.333 4 13 3 10\"}\\n','KEY_FRAME 180\\n{\"board\":\"R 49858 0.833;R 50797 0.833;R 51400 0.833;R 51676 0.833;R 51677 0.833;R 51678 0.833;R 52521 0.833;R 52522 0.833;R 52523 0.833;R 52524 0.833;R 52677 0.833;R 52678 0.833;R 52679 0.833;M 52680 2 0.833 1.0;R 52876 0.833;M 52877 2 0.833 1.0;M 52878 2 0.833 1.0;M 52879 2 0.833 1.0;M 52880 2 0.833 1.0;R 53201 0.833;R 53202 0.833;M 53203 2 0.833 1.0;M 53204 3 0.833 1.0;M 53205 3 0.833 1.0;R 53586 0.833;M 53587 2 0.833 1.0;M 53588 2 0.833 1.0;R 53589 0.833;R 53590 0.833;M 54058 2 0.833 1.0;M 54059 2 0.833 1.0;M 54060 2 0.833 1.0;M 54061 2 0.833 1.0;R 54476 0.833;M 54477 2 0.833 1.0;R 54478 0.833;M 54479 3 0.833 1.0;M 54480 2 0.833 1.0;R 54757 0.833;M 54758 2 0.833 1.0;M 54916 2 0.833 1.0;M 54917 2 0.833 1.0;M 54918 2 0.833 1.0;M 54919 3 0.833 1.0;M 54920 3 0.833 1.0;R 55331 0.833;R 55332 0.833;M 55333 2 0.833 1.0;M 55334 3 0.833 1.0;M 55335 3 0.833 1.0;M 55756 2 0.833 1.0;M 55757 3 0.833 1.0;M 55758 3 0.833 1.0;M 55759 3 0.833 1.0;M 55760 3 0.833 1.0;M 56186 3 0.833 1.0;M 56187 4 0.833 1.0;M 56188 3 0.833 1.0;M 56189 2 0.833 1.0;M 56190 3 0.833 1.0;R 56353 0.833;M 56354 2 0.833 1.0\"}\\n','KEY_FRAME 181\\n{\"duration\":1280,\"board\":\"S 56501 0.313 1 14 0 11;S 56502 0.313 0 12 0 11;S 56503 0.313 0 13 0 11;S 56504 0.313 0 14 0 11;S 56505 0.313 0 13 1 11\"}\\n','KEY_FRAME 182\\n{\"board\":\"R 49314 0.833;R 49645 0.833;R 49857 0.833;R 50023 0.833;R 50431 0.833;R 50432 0.833;R 50433 0.833;R 50434 0.833;R 50435 0.833;R 50796 0.833;R 50798 0.833;R 50799 0.833;R 50800 0.833;R 51396 0.833;R 51397 0.833;R 51399 0.833;R 51679 0.833;R 51680 0.833;R 52006 0.833;R 52007 0.833;R 52010 0.833;R 52676 0.833;M 52680 1 0.833 1.0;M 52877 1 0.833 1.0;M 52878 1 0.833 1.0;M 52879 1 0.833 1.0;M 52880 1 0.833 1.0;M 53203 1 0.833 1.0;M 53204 2 0.833 1.0;M 53205 2 0.833 1.0;M 53587 1 0.833 1.0;M 53588 1 0.833 1.0;M 54058 1 0.833 1.0;M 54059 1 0.833 1.0;M 54060 1 0.833 1.0;M 54061 1 0.833 1.0;M 54477 1 0.833 1.0;M 54479 2 0.833 1.0;M 54480 1 0.833 1.0;R 54756 0.833;M 54758 1 0.833 1.0;M 54916 1 0.833 1.0;M 54917 1 0.833 1.0;M 54918 1 0.833 1.0;M 54919 2 0.833 1.0;M 54920 2 0.833 1.0;R 55139 0.833;M 55333 1 0.833 1.0;M 55334 2 0.833 1.0;M 55335 2 0.833 1.0;M 55756 1 0.833 1.0;M 55757 2 0.833 1.0;M 55758 2 0.833 1.0;M 55759 2 0.833 1.0;M 55760 2 0.833 1.0;M 56186 2 0.833 1.0;M 56187 3 0.833 1.0;M 56188 2 0.833 1.0;M 56189 1 0.833 1.0;M 56190 2 0.833 1.0;M 56354 1 0.833 1.0;M 56501 2 0.833 1.0;R 56502 0.833;M 56503 1 0.833 1.0;M 56504 2 0.833 1.0;M 56505 1 0.833 1.0\"}\\n','KEY_FRAME 183\\n{\"board\":\"S 57086 0.313 4 13 3 11;S 57087 0.313 3 14 4 11;S 57088 0.313 4 14 4 11;S 57089 0.313 4 13 4 11;S 57090 0.313 4 12 4 11\"}\\n','KEY_FRAME 184\\n{\"board\":\"R 52680 0.833;R 52877 0.833;R 52878 0.833;R 52879 0.833;R 52880 0.833;R 53203 0.833;M 53204 1 0.833 1.0;M 53205 1 0.833 1.0;R 53587 0.833;R 53588 0.833;R 54058 0.833;R 54059 0.833;R 54060 0.833;R 54061 0.833;R 54477 0.833;M 54479 1 0.833 1.0;R 54480 0.833;R 54758 0.833;R 54916 0.833;R 54917 0.833;R 54918 0.833;M 54919 1 0.833 1.0;M 54920 1 0.833 1.0;R 55333 0.833;M 55334 1 0.833 1.0;M 55335 1 0.833 1.0;R 55756 0.833;M 55757 1 0.833 1.0;M 55758 1 0.833 1.0;M 55759 1 0.833 1.0;M 55760 1 0.833 1.0;M 56186 1 0.833 1.0;M 56187 2 0.833 1.0;M 56188 1 0.833 1.0;R 56189 0.833;M 56190 1 0.833 1.0;R 56354 0.833;M 56501 1 0.833 1.0;R 56503 0.833;M 56504 1 0.833 1.0;R 56505 0.833;M 57086 1 0.833 1.0;M 57087 2 0.833 1.0;M 57088 2 0.833 1.0;M 57089 1 0.833 1.0;R 57090 0.833\"}\\n','KEY_FRAME 185\\n{\"duration\":1200,\"board\":\"S 57496 0.333 1 12 0 10;S 57497 0.333 1 12 1 10;S 57498 0.333 1 12 2 10;S 57499 0.333 1 12 3 10;S 57500 0.333 1 12 4 10\"}\\n','KEY_FRAME 186\\n{\"duration\":1280,\"board\":\"S 57671 0.313 0 12 1 11;S 57672 0.313 0 12 2 11;S 57673 0.313 0 12 3 11;S 57674 0.313 0 13 3 11;S 57675 0.313 0 12 4 11\"}\\n','KEY_FRAME 187\\n{\"duration\":1200,\"board\":\"S 58091 0.333 4 12 1 10;S 58092 0.333 4 12 2 10;S 58093 0.333 4 12 3 10\"}\\n','KEY_FRAME 188\\n{\"duration\":1280,\"board\":\"S 58274 0.313 2 13 2 11;S 58275 0.313 2 12 2 11;S 58276 0.313 2 13 3 11;S 58277 0.313 2 13 4 11\"}\\n','KEY_FRAME 189\\n{\"board\":\"S 58706 0.313 3 12 0 11;S 58707 0.313 3 13 0 11;S 58708 0.313 3 14 0 11;S 58709 0.313 3 13 1 11;S 58710 0.313 3 13 2 11\"}\\n','KEY_FRAME 190\\n{\"board\":\"S 58995 0.313 2 12 0 11;S 58996 0.313 2 13 0 11;S 58997 0.313 2 14 0 11;S 58998 0.313 1 14 0 11\"}\\n','KEY_FRAME 191\\n{\"board\":\"R 53204 0.833;R 53205 0.833;R 54479 0.833;R 54919 0.833;R 54920 0.833;R 55334 0.833;R 55335 0.833;R 55757 0.833;R 55758 0.833;R 55759 0.833;R 55760 0.833;R 56186 0.833;M 56187 1 0.833 1.0;R 56188 0.833;R 56190 0.833;R 56501 0.833;R 56504 0.833;R 57086 0.833;M 57087 1 0.833 1.0;M 57088 1 0.833 1.0;R 57089 0.833;M 57496 1 0.833 1.0;M 57497 1 0.833 1.0;M 57498 1 0.833 1.0;M 57499 1 0.833 1.0;M 57500 1 0.833 1.0;R 57671 0.833;R 57672 0.833;R 57673 0.833;M 57674 1 0.833 1.0;R 57675 0.833;M 58091 1 0.833 1.0;M 58092 1 0.833 1.0;M 58093 1 0.833 1.0;M 58274 1 0.833 1.0;R 58275 0.833;M 58276 1 0.833 1.0;M 58277 1 0.833 1.0;R 58706 0.833;M 58707 1 0.833 1.0;M 58708 2 0.833 1.0;M 58709 1 0.833 1.0;M 58710 1 0.833 1.0;R 58995 0.833;M 58996 1 0.833 1.0;M 58997 2 0.833 1.0;M 58998 2 0.833 1.0\"}\\n','KEY_FRAME 192\\n{\"duration\":1360,\"board\":\"S 59501 0.294 0 12 0 12;S 59502 0.294 0 13 0 12;S 59503 0.294 0 13 1 12;S 59504 0.294 0 13 2 12;S 59505 0.294 0 14 2 12\"}\\n','KEY_FRAME 193\\n{\"board\":\"R 44108 0.833;R 45101 0.833;R 45272 0.833;R 45957 0.833;R 46150 0.833;R 46498 0.833;R 47056 0.833;R 47057 0.833;R 47059 0.833;R 47060 0.833;R 47546 0.833;R 47549 0.833;R 48063 0.833;R 48064 0.833;R 48065 0.833;R 48066 0.833;R 48487 0.833;R 48804 0.833;R 49311 0.833;R 49312 0.833;R 49315 0.833;R 49855 0.833;R 50021 0.833;R 52009 0.833;M 56187 0 0.833 1.0;M 57087 0 0.833 1.0;M 57088 0 0.833 1.0;M 57496 0 0.833 1.0;M 57497 0 0.833 1.0;M 57498 0 0.833 1.0;M 57499 0 0.833 1.0;M 57500 0 0.833 1.0;M 57674 0 0.833 1.0;M 58091 0 0.833 1.0;M 58092 0 0.833 1.0;M 58093 0 0.833 1.0;M 58274 0 0.833 1.0;M 58276 0 0.833 1.0;M 58277 0 0.833 1.0;M 58707 0 0.833 1.0;M 58708 1 0.833 1.0;M 58709 0 0.833 1.0;M 58710 0 0.833 1.0;M 58996 0 0.833 1.0;M 58997 1 0.833 1.0;M 58998 1 0.833 1.0;R 59501 0.833;M 59502 0 0.833 1.0;M 59503 0 0.833 1.0;M 59504 0 0.833 1.0;M 59505 1 0.833 1.0\"}\\n','KEY_FRAME 194\\n{\"board\":\"S 59871 0.294 3 12 3 12;S 59872 0.294 2 13 3 12;S 59873 0.294 3 13 3 12;S 59874 0.294 1 13 4 12;S 59875 0.294 2 13 4 12\"}\\n','KEY_FRAME 195\\n{\"board\":\"S 60256 0.294 3 13 1 12;S 60257 0.294 2 13 1 12;S 60258 0.294 1 13 1 12;S 60259 0.294 0 13 1 12;S 60260 0.294 2 12 1 12\"}\\n','KEY_FRAME 196\\n{\"board\":\"S 60926 0.294 0 15 3 12;S 60927 0.294 0 12 4 12;S 60928 0.294 0 13 4 12;S 60929 0.294 0 14 4 12;S 60930 0.294 0 15 4 12\"}\\n','KEY_FRAME 197\\n{\"board\":\"R 56187 0.833;R 57087 0.833;R 57088 0.833;R 57496 0.833;R 57497 0.833;R 57498 0.833;R 57499 0.833;R 57500 0.833;R 57674 0.833;R 58091 0.833;R 58092 0.833;R 58093 0.833;R 58274 0.833;R 58276 0.833;R 58277 0.833;R 58707 0.833;M 58708 0 0.833 1.0;R 58709 0.833;R 58710 0.833;R 58996 0.833;M 58997 0 0.833 1.0;M 58998 0 0.833 1.0;R 59502 0.833;R 59503 0.833;R 59504 0.833;M 59505 0 0.833 1.0;R 59871 0.833;M 59872 0 0.833 1.0;M 59873 0 0.833 1.0;M 59874 0 0.833 1.0;M 59875 0 0.833 1.0;M 60256 0 0.833 1.0;M 60257 0 0.833 1.0;M 60258 0 0.833 1.0;M 60259 0 0.833 1.0;R 60260 0.833;M 60926 2 0.833 1.0;R 60927 0.833;M 60928 0 0.833 1.0;M 60929 1 0.833 1.0;M 60930 2 0.833 1.0\"}\\n','KEY_FRAME 198\\n{\"board\":\"S 61231 0.294 3 12 4 12;S 61232 0.294 4 12 4 12;S 61233 0.294 3 13 4 12;S 61234 0.294 4 13 4 12\"}\\n','KEY_FRAME 199\\n{\"board\":\"S 61451 0.294 1 12 2 12;S 61452 0.294 1 13 3 12;S 61453 0.294 1 12 3 12;S 61454 0.294 1 14 4 12;S 61455 0.294 1 13 4 12\"}\\n','KEY_FRAME 200\\n{\"board\":\"S 61866 0.294 4 12 1 12;S 61867 0.294 4 12 2 12;S 61868 0.294 4 13 2 12;S 61869 0.294 4 12 3 12;S 61870 0.294 4 13 3 12\"}\\n','KEY_FRAME 201\\n{\"board\":\"S 62481 0.294 2 12 2 12;S 62482 0.294 3 13 2 12;S 62483 0.294 3 12 2 12;S 62484 0.294 2 13 3 12;S 62485 0.294 3 13 3 12\"}\\n','KEY_FRAME 202\\n{\"board\":\"S 62874 0.294 4 13 0 12;S 62875 0.294 3 13 0 12;S 62876 0.294 2 13 0 12;S 62877 0.294 4 12 0 12\"}\\n','KEY_FRAME 203\\n{\"board\":\"S 63196 0.294 0 12 0 12\"}\\n','KEY_FRAME 204\\n{\"duration\":1280,\"board\":\"S 63211 0.313 2 12 4 11\"}\\n','KEY_FRAME 205\\n{\"board\":\"S 63451 0.313 4 12 1 11;S 63452 0.313 3 12 1 11;S 63453 0.313 2 12 1 11;S 63454 0.313 2 12 2 11;S 63455 0.313 1 12 2 11\"}\\n','KEY_FRAME 206\\n{\"board\":\"S 63976 0.313 0 13 0 11;S 63977 0.313 1 12 0 11;S 63978 0.313 0 12 0 11;S 63979 0.313 1 12 1 11;S 63980 0.313 0 12 1 11\"}\\n','KEY_FRAME 207\\n{\"board\":\"S 64451 0.313 3 13 2 11;S 64452 0.313 2 13 2 11;S 64453 0.313 1 13 2 11;S 64454 0.313 0 13 2 11;S 64455 0.313 0 12 2 11\"}\\n','KEY_FRAME 208\\n{\"duration\":1200,\"board\":\"S 64941 0.333 1 13 2 10;S 64942 0.333 1 12 3 10;S 64943 0.333 2 12 3 10;S 64944 0.333 1 13 3 10;S 64945 0.333 2 12 4 10\"}\\n','KEY_FRAME 209\\n{\"board\":\"S 65291 0.333 3 12 3 10;S 65292 0.333 4 12 3 10;S 65293 0.333 3 12 4 10;S 65294 0.333 2 13 4 10;S 65295 0.333 3 13 4 10\"}\\n','KEY_FRAME 210\\n{\"board\":\"S 65596 0.333 1 12 0 10;S 65597 0.333 2 12 1 10;S 65598 0.333 2 13 1 10;S 65599 0.333 1 12 1 10;S 65600 0.333 2 13 2 10\"}\\n','KEY_FRAME 211\\n{\"board\":\"S 65954 0.333 4 12 0 10;S 65955 0.333 3 12 0 10;S 65956 0.333 2 12 0 10;S 65957 0.333 4 12 1 10\"}\\n','KEY_FRAME 212\\n{\"board\":\"S 66354 0.333 3 13 1 10;S 66355 0.333 3 12 1 10;S 66356 0.333 3 13 2 10;S 66357 0.333 3 13 3 10\"}\\n','KEY_FRAME 213\\n{\"board\":\"S 66796 0.333 4 13 3 10;S 66797 0.333 3 14 4 10;S 66798 0.333 4 14 4 10;S 66799 0.333 4 13 4 10;S 66800 0.333 4 12 4 10\"}\\n','KEY_FRAME 214\\n{\"duration\":1120,\"board\":\"S 67366 0.357 3 12 0 9;S 67367 0.357 2 12 0 9;S 67368 0.357 1 12 0 9;S 67369 0.357 1 13 1 9;S 67370 0.357 1 12 1 9\"}\\n','KEY_FRAME 215\\n{\"board\":\"S 67816 0.357 4 12 0 9;S 67817 0.357 4 13 1 9;S 67818 0.357 3 13 1 9;S 67819 0.357 4 12 1 9;S 67820 0.357 3 13 2 9\"}\\n','KEY_FRAME 216\\n{\"board\":\"S 68089 0.357 3 13 3 9;S 68090 0.357 2 13 3 9;S 68091 0.357 2 12 3 9;S 68092 0.357 2 13 4 9\"}\\n','KEY_FRAME 217\\n{\"duration\":1040,\"board\":\"S 68385 0.385 2 12 1 8;S 68386 0.385 2 12 2 8;S 68387 0.385 2 13 2 8;S 68388 0.385 1 12 2 8\"}\\n','KEY_FRAME 218\\n{\"duration\":1120,\"board\":\"S 68681 0.357 1 13 3 9;S 68682 0.357 1 12 4 9;S 68683 0.357 1 13 4 9;S 68684 0.357 1 14 4 9;S 68685 0.357 0 13 4 9\"}\\n','KEY_FRAME 219\\n{\"duration\":1040,\"board\":\"S 69006 0.385 4 12 3 8;S 69007 0.385 4 13 3 8;S 69008 0.385 3 13 3 8;S 69009 0.385 3 14 3 8;S 69010 0.385 4 13 4 8\"}\\n','KEY_FRAME 220\\n{\"board\":\"S 69483 0.385 2 13 0 8;S 69484 0.385 2 12 0 8;S 69485 0.385 3 12 0 8;S 69486 0.385 2 13 1 8\"}\\n','KEY_FRAME 221\\n{\"duration\":1200,\"board\":\"S 69871 0.333 4 12 2 10;S 69872 0.333 4 13 2 10;S 69873 0.333 4 14 2 10;S 69874 0.333 4 15 2 10;S 69875 0.333 3 15 2 10\"}\\n','KEY_FRAME 222\\n{\"duration\":1040,\"board\":\"S 70384 0.385 4 13 0 8;S 70385 0.385 3 13 0 8;S 70386 0.385 4 12 0 8;S 70387 0.385 3 13 1 8\"}\\n','KEY_FRAME 223\\n{\"duration\":1200,\"board\":\"S 70656 0.333 0 13 0 10;S 70657 0.333 0 12 1 10;S 70658 0.333 0 13 1 10;S 70659 0.333 0 14 1 10;S 70660 0.333 0 13 2 10\"}\\n','KEY_FRAME 224\\n{\"board\":\"R 60926 0.833;R 60930 0.833;R 61454 0.833;R 63976 0.833;R 64451 0.833;R 64452 0.833;R 64453 0.833;R 64454 0.833;M 64941 2 0.833 1.0;R 64942 0.833;R 64943 0.833;M 64944 2 0.833 1.0;R 64945 0.833;R 65291 0.833;R 65292 0.833;R 65293 0.833;M 65294 2 0.833 1.0;M 65295 2 0.833 1.0;R 65596 0.833;R 65597 0.833;M 65598 2 0.833 1.0;R 65599 0.833;M 65600 2 0.833 1.0;R 65954 0.833;R 65955 0.833;R 65956 0.833;R 65957 0.833;M 66354 2 0.833 1.0;R 66355 0.833;M 66356 2 0.833 1.0;M 66357 2 0.833 1.0;M 66796 2 0.833 1.0;M 66797 3 0.833 1.0;M 66798 3 0.833 1.0;M 66799 2 0.833 1.0;R 66800 0.833;M 67366 2 0.833 1.0;M 67367 2 0.833 1.0;M 67368 2 0.833 1.0;M 67369 3 0.833 1.0;M 67370 2 0.833 1.0;M 67816 2 0.833 1.0;M 67817 3 0.833 1.0;M 67818 3 0.833 1.0;M 67819 2 0.833 1.0;M 67820 3 0.833 1.0;M 68089 3 0.833 1.0;M 68090 3 0.833 1.0;M 68091 2 0.833 1.0;M 68092 3 0.833 1.0;M 68385 3 0.833 1.0;M 68386 3 0.833 1.0;M 68387 4 0.833 1.0;M 68388 3 0.833 1.0;M 68681 3 0.833 1.0;M 68682 2 0.833 1.0;M 68683 3 0.833 1.0;M 68684 4 0.833 1.0;M 68685 3 0.833 1.0;M 69006 3 0.833 1.0;M 69007 4 0.833 1.0;M 69008 4 0.833 1.0;M 69009 5 0.833 1.0;M 69010 4 0.833 1.0;M 69483 4 0.833 1.0;M 69484 3 0.833 1.0;M 69485 3 0.833 1.0;M 69486 4 0.833 1.0;R 69871 0.833;M 69872 2 0.833 1.0;M 69873 3 0.833 1.0;M 69874 4 0.833 1.0;M 69875 4 0.833 1.0;M 70384 4 0.833 1.0;M 70385 4 0.833 1.0;M 70386 3 0.833 1.0;M 70387 4 0.833 1.0;M 70656 2 0.833 1.0;R 70657 0.833;M 70658 2 0.833 1.0;M 70659 3 0.833 1.0;M 70660 2 0.833 1.0\"}\\n','KEY_FRAME 225\\n{\"duration\":1280,\"board\":\"S 70986 0.313 0 14 2 11;S 70987 0.313 0 12 3 11;S 70988 0.313 0 13 3 11;S 70989 0.313 0 14 3 11;S 70990 0.313 0 15 3 11\"}\\n','KEY_FRAME 226\\n{\"board\":\"R 60929 0.833;R 61233 0.833;R 61234 0.833;R 61452 0.833;R 61455 0.833;R 61868 0.833;R 61870 0.833;R 62482 0.833;R 62484 0.833;R 62485 0.833;R 62874 0.833;R 62875 0.833;R 62876 0.833;R 63211 0.833;R 63451 0.833;R 63452 0.833;R 63453 0.833;R 63454 0.833;R 63455 0.833;R 63977 0.833;R 63978 0.833;R 63979 0.833;R 63980 0.833;R 64455 0.833;M 64941 1 0.833 1.0;M 64944 1 0.833 1.0;M 65294 1 0.833 1.0;M 65295 1 0.833 1.0;M 65598 1 0.833 1.0;M 65600 1 0.833 1.0;M 66354 1 0.833 1.0;M 66356 1 0.833 1.0;M 66357 1 0.833 1.0;M 66796 1 0.833 1.0;M 66797 2 0.833 1.0;M 66798 2 0.833 1.0;M 66799 1 0.833 1.0;M 67366 1 0.833 1.0;M 67367 1 0.833 1.0;M 67368 1 0.833 1.0;M 67369 2 0.833 1.0;M 67370 1 0.833 1.0;M 67816 1 0.833 1.0;M 67817 2 0.833 1.0;M 67818 2 0.833 1.0;M 67819 1 0.833 1.0;M 67820 2 0.833 1.0;M 68089 2 0.833 1.0;M 68090 2 0.833 1.0;M 68091 1 0.833 1.0;M 68092 2 0.833 1.0;M 68385 2 0.833 1.0;M 68386 2 0.833 1.0;M 68387 3 0.833 1.0;M 68388 2 0.833 1.0;M 68681 2 0.833 1.0;M 68682 1 0.833 1.0;M 68683 2 0.833 1.0;M 68684 3 0.833 1.0;M 68685 2 0.833 1.0;M 69006 2 0.833 1.0;M 69007 3 0.833 1.0;M 69008 3 0.833 1.0;M 69009 4 0.833 1.0;M 69010 3 0.833 1.0;M 69483 3 0.833 1.0;M 69484 2 0.833 1.0;M 69485 2 0.833 1.0;M 69486 3 0.833 1.0;M 69872 1 0.833 1.0;M 69873 2 0.833 1.0;M 69874 3 0.833 1.0;M 69875 3 0.833 1.0;M 70384 3 0.833 1.0;M 70385 3 0.833 1.0;M 70386 2 0.833 1.0;M 70387 3 0.833 1.0;M 70656 1 0.833 1.0;M 70658 1 0.833 1.0;M 70659 2 0.833 1.0;M 70660 1 0.833 1.0;M 70986 2 0.833 1.0;R 70987 0.833;M 70988 1 0.833 1.0;M 70989 2 0.833 1.0;M 70990 3 0.833 1.0\"}\\n','KEY_FRAME 227\\n{\"duration\":1200,\"board\":\"S 71381 0.333 0 12 0 10;S 71382 0.333 1 12 0 10;S 71383 0.333 0 13 0 10;S 71384 0.333 0 13 1 10;S 71385 0.333 0 13 2 10\"}\\n','KEY_FRAME 228\\n{\"board\":\"R 66797 0.833;R 66798 0.833;R 67369 0.833;R 67817 0.833;R 67818 0.833;R 67820 0.833;R 68089 0.833;R 68090 0.833;R 68092 0.833;R 68385 0.833;R 68386 0.833;M 68387 2 0.833 1.0;R 68388 0.833;R 68681 0.833;R 68683 0.833;M 68684 2 0.833 1.0;R 68685 0.833;R 69006 0.833;M 69007 2 0.833 1.0;M 69008 2 0.833 1.0;M 69009 3 0.833 1.0;M 69010 2 0.833 1.0;M 69483 2 0.833 1.0;R 69484 0.833;R 69485 0.833;M 69486 2 0.833 1.0;R 69873 0.833;M 69874 2 0.833 1.0;M 69875 2 0.833 1.0;M 70384 2 0.833 1.0;M 70385 2 0.833 1.0;R 70386 0.833;M 70387 2 0.833 1.0;R 70659 0.833;R 70986 0.833;R 70989 0.833;M 70990 2 0.833 1.0;R 71381 0.833;R 71382 0.833;M 71383 2 0.833 1.0;M 71384 2 0.833 1.0;M 71385 2 0.833 1.0\"}\\n','KEY_FRAME 229\\n{\"board\":\"S 71881 0.333 4 12 1 10;S 71882 0.333 2 13 1 10;S 71883 0.333 3 13 1 10;S 71884 0.333 4 13 1 10;S 71885 0.333 2 13 2 10\"}\\n','KEY_FRAME 230\\n{\"board\":\"S 72316 0.333 2 13 3 10;S 72317 0.333 2 12 3 10;S 72318 0.333 1 12 3 10;S 72319 0.333 3 12 4 10;S 72320 0.333 2 12 4 10\"}\\n','KEY_FRAME 231\\n{\"board\":\"S 72816 0.333 1 12 1 10;S 72817 0.333 1 13 2 10;S 72818 0.333 0 13 2 10;S 72819 0.333 1 12 2 10;S 72820 0.333 1 13 3 10\"}\\n'],agents:[{index:0,name:\"Player 0\",avatar:\"https://static.codingame.com/servlet/fileservlet?id=16085734516701&format=viewer_avatar\",agentId:0}]},ol=[];function sl(t){return(sl=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function cl(t){var e=\"function\"==typeof Map?new Map:void 0;return(cl=function(t){if(null===t||-1===Function.toString.call(t).indexOf(\"[native code]\"))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return hl(t,arguments,dl(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ul(n,t)})(t)}function hl(t,e,n){return(hl=ll()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),r=new(Function.bind.apply(t,r)),n&&ul(r,n.prototype),r}).apply(null,arguments)}function ll(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ul(t,e){return(ul=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dl(t){return(dl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pl=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ul(t,e)}(e,cl(Error));var t=function(t){var e=ll();return function(){var n,r=dl(t);return n=e?(n=dl(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||\"object\"!==sl(n)&&\"function\"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}(r):n}}(e);function e(n,r){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(n=t.call(this,'<Error in module \"'+n+'\">')).cause=r,n.name=\"ModuleError\",n}return e}();function fl(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function ml(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fl(Object(n),!0).forEach((function(e){var r,i;r=t,e=n[i=e],i in r?Object.defineProperty(r,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[i]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.toDestroy=[],this.stepByStepAnimateSpeed=null;var n=e||al;n?(e=n.views,n=n.agents,this.demo={playerCount:n.length,logo:\"logo.png\",overlayAlpha:.2,agents:n,frames:e},this.demo.agents.forEach((function(e){e.color=t.playerColors[e.index]}))):this.demo=void 0}var e,n,i;return e=t,i=[{key:\"requirements\",get:function(){return{PIXI:\"PIXI4\"}}},{key:\"VERSION\",get:function(){return 2}},{key:\"WIDTH\",get:function(){return 1920}},{key:\"HEIGHT\",get:function(){return 1080}},{key:\"getGameRatio\",value:function(){return t.WIDTH/t.HEIGHT}},{key:\"playerColors\",get:function(){return[\"#ff1d5c\",\"#22a1e4\",\"#ff8f16\",\"#6ac371\",\"#9975e2\",\"#3ac5ca\",\"#de6ddf\",\"#ff0000\"]}},{key:\"SDK_GAME\",get:function(){return!0}},{key:\"RenderTimeout\",get:function(){return\"localhost\"===window.location.hostname?1/0:2e4}}],(n=[{key:\"getDefaultOverSampling\",value:function(){return 2}},{key:\"handleModuleError\",value:function(t,e){il.push(new pl(t,e)),console.error(e),il.push({message:'<Module \"'.concat(t,'\" disabled>\\n')}),delete this.modules[t]}},{key:\"instantiateModules\",value:function(){this.modules={};var t,e=function(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if(\"string\"==typeof t)return gl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gl(t,e):void 0}}(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}(tl);try{for(e.s();!(t=e.n()).done;){var n=t.value;try{this.modules[n.name]=new n(r)}catch(t){this.handleModuleError(n.name,t)}}}catch(t){e.e(t)}finally{e.f()}}},{key:\"destroy\",value:function(){this.alreadyLoaded&&(this.renderer.destroy(),this.endCallback=null),this.destroyed=!0}},{key:\"destroyScene\",value:function(t){!function(){for(var t=0,e=ol.length;t<e;++t)ol[t].destroy(!0);ol=[]}()}},{key:\"getGameName\",value:function(){}},{key:\"canSwapPlayers\",value:function(){return!1}},{key:\"addErrorListener\",value:function(t){il.listen(t)}},{key:\"getResources\",value:function(){return Object.assign({baseUrl:\"\",images:{},spines:{},sprites:[],fonts:[],others:[]},r)}},{key:\"getOptions\",value:function(){return[]}},{key:\"setDebug\",value:function(e){this.asyncRenderingTime=t.RenderTimeout}},{key:\"initPreload\",value:function(t,e,n,r,i){t.canvasWidth=r,t.canvasHeight=i,t.loaderProgress=new PIXI.Text(\"100\",{fontSize:.117*i||30,fontFamily:\"Lato\",fontWeight:\"900\",fill:\"white\",align:\"center\"}),t.loaderProgress.anchor.y=1,t.loaderProgress.anchor.x=1.3,t.progress=t.realProgress=n,t.loaderProgress.position.y=i,t.progressBar=new PIXI.Graphics,e.addChild(t.progressBar),e.addChild(t.loaderProgress)}},{key:\"preload\",value:function(t,e,n,r,i,a){t.progress=n}},{key:\"renderPreloadScene\",value:function(t,e){return e=Math.pow(.998,e),t.realProgress=e*t.realProgress+(1-e)*t.progress,t.loaderProgress.text=(100*t.realProgress).toFixed(0),t.loaderProgress.position.x=t.realProgress*t.canvasWidth,t.progressBar.clear(),t.progressBar.beginFill(0,1),t.progressBar.drawRect(0,0,t.canvasWidth*t.realProgress+1,t.canvasHeight),t.progressBar.endFill(),t.progressBar.beginFill(4146246,1),t.progressBar.drawRect(t.canvasWidth*t.realProgress,0,t.canvasWidth,t.canvasHeight),t.progressBar.endFill(),!0}},{key:\"initDefaultScene\",value:function(e,n,r,i){var a,o,s,c,h=new PIXI.Container;if(e.drawer=this,e.time=0,this.demo){if(this.demo.logo)try{var l=PIXI.Sprite.fromFrame(this.demo.logo);l.position.set(t.WIDTH/2,t.HEIGHT/2),l.anchor.set(.5),l.baseScale=(a=l.texture.width,o=l.texture.height,s=2*t.WIDTH/3,c=t.HEIGHT/2,u=(u=0)||0,Math.min(s/(a+u),c/(o+u))),h.addChild(l),e.logo=l}catch(n){il.push({cause:n,message:'Missing \"logo.png\" to complete replay.'}),e.logo=new PIXI.Container,e.logo.baseScale=1,h.addChild(e.logo),e.missingLogo=!0}var u=new PIXI.Graphics;e.missingLogo||(u.beginFill(0,this.demo.overlayAlpha||0),u.drawRect(0,0,t.WIDTH+20,t.HEIGHT+20),u.endFill(),u.x-=10,u.y-=10),l=new PIXI.Container;try{this.initDefaultFrames(this.demo.playerCount,this.demo.frames,this.demo.agents),this.preconstructScene(this.scope,n,this.initWidth,this.initHeight),this.initScene(this.scope,l,this.frames,!0),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)}catch(n){il.push({cause:n,message:\"Cannot load demo, you might want to reset the demo\"})}e.demo=l,e.demotime=0,this.currentFrame=-1,n.addChild(l),n.addChild(u),n.addChild(h)}e.updateTime=0,e.frameTime=0}},{key:\"initDefaultFrames\",value:function(e,n,r){var i=this;this.instantiateModules(),this.playerInfo=r.map((function(t,e){return{name:t.name||\"Anonymous\",color:t.color?i.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:t.avatarTexture}})),this.instantiateModules(),this._frames=n.map((function(t){var e,n=t.split(\"\\n\");t=n[0].split(\" \");try{e=JSON.parse(n.slice(1).join(\"\\n\"))}catch(t){e={}}return ml(ml({},e),{},{key:\"KEY_FRAME\"===t[0]})})).filter((function(t){return t.key})),this.parseGlobalData(this._frames[0].global),this.playerCount=e,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,(e=this._frames[0].frame).key=this._frames[0].key,this.frames.push(this.parseFrame(e,this.frames));for(var a=1;a<this._frames.length;++a)this.frames.push(this.parseFrame(this._frames[a],this.frames));this.asyncRenderingTime=t.RenderTimeout}},{key:\"renderDefaultScene\",value:function(t,e){if(e=Math.min(80,e),void 0===this.demo)return!1;this.currentFrame=this.currentFrameTemp||0,t.frameTime+=e,t.updateTime+=e,t.demotime+=e/1e3;var n=Math.max(0,Math.min(1,(t.demotime-1)/.5));t.logo&&(t.logo.alpha=n,t.logo.scale.x=t.logo.scale.y=(3-2*n)*t.logo.baseScale),!t.missingLogo&&1.5<t.demotime&&t.demotime<=2.2?(r=15*Math.max(0,1-(t.demotime-1.5)/.7),t.demo.x=(2*Math.random()-1)*r,t.demo.y=(2*Math.random()-1)*r):t.demo.x=t.demo.y=0;var r,i=this.getFrameDuration(this.currentFrame);return 30<=t.updateTime&&(t.updateTime-=30,0===this.currentFrame?this.progress=1:this.progress=(n=0,r=t.frameTime,Math.min(1,Math.max(0,(r-n)/(i-n)))),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],!0)),t.frameTime>=i&&(t.frameTime-=i,this.currentFrame=(this.currentFrame+1)%this.frames.length),this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,1,this.reasons[this.currentFrame],e,!0),this.currentFrameTemp=this.currentFrame,this.currentFrame=-1,!0}},{key:\"endDefaultScene\",value:function(t,e){return!0}},{key:\"parseGlobalData\",value:function(t){for(var e in this.modules){var n=this.modules[e];\"function\"==typeof n.handleGlobalData&&n.handleGlobalData(this.playerInfo,t[e])}}},{key:\"parseFrame\",value:function(t,e){var n,r={data:{},frameInfo:{number:e.length}};if(r.previous=e[e.length-1]||r,r!==r.previous&&(r.previous.next=r),!t.key)return r.previous;for(n in t.duration&&(this.currentFrameDuration=t.duration),r.frameInfo.frameDuration=this.currentFrameDuration,r===r.previous?(r.frameInfo.date=0,r.frameInfo.frameDuration=0):r.frameInfo.date=r.previous.frameInfo.date+r.previous.frameInfo.frameDuration,this.modules){var i=this.modules[n];\"function\"==typeof i.handleFrameData&&(r.data[n]=i.handleFrameData(r.frameInfo,t[n]))}return r}},{key:\"preconstructScene\",value:function(e,n,r,i){e.canvasHeight=i,e.canvasWidth=r,e.time=0,e.endTime=0,e.playerInfo=this.playerInfo,n.scale.x=r/t.WIDTH,n.scale.y=i/t.HEIGHT}},{key:\"initScene\",value:function(t,e,n){for(var r in this.modules){var i=this.modules[r],a=new PIXI.Container;try{i.reinitScene(a,{width:t.canvasWidth,height:t.canvasHeight,oversampling:this.oversampling})}catch(t){this.handleModuleError(r,t)}e.addChild(a)}}},{key:\"updateScene\",value:function(t,e,n,r,i,a,o,s,c){var h,l=n[r];if(!c&&this.stepByStepAnimateSpeed){if(this.checkSteppedToNextFrame(t,l,i))return void this.startAsynchronousAnimation(t,l);if(this.checkSteppedToPreviousFrame(t,l,i))return void this.startAsynchronousAnimation(t,t.currentFrame,!0);t.targetProgress=null}for(h in t.currentFrame=l,t.currentProgress=i,t.reason=o,this.modules){var u=this.modules[h];if(l.data.hasOwnProperty(h))try{u.updateScene(l.previous.data[h],l.data[h],i,a)}catch(t){this.handleModuleError(h,t)}}}},{key:\"startAsynchronousAnimation\",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t.targetProgress=n?0:1,n||1!==t.currentProgress||(t.currentProgress=0),t.currentFrame=e,t.reverseAsynchronousAnimation=n}},{key:\"checkStepped\",value:function(t,e,n){return t.currentFrame&&0===this.speed&&1===n}},{key:\"checkSteppedToNextFrame\",value:function(t,e,n){return this.checkStepped(t,e,n)&&(t.currentFrame===e.previous&&t.currentFrame!==e||t.currentFrame===e&&t.currentProgress!==n)}},{key:\"checkSteppedToPreviousFrame\",value:function(t,e,n){return this.checkStepped(t,e,n)&&t.currentFrame.previous===e&&t.currentFrame!==e}},{key:\"initEndScene\",value:function(t,e){t.endSceneViewed=!1}},{key:\"destroyEndScene\",value:function(t){}},{key:\"renderEndScene\",value:function(t,e,n){0===t.endTime&&this.initEndScene(t,n),t.endTime+=e,void 0<=t.endTime&&!t.endSceneViewed&&(this.endCallback&&this.endCallback(),t.endSceneViewed=!0)}},{key:\"renderScene\",value:function(t,e,n,r,i,a,o,s){var c,h;for(h in s=Math.min(80,s),this.debugMode||r!==n.length-1||1!==i?(0<t.endTime&&this.destroyEndScene(t),t.endTime=0):this.renderEndScene(t,s,\"Win\"!==o),this.stepByStepAnimateSpeed&&this.isAsynchronousAnimationOngoing(t)&&(i=this.currentFrame,t.reverseAsynchronousAnimation&&i++,o=s/200*this.getFrameSpeed(i)*this.stepByStepAnimateSpeed,t.reverseAsynchronousAnimation?(c=t.currentProgress-o)<=0&&(i=this.currentFrame,t.targetProgress=c=1):(c=t.currentProgress+o,c=Math.min(t.targetProgress,c)),this.updateScene(this.scope,this.question,this.frames,i,c,this.speed,this.reasons[i],!1,!0)),this.modules){var l=this.modules[h];if(\"function\"==typeof l.animateScene)try{l.animateScene(s)}catch(t){this.handleModuleError(h,t)}}return!0}},{key:\"isAsynchronousAnimationOngoing\",value:function(t){return null!=t.targetProgress&&t.currentProgress!==t.targetProgress}},{key:\"getFrameSpeed\",value:function(t){return 500/this.getFrameDuration(t)}},{key:\"getFrameDuration\",value:function(t){return this.frames&&this.frames[t]&&this.frames[t].frameInfo.frameDuration||1e3}},{key:\"enableAsyncRendering\",value:function(e){this.asyncRendering=e,this.asyncRenderingTime=t.RenderTimeout}},{key:\"purge\",value:function(){this.scope={},this.changed=!0,this.container.interactiveChildren=!1,this.container.destroy({texture:!1,children:!0}),delete this.container,this.container=new PIXI.Container}},{key:\"reinitScene\",value:function(){1<=this.loaded&&(this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.preconstructScene(this.scope,this.container,this.initWidth,this.initHeight),this.initScene(this.scope,this.container,this.frames),this.updateScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame]),this.changed=!0)}},{key:\"reinitDefaultScene\",value:function(){1<=this.loaded&&(this.intro=!0,this.destroyScene(this.scope),this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initDefaultScene(this.scope,this.container,this.initWidth,this.initHeight),this.changed=!0)}},{key:\"reinitLoadingScene\",value:function(){this.loaded<1&&(this.purge(),this.asyncRenderingTime=t.RenderTimeout,this.initPreload(this.scope,this.container,this.loaded,this.initWidth,this.initHeight))}},{key:\"reinit\",value:function(t){1<=this.loaded&&!this.loading?0<=this.currentFrame&&!this.intro?this.reinitScene():this.intro&&!t||this.reinitDefaultScene():this.reinitLoadingScene()}},{key:\"animate\",value:function(t){var e;this.destroyed||(this.lastRenderTime||(this.lastRenderTime=t),e=t-this.lastRenderTime,this.asynchronousStep&&(e=this.asynchronousStep),this.onBeforeRender&&this.onBeforeRender(),this.loading||(this.loaded<1?this.changed|=this.renderPreloadScene(this.scope,e):(this.changed||this.asyncRendering&&0<this.asyncRenderingTime||this.isAsynchronousAnimationOngoing(this.scope))&&(this.currentFrame<0?this.changed|=this.renderDefaultScene(this.scope,e):this.intro?(this.changed=!0,this.endDefaultScene(this.scope,e)&&(this.intro=!1,this.reinit(!0))):this.changed|=this.renderScene(this.scope,this.question,this.frames,this.currentFrame,this.progress,this.speed,this.reasons[this.currentFrame],e)),this.changed&&(this.renderer.render(this.container),this.changed=!1)),this.onAfterRender&&this.onAfterRender(),this.lastRenderTime=t,this.destroyed||requestAnimationFrame(this.animate.bind(this)),this.asyncRenderingTime-=e)}},{key:\"_initFrames\",value:function(t,e){this.instantiateModules(),this._frames=e.map((function(t){var e,n=t[0].split(\" \");try{e=JSON.parse(t.slice(1).join(\"\\n\"))}catch(t){e={}}return ml(ml({},e),{},{key:\"KEY_FRAME\"===n[0]})})),this.parseGlobalData(this._frames[0].global),this.playerCount=t,this.reasons=[],this.frames=[],this.currentFrame=0,this.currentFrameDuration=1e3,this.progress=1,(t=this._frames[0].frame).key=this._frames[0].key,this.frames.push(this.parseFrame(t,this.frames));for(var n=1;n<this._frames.length;++n)this.frames.push(this.parseFrame(this._frames[n],this.frames))}},{key:\"isTurnBasedGame\",value:function(){return!1}},{key:\"initFrames\",value:function(t,e){this.playerInfo&&this.playerInfo.forEach((function(t){t.avatar&&t.avatar.destroy(!0)}));var n=this,r=new PIXI.loaders.Loader(window.location.origin);function i(){n._initFrames(e.length,t),n.loading=!1,n.reinit(!1),a=!0}this.playerInfo=e.map((function(t,e){var i={name:t.name||\"Anonymous\",color:t.color?n.parseColor(t.color):\"#ffffff\",number:e,index:t.index,type:t.type,isMe:\"CODINGAMER\"===t.type&&t.typeData.me,avatar:null};return null!=t.avatar&&r.add(\"avatar\"+e,t.avatar,{loadType:2,crossOrigin:!0},(function(t){i.avatar=t.texture,PIXI.Texture.addToCache(t.texture,\"$\"+i.index)})),i}));var a=!(this.loading=!0);r.on(\"complete\",i),r.on(\"error\",(function(t){console.warn(t),a||i()})),r.load()}},{key:\"update\",value:function(e,n,r){0<=this.currentFrame&&(this.asyncRenderingTime=t.RenderTimeout,this.changed=!0,this.speed=r,this.currentFrame=e,this.progress=n,1<=this.loaded&&!this.intro&&this.updateScene(this.scope,this.question,this.frames,e,n,this.speed,this.reasons[this.currentFrame]))}},{key:\"parseColor\",value:function(t){if(Array.isArray(t)){for(var e=[],n=0;n<t.length;++n)e.push(this.parseColor(t[n]));return e}return parseInt(t.substring(1),16)}},{key:\"init\",value:function(e,n,r,i,a,o,s){var c,h=this;window.PIXI=t.PIXI||window.PIXI,this.oversampling=a||1,a=function(){0<=h.currentFrame&&(h.changed=!0)},this.canvas=$(e),this.canvas.off(\"mousemove\"),this.canvas.off(\"wheel\"),this.canvas.bind(\"wheel\",a),this.canvas.mousemove(a),i&&(this.colors=this.parseColor(i)),\"ide\"===s&&(this.debugModeSetByUser||(this.debugMode=!0),il.listen((function(t){return console.error(t.cause||t)}))),this.asyncRendering=!0,this.asyncRenderingTime=0,this.destroyed=!1,this.asynchronousStep=null;var l=this;if(this.initWidth=0|n,this.initHeight=0|r,this.endCallback=o||this.endCallback,this.alreadyLoaded)this.changed=!0,this.renderer.resize(this.initWidth,this.initHeight),this.reinit(!0);else{this.alreadyLoaded=!0,this.question=null,this.scope=null,this.currentFrame=-1,this.loaded=0,this.container=new PIXI.Container;var u=this.getResources();this.renderer=this.createRenderer(this.initWidth,this.initHeight,e),o=this.renderer;var d,p=new PIXI.loaders.Loader(u.baseUrl);for(c in u.images)p.add(c,u.images[c],{crossOrigin:!0});for(d=0;d<u.sprites.length;++d)p.add(u.sprites[d],{crossOrigin:!0});for(d=0;d<u.fonts.length;++d)p.add(u.fonts[d],{crossOrigin:!0});for(c in u.spines)p.add(c,u.spines[c],{crossOrigin:!0});for(d=0;d<u.others.length;++d)p.add(u.others[d],{crossOrigin:!0});this.demo&&this.demo.agents.forEach((function(t){p.add(\"avatar\"+t.index,t.avatar,{loadType:2,crossOrigin:!0},(function(e){t.avatarTexture=e.texture,PIXI.Texture.addToCache(e.texture,\"$\"+t.index)}))})),l.scope={},e=function(t,e){requestAnimationFrame(l.animate.bind(l)),l.initPreload(l.scope,l.container,l.loaded=0,l.initWidth,l.initHeight)},p.on(\"start\",e),p.on(\"progress\",(function(t,e){t.progress<100&&l.preload(l.scope,l.container,l.loaded=t.progress/100,l.initWidth,l.initHeight,e)})),o=function(){for(var t in u.images)u.images.hasOwnProperty(t)&&p.resources[t].texture&&PIXI.Texture.addToCache(p.resources[t].texture,t);for(t in u.spines)u.spines.hasOwnProperty(t)&&(PIXI.AnimCache[t]=PIXI.AnimCache[u.baseUrl+u.spines[t]]);l.loaded=1,l.reinit(!0),l.changed=!0},p.on(\"complete\",o),p.on(\"error\",(function(t){console.warn(t)})),Object.keys(p.resources).length?p.load():(e(),o())}}},{key:\"createRenderer\",value:function(t,e,n){return PIXI.autoDetectRenderer(t,e,{view:n,clearBeforeRender:!0,preserveDrawingBuffer:!1})}},{key:\"isReady\",value:function(){return 1<=this.loaded}}])&&vl(e.prototype,n),i&&vl(e,i),t}()}]).Drawer;",
      "levelParams": {
        "0": {
          "testCases": [
            {
              "title": {
                "1": "3x3x8 SIMPLE",
                "2": "3x3x8 SIMPLE"
              },
              "isTest": true,
              "testIn": "0;3 8 3;1 1 1 #;2 1 1 ##;3 1 1 ###",
              "testOut": "",
              "difficulty": 1,
              "isValidator": false
            },
            {
              "title": {
                "1": "10x1x20 TETRIS",
                "2": "10x1x20 TETRIS"
              },
              "isTest": true,
              "testIn": "0;10 20 1;4 1 1 ####;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": false
            },
            {
              "title": {
                "1": "5x5x12 FLAT",
                "2": "5x5x12 FLAT"
              },
              "isTest": true,
              "testIn": "0;5 12 5;1 1 1 #;2 1 1 ##;3 1 1 ###;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": false
            },
            {
              "title": {
                "1": "5x5x12 BASIC",
                "2": "5x5x12 BASIC"
              },
              "isTest": true,
              "testIn": "0;5 12 5;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..;2 2 2 ##...#.#;2 2 2 ##..#.#.;2 2 2 ##.#.#..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": false
            },
            {
              "title": {
                "1": "5x5x12 EXTENDED",
                "2": "5x5x12 EXTENDED"
              },
              "isTest": true,
              "testIn": "0;5 12 5;1 1 1 #;2 1 1 ##;3 1 1 ###;4 1 1 ####;5 1 1 #####;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..;3 3 1 ####..#..;3 3 1 ###.#..#.;3 3 1 .#.##..##;3 3 1 ##..#..##;3 3 1 #..##..##;4 2 1 #####...;4 2 1 ####.#..;3 2 1 ####.#;3 2 1 #####.;4 2 1 ###...##;3 3 1 .#.###.#.;3 2 2 ###..#.....#;3 2 2 ..####..#...;3 2 2 ###.#.....#.;3 2 2 ###..#.#....;3 2 2 ..####....#.;3 2 2 ##..###.....;3 2 2 .####....#..;3 2 2 .##.#....##.;3 2 2 .#..####....;3 2 2 ###..##.....;3 2 2 ..####...#..;2 2 2 ##...#.#;2 2 2 ##..#.#.;2 2 2 ##.#.#..;3 2 2 ###.#..#....;2 2 2 ####.#..;3 2 2 ###..#..#...;3 2 2 .####..#....;3 2 2 .#.....####.;2 2 2 ###..##.",
              "testOut": "",
              "difficulty": 1,
              "isValidator": false
            },
            {
              "title": {
                "1": "3x3x8 FLAT",
                "2": "3x3x8 FLAT"
              },
              "isTest": true,
              "testIn": "0;3 8 3;1 1 1 #;2 1 1 ##;3 1 1 ###;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": false
            },
            {
              "title": {
                "1": "4x4x10 BASIC",
                "2": "4x4x10 BASIC"
              },
              "isTest": true,
              "testIn": "0;4 10 4;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..;2 2 2 ##...#.#;2 2 2 ##..#.#.;2 2 2 ##.#.#..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": false
            },
            {
              "title": {
                "1": "6x6x6 EXTENDED",
                "2": "6x6x6 EXTENDED"
              },
              "isTest": true,
              "testIn": "0;6 6 6;1 1 1 #;2 1 1 ##;3 1 1 ###;4 1 1 ####;5 1 1 #####;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..;3 3 1 ####..#..;3 3 1 ###.#..#.;3 3 1 .#.##..##;3 3 1 ##..#..##;3 3 1 #..##..##;4 2 1 #####...;4 2 1 ####.#..;3 2 1 ####.#;3 2 1 #####.;4 2 1 ###...##;3 3 1 .#.###.#.;3 2 2 ###..#.....#;3 2 2 ..####..#...;3 2 2 ###.#.....#.;3 2 2 ###..#.#....;3 2 2 ..####....#.;3 2 2 ##..###.....;3 2 2 .####....#..;3 2 2 .##.#....##.;3 2 2 .#..####....;3 2 2 ###..##.....;3 2 2 ..####...#..;2 2 2 ##...#.#;2 2 2 ##..#.#.;2 2 2 ##.#.#..;3 2 2 ###.#..#....;2 2 2 ####.#..;3 2 2 ###..#..#...;3 2 2 .####..#....;3 2 2 .#.....####.;2 2 2 ###..##.",
              "testOut": "",
              "difficulty": 1,
              "isValidator": false
            },
            {
              "title": {
                "1": "10x1x20 TETRIS",
                "2": "10x1x20 TETRIS"
              },
              "isTest": false,
              "testIn": "1;10 20 1;4 1 1 ####;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": true
            },
            {
              "title": {
                "1": "5x5x12 FLAT",
                "2": "5x5x12 FLAT"
              },
              "isTest": false,
              "testIn": "1;5 12 5;1 1 1 #;2 1 1 ##;3 1 1 ###;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": true
            },
            {
              "title": {
                "1": "5x5x12 BASIC",
                "2": "5x5x12 BASIC"
              },
              "isTest": false,
              "testIn": "1;5 12 5;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..;2 2 2 ##...#.#;2 2 2 ##..#.#.;2 2 2 ##.#.#..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": true
            },
            {
              "title": {
                "1": "5x5x12 EXTENDED",
                "2": "5x5x12 EXTENDED"
              },
              "isTest": false,
              "testIn": "1;5 12 5;1 1 1 #;2 1 1 ##;3 1 1 ###;4 1 1 ####;5 1 1 #####;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..;3 3 1 ####..#..;3 3 1 ###.#..#.;3 3 1 .#.##..##;3 3 1 ##..#..##;3 3 1 #..##..##;4 2 1 #####...;4 2 1 ####.#..;3 2 1 ####.#;3 2 1 #####.;4 2 1 ###...##;3 3 1 .#.###.#.;3 2 2 ###..#.....#;3 2 2 ..####..#...;3 2 2 ###.#.....#.;3 2 2 ###..#.#....;3 2 2 ..####....#.;3 2 2 ##..###.....;3 2 2 .####....#..;3 2 2 .##.#....##.;3 2 2 .#..####....;3 2 2 ###..##.....;3 2 2 ..####...#..;2 2 2 ##...#.#;2 2 2 ##..#.#.;2 2 2 ##.#.#..;3 2 2 ###.#..#....;2 2 2 ####.#..;3 2 2 ###..#..#...;3 2 2 .####..#....;3 2 2 .#.....####.;2 2 2 ###..##.",
              "testOut": "",
              "difficulty": 1,
              "isValidator": true
            },
            {
              "title": {
                "1": "3x3x8 FLAT",
                "2": "3x3x8 FLAT"
              },
              "isTest": false,
              "testIn": "1;3 8 3;1 1 1 #;2 1 1 ##;3 1 1 ###;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": true
            },
            {
              "title": {
                "1": "4x4x10 BASIC",
                "2": "4x4x10 BASIC"
              },
              "isTest": false,
              "testIn": "1;4 10 4;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..;2 2 2 ##...#.#;2 2 2 ##..#.#.;2 2 2 ##.#.#..",
              "testOut": "",
              "difficulty": 1,
              "isValidator": true
            },
            {
              "title": {
                "1": "6x6x6 EXTENDED",
                "2": "6x6x6 EXTENDED"
              },
              "isTest": false,
              "testIn": "1;6 6 6;1 1 1 #;2 1 1 ##;3 1 1 ###;4 1 1 ####;5 1 1 #####;2 2 1 ###.;2 2 1 ####;3 2 1 ###.#.;3 2 1 ##..##;3 2 1 ####..;3 3 1 ####..#..;3 3 1 ###.#..#.;3 3 1 .#.##..##;3 3 1 ##..#..##;3 3 1 #..##..##;4 2 1 #####...;4 2 1 ####.#..;3 2 1 ####.#;3 2 1 #####.;4 2 1 ###...##;3 3 1 .#.###.#.;3 2 2 ###..#.....#;3 2 2 ..####..#...;3 2 2 ###.#.....#.;3 2 2 ###..#.#....;3 2 2 ..####....#.;3 2 2 ##..###.....;3 2 2 .####....#..;3 2 2 .##.#....##.;3 2 2 .#..####....;3 2 2 ###..##.....;3 2 2 ..####...#..;2 2 2 ##...#.#;2 2 2 ##..#.#.;2 2 2 ##.#.#..;3 2 2 ###.#..#....;2 2 2 ####.#..;3 2 2 ###..#..#...;3 2 2 .####..#....;3 2 2 .#.....####.;2 2 2 ###..##.",
              "testOut": "",
              "difficulty": 1,
              "isValidator": true
            }
          ],
          "maxPlayers": 1,
          "minPlayers": 1,
          "statements": {
            "1": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n<div class=\"statement-body\">\n    <!-- GOAL -->\n    <div class=\"statement-section statement-goal\">\n        <h1>\n            <span class=\"icon icon-goal\">&nbsp;</span>\n            <span>Goal</span>\n        </h1>\n        <div class=\"statement-goal-content\">\n            Survive <const>200</const> turns without letting your pit overflow.\n        </div>\n    </div>\n\n    <!-- RULES -->\n    <div class=\"statement-section statement-rules\">\n        <h1>\n            <span class=\"icon icon-rules\">&nbsp;</span>\n            <span>Rules</span>\n        </h1>\n        <div>\n            <div class=\"statement-rules-content\">You start with a pit, that is initially empty. Each turn you get a new tile and have to place it somewhere in your pit by dropping it at a given location. You can rotate the given tile before dropping\n                it into your pit.<br> When you manage to cover a complete layer with blocks, this layer will be removed and all layers above will drop down. <br>\n                <br>\n                For the set of available tiles see <a href=\"http://www.blockout.net/blockout2/scoretable.php?set=0&width=5&height=5&depth=12\">blockout.net</a>.\n            </div>\n        </div>\n    </div>\n    <!-- EXPERT RULES -->\n    <div class=\"statement-section statement-expertrules\">\n        <h1>\n            <span class=\"icon icon-expertrules\">&nbsp;</span>\n            <span>Expert Rules</span>\n        </h1>\n        <div class=\"statement-expert-rules-content\">\n            You can find the source code of the game at <a href=\"https://github.com/eulerscheZahl/BlockOut\">https://github.com/eulerscheZahl/BlockOut</a>.\n        </div>\n    </div>\n    <!-- WARNING -->\n    <div class=\"statement-section statement-warning\">\n        <h1>\n            <span class=\"icon icon-warning\">&nbsp;</span>\n            <span>Note</span>\n        </h1>\n        <div class=\"statement-warning-content\">\n            You can zoom in the viewer with your mousewheel, change the rotation by moving your mouse while holding your left button and pan with your right mouse button.\n        </div>\n    </div>\n    <!-- PROTOCOL -->\n    <div class=\"statement-section statement-protocol\">\n        <h1>\n            <span class=\"icon icon-protocol\">&nbsp;</span>\n            <span>Game Input</span>\n        </h1>\n        <!-- Protocol block -->\n        <div class=\"blk\">\n            <div class=\"text\">A block is given in the following way: <var>width</var> <var>height</var> <var>depth</var> <var>shape</var>.<br>\n                The shape consists of <const>width*height*depth</const> characters, which are all either <const>#</const> (filled) or <const>.</const> (empty).<br>\n                The characters are in order of <const>z</const>, then <const>y</const>, then <const>x</const> (that means, all cells with z=0 are given first and among those with y=0). <br> <br>\n                <div class=\"statement-section statement-examples\">\n                    <h1>\n                        <span class=\"icon icon-example\">&nbsp;</span>\n                        <span>Example</span>\n                    </h1>\n\n                    <div class=\"statement-examples-text\">\n                        Let's have a look at the following block: <br>\n                        <img src=\"https://cdn-games.codingame.com/community/1500515-1606401236233/0d92c1c231aa0f9690a9e94621f970ea5cda546cb4e0f8a247f8384ed5d7a6cd.png\" /> <br>\n                        It has a <var>width</var> of <const>3</const> and a <var>height</var> and <var>depth</var> of <const>2</const> each.\n                        The shape is <const>.##..###....</const>, mapping the positions for (0,0,0) (1,0,0) (2,0,0) (0,1,0) (1,1,0) (2,1,0) (0,0,1) (1,0,1) (2,0,1) (0,1,1) (1,1,1) (2,1,1).\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <!-- Protocol block -->\n        <div class=\"blk\">\n            <div class=\"title\">Input per turn</div>\n            <div class=\"text\">\n                <p><span class=\"statement-lineno\">Line 1: </span>the pit: <var>pitWidth</var> <var>pitHeight</var> <var>pitDepth</var> <var>pitShape</var> giving the size and the current state of your pit</p>\n                <p><span class=\"statement-lineno\">Line 2: </span><var>blockCount</var>, the number of distinct rotations for your next block</p>\n                <p><span class=\"statement-lineno\">next <var>blockCount</var> lines: </span>the block: <var>blockIndex</var> <var>width</var> <var>height</var> <var>depth</var> <var>shape</var>. These shapes all represent the same block, just with\n                    different rotations.</p>\n            </div>\n        </div>\n\n        <!-- Protocol block -->\n        <div class=\"blk\">\n            <div class=\"title\">Output</div>\n            <div class=\"text\">\n                <span class=\"statement-lineno\">A single line</span> containing <action>blockIndex x z</action> denoting the rotation of the block according to the list of inputs provided and the shift in x- and z-direction.\n                <br>\n            </div>\n        </div>\n\n        <!-- Protocol block -->\n        <div class=\"blk\">\n            <div class=\"title\">Constraints</div>\n            <div class=\"text\">\n                For the Tetris testcase: <var>pitWidth</var> = 10, <var>pitHeight</var> = 20, <var>pitDepth</var> = 1 <br><br>\n                For all other testcases: <br>\n                3 &le; <var>pitWidth</var> = <var>pitDepth</var> &le; 6<br>\n                6 &le; <var>pitHeight</var> &le; 12<br>\n                1 &le; <var>blockCount</var> &le; 64<br>\n                1 &le; <var>width</var>, <var>height</var>, <var>depth</var> &le; min(<const>5</const>, <var>pitWidth</var>)<br>\n                <br>Allotted response time to output\n                is &le; <const>1</const> second for the first turn, <const>150</const> ms for later turns.\n            </div>\n        </div>\n    </div>\n</div>",
            "2": "<div id=\"statement_back\" class=\"statement_back\" style=\"display:none\"></div>\n<div class=\"statement-body\">\n    <!-- GOAL -->\n    <div class=\"statement-section statement-goal\">\n        <h1>\n            <span class=\"icon icon-goal\">&nbsp;</span>\n            <span>Goal</span>\n        </h1>\n        <div class=\"statement-goal-content\">\n            Survive <const>200</const> turns without letting your pit overflow.\n        </div>\n    </div>\n\n    <!-- RULES -->\n    <div class=\"statement-section statement-rules\">\n        <h1>\n            <span class=\"icon icon-rules\">&nbsp;</span>\n            <span>Rules</span>\n        </h1>\n        <div>\n            <div class=\"statement-rules-content\">You start with a pit, that is initially empty. Each turn you get a new tile and have to place it somewhere in your pit by dropping it at a given location. You can rotate the given tile before dropping\n                it into your pit.<br> When you manage to cover a complete layer with blocks, this layer will be removed and all layers above will drop down. <br>\n                <br>\n                For the set of available tiles see <a href=\"http://www.blockout.net/blockout2/scoretable.php?set=0&width=5&height=5&depth=12\">blockout.net</a>.\n            </div>\n        </div>\n    </div>\n    <!-- EXPERT RULES -->\n    <div class=\"statement-section statement-expertrules\">\n        <h1>\n            <span class=\"icon icon-expertrules\">&nbsp;</span>\n            <span>Expert Rules</span>\n        </h1>\n        <div class=\"statement-expert-rules-content\">\n            You can find the source code of the game at <a href=\"https://github.com/eulerscheZahl/BlockOut\">https://github.com/eulerscheZahl/BlockOut</a>.\n        </div>\n    </div>\n    <!-- WARNING -->\n    <div class=\"statement-section statement-warning\">\n        <h1>\n            <span class=\"icon icon-warning\">&nbsp;</span>\n            <span>Note</span>\n        </h1>\n        <div class=\"statement-warning-content\">\n            You can zoom in the viewer with your mousewheel, change the rotation by moving your mouse while holding your left button and pan with your right mouse button.\n        </div>\n    </div>\n    <!-- PROTOCOL -->\n    <div class=\"statement-section statement-protocol\">\n        <h1>\n            <span class=\"icon icon-protocol\">&nbsp;</span>\n            <span>Game Input</span>\n        </h1>\n        <!-- Protocol block -->\n        <div class=\"blk\">\n            <div class=\"text\">A block is given in the following way: <var>width</var> <var>height</var> <var>depth</var> <var>shape</var>.<br>\n                The shape consists of <const>width*height*depth</const> characters, which are all either <const>#</const> (filled) or <const>.</const> (empty).<br>\n                The characters are in order of <const>z</const>, then <const>y</const>, then <const>x</const> (that means, all cells with z=0 are given first and among those with y=0). <br> <br>\n                <div class=\"statement-section statement-examples\">\n                    <h1>\n                        <span class=\"icon icon-example\">&nbsp;</span>\n                        <span>Example</span>\n                    </h1>\n\n                    <div class=\"statement-examples-text\">\n                        Let's have a look at the following block: <br>\n                        <img src=\"https://cdn-games.codingame.com/community/1500515-1606401236233/0d92c1c231aa0f9690a9e94621f970ea5cda546cb4e0f8a247f8384ed5d7a6cd.png\" /> <br>\n                        It has a <var>width</var> of <const>3</const> and a <var>height</var> and <var>depth</var> of <const>2</const> each.\n                        The shape is <const>.##..###....</const>, mapping the positions for (0,0,0) (1,0,0) (2,0,0) (0,1,0) (1,1,0) (2,1,0) (0,0,1) (1,0,1) (2,0,1) (0,1,1) (1,1,1) (2,1,1).\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <!-- Protocol block -->\n        <div class=\"blk\">\n            <div class=\"title\">Input per turn</div>\n            <div class=\"text\">\n                <p><span class=\"statement-lineno\">Line 1: </span>the pit: <var>pitWidth</var> <var>pitHeight</var> <var>pitDepth</var> <var>pitShape</var> giving the size and the current state of your pit</p>\n                <p><span class=\"statement-lineno\">Line 2: </span><var>blockCount</var>, the number of distinct rotations for your next block</p>\n                <p><span class=\"statement-lineno\">next <var>blockCount</var> lines: </span>the block: <var>blockIndex</var> <var>width</var> <var>height</var> <var>depth</var> <var>shape</var>. These shapes all represent the same block, just with\n                    different rotations.</p>\n            </div>\n        </div>\n\n        <!-- Protocol block -->\n        <div class=\"blk\">\n            <div class=\"title\">Output</div>\n            <div class=\"text\">\n                <span class=\"statement-lineno\">A single line</span> containing <action>blockIndex x z</action> denoting the rotation of the block according to the list of inputs provided and the shift in x- and z-direction.\n                <br>\n            </div>\n        </div>\n\n        <!-- Protocol block -->\n        <div class=\"blk\">\n            <div class=\"title\">Constraints</div>\n            <div class=\"text\">\n                For the Tetris testcase: <var>pitWidth</var> = 10, <var>pitHeight</var> = 20, <var>pitDepth</var> = 1 <br><br>\n                For all other testcases: <br>\n                3 &le; <var>pitWidth</var> = <var>pitDepth</var> &le; 6<br>\n                6 &le; <var>pitHeight</var> &le; 12<br>\n                1 &le; <var>blockCount</var> &le; 64<br>\n                1 &le; <var>width</var>, <var>height</var>, <var>depth</var> &le; min(<const>5</const>, <var>pitWidth</var>)<br>\n                <br>Allotted response time to output\n                is &le; <const>1</const> second for the first turn, <const>150</const> ms for later turns.\n            </div>\n        </div>\n    </div>\n</div>"
          },
          "questionType": "solo",
          "stubGenerator": "gameloop\nread pitWidth:int pitHeight:int pitDepth:int pitShape:word(301)\nread blockCount:int\nloop blockCount read blockIndex:int width:int height:int depth:int shape:word(28) \nwrite blockIndex x z",
          "welcomePopups": {},
          "criteriaLanguageMap": {}
        }
      },
      "coverBinaryId": 58317360583584,
      "directoryPrefix": "community/1500515-1606401236233",
      "allowSourceDownload": true,
      "originalArchiveBinaryId": 67305384095799
    },
    "draft": false,
    "readyForModeration": true
  },
  "validatedFor": 158613234726,
  "avatar": 43135502422075,
  "commentCount": 32,
  "upVotes": 87,
  "downVotes": 1,
  "validateAction": {
    "actionId": 525535,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1609524337000,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1609525140827,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1612117490107,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}