{
  "id": 126372,
  "activeVersion": 19,
  "score": 9,
  "votableId": 37305851,
  "codingamerId": 6098116,
  "views": 271,
  "commentableId": 37145063,
  "title": "Inequality Overlap Area",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "Delicious31415",
  "publicHandle": "126372f47026eb00c3ae888ce3be836da91375",
  "codingamerHandle": "6fc5bad6d87584d4100190a570f4e37c6118906",
  "lastVersion": {
    "version": 19,
    "autocloseTime": 1757035743003,
    "freezeTime": 1755048543003,
    "data": {
      "title": "Inequality Overlap Area",
      "topics": [
        {
          "id": 95,
          "handle": "geometry",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Geometry",
            "2": "Geometry"
          },
          "puzzleCount": 33,
          "parentTopicId": 93
        },
        {
          "id": 94,
          "handle": "mathematics",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Mathematics",
            "2": "Mathematics"
          },
          "puzzleCount": 71,
          "parentTopicId": 93
        }
      ],
      "solution": "from sys import exit\ndef parse(s):\n    s = s.replace(\" \", \"\")\n    op = \"<=\" if \"<=\" in s else \">=\"\n    left, c = s.split(op)\n    c = float(c)\n    a, rest = left.split(\"x\")\n    a = float(a) if a not in [\"\", \"+\"] else 1.0\n    b = rest[:-1]\n    b = float(b) if b not in [\"\", \"+\"] else 1.0\n    return a, b, c, op\ndef clip(poly, a, b, c, op):\n    def inside(x, y): return (a*x + b*y - c <= 1e-8) if op == \"<=\" else (a*x + b*y - c >= -1e-8)\n    out = []\n    for i in range(len(poly)):\n        x1, y1 = poly[i]\n        x2, y2 = poly[(i+1)%len(poly)]\n        in1, in2 = inside(x1, y1), inside(x2, y2)\n        if in1 and in2:\n            out.append((x2, y2))\n        elif in1 != in2:\n            dx, dy = x2 - x1, y2 - y1\n            denom = a * dx + b * dy\n            if denom == 0: continue\n            t = (c - a * x1 - b * y1) / denom\n            xi, yi = x1 + t * dx, y1 + t * dy\n            out.append((xi, yi))\n            if in2:\n                out.append((x2, y2))\n    return out\ndef area(poly):\n    return abs(sum(x*y2 - x2*y for (x,y),(x2,y2) in zip(poly, poly[1:] + poly[:1]))) / 2\ndef unbounded(poly):\n    return any(abs(x) > 9999 or abs(y) > 9999 for x, y in poly)\nn = int(input())\nineqs = [parse(input()) for _ in range(n)]\npoly = [(-1e4, -1e4), (1e4, -1e4), (1e4, 1e4), (-1e4, 1e4)]\nfor a, b, c, op in ineqs:\n    poly = clip(poly, a, b, c, op)\n    if not poly:\n        print(\"No Overlap\")\n        exit()\na = area(poly)\nif len(poly) < 3 or a < 1e-6:\n    print(\"No Overlap\")\nelif unbounded(poly):\n    print(\"Overlap, But Infinite\")\nelse:\n    print(f\"{round(a + 1e-9, 3):.3f}\")",
      "statement": "Given [[n]], the number of inequalities that will be given, and the inequalities in the form [[a]]{{x}} ({{+}}/{{-}}) [[b]]{{y }}({{<=}}/{{>=}}) [[c]], find if <<all>> the inequalities overlap in the same place and the area of the overlap.\n\nHere are the three possibilities:\n1) <<All>> the inequalities overlap in the same place, and the overlap area is finite, so output the overlap area.\n2) <<Not all>> the inequalities overlap in the same place, so just output {{No Overlap}}.\n3) <<All>> the inequalities overlap in the same place, but the overlap area is infinite, so just output {{Overlap, But Infinite}}.\n\nHere is an example for all three possibilities: https://imgur.com/a/V5D90gI\n\nNote: If all the inequalities overlap on a point or line, it counts as a {{No Overlap}}.",
      "testCases": [
        {
          "title": "Simple Overlap",
          "isTest": true,
          "testIn": "3\n2x + 3y >= 5\n4x + 3y <= -2\n0x + 1y <= 10",
          "testOut": "13.500",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Simple Overlap.1",
          "isTest": false,
          "testIn": "3\n5x - 9y >= 3\n-2x + 3y >= 8\n1x + 0y >= -40",
          "testOut": "9.389",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Floating",
          "isTest": true,
          "testIn": "4\n1.5x + 0.2y >= 0.8\n1.5x + 0.2y <= 10.6\n0.2x + 1.5y >= 0.5\n0.2x + 1.5y <= 10.2",
          "testOut": "43.014",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Floating.1",
          "isTest": false,
          "testIn": "4\n5.1x + 9.4y <= 8.5\n9.5x + 5.5y >= -2.4\n1.8x + 1.5y >= 1.1\n-0.1x + 2.105y >= -20.9",
          "testOut": "53.902",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Pentagon",
          "isTest": true,
          "testIn": "5\n2x + 9y <= 20\n2x + 1y <= 8\n1x + 1y >= -40\n1x + 0y >= -40\n0x + 2y >= -60",
          "testOut": "1368.278",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Pentagon.1",
          "isTest": false,
          "testIn": "5\n8x - 2y <= 30\n3x + 8y <= 35\n-2x + 8y >= 2.57\n-5x + 5y <= 80\n1x + 2y >= -15",
          "testOut": "105.763",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "NO",
          "isTest": true,
          "testIn": "8\n52x + 84y <= 968\n81x - 71y >= 654\n8x - 941y <= 64\n5x - 97y <= 8\n1x + 0y <= -8\n9x - 2y >= 300\n82x - 91y <= -105\n910x - 918y >= 108",
          "testOut": "No Overlap",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "NO.1",
          "isTest": false,
          "testIn": "8\n52x + 84y <= 968\n20x + 5y >= 81\n8x - 941y <= 64\n5x - 97y <= 8\n1x + 0y <= -8\n9x - 2y >= 300\n981x - 2y <= 108\n910x - 918y >= 108",
          "testOut": "No Overlap",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Infinite",
          "isTest": true,
          "testIn": "6\n5x + 9y >= 5\n7x + 2y >= 4\n9x + 2y >= -1\n-2x + 8y >= 3\n-8x - 5y <= -5\n-1.6x + 8y >= -5",
          "testOut": "Overlap, But Infinite",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Infinite.1",
          "isTest": false,
          "testIn": "7\n5x + 9y >= 5\n7x + 2y >= 4\n9x + 2y >= -1\n-1x + 9y >= 3\n-8x - 5y <= -5\n-1.6x + 8y >= -5\n9x + 8y >= 9",
          "testOut": "Overlap, But Infinite",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "NoOverlap",
          "isTest": true,
          "testIn": "9\n500x + 500y <= 1000\n-500x - 500y <= -1000\n300x - 200y <= 800\n-300x + 200y <= 700\n1000x + 0y >= 100\n0x + 1000y >= 100\n1000x + 0y <= 300\n0x + 1000y <= 300\n500x + 500y >= 1000",
          "testOut": "No Overlap",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "NoOverlap.1",
          "isTest": false,
          "testIn": "10\n1000x + 0y >= 0\n0x + 1000y >= 0\n1000x + 1000y <= 200\n1000x + 1000y >= 900\n800x - 600y <= 500\n-800x + 600y <= 500\n1000x + 0y <= 1000\n0x + 1000y <= 1000\n1000x - 1000y >= -500\n-1000x - 1000y <= 500",
          "testOut": "No Overlap",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Not Finite",
          "isTest": true,
          "testIn": "9\n200x + 0y >= 200\n200x + 0y <= 600\n150x + 150y >= -900\n-150x + 150y >= -900\n0x + 200y >= -1000\n250x - 250y <= 1000\n-300x - 300y <= 1000\n300x + 600y >= -1000\n1x + 900y >= -815",
          "testOut": "Overlap, But Infinite",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Not Finite.1",
          "isTest": false,
          "testIn": "10\n300x + 0y >= 0\n0x + 300y >= 0\n-200x + 400y >= 0\n200x + 400y >= 0\n300x - 300y <= 900\n-300x - 300y <= 900\n300x + 0y <= 1000\n300x + 900y >= -1000\n8x - 6y <= -500\n942x + 816y >= 5",
          "testOut": "Overlap, But Infinite",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Same Graph",
          "isTest": true,
          "testIn": "5\n6x + 2y >= 12\n3x + 1y >= 6\n9x + 3y >= 18\n-18x - 6y <= -36\n-60x - 20y <= -120",
          "testOut": "Overlap, But Infinite",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Same Graph.1",
          "isTest": false,
          "testIn": "5\n9x - 2y <= 12\n27x - 6y <= 36\n-18x + 4y >= -24\n-36x + 8y >= -48\n270x - 60y <= 360",
          "testOut": "Overlap, But Infinite",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "One Line",
          "isTest": true,
          "testIn": "6\n6x + 2y >= 12\n3x + 1y <= 6\n9x + 3y >= 18\n-18x - 6y >= -36\n-60x - 20y <= -120\n15x + 5y <= 30",
          "testOut": "No Overlap",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "One Line.1",
          "isTest": false,
          "testIn": "6\n9x - 2y <= 12\n27x - 6y >= 36\n-18x + 4y >= -24\n-36x + 8y <= -48\n270x - 60y <= 360\n-18x + 4y <= -24",
          "testOut": "No Overlap",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "One Point",
          "isTest": true,
          "testIn": "10\n6x + 2y >= 12\n3x + 1y <= 6\n9x + 3y >= 18\n-18x - 6y >= -36\n-60x - 20y <= -120\n15x + 5y <= 30\n0x + 1y <= 6\n-3x + 1y >= 6\n1x + 0y >= 0\n1x - 1y >= -6",
          "testOut": "No Overlap",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "One Point.1",
          "isTest": false,
          "testIn": "10\n9x - 2y <= 12\n27x - 6y >= 36\n-18x + 4y >= -24\n-36x + 8y <= -48\n270x - 60y <= 360\n-18x + 4y <= -24\n1x + 0y >= 0\n0x + 1y <= -6\n1x + 1y <= -6\n2x - 2y >= 12",
          "testOut": "No Overlap",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Quadrilateral",
          "isTest": true,
          "testIn": "4\n8x - 6y >= 4\n-6x + 2y <= 12\n2x + 1y >= -19\n9x + 1y <= 5",
          "testOut": "88.756",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Quadrilateral.1",
          "isTest": false,
          "testIn": "4\n8x - 0.5y <= 9\n-1x + 1y >= -2\n5x - 3y >= -8\n-1x - 1y >= -1",
          "testOut": "17.897",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Rectangle",
          "isTest": true,
          "testIn": "4\n1x + 0y >= 0\n0x + 1y >= 0\n1x + 0y <= 3.14\n0x + 1y <= 3.1415",
          "testOut": "9.864",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Rectangle",
          "isTest": false,
          "testIn": "4\n1x + 0y >= 2\n0x + 1y >= 3\n1x + 0y <= 9.2\n0x + 1y <= 14.2",
          "testOut": "80.640",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "2 ≤ [[n]] ≤ 20\n0 ≤ |[[a]]|, |[[b]]|, |[[c]]| ≤ 1000\n12 ≤ length of [[s]] ≤ 30",
      "coverBinaryId": 145284948353070,
      "stubGenerator": "read n:int\nloop n read s:string(30)\nwrite The area\nOverlap, But Infinite\nNo Overlap",
      "inputDescription": "<<Line 1:>> An integer [[n]].\n<<Next [[n]] Lines:>> A string [[s]], for an inequality in the form [[a]]{{x}} ({{+}}/{{-}}) [[b]]{{y }}({{<=}}/{{>=}}) [[c]] where [[a]], [[b]], and [[c]] are floats.",
      "solutionLanguage": "Python3",
      "outputDescription": "<<Line 1:>> It is either:\n- {{No Overlap}} if not <<all>> the inequalities overlap in the same place\n- {{Overlap, But Infinite}} if <<all>> the inequalities overlap in the same place, but the overlap area is infinite.\n- The area of the overlapped place rounded to the nearest thousandths if <<all>> the inequalities overlap in the same place, and the overlap area is finite.\n\nNote: The output has to contain 3 decimal places."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Given <var>n</var>, the number of inequalities that will be given, and the inequalities in the form <var>a</var><const>x</const> (<const>+</const>/<const>-</const>) <var>b</var><const>y </const>(<const>&lt;=</const>/<const>&gt;=</const>) <var>c</var>, find if <strong>all</strong> the inequalities overlap in the same place and the area of the overlap.<br><br>Here are the three possibilities:<br>1) <strong>All</strong> the inequalities overlap in the same place, and the overlap area is finite, so output the overlap area.<br>2) <strong>Not all</strong> the inequalities overlap in the same place, so just output <const>No Overlap</const>.<br>3) <strong>All</strong> the inequalities overlap in the same place, but the overlap area is infinite, so just output <const>Overlap, But Infinite</const>.<br><br>Here is an example for all three possibilities: https://imgur.com/a/V5D90gI<br><br>Note: If all the inequalities overlap on a point or line, it counts as a <const>No Overlap</const>.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>Line 1:</strong> An integer <var>n</var>.<br><strong>Next <var>n</var> Lines:</strong> A string <var>s</var>, for an inequality in the form <var>a</var><const>x</const> (<const>+</const>/<const>-</const>) <var>b</var><const>y </const>(<const>&lt;=</const>/<const>&gt;=</const>) <var>c</var> where <var>a</var>, <var>b</var>, and <var>c</var> are floats.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\"><strong>Line 1:</strong> It is either:<br>- <const>No Overlap</const> if not <strong>all</strong> the inequalities overlap in the same place<br>- <const>Overlap, But Infinite</const> if <strong>all</strong> the inequalities overlap in the same place, but the overlap area is infinite.<br>- The area of the overlapped place rounded to the nearest thousandths if <strong>all</strong> the inequalities overlap in the same place, and the overlap area is finite.<br><br>Note: The output has to contain 3 decimal places.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">2 &le; <var>n</var> &le; 20<br>0 &le; |<var>a</var>|, |<var>b</var>|, |<var>c</var>| &le; 1000<br>12 &le; length of <var>s</var> &le; 30</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">3\n2x + 3y &gt;= 5\n4x + 3y &lt;= -2\n0x + 1y &lt;= 10</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">13.500</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 13729790724,
  "avatar": 154204769409682,
  "commentCount": 32,
  "upVotes": 9,
  "downVotes": 0,
  "validateAction": {
    "actionId": 1207941,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "REFUSED",
      "date": 1751832337000,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1751842723475,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "REFUSED",
      "date": 1754435137001,
      "data": {
        "author": "SYSTEM",
        "reason": "INACTIVITY"
      }
    },
    {
      "status": "PENDING",
      "date": 1754443736302,
      "data": {
        "author": "ACTION",
        "reason": "EDIT"
      }
    },
    {
      "status": "ACCEPTED",
      "date": 1756998537105,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}