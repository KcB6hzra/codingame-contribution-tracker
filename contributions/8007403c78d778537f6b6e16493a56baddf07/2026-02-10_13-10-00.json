{
  "id": 80074,
  "activeVersion": 7,
  "score": 2,
  "votableId": 32064577,
  "codingamerId": 4531843,
  "views": 193,
  "commentableId": 31922342,
  "title": "MAGICAL FROG",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "berqiamouad",
  "publicHandle": "8007403c78d778537f6b6e16493a56baddf07",
  "codingamerHandle": "db59de08a264901eb0e0acaa7607b5ab3481354",
  "lastVersion": {
    "version": 7,
    "autocloseTime": 1706100322353,
    "data": {
      "title": "MAGICAL FROG",
      "topics": [
        {
          "id": 94,
          "handle": "mathematics",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Mathematics",
            "2": "Mathematics"
          },
          "puzzleCount": 61,
          "parentTopicId": 93
        },
        {
          "id": 60,
          "handle": "dynamic-programming",
          "category": "ADVANCED",
          "labelMap": {
            "1": "Programmation dynamique",
            "2": "Dynamic programming"
          },
          "pageTitle": "Dynamic programming: exercises and theory",
          "puzzleCount": 29,
          "parentTopicId": 41,
          "contentDetailsId": 85
        },
        {
          "id": 217,
          "handle": "matrix-product",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "Matrix product",
            "2": "Matrix product"
          },
          "puzzleCount": 1,
          "parentTopicId": 93
        }
      ],
      "solution": "#include <bits/stdc++.h>\nusing namespace std;\n#pragma GCC optimize(\"O2\")\n\ntypedef long long ll;\n#define YES cout << \"YES\\n\"\n#define NO cout << \"NO\\n\"\n#define sz(c) (ll)c.size()\n#define all(c) c.begin(), c.end()\n#define MOD 1000000007\n\n\nstruct mat{\n    std::vector<std::vector<int>> a;\n    mat(int m){\n        a.resize(m);\n        for(int i=0; i< m; i++){\n            for(int j=0; j< m; j++){\n                if(i==0) \n                    a[i].push_back(1);\n                else{\n                    a[i].push_back(0);\n                }\n            }\n        }\n        for(int i=1, j=0; i < m; i++, j++){\n            a[i][j] = 1;\n        }\n    }\n\n    mat operator*(const mat &mt) const{\n        mat ret(sz(mt.a));\n        for(int i=0; i < sz(mt.a); i++){\n            for(int j=0; j< sz(mt.a); j++){\n                ll sum=0;\n                for(int k=0;k <sz(mt.a); k++){\n                    sum = (sum + a[i][k] * 1LL * mt.a[k][j]) % MOD;\n                }\n                ret.a[i][j] = sum;\n            }\n        }\n        return ret;\n    }\n};\n\nmat bp(mat m, ll p){\n    if(p == 1) \n        return m;\n    mat temp = bp(m, p/2);\n    temp = (temp * temp);\n    return (p%2==0) ? temp: temp * m;\n}\n\n\nint main(){\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n\n    ll n; int m; cin >> n >> m;\n    mat matrice(m);\n    matrice = bp(matrice, n - m + 1);\n    ll res=0;\n\n    ll firstmterms[m];\n    firstmterms[0] = 1;\n    ll ind=1;\n    ll sum = 1;\n    if(n <= 1){\n        cout << \"1\\n\";\n\t\treturn 0;\n    }\n    while(ind < m){\n        firstmterms[ind] = sum;\n        sum = (sum * 2);\n        if(sum >= MOD){\n            sum -= MOD;\n        }\n        ind++;\n    }\n    for(int i=0, j=m-1; i < m; i++, j--){\n        res = (res + matrice.a[0][i] * firstmterms[j]) % MOD;\n    }\n    cout << res << \"\\n\";\n\n    return 0;\n}",
      "statement": "Reda commenced studies at ArcanumTech, an institution where the fusion of magic and technology thrived. His instructor for Potions, a firm believer in hands-on learning, advised all students to acquire magical companions to assist in their academic endeavors. Without hesitation, Reda chose a Frog as his trusted companion.\n\nTheir initial assignment was captivating: students were tasked with training their magical pets in mathematical tricks. Reda opted to closely observe his frog's movements, searching for discernible patterns that might reveal a suitable trick to teach.\n\nThe dwelling for Reda's frog was the Heliopea Tower staircase at ArcanumTech. Every day, beginning at the base step (stair number 0), the frog possessed the capability to leap to any subsequent [[K]] stairs (where [[i]]+[[j]] ≤ [[N]] and 1 ≤ [[j]] ≤ [[K]], [[i]] being the current stair and [[j]] being the number of stairs the frog jumps, assuming the frog was on stair [[i]]). It repeated this sequence of leaps until reaching the [[N]]'th stair.\n\nWould you kindly aid Reda in determining the count of ways his frog could reach the [[N]]'th stair? As the count might be substantial, the output should be provided modulo {{10^9+7}}.\n\nIn this context, different sequences of jumps are considered distinct ways.",
      "testCases": [
        {
          "title": "Test 1",
          "isTest": true,
          "testIn": "3 2",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 1",
          "isTest": false,
          "testIn": "5 3",
          "testOut": "13",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 2",
          "isTest": true,
          "testIn": "100 16",
          "testOut": "254592179",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 2",
          "isTest": false,
          "testIn": "100 14",
          "testOut": "439976308",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 3",
          "isTest": true,
          "testIn": "10000 20",
          "testOut": "749072746",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 3",
          "isTest": false,
          "testIn": "10000 18",
          "testOut": "943251797",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Test 4",
          "isTest": true,
          "testIn": "1000000000 20",
          "testOut": "503933661",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Validator 4",
          "isTest": false,
          "testIn": "1000000000 17",
          "testOut": "146772055",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "hard",
      "constraints": "1 ≤ [[N]] ≤ 10^9\n 1 ≤ [[K]] ≤ 20\n[[K]] ≤ [[N]]",
      "coverBinaryId": 116898565811925,
      "stubGenerator": "read N:long K:int\nwrite result",
      "inputDescription": "2 space-separated integers [[N]] and [[K]] as described above.",
      "solutionLanguage": "C++",
      "outputDescription": "A single integer, the number of different ways to reach the [[N]]'th stair (modulo {{10^9+7}})."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">Reda commenced studies at ArcanumTech, an institution where the fusion of magic and technology thrived. His instructor for Potions, a firm believer in hands-on learning, advised all students to acquire magical companions to assist in their academic endeavors. Without hesitation, Reda chose a Frog as his trusted companion.<br><br>Their initial assignment was captivating: students were tasked with training their magical pets in mathematical tricks. Reda opted to closely observe his frog's movements, searching for discernible patterns that might reveal a suitable trick to teach.<br><br>The dwelling for Reda's frog was the Heliopea Tower staircase at ArcanumTech. Every day, beginning at the base step (stair number 0), the frog possessed the capability to leap to any subsequent <var>K</var> stairs (where <var>i</var>+<var>j</var> &le; <var>N</var> and 1 &le; <var>j</var> &le; <var>K</var>, <var>i</var> being the current stair and <var>j</var> being the number of stairs the frog jumps, assuming the frog was on stair <var>i</var>). It repeated this sequence of leaps until reaching the <var>N</var>'th stair.<br><br>Would you kindly aid Reda in determining the count of ways his frog could reach the <var>N</var>'th stair? As the count might be substantial, the output should be provided modulo <const>10^9+7</const>.<br><br>In this context, different sequences of jumps are considered distinct ways.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\">2 space-separated integers <var>N</var> and <var>K</var> as described above.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">A single integer, the number of different ways to reach the <var>N</var>'th stair (modulo <const>10^9+7</const>).</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">1 &le; <var>N</var> &le; 10^9<br> 1 &le; <var>K</var> &le; 20<br><var>K</var> &le; <var>N</var></div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">3 2</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">3</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 64651307289,
  "avatar": 83356081906950,
  "commentCount": 16,
  "upVotes": 3,
  "downVotes": 1,
  "validateAction": {
    "actionId": 912574,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1706077691646,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}