{
  "id": 7650,
  "activeVersion": 7,
  "score": 18,
  "votableId": 20848596,
  "codingamerId": 2600046,
  "views": 350,
  "commentableId": 20743091,
  "title": "We're going in circles!",
  "status": "ACCEPTED",
  "type": "PUZZLE_INOUT",
  "nickname": "BartholomewIII",
  "publicHandle": "76505b834d60f17d3912b0dbf49530a14215",
  "codingamerHandle": "f79768b08c7bfbb9330415d287c7f0236400062",
  "lastVersion": {
    "version": 7,
    "autocloseTime": 1639799593862,
    "data": {
      "title": "We're going in circles!",
      "topics": [
        {
          "id": 150,
          "handle": "graph-traversal",
          "category": "INTERMEDIATE",
          "labelMap": {
            "1": "graph traversal",
            "2": "graph traversal"
          },
          "puzzleCount": 5,
          "parentTopicId": 93
        }
      ],
      "solution": "w, h = [int(i) for i in input().split()]\ngrid = \"\".join(input() for _ in range(h))\n\nindices = {i for i in range(w*h) if grid[i] != \".\"}\ndeltas = {\n    \"^\": -w,\n    \">\": 1,\n    \"v\": w,\n    \"<\": -1,\n}\nloop_count = 0\n\nwhile indices:\n    index = indices.pop()\n    visited = {index}\n    cell = grid[index]\n    delta = deltas[cell]\n\n    while True:\n        index += delta\n        \n        # Crossed grid edge\n        if (index < 0 or index >= w*h\n                or (index%w == 0 and delta == 1)\n                or (index%w == w-1 and delta == -1)):\n            break\n\n        # We just looped!\n        if index in visited:\n            loop_count += 1\n            break\n        \n        cell = grid[index]\n        if cell == \".\":\n            continue\n\n        # (Possibly) change direction and keep track of the new arrow\n        delta = deltas[cell]\n        visited.add(index)\n\n        # We've been here before...\n        # This arrow leads to a loop we already counted or to the grid edge\n        if index not in indices:\n            break\n        else:\n            indices.remove(index)\n\nprint(loop_count)\n",
      "statement": "There is a [[w]] by [[h]] grid of arrows represented by: \"{{^}}\", \"{{>}}\", \"{{v}}\", \"{{<}}\". Empty cells are represented by periods: \"{{.}}\".\n\nA <<loop of arrows>> is a set of arrows that loop back on themselves when moving from one arrow to the <<closest>> arrow in the direction that it points. If an arrow points outside the grid, it is not part of a loop.\n\nThe goal is to count the [[number_of_loops]] in the grid.",
      "testCases": [
        {
          "title": "A simple loop",
          "isTest": true,
          "testIn": "5 4\n>.>.v\n....v\n....v\n^<<<<",
          "testOut": "1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "A simple loop validator",
          "isTest": false,
          "testIn": "4 4\n.v<.\nv<^<\n>v>^\n.>^.",
          "testOut": "1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Not a loop",
          "isTest": true,
          "testIn": "5 3\nv...<\n.....\n>.v.^",
          "testOut": "0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Not a loop validator",
          "isTest": false,
          "testIn": "5 3\n>...v\n.....\n^.v.<",
          "testOut": "0",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Still not a loop",
          "isTest": true,
          "testIn": "5 4\nv...<\n.>.v.\n.^^<.\n>.v.^",
          "testOut": "0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Overlapping loops validator",
          "isTest": false,
          "testIn": "5 5\n>v.>.\n.>v^<\n..>v.\n...>^\n^^^^^",
          "testOut": "0",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Overlapping loops",
          "isTest": true,
          "testIn": "9 5\n.v..<....\n>..v...>v\n......v.<\n.>..^.>^.\n^..<.....",
          "testOut": "3",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Overlapping loops validator",
          "isTest": false,
          "testIn": "7 7\n..>...v\n.>...v.\n>...v..\n.......\n.^..<..\n..^..<.\n^.....<",
          "testOut": "1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Mad face >.<",
          "isTest": true,
          "testIn": "5 3\nv>.<v\n.>.<.\n^>.<^",
          "testOut": "5",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Mad face >.< validator",
          "isTest": false,
          "testIn": "5 5\n.vvv.\n>...<\n>...<\n>...<\n.^^^.",
          "testOut": "6",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Wall of text",
          "isTest": true,
          "testIn": "5 5\n>>>>>\n>>>>>\n>>>>>\n>>>>>\n>>>>>",
          "testOut": "0",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Wall of text validator",
          "isTest": false,
          "testIn": "10 10\n..........\n..........\n..........\n..........\n..........\n..........\n..........\n..........\n..........\n..........",
          "testOut": "0",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Multiple inputs",
          "isTest": true,
          "testIn": "8 8\n<<<<<<<^\nv......^\nv.vvv<.^\nv.>>v<.^\nv.>^<<.^\nv.>^^^.^\nv......^\nv>>>>>>>",
          "testOut": "1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Multiple inputs validator",
          "isTest": false,
          "testIn": "10 5\n<v...<...^\n..<.v.>.>.\n..vv<^<.<>\n...>>^v.^^\n.>......^.",
          "testOut": "1",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "Gobbledygook",
          "isTest": true,
          "testIn": "20 20\n....................\n^>..v...v.......<.>.\n........<..>..v.....\nv.....^......v..^...\n.^.........^.^><....\n>..v....<...........\n.v....<.^.v.v....<..\n<.>.^...^....^v.....\n...><.^..........^^.\n.>^v........^....^..\n.v.......v.<>v.^....\n^.vvvvvvvvvvv......v\n..>>>>>><<<<<....<..\n...>.>....>.^....^..\n..........<.^.......\n..^.....v...<...>.<.\n.>.......^......v...\n.........>...>......\n...^.......<..<.....\n.^......<..<....>.^.",
          "testOut": "7",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "Gobbledygook validator",
          "isTest": false,
          "testIn": "20 20\n.v.^...vv..>>>>v.<^.\n<.<.<<^....^<<<<.^..\n.>.^....v^^<<.v^<^..\n<<<.v...v^.^^....v>.\n<>^^<<<.v.<^^>v.....\n.>>^..>>>v.>^>.v...v\n^.<<.>^.v.<^.vv...v.\n<<^^.v^v>..^^v.v.v..\n<.v^..^..v.^...<v<<<\n^^>^vv^>..>.vv>>.>>^\n.^v.vv^<<<^.<>..>v.v\n.^<<.>>.v<...^^..>v>\n..^..^v.<..v.^.vv...\n.>.>v.>>v..<v...v^>^\n.^<.<<..<>>.>..>>^..\n.<>..v<^vv>^.^..^<<.\nvv<..>>.v>..v^<<^<^.\n<<.<>>v>vv..<...^^..\nvv..>>v.vv^>>vv>^>..\n<<^.^..vv.^..v.>^<>^",
          "testOut": "4",
          "isValidator": true,
          "needValidation": true
        },
        {
          "title": "More goobledygook",
          "isTest": true,
          "testIn": "20 20\n.<<...<..<<<.>.....^\n..v.v........^..^..^\n.............^<.<.>^\n^...v..>..^..^...>v.\n^.v.v>..>...^..v.v..\n..v.<^.<.<....v<<..v\n..v....^........^...\n...<.....>.....v^...\n......^>.v<.<..>^.>.\n>>...v^...^v....^..<\n^.v.......^v.....v<.\n.....>.........v..<.\n.....^.....<...<^...\n.......>.....vv...<<\n^..>>..v..v>^<.<....\n..<..>.v^....vv...v.\n...^..^<^<....>^....\n.v<..<^<.......v....\n<.......>>..........\n..v>.>...v<v.....vv.",
          "testOut": "1",
          "isValidator": false,
          "needValidation": true
        },
        {
          "title": "More goobledygook validator",
          "isTest": false,
          "testIn": "20 20\n..^.<<<vv<<.<...^<>v\nv>.>v...<.^..v..^.>>\n.^.<v<<<<.<<>vv<.^.^\nv...<>>.>.v^vv<<<<<^\nv^..<.>^v^.^.v<v>v>.\nv^>.^.^<.^...v^.<.^>\nv.^.^....>.>v<^..v^^\n>>..^v<<.^..vv.v.>^<\n.....<^<..<<<<..<>>.\n..v.<.>>.>.v.<^<.vv>\n..<.<.^.v>^v<<...<>v\n..>>v.^.....<^^.....\n.<..v^^.vv...>..>.v>\n^v^<<>^<v.v.<>>.^>v<\n<.^v<^.>v<vv.>>>>.v.\nv>^<>.v.<.v<.^..<.v.\n<^...v<<..<<.>^.^.<<\n<^v.<v>>>>.^^<<<v...\n.^vv^v<.v<v^v.^.>v..\n<...^<vvv>v^....<v..",
          "testOut": "3",
          "isValidator": true,
          "needValidation": true
        }
      ],
      "difficulty": "medium",
      "constraints": "0 < [[w]], [[h]] <= 20\nThe grid only contains the characters: {{^>v<.}}",
      "stubGenerator": "read w:int h:int\nloop h read row:word(w)\nwrite number_of_loops",
      "inputDescription": "<<line 1>>: [[w]] and [[h]] separated by a space (width and height, respectively).\n<<The next [[h]] lines>>: The grid of arrows and empty cells.",
      "solutionLanguage": "Python3",
      "outputDescription": "The [[number_of_loops]] in the grid."
    },
    "draft": false,
    "readyForModeration": true,
    "statementHTML": "<div class=\"statement-body\">\n<div class=\"statement-section statement-goal\">\n   <h2><span class=\"icon icon-goal\">&nbsp;</span><span>Goal </span></h2>\n   <span class=\"question-statement\">There is a <var>w</var> by <var>h</var> grid of arrows represented by: &quot;<const>^</const>&quot;, &quot;<const>&gt;</const>&quot;, &quot;<const>v</const>&quot;, &quot;<const>&lt;</const>&quot;. Empty cells are represented by periods: &quot;<const>.</const>&quot;.<br><br>A <strong>loop of arrows</strong> is a set of arrows that loop back on themselves when moving from one arrow to the <strong>closest</strong> arrow in the direction that it points. If an arrow points outside the grid, it is not part of a loop.<br><br>The goal is to count the <var>number_of_loops</var> in the grid.</span>\n</div>\n<div class=\"statement-section statement-protocol\">\n   <div class=\"blk\">\n      <div class=\"title\">Input</div>\n      <div class=\"question-statement-input\"><strong>line 1</strong>: <var>w</var> and <var>h</var> separated by a space (width and height, respectively).<br><strong>The next <var>h</var> lines</strong>: The grid of arrows and empty cells.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Output</div>\n      <div class=\"question-statement-output\">The <var>number_of_loops</var> in the grid.</div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Constraints</div>\n      <div class=\"question-statement-constraints\">0 &lt; <var>w</var>, <var>h</var> &lt;= 20<br>The grid only contains the characters: <const>^&gt;v&lt;.</const></div>\n   </div>\n   <div class=\"blk\">\n      <div class=\"title\">Example</div>\n      <div class=\"statement-inout\">\n         <div class=\"statement-inout-in\">\n            <div class=\"title\">Input</div>\n            <pre class=\"question-statement-example-in\">5 4\n&gt;.&gt;.v\n....v\n....v\n^&lt;&lt;&lt;&lt;</pre>\n         </div>\n         <div class=\"statement-inout-out\">\n            <div class=\"title\">Output</div>\n            <pre class=\"question-statement-example-out\">1</pre>\n         </div>\n      </div>\n   </div>\n</div>"
  },
  "validatedFor": 131761313129,
  "avatar": 74186780592778,
  "commentCount": 11,
  "upVotes": 19,
  "downVotes": 1,
  "validateAction": {
    "actionId": 613005,
    "progress": 1,
    "alreadyDone": false
  },
  "statusHistory": [
    {
      "status": "ACCEPTED",
      "date": 1638968902593,
      "data": {
        "author": "ACTION"
      }
    }
  ],
  "editable": true,
  "draft": false,
  "readyForModeration": true
}